function nS(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const l=Object.getOwnPropertyDescriptor(r,i);l&&Object.defineProperty(n,i,l.get?l:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function Lb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jf={exports:{}},Fl={},Yf={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx;function rS(){if(kx)return lt;kx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator;function N(B){return B===null||typeof B!="object"?null:(B=b&&B[b]||B["@@iterator"],typeof B=="function"?B:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,k={};function P(B,Z,ee){this.props=B,this.context=Z,this.refs=k,this.updater=ee||E}P.prototype.isReactComponent={},P.prototype.setState=function(B,Z){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Z,"setState")},P.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function $(){}$.prototype=P.prototype;function q(B,Z,ee){this.props=B,this.context=Z,this.refs=k,this.updater=ee||E}var J=q.prototype=new $;J.constructor=q,j(J,P.prototype),J.isPureReactComponent=!0;var se=Array.isArray,he=Object.prototype.hasOwnProperty,K={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function A(B,Z,ee){var de,Ie={},H=null,fe=null;if(Z!=null)for(de in Z.ref!==void 0&&(fe=Z.ref),Z.key!==void 0&&(H=""+Z.key),Z)he.call(Z,de)&&!F.hasOwnProperty(de)&&(Ie[de]=Z[de]);var Ze=arguments.length-2;if(Ze===1)Ie.children=ee;else if(1<Ze){for(var Ye=Array(Ze),et=0;et<Ze;et++)Ye[et]=arguments[et+2];Ie.children=Ye}if(B&&B.defaultProps)for(de in Ze=B.defaultProps,Ze)Ie[de]===void 0&&(Ie[de]=Ze[de]);return{$$typeof:n,type:B,key:H,ref:fe,props:Ie,_owner:K.current}}function L(B,Z){return{$$typeof:n,type:B.type,key:Z,ref:B.ref,props:B.props,_owner:B._owner}}function V(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function T(B){var Z={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ee){return Z[ee]})}var O=/\/+/g;function D(B,Z){return typeof B=="object"&&B!==null&&B.key!=null?T(""+B.key):Z.toString(36)}function ve(B,Z,ee,de,Ie){var H=typeof B;(H==="undefined"||H==="boolean")&&(B=null);var fe=!1;if(B===null)fe=!0;else switch(H){case"string":case"number":fe=!0;break;case"object":switch(B.$$typeof){case n:case e:fe=!0}}if(fe)return fe=B,Ie=Ie(fe),B=de===""?"."+D(fe,0):de,se(Ie)?(ee="",B!=null&&(ee=B.replace(O,"$&/")+"/"),ve(Ie,Z,ee,"",function(et){return et})):Ie!=null&&(V(Ie)&&(Ie=L(Ie,ee+(!Ie.key||fe&&fe.key===Ie.key?"":(""+Ie.key).replace(O,"$&/")+"/")+B)),Z.push(Ie)),1;if(fe=0,de=de===""?".":de+":",se(B))for(var Ze=0;Ze<B.length;Ze++){H=B[Ze];var Ye=de+D(H,Ze);fe+=ve(H,Z,ee,Ye,Ie)}else if(Ye=N(B),typeof Ye=="function")for(B=Ye.call(B),Ze=0;!(H=B.next()).done;)H=H.value,Ye=de+D(H,Ze++),fe+=ve(H,Z,ee,Ye,Ie);else if(H==="object")throw Z=String(B),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return fe}function Ue(B,Z,ee){if(B==null)return B;var de=[],Ie=0;return ve(B,de,"","",function(H){return Z.call(ee,H,Ie++)}),de}function ke(B){if(B._status===-1){var Z=B._result;Z=Z(),Z.then(function(ee){(B._status===0||B._status===-1)&&(B._status=1,B._result=ee)},function(ee){(B._status===0||B._status===-1)&&(B._status=2,B._result=ee)}),B._status===-1&&(B._status=0,B._result=Z)}if(B._status===1)return B._result.default;throw B._result}var je={current:null},z={transition:null},we={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:z,ReactCurrentOwner:K};function W(){throw Error("act(...) is not supported in production builds of React.")}return lt.Children={map:Ue,forEach:function(B,Z,ee){Ue(B,function(){Z.apply(this,arguments)},ee)},count:function(B){var Z=0;return Ue(B,function(){Z++}),Z},toArray:function(B){return Ue(B,function(Z){return Z})||[]},only:function(B){if(!V(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},lt.Component=P,lt.Fragment=t,lt.Profiler=i,lt.PureComponent=q,lt.StrictMode=r,lt.Suspense=p,lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,lt.act=W,lt.cloneElement=function(B,Z,ee){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var de=j({},B.props),Ie=B.key,H=B.ref,fe=B._owner;if(Z!=null){if(Z.ref!==void 0&&(H=Z.ref,fe=K.current),Z.key!==void 0&&(Ie=""+Z.key),B.type&&B.type.defaultProps)var Ze=B.type.defaultProps;for(Ye in Z)he.call(Z,Ye)&&!F.hasOwnProperty(Ye)&&(de[Ye]=Z[Ye]===void 0&&Ze!==void 0?Ze[Ye]:Z[Ye])}var Ye=arguments.length-2;if(Ye===1)de.children=ee;else if(1<Ye){Ze=Array(Ye);for(var et=0;et<Ye;et++)Ze[et]=arguments[et+2];de.children=Ze}return{$$typeof:n,type:B.type,key:Ie,ref:H,props:de,_owner:fe}},lt.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:l,_context:B},B.Consumer=B},lt.createElement=A,lt.createFactory=function(B){var Z=A.bind(null,B);return Z.type=B,Z},lt.createRef=function(){return{current:null}},lt.forwardRef=function(B){return{$$typeof:d,render:B}},lt.isValidElement=V,lt.lazy=function(B){return{$$typeof:y,_payload:{_status:-1,_result:B},_init:ke}},lt.memo=function(B,Z){return{$$typeof:f,type:B,compare:Z===void 0?null:Z}},lt.startTransition=function(B){var Z=z.transition;z.transition={};try{B()}finally{z.transition=Z}},lt.unstable_act=W,lt.useCallback=function(B,Z){return je.current.useCallback(B,Z)},lt.useContext=function(B){return je.current.useContext(B)},lt.useDebugValue=function(){},lt.useDeferredValue=function(B){return je.current.useDeferredValue(B)},lt.useEffect=function(B,Z){return je.current.useEffect(B,Z)},lt.useId=function(){return je.current.useId()},lt.useImperativeHandle=function(B,Z,ee){return je.current.useImperativeHandle(B,Z,ee)},lt.useInsertionEffect=function(B,Z){return je.current.useInsertionEffect(B,Z)},lt.useLayoutEffect=function(B,Z){return je.current.useLayoutEffect(B,Z)},lt.useMemo=function(B,Z){return je.current.useMemo(B,Z)},lt.useReducer=function(B,Z,ee){return je.current.useReducer(B,Z,ee)},lt.useRef=function(B){return je.current.useRef(B)},lt.useState=function(B){return je.current.useState(B)},lt.useSyncExternalStore=function(B,Z,ee){return je.current.useSyncExternalStore(B,Z,ee)},lt.useTransition=function(){return je.current.useTransition()},lt.version="18.3.1",lt}var Tx;function im(){return Tx||(Tx=1,Yf.exports=rS()),Yf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Px;function sS(){if(Px)return Fl;Px=1;var n=im(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,f){var y,b={},N=null,E=null;f!==void 0&&(N=""+f),p.key!==void 0&&(N=""+p.key),p.ref!==void 0&&(E=p.ref);for(y in p)r.call(p,y)&&!l.hasOwnProperty(y)&&(b[y]=p[y]);if(d&&d.defaultProps)for(y in p=d.defaultProps,p)b[y]===void 0&&(b[y]=p[y]);return{$$typeof:e,type:d,key:N,ref:E,props:b,_owner:i.current}}return Fl.Fragment=t,Fl.jsx=c,Fl.jsxs=c,Fl}var jx;function iS(){return jx||(jx=1,Jf.exports=sS()),Jf.exports}var s=iS(),I=im();const Vb=Lb(I),oS=nS({__proto__:null,default:Vb},[I]);var Gu={},Qf={exports:{}},fr={},Xf={exports:{}},Zf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix;function aS(){return Ix||(Ix=1,(function(n){function e(z,we){var W=z.length;z.push(we);e:for(;0<W;){var B=W-1>>>1,Z=z[B];if(0<i(Z,we))z[B]=we,z[W]=Z,W=B;else break e}}function t(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var we=z[0],W=z.pop();if(W!==we){z[0]=W;e:for(var B=0,Z=z.length,ee=Z>>>1;B<ee;){var de=2*(B+1)-1,Ie=z[de],H=de+1,fe=z[H];if(0>i(Ie,W))H<Z&&0>i(fe,Ie)?(z[B]=fe,z[H]=W,B=H):(z[B]=Ie,z[de]=W,B=de);else if(H<Z&&0>i(fe,W))z[B]=fe,z[H]=W,B=H;else break e}}return we}function i(z,we){var W=z.sortIndex-we.sortIndex;return W!==0?W:z.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],f=[],y=1,b=null,N=3,E=!1,j=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function J(z){for(var we=t(f);we!==null;){if(we.callback===null)r(f);else if(we.startTime<=z)r(f),we.sortIndex=we.expirationTime,e(p,we);else break;we=t(f)}}function se(z){if(k=!1,J(z),!j)if(t(p)!==null)j=!0,ke(he);else{var we=t(f);we!==null&&je(se,we.startTime-z)}}function he(z,we){j=!1,k&&(k=!1,$(A),A=-1),E=!0;var W=N;try{for(J(we),b=t(p);b!==null&&(!(b.expirationTime>we)||z&&!T());){var B=b.callback;if(typeof B=="function"){b.callback=null,N=b.priorityLevel;var Z=B(b.expirationTime<=we);we=n.unstable_now(),typeof Z=="function"?b.callback=Z:b===t(p)&&r(p),J(we)}else r(p);b=t(p)}if(b!==null)var ee=!0;else{var de=t(f);de!==null&&je(se,de.startTime-we),ee=!1}return ee}finally{b=null,N=W,E=!1}}var K=!1,F=null,A=-1,L=5,V=-1;function T(){return!(n.unstable_now()-V<L)}function O(){if(F!==null){var z=n.unstable_now();V=z;var we=!0;try{we=F(!0,z)}finally{we?D():(K=!1,F=null)}}else K=!1}var D;if(typeof q=="function")D=function(){q(O)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Ue=ve.port2;ve.port1.onmessage=O,D=function(){Ue.postMessage(null)}}else D=function(){P(O,0)};function ke(z){F=z,K||(K=!0,D())}function je(z,we){A=P(function(){z(n.unstable_now())},we)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(z){z.callback=null},n.unstable_continueExecution=function(){j||E||(j=!0,ke(he))},n.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<z?Math.floor(1e3/z):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(z){switch(N){case 1:case 2:case 3:var we=3;break;default:we=N}var W=N;N=we;try{return z()}finally{N=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(z,we){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var W=N;N=z;try{return we()}finally{N=W}},n.unstable_scheduleCallback=function(z,we,W){var B=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?B+W:B):W=B,z){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=W+Z,z={id:y++,callback:we,priorityLevel:z,startTime:W,expirationTime:Z,sortIndex:-1},W>B?(z.sortIndex=W,e(f,z),t(p)===null&&z===t(f)&&(k?($(A),A=-1):k=!0,je(se,W-B))):(z.sortIndex=Z,e(p,z),j||E||(j=!0,ke(he))),z},n.unstable_shouldYield=T,n.unstable_wrapCallback=function(z){var we=N;return function(){var W=N;N=we;try{return z.apply(this,arguments)}finally{N=W}}}})(Zf)),Zf}var Ax;function lS(){return Ax||(Ax=1,Xf.exports=aS()),Xf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rx;function cS(){if(Rx)return fr;Rx=1;var n=im(),e=lS();function t(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function l(o,a){c(o,a),c(o+"Capture",a)}function c(o,a){for(i[o]=a,o=0;o<a.length;o++)r.add(a[o])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},b={};function N(o){return p.call(b,o)?!0:p.call(y,o)?!1:f.test(o)?b[o]=!0:(y[o]=!0,!1)}function E(o,a,u,m){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function j(o,a,u,m){if(a===null||typeof a>"u"||E(o,a,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function k(o,a,u,m,v,_,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=o,this.type=a,this.sanitizeURL=_,this.removeEmptyString=C}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){P[o]=new k(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0];P[a]=new k(a,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){P[o]=new k(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){P[o]=new k(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){P[o]=new k(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){P[o]=new k(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){P[o]=new k(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){P[o]=new k(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){P[o]=new k(o,5,!1,o.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function q(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var a=o.replace($,q);P[a]=new k(a,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var a=o.replace($,q);P[a]=new k(a,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace($,q);P[a]=new k(a,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){P[o]=new k(o,1,!1,o.toLowerCase(),null,!1,!1)}),P.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){P[o]=new k(o,1,!1,o.toLowerCase(),null,!0,!0)});function J(o,a,u,m){var v=P.hasOwnProperty(a)?P[a]:null;(v!==null?v.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(j(a,u,v,m)&&(u=null),m||v===null?N(a)&&(u===null?o.removeAttribute(a):o.setAttribute(a,""+u)):v.mustUseProperty?o[v.propertyName]=u===null?v.type===3?!1:"":u:(a=v.attributeName,m=v.attributeNamespace,u===null?o.removeAttribute(a):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,m?o.setAttributeNS(m,a,u):o.setAttribute(a,u))))}var se=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,he=Symbol.for("react.element"),K=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),T=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),z=Symbol.iterator;function we(o){return o===null||typeof o!="object"?null:(o=z&&o[z]||o["@@iterator"],typeof o=="function"?o:null)}var W=Object.assign,B;function Z(o){if(B===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);B=a&&a[1]||""}return`
`+B+o}var ee=!1;function de(o,a){if(!o||ee)return"";ee=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(oe){var m=oe}Reflect.construct(o,[],a)}else{try{a.call()}catch(oe){m=oe}o.call(a.prototype)}else{try{throw Error()}catch(oe){m=oe}o()}}catch(oe){if(oe&&m&&typeof oe.stack=="string"){for(var v=oe.stack.split(`
`),_=m.stack.split(`
`),C=v.length-1,U=_.length-1;1<=C&&0<=U&&v[C]!==_[U];)U--;for(;1<=C&&0<=U;C--,U--)if(v[C]!==_[U]){if(C!==1||U!==1)do if(C--,U--,0>U||v[C]!==_[U]){var G=`
`+v[C].replace(" at new "," at ");return o.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",o.displayName)),G}while(1<=C&&0<=U);break}}}finally{ee=!1,Error.prepareStackTrace=u}return(o=o?o.displayName||o.name:"")?Z(o):""}function Ie(o){switch(o.tag){case 5:return Z(o.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return o=de(o.type,!1),o;case 11:return o=de(o.type.render,!1),o;case 1:return o=de(o.type,!0),o;default:return""}}function H(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case F:return"Fragment";case K:return"Portal";case L:return"Profiler";case A:return"StrictMode";case D:return"Suspense";case ve:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case T:return(o.displayName||"Context")+".Consumer";case V:return(o._context.displayName||"Context")+".Provider";case O:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ue:return a=o.displayName||null,a!==null?a:H(o.type)||"Memo";case ke:a=o._payload,o=o._init;try{return H(o(a))}catch{}}return null}function fe(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=a.render,o=o.displayName||o.name||"",a.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(a);case 8:return a===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ze(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ye(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function et(o){var a=Ye(o)?"checked":"value",u=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),m=""+o[a];if(!o.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,_=u.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return v.call(this)},set:function(C){m=""+C,_.call(this,C)}}),Object.defineProperty(o,a,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(C){m=""+C},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function Tt(o){o._valueTracker||(o._valueTracker=et(o))}function Ct(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var u=a.getValue(),m="";return o&&(m=Ye(o)?o.checked?"true":"false":o.value),o=m,o!==u?(a.setValue(o),!0):!1}function ct(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Te(o,a){var u=a.checked;return W({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??o._wrapperState.initialChecked})}function ut(o,a){var u=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;u=Ze(a.value!=null?a.value:u),o._wrapperState={initialChecked:m,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Lt(o,a){a=a.checked,a!=null&&J(o,"checked",a,!1)}function Vt(o,a){Lt(o,a);var u=Ze(a.value),m=a.type;if(u!=null)m==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+u):o.value!==""+u&&(o.value=""+u);else if(m==="submit"||m==="reset"){o.removeAttribute("value");return}a.hasOwnProperty("value")?qt(o,a.type,u):a.hasOwnProperty("defaultValue")&&qt(o,a.type,Ze(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(o.defaultChecked=!!a.defaultChecked)}function _n(o,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+o._wrapperState.initialValue,u||a===o.value||(o.value=a),o.defaultValue=a}u=o.name,u!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,u!==""&&(o.name=u)}function qt(o,a,u){(a!=="number"||ct(o.ownerDocument)!==o)&&(u==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+u&&(o.defaultValue=""+u))}var Ce=Array.isArray;function Jt(o,a,u,m){if(o=o.options,a){a={};for(var v=0;v<u.length;v++)a["$"+u[v]]=!0;for(u=0;u<o.length;u++)v=a.hasOwnProperty("$"+o[u].value),o[u].selected!==v&&(o[u].selected=v),v&&m&&(o[u].defaultSelected=!0)}else{for(u=""+Ze(u),a=null,v=0;v<o.length;v++){if(o[v].value===u){o[v].selected=!0,m&&(o[v].defaultSelected=!0);return}a!==null||o[v].disabled||(a=o[v])}a!==null&&(a.selected=!0)}}function On(o,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},a,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function rr(o,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Ce(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}o._wrapperState={initialValue:Ze(u)}}function xr(o,a){var u=Ze(a.value),m=Ze(a.defaultValue);u!=null&&(u=""+u,u!==o.value&&(o.value=u),a.defaultValue==null&&o.defaultValue!==u&&(o.defaultValue=u)),m!=null&&(o.defaultValue=""+m)}function Nn(o){var a=o.textContent;a===o._wrapperState.initialValue&&a!==""&&a!==null&&(o.value=a)}function Pt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ot(o,a){return o==null||o==="http://www.w3.org/1999/xhtml"?Pt(a):o==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var fn,sr=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,m,v){MSApp.execUnsafeLocalFunction(function(){return o(a,u,m,v)})}:o})(function(o,a){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=a;else{for(fn=fn||document.createElement("div"),fn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=fn.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;a.firstChild;)o.appendChild(a.firstChild)}});function Yn(o,a){if(a){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=a;return}}o.textContent=a}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ge=["Webkit","ms","Moz","O"];Object.keys(me).forEach(function(o){Ge.forEach(function(a){a=a+o.charAt(0).toUpperCase()+o.substring(1),me[a]=me[o]})});function jt(o,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||me.hasOwnProperty(o)&&me[o]?(""+a).trim():a+"px"}function pn(o,a){o=o.style;for(var u in a)if(a.hasOwnProperty(u)){var m=u.indexOf("--")===0,v=jt(u,a[u],m);u==="float"&&(u="cssFloat"),m?o.setProperty(u,v):o[u]=v}}var Pn=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ds(o,a){if(a){if(Pn[o]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Ls(o,a){if(o.indexOf("-")===-1)return typeof a.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ar=null;function ps(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Hr=null,Fn=null,Qn=null;function ms(o){if(o=Sl(o)){if(typeof Hr!="function")throw Error(t(280));var a=o.stateNode;a&&(a=au(a),Hr(o.stateNode,o.type,a))}}function ir(o){Fn?Qn?Qn.push(o):Qn=[o]:Fn=o}function Vs(){if(Fn){var o=Fn,a=Qn;if(Qn=Fn=null,ms(o),a)for(o=0;o<a.length;o++)ms(a[o])}}function Gr(o,a){return o(a)}function Wr(){}var yr=!1;function Os(o,a,u){if(yr)return o(a,u);yr=!0;try{return Gr(o,a,u)}finally{yr=!1,(Fn!==null||Qn!==null)&&(Wr(),Vs())}}function X(o,a){var u=o.stateNode;if(u===null)return null;var m=au(u);if(m===null)return null;u=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var Y=!1;if(d)try{var re={};Object.defineProperty(re,"passive",{get:function(){Y=!0}}),window.addEventListener("test",re,re),window.removeEventListener("test",re,re)}catch{Y=!1}function ce(o,a,u,m,v,_,C,U,G){var oe=Array.prototype.slice.call(arguments,3);try{a.apply(u,oe)}catch(ge){this.onError(ge)}}var Ne=!1,We=null,Ke=!1,ht=null,ze={onError:function(o){Ne=!0,We=o}};function Be(o,a,u,m,v,_,C,U,G){Ne=!1,We=null,ce.apply(ze,arguments)}function st(o,a,u,m,v,_,C,U,G){if(Be.apply(this,arguments),Ne){if(Ne){var oe=We;Ne=!1,We=null}else throw Error(t(198));Ke||(Ke=!0,ht=oe)}}function it(o){var a=o,u=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,(a.flags&4098)!==0&&(u=a.return),o=a.return;while(o)}return a.tag===3?u:null}function Nt(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function rn(o){if(it(o)!==o)throw Error(t(188))}function Rr(o){var a=o.alternate;if(!a){if(a=it(o),a===null)throw Error(t(188));return a!==o?null:o}for(var u=o,m=a;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(m=v.return,m!==null){u=m;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return rn(v),o;if(_===m)return rn(v),a;_=_.sibling}throw Error(t(188))}if(u.return!==m.return)u=v,m=_;else{for(var C=!1,U=v.child;U;){if(U===u){C=!0,u=v,m=_;break}if(U===m){C=!0,m=v,u=_;break}U=U.sibling}if(!C){for(U=_.child;U;){if(U===u){C=!0,u=_,m=v;break}if(U===m){C=!0,m=_,u=v;break}U=U.sibling}if(!C)throw Error(t(189))}}if(u.alternate!==m)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?o:a}function vr(o){return o=Rr(o),o!==null?M(o):null}function M(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var a=M(o);if(a!==null)return a;o=o.sibling}return null}var le=e.unstable_scheduleCallback,Oe=e.unstable_cancelCallback,ft=e.unstable_shouldYield,at=e.unstable_requestPaint,ot=e.unstable_now,It=e.unstable_getCurrentPriorityLevel,mn=e.unstable_ImmediatePriority,Fs=e.unstable_UserBlockingPriority,Mr=e.unstable_NormalPriority,al=e.unstable_LowPriority,Lc=e.unstable_IdlePriority,ho=null,br=null;function Vc(o){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(ho,o,void 0,(o.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:Fc,ll=Math.log,Oc=Math.LN2;function Fc(o){return o>>>=0,o===0?32:31-(ll(o)/Oc|0)|0}var Qo=64,Xo=4194304;function gi(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function fo(o,a){var u=o.pendingLanes;if(u===0)return 0;var m=0,v=o.suspendedLanes,_=o.pingedLanes,C=u&268435455;if(C!==0){var U=C&~v;U!==0?m=gi(U):(_&=C,_!==0&&(m=gi(_)))}else C=u&~v,C!==0?m=gi(C):_!==0&&(m=gi(_));if(m===0)return 0;if(a!==0&&a!==m&&(a&v)===0&&(v=m&-m,_=a&-a,v>=_||v===16&&(_&4194240)!==0))return a;if((m&4)!==0&&(m|=u&16),a=o.entangledLanes,a!==0)for(o=o.entanglements,a&=m;0<a;)u=31-Xn(a),v=1<<u,m|=o[u],a&=~v;return m}function Sh(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zs(o,a){for(var u=o.suspendedLanes,m=o.pingedLanes,v=o.expirationTimes,_=o.pendingLanes;0<_;){var C=31-Xn(_),U=1<<C,G=v[C];G===-1?((U&u)===0||(U&m)!==0)&&(v[C]=Sh(U,a)):G<=a&&(o.expiredLanes|=U),_&=~U}}function wr(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function po(){var o=Qo;return Qo<<=1,(Qo&4194240)===0&&(Qo=64),o}function xi(o){for(var a=[],u=0;31>u;u++)a.push(o);return a}function yi(o,a,u){o.pendingLanes|=a,a!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,a=31-Xn(a),o[a]=u}function kt(o,a){var u=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var m=o.eventTimes;for(o=o.expirationTimes;0<u;){var v=31-Xn(u),_=1<<v;a[v]=0,m[v]=-1,o[v]=-1,u&=~_}}function vi(o,a){var u=o.entangledLanes|=a;for(o=o.entanglements;u;){var m=31-Xn(u),v=1<<m;v&a|o[m]&a&&(o[m]|=a),u&=~v}}var pt=0;function bi(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var zc,Zo,Uc,Bc,qc,cl=!1,gs=[],jn=null,Kr=null,Jr=null,wi=new Map,Dr=new Map,xs=[],Eh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $c(o,a){switch(o){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":wi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dr.delete(a.pointerId)}}function or(o,a,u,m,v,_){return o===null||o.nativeEvent!==_?(o={blockedOn:a,domEventName:u,eventSystemFlags:m,nativeEvent:_,targetContainers:[v]},a!==null&&(a=Sl(a),a!==null&&Zo(a)),o):(o.eventSystemFlags|=m,a=o.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),o)}function Ch(o,a,u,m,v){switch(a){case"focusin":return jn=or(jn,o,a,u,m,v),!0;case"dragenter":return Kr=or(Kr,o,a,u,m,v),!0;case"mouseover":return Jr=or(Jr,o,a,u,m,v),!0;case"pointerover":var _=v.pointerId;return wi.set(_,or(wi.get(_)||null,o,a,u,m,v)),!0;case"gotpointercapture":return _=v.pointerId,Dr.set(_,or(Dr.get(_)||null,o,a,u,m,v)),!0}return!1}function Hc(o){var a=vo(o.target);if(a!==null){var u=it(a);if(u!==null){if(a=u.tag,a===13){if(a=Nt(u),a!==null){o.blockedOn=a,qc(o.priority,function(){Uc(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Us(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var u=ea(o.domEventName,o.eventSystemFlags,a[0],o.nativeEvent);if(u===null){u=o.nativeEvent;var m=new u.constructor(u.type,u);Ar=m,u.target.dispatchEvent(m),Ar=null}else return a=Sl(u),a!==null&&Zo(a),o.blockedOn=u,!1;a.shift()}return!0}function mo(o,a,u){Us(o)&&u.delete(a)}function Gc(){cl=!1,jn!==null&&Us(jn)&&(jn=null),Kr!==null&&Us(Kr)&&(Kr=null),Jr!==null&&Us(Jr)&&(Jr=null),wi.forEach(mo),Dr.forEach(mo)}function Yr(o,a){o.blockedOn===a&&(o.blockedOn=null,cl||(cl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gc)))}function Qr(o){function a(v){return Yr(v,o)}if(0<gs.length){Yr(gs[0],o);for(var u=1;u<gs.length;u++){var m=gs[u];m.blockedOn===o&&(m.blockedOn=null)}}for(jn!==null&&Yr(jn,o),Kr!==null&&Yr(Kr,o),Jr!==null&&Yr(Jr,o),wi.forEach(a),Dr.forEach(a),u=0;u<xs.length;u++)m=xs[u],m.blockedOn===o&&(m.blockedOn=null);for(;0<xs.length&&(u=xs[0],u.blockedOn===null);)Hc(u),u.blockedOn===null&&xs.shift()}var Bs=se.ReactCurrentBatchConfig,_i=!0;function $t(o,a,u,m){var v=pt,_=Bs.transition;Bs.transition=null;try{pt=1,ul(o,a,u,m)}finally{pt=v,Bs.transition=_}}function kh(o,a,u,m){var v=pt,_=Bs.transition;Bs.transition=null;try{pt=4,ul(o,a,u,m)}finally{pt=v,Bs.transition=_}}function ul(o,a,u,m){if(_i){var v=ea(o,a,u,m);if(v===null)Oh(o,a,m,go,u),$c(o,m);else if(Ch(v,o,a,u,m))m.stopPropagation();else if($c(o,m),a&4&&-1<Eh.indexOf(o)){for(;v!==null;){var _=Sl(v);if(_!==null&&zc(_),_=ea(o,a,u,m),_===null&&Oh(o,a,m,go,u),_===v)break;v=_}v!==null&&m.stopPropagation()}else Oh(o,a,m,null,u)}}var go=null;function ea(o,a,u,m){if(go=null,o=ps(m),o=vo(o),o!==null)if(a=it(o),a===null)o=null;else if(u=a.tag,u===13){if(o=Nt(a),o!==null)return o;o=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null);return go=o,null}function dl(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(It()){case mn:return 1;case Fs:return 4;case Mr:case al:return 16;case Lc:return 536870912;default:return 16}default:return 16}}var _r=null,ta=null,ar=null;function hl(){if(ar)return ar;var o,a=ta,u=a.length,m,v="value"in _r?_r.value:_r.textContent,_=v.length;for(o=0;o<u&&a[o]===v[o];o++);var C=u-o;for(m=1;m<=C&&a[u-m]===v[_-m];m++);return ar=v.slice(o,1<m?1-m:void 0)}function na(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function ys(){return!0}function fl(){return!1}function In(o){function a(u,m,v,_,C){this._reactName=u,this._targetInst=v,this.type=m,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var U in o)o.hasOwnProperty(U)&&(u=o[U],this[U]=u?u(_):_[U]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ys:fl,this.isPropagationStopped=fl,this}return W(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),a}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=In(Xr),vs=W({},Xr,{view:0,detail:0}),Th=In(vs),sa,qs,Ni,xo=W({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bs,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ni&&(Ni&&o.type==="mousemove"?(sa=o.screenX-Ni.screenX,qs=o.screenY-Ni.screenY):qs=sa=0,Ni=o),sa)},movementY:function(o){return"movementY"in o?o.movementY:qs}}),ia=In(xo),pl=W({},xo,{dataTransfer:0}),Wc=In(pl),oa=W({},vs,{relatedTarget:0}),aa=In(oa),Kc=W({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),$s=In(Kc),Jc=W({},Xr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Yc=In(Jc),Qc=W({},Xr,{data:0}),ml=In(Qc),la={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zc(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=Xc[o])?!!a[o]:!1}function bs(){return Zc}var h=W({},vs,{key:function(o){if(o.key){var a=la[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=na(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Zn[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bs,charCode:function(o){return o.type==="keypress"?na(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?na(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),w=In(h),S=W({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R=In(S),te=W({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bs}),ae=In(te),Se=W({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),St=In(Se),gn=W({},xo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),xt=In(gn),Sn=[9,13,27,32],ln=d&&"CompositionEvent"in window,Lr=null;d&&"documentMode"in document&&(Lr=document.documentMode);var Nr=d&&"TextEvent"in window&&!Lr,yo=d&&(!ln||Lr&&8<Lr&&11>=Lr),ca=" ",wg=!1;function _g(o,a){switch(o){case"keyup":return Sn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ng(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ua=!1;function ZN(o,a){switch(o){case"compositionend":return Ng(a);case"keypress":return a.which!==32?null:(wg=!0,ca);case"textInput":return o=a.data,o===ca&&wg?null:o;default:return null}}function e1(o,a){if(ua)return o==="compositionend"||!ln&&_g(o,a)?(o=hl(),ar=ta=_r=null,ua=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return yo&&a.locale!=="ko"?null:a.data;default:return null}}var t1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sg(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!t1[o.type]:a==="textarea"}function Eg(o,a,u,m){ir(m),a=su(a,"onChange"),0<a.length&&(u=new ra("onChange","change",null,u,m),o.push({event:u,listeners:a}))}var gl=null,xl=null;function n1(o){qg(o,0)}function eu(o){var a=ma(o);if(Ct(a))return o}function r1(o,a){if(o==="change")return a}var Cg=!1;if(d){var Ph;if(d){var jh="oninput"in document;if(!jh){var kg=document.createElement("div");kg.setAttribute("oninput","return;"),jh=typeof kg.oninput=="function"}Ph=jh}else Ph=!1;Cg=Ph&&(!document.documentMode||9<document.documentMode)}function Tg(){gl&&(gl.detachEvent("onpropertychange",Pg),xl=gl=null)}function Pg(o){if(o.propertyName==="value"&&eu(xl)){var a=[];Eg(a,xl,o,ps(o)),Os(n1,a)}}function s1(o,a,u){o==="focusin"?(Tg(),gl=a,xl=u,gl.attachEvent("onpropertychange",Pg)):o==="focusout"&&Tg()}function i1(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return eu(xl)}function o1(o,a){if(o==="click")return eu(a)}function a1(o,a){if(o==="input"||o==="change")return eu(a)}function l1(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var Zr=typeof Object.is=="function"?Object.is:l1;function yl(o,a){if(Zr(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var u=Object.keys(o),m=Object.keys(a);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var v=u[m];if(!p.call(a,v)||!Zr(o[v],a[v]))return!1}return!0}function jg(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ig(o,a){var u=jg(o);o=0;for(var m;u;){if(u.nodeType===3){if(m=o+u.textContent.length,o<=a&&m>=a)return{node:u,offset:a-o};o=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=jg(u)}}function Ag(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?Ag(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function Rg(){for(var o=window,a=ct();a instanceof o.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)o=a.contentWindow;else break;a=ct(o.document)}return a}function Ih(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}function c1(o){var a=Rg(),u=o.focusedElem,m=o.selectionRange;if(a!==u&&u&&u.ownerDocument&&Ag(u.ownerDocument.documentElement,u)){if(m!==null&&Ih(u)){if(a=m.start,o=m.end,o===void 0&&(o=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(o,u.value.length);else if(o=(a=u.ownerDocument||document)&&a.defaultView||window,o.getSelection){o=o.getSelection();var v=u.textContent.length,_=Math.min(m.start,v);m=m.end===void 0?_:Math.min(m.end,v),!o.extend&&_>m&&(v=m,m=_,_=v),v=Ig(u,_);var C=Ig(u,m);v&&C&&(o.rangeCount!==1||o.anchorNode!==v.node||o.anchorOffset!==v.offset||o.focusNode!==C.node||o.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(v.node,v.offset),o.removeAllRanges(),_>m?(o.addRange(a),o.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),o.addRange(a)))}}for(a=[],o=u;o=o.parentNode;)o.nodeType===1&&a.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)o=a[u],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var u1=d&&"documentMode"in document&&11>=document.documentMode,da=null,Ah=null,vl=null,Rh=!1;function Mg(o,a,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Rh||da==null||da!==ct(m)||(m=da,"selectionStart"in m&&Ih(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),vl&&yl(vl,m)||(vl=m,m=su(Ah,"onSelect"),0<m.length&&(a=new ra("onSelect","select",null,a,u),o.push({event:a,listeners:m}),a.target=da)))}function tu(o,a){var u={};return u[o.toLowerCase()]=a.toLowerCase(),u["Webkit"+o]="webkit"+a,u["Moz"+o]="moz"+a,u}var ha={animationend:tu("Animation","AnimationEnd"),animationiteration:tu("Animation","AnimationIteration"),animationstart:tu("Animation","AnimationStart"),transitionend:tu("Transition","TransitionEnd")},Mh={},Dg={};d&&(Dg=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function nu(o){if(Mh[o])return Mh[o];if(!ha[o])return o;var a=ha[o],u;for(u in a)if(a.hasOwnProperty(u)&&u in Dg)return Mh[o]=a[u];return o}var Lg=nu("animationend"),Vg=nu("animationiteration"),Og=nu("animationstart"),Fg=nu("transitionend"),zg=new Map,Ug="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(o,a){zg.set(o,a),l(a,[o])}for(var Dh=0;Dh<Ug.length;Dh++){var Lh=Ug[Dh],d1=Lh.toLowerCase(),h1=Lh[0].toUpperCase()+Lh.slice(1);Si(d1,"on"+h1)}Si(Lg,"onAnimationEnd"),Si(Vg,"onAnimationIteration"),Si(Og,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(Fg,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f1=new Set("cancel close invalid load scroll toggle".split(" ").concat(bl));function Bg(o,a,u){var m=o.type||"unknown-event";o.currentTarget=u,st(m,a,void 0,o),o.currentTarget=null}function qg(o,a){a=(a&4)!==0;for(var u=0;u<o.length;u++){var m=o[u],v=m.event;m=m.listeners;e:{var _=void 0;if(a)for(var C=m.length-1;0<=C;C--){var U=m[C],G=U.instance,oe=U.currentTarget;if(U=U.listener,G!==_&&v.isPropagationStopped())break e;Bg(v,U,oe),_=G}else for(C=0;C<m.length;C++){if(U=m[C],G=U.instance,oe=U.currentTarget,U=U.listener,G!==_&&v.isPropagationStopped())break e;Bg(v,U,oe),_=G}}}if(Ke)throw o=ht,Ke=!1,ht=null,o}function Ft(o,a){var u=a[$h];u===void 0&&(u=a[$h]=new Set);var m=o+"__bubble";u.has(m)||($g(a,o,2,!1),u.add(m))}function Vh(o,a,u){var m=0;a&&(m|=4),$g(u,o,m,a)}var ru="_reactListening"+Math.random().toString(36).slice(2);function wl(o){if(!o[ru]){o[ru]=!0,r.forEach(function(u){u!=="selectionchange"&&(f1.has(u)||Vh(u,!1,o),Vh(u,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[ru]||(a[ru]=!0,Vh("selectionchange",!1,a))}}function $g(o,a,u,m){switch(dl(a)){case 1:var v=$t;break;case 4:v=kh;break;default:v=ul}u=v.bind(null,a,u,o),v=void 0,!Y||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),m?v!==void 0?o.addEventListener(a,u,{capture:!0,passive:v}):o.addEventListener(a,u,!0):v!==void 0?o.addEventListener(a,u,{passive:v}):o.addEventListener(a,u,!1)}function Oh(o,a,u,m,v){var _=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var U=m.stateNode.containerInfo;if(U===v||U.nodeType===8&&U.parentNode===v)break;if(C===4)for(C=m.return;C!==null;){var G=C.tag;if((G===3||G===4)&&(G=C.stateNode.containerInfo,G===v||G.nodeType===8&&G.parentNode===v))return;C=C.return}for(;U!==null;){if(C=vo(U),C===null)return;if(G=C.tag,G===5||G===6){m=_=C;continue e}U=U.parentNode}}m=m.return}Os(function(){var oe=_,ge=ps(u),be=[];e:{var pe=zg.get(o);if(pe!==void 0){var Pe=ra,De=o;switch(o){case"keypress":if(na(u)===0)break e;case"keydown":case"keyup":Pe=w;break;case"focusin":De="focus",Pe=aa;break;case"focusout":De="blur",Pe=aa;break;case"beforeblur":case"afterblur":Pe=aa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=ia;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=ae;break;case Lg:case Vg:case Og:Pe=$s;break;case Fg:Pe=St;break;case"scroll":Pe=Th;break;case"wheel":Pe=xt;break;case"copy":case"cut":case"paste":Pe=Yc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=R}var Le=(a&4)!==0,sn=!Le&&o==="scroll",ne=Le?pe!==null?pe+"Capture":null:pe;Le=[];for(var Q=oe,ie;Q!==null;){ie=Q;var _e=ie.stateNode;if(ie.tag===5&&_e!==null&&(ie=_e,ne!==null&&(_e=X(Q,ne),_e!=null&&Le.push(_l(Q,_e,ie)))),sn)break;Q=Q.return}0<Le.length&&(pe=new Pe(pe,De,null,u,ge),be.push({event:pe,listeners:Le}))}}if((a&7)===0){e:{if(pe=o==="mouseover"||o==="pointerover",Pe=o==="mouseout"||o==="pointerout",pe&&u!==Ar&&(De=u.relatedTarget||u.fromElement)&&(vo(De)||De[Hs]))break e;if((Pe||pe)&&(pe=ge.window===ge?ge:(pe=ge.ownerDocument)?pe.defaultView||pe.parentWindow:window,Pe?(De=u.relatedTarget||u.toElement,Pe=oe,De=De?vo(De):null,De!==null&&(sn=it(De),De!==sn||De.tag!==5&&De.tag!==6)&&(De=null)):(Pe=null,De=oe),Pe!==De)){if(Le=ia,_e="onMouseLeave",ne="onMouseEnter",Q="mouse",(o==="pointerout"||o==="pointerover")&&(Le=R,_e="onPointerLeave",ne="onPointerEnter",Q="pointer"),sn=Pe==null?pe:ma(Pe),ie=De==null?pe:ma(De),pe=new Le(_e,Q+"leave",Pe,u,ge),pe.target=sn,pe.relatedTarget=ie,_e=null,vo(ge)===oe&&(Le=new Le(ne,Q+"enter",De,u,ge),Le.target=ie,Le.relatedTarget=sn,_e=Le),sn=_e,Pe&&De)t:{for(Le=Pe,ne=De,Q=0,ie=Le;ie;ie=fa(ie))Q++;for(ie=0,_e=ne;_e;_e=fa(_e))ie++;for(;0<Q-ie;)Le=fa(Le),Q--;for(;0<ie-Q;)ne=fa(ne),ie--;for(;Q--;){if(Le===ne||ne!==null&&Le===ne.alternate)break t;Le=fa(Le),ne=fa(ne)}Le=null}else Le=null;Pe!==null&&Hg(be,pe,Pe,Le,!1),De!==null&&sn!==null&&Hg(be,sn,De,Le,!0)}}e:{if(pe=oe?ma(oe):window,Pe=pe.nodeName&&pe.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&pe.type==="file")var Fe=r1;else if(Sg(pe))if(Cg)Fe=a1;else{Fe=i1;var $e=s1}else(Pe=pe.nodeName)&&Pe.toLowerCase()==="input"&&(pe.type==="checkbox"||pe.type==="radio")&&(Fe=o1);if(Fe&&(Fe=Fe(o,oe))){Eg(be,Fe,u,ge);break e}$e&&$e(o,pe,oe),o==="focusout"&&($e=pe._wrapperState)&&$e.controlled&&pe.type==="number"&&qt(pe,"number",pe.value)}switch($e=oe?ma(oe):window,o){case"focusin":(Sg($e)||$e.contentEditable==="true")&&(da=$e,Ah=oe,vl=null);break;case"focusout":vl=Ah=da=null;break;case"mousedown":Rh=!0;break;case"contextmenu":case"mouseup":case"dragend":Rh=!1,Mg(be,u,ge);break;case"selectionchange":if(u1)break;case"keydown":case"keyup":Mg(be,u,ge)}var He;if(ln)e:{switch(o){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else ua?_g(o,u)&&(Qe="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(Qe="onCompositionStart");Qe&&(yo&&u.locale!=="ko"&&(ua||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&ua&&(He=hl()):(_r=ge,ta="value"in _r?_r.value:_r.textContent,ua=!0)),$e=su(oe,Qe),0<$e.length&&(Qe=new ml(Qe,o,null,u,ge),be.push({event:Qe,listeners:$e}),He?Qe.data=He:(He=Ng(u),He!==null&&(Qe.data=He)))),(He=Nr?ZN(o,u):e1(o,u))&&(oe=su(oe,"onBeforeInput"),0<oe.length&&(ge=new ml("onBeforeInput","beforeinput",null,u,ge),be.push({event:ge,listeners:oe}),ge.data=He))}qg(be,a)})}function _l(o,a,u){return{instance:o,listener:a,currentTarget:u}}function su(o,a){for(var u=a+"Capture",m=[];o!==null;){var v=o,_=v.stateNode;v.tag===5&&_!==null&&(v=_,_=X(o,u),_!=null&&m.unshift(_l(o,_,v)),_=X(o,a),_!=null&&m.push(_l(o,_,v))),o=o.return}return m}function fa(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Hg(o,a,u,m,v){for(var _=a._reactName,C=[];u!==null&&u!==m;){var U=u,G=U.alternate,oe=U.stateNode;if(G!==null&&G===m)break;U.tag===5&&oe!==null&&(U=oe,v?(G=X(u,_),G!=null&&C.unshift(_l(u,G,U))):v||(G=X(u,_),G!=null&&C.push(_l(u,G,U)))),u=u.return}C.length!==0&&o.push({event:a,listeners:C})}var p1=/\r\n?/g,m1=/\u0000|\uFFFD/g;function Gg(o){return(typeof o=="string"?o:""+o).replace(p1,`
`).replace(m1,"")}function iu(o,a,u){if(a=Gg(a),Gg(o)!==a&&u)throw Error(t(425))}function ou(){}var Fh=null,zh=null;function Uh(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Bh=typeof setTimeout=="function"?setTimeout:void 0,g1=typeof clearTimeout=="function"?clearTimeout:void 0,Wg=typeof Promise=="function"?Promise:void 0,x1=typeof queueMicrotask=="function"?queueMicrotask:typeof Wg<"u"?function(o){return Wg.resolve(null).then(o).catch(y1)}:Bh;function y1(o){setTimeout(function(){throw o})}function qh(o,a){var u=a,m=0;do{var v=u.nextSibling;if(o.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(m===0){o.removeChild(v),Qr(a);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=v}while(u);Qr(a)}function Ei(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return o}function Kg(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return o;a--}else u==="/$"&&a++}o=o.previousSibling}return null}var pa=Math.random().toString(36).slice(2),ws="__reactFiber$"+pa,Nl="__reactProps$"+pa,Hs="__reactContainer$"+pa,$h="__reactEvents$"+pa,v1="__reactListeners$"+pa,b1="__reactHandles$"+pa;function vo(o){var a=o[ws];if(a)return a;for(var u=o.parentNode;u;){if(a=u[Hs]||u[ws]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(o=Kg(o);o!==null;){if(u=o[ws])return u;o=Kg(o)}return a}o=u,u=o.parentNode}return null}function Sl(o){return o=o[ws]||o[Hs],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ma(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function au(o){return o[Nl]||null}var Hh=[],ga=-1;function Ci(o){return{current:o}}function zt(o){0>ga||(o.current=Hh[ga],Hh[ga]=null,ga--)}function At(o,a){ga++,Hh[ga]=o.current,o.current=a}var ki={},zn=Ci(ki),lr=Ci(!1),bo=ki;function xa(o,a){var u=o.type.contextTypes;if(!u)return ki;var m=o.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var v={},_;for(_ in u)v[_]=a[_];return m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=v),v}function cr(o){return o=o.childContextTypes,o!=null}function lu(){zt(lr),zt(zn)}function Jg(o,a,u){if(zn.current!==ki)throw Error(t(168));At(zn,a),At(lr,u)}function Yg(o,a,u){var m=o.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var v in m)if(!(v in a))throw Error(t(108,fe(o)||"Unknown",v));return W({},u,m)}function cu(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ki,bo=zn.current,At(zn,o),At(lr,lr.current),!0}function Qg(o,a,u){var m=o.stateNode;if(!m)throw Error(t(169));u?(o=Yg(o,a,bo),m.__reactInternalMemoizedMergedChildContext=o,zt(lr),zt(zn),At(zn,o)):zt(lr),At(lr,u)}var Gs=null,uu=!1,Gh=!1;function Xg(o){Gs===null?Gs=[o]:Gs.push(o)}function w1(o){uu=!0,Xg(o)}function Ti(){if(!Gh&&Gs!==null){Gh=!0;var o=0,a=pt;try{var u=Gs;for(pt=1;o<u.length;o++){var m=u[o];do m=m(!0);while(m!==null)}Gs=null,uu=!1}catch(v){throw Gs!==null&&(Gs=Gs.slice(o+1)),le(mn,Ti),v}finally{pt=a,Gh=!1}}return null}var ya=[],va=0,du=null,hu=0,Vr=[],Or=0,wo=null,Ws=1,Ks="";function _o(o,a){ya[va++]=hu,ya[va++]=du,du=o,hu=a}function Zg(o,a,u){Vr[Or++]=Ws,Vr[Or++]=Ks,Vr[Or++]=wo,wo=o;var m=Ws;o=Ks;var v=32-Xn(m)-1;m&=~(1<<v),u+=1;var _=32-Xn(a)+v;if(30<_){var C=v-v%5;_=(m&(1<<C)-1).toString(32),m>>=C,v-=C,Ws=1<<32-Xn(a)+v|u<<v|m,Ks=_+o}else Ws=1<<_|u<<v|m,Ks=o}function Wh(o){o.return!==null&&(_o(o,1),Zg(o,1,0))}function Kh(o){for(;o===du;)du=ya[--va],ya[va]=null,hu=ya[--va],ya[va]=null;for(;o===wo;)wo=Vr[--Or],Vr[Or]=null,Ks=Vr[--Or],Vr[Or]=null,Ws=Vr[--Or],Vr[Or]=null}var Sr=null,Er=null,Ht=!1,es=null;function e0(o,a){var u=Br(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=o,a=o.deletions,a===null?(o.deletions=[u],o.flags|=16):a.push(u)}function t0(o,a){switch(o.tag){case 5:var u=o.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(o.stateNode=a,Sr=o,Er=Ei(a.firstChild),!0):!1;case 6:return a=o.pendingProps===""||a.nodeType!==3?null:a,a!==null?(o.stateNode=a,Sr=o,Er=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=wo!==null?{id:Ws,overflow:Ks}:null,o.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Br(18,null,null,0),u.stateNode=a,u.return=o,o.child=u,Sr=o,Er=null,!0):!1;default:return!1}}function Jh(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Yh(o){if(Ht){var a=Er;if(a){var u=a;if(!t0(o,a)){if(Jh(o))throw Error(t(418));a=Ei(u.nextSibling);var m=Sr;a&&t0(o,a)?e0(m,u):(o.flags=o.flags&-4097|2,Ht=!1,Sr=o)}}else{if(Jh(o))throw Error(t(418));o.flags=o.flags&-4097|2,Ht=!1,Sr=o}}}function n0(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Sr=o}function fu(o){if(o!==Sr)return!1;if(!Ht)return n0(o),Ht=!0,!1;var a;if((a=o.tag!==3)&&!(a=o.tag!==5)&&(a=o.type,a=a!=="head"&&a!=="body"&&!Uh(o.type,o.memoizedProps)),a&&(a=Er)){if(Jh(o))throw r0(),Error(t(418));for(;a;)e0(o,a),a=Ei(a.nextSibling)}if(n0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,a=0;o;){if(o.nodeType===8){var u=o.data;if(u==="/$"){if(a===0){Er=Ei(o.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}o=o.nextSibling}Er=null}}else Er=Sr?Ei(o.stateNode.nextSibling):null;return!0}function r0(){for(var o=Er;o;)o=Ei(o.nextSibling)}function ba(){Er=Sr=null,Ht=!1}function Qh(o){es===null?es=[o]:es.push(o)}var _1=se.ReactCurrentBatchConfig;function El(o,a,u){if(o=u.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var m=u.stateNode}if(!m)throw Error(t(147,o));var v=m,_=""+o;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(C){var U=v.refs;C===null?delete U[_]:U[_]=C},a._stringRef=_,a)}if(typeof o!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,o))}return o}function pu(o,a){throw o=Object.prototype.toString.call(a),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function s0(o){var a=o._init;return a(o._payload)}function i0(o){function a(ne,Q){if(o){var ie=ne.deletions;ie===null?(ne.deletions=[Q],ne.flags|=16):ie.push(Q)}}function u(ne,Q){if(!o)return null;for(;Q!==null;)a(ne,Q),Q=Q.sibling;return null}function m(ne,Q){for(ne=new Map;Q!==null;)Q.key!==null?ne.set(Q.key,Q):ne.set(Q.index,Q),Q=Q.sibling;return ne}function v(ne,Q){return ne=Li(ne,Q),ne.index=0,ne.sibling=null,ne}function _(ne,Q,ie){return ne.index=ie,o?(ie=ne.alternate,ie!==null?(ie=ie.index,ie<Q?(ne.flags|=2,Q):ie):(ne.flags|=2,Q)):(ne.flags|=1048576,Q)}function C(ne){return o&&ne.alternate===null&&(ne.flags|=2),ne}function U(ne,Q,ie,_e){return Q===null||Q.tag!==6?(Q=qf(ie,ne.mode,_e),Q.return=ne,Q):(Q=v(Q,ie),Q.return=ne,Q)}function G(ne,Q,ie,_e){var Fe=ie.type;return Fe===F?ge(ne,Q,ie.props.children,_e,ie.key):Q!==null&&(Q.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===ke&&s0(Fe)===Q.type)?(_e=v(Q,ie.props),_e.ref=El(ne,Q,ie),_e.return=ne,_e):(_e=Ou(ie.type,ie.key,ie.props,null,ne.mode,_e),_e.ref=El(ne,Q,ie),_e.return=ne,_e)}function oe(ne,Q,ie,_e){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ie.containerInfo||Q.stateNode.implementation!==ie.implementation?(Q=$f(ie,ne.mode,_e),Q.return=ne,Q):(Q=v(Q,ie.children||[]),Q.return=ne,Q)}function ge(ne,Q,ie,_e,Fe){return Q===null||Q.tag!==7?(Q=jo(ie,ne.mode,_e,Fe),Q.return=ne,Q):(Q=v(Q,ie),Q.return=ne,Q)}function be(ne,Q,ie){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=qf(""+Q,ne.mode,ie),Q.return=ne,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case he:return ie=Ou(Q.type,Q.key,Q.props,null,ne.mode,ie),ie.ref=El(ne,null,Q),ie.return=ne,ie;case K:return Q=$f(Q,ne.mode,ie),Q.return=ne,Q;case ke:var _e=Q._init;return be(ne,_e(Q._payload),ie)}if(Ce(Q)||we(Q))return Q=jo(Q,ne.mode,ie,null),Q.return=ne,Q;pu(ne,Q)}return null}function pe(ne,Q,ie,_e){var Fe=Q!==null?Q.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number")return Fe!==null?null:U(ne,Q,""+ie,_e);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case he:return ie.key===Fe?G(ne,Q,ie,_e):null;case K:return ie.key===Fe?oe(ne,Q,ie,_e):null;case ke:return Fe=ie._init,pe(ne,Q,Fe(ie._payload),_e)}if(Ce(ie)||we(ie))return Fe!==null?null:ge(ne,Q,ie,_e,null);pu(ne,ie)}return null}function Pe(ne,Q,ie,_e,Fe){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return ne=ne.get(ie)||null,U(Q,ne,""+_e,Fe);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case he:return ne=ne.get(_e.key===null?ie:_e.key)||null,G(Q,ne,_e,Fe);case K:return ne=ne.get(_e.key===null?ie:_e.key)||null,oe(Q,ne,_e,Fe);case ke:var $e=_e._init;return Pe(ne,Q,ie,$e(_e._payload),Fe)}if(Ce(_e)||we(_e))return ne=ne.get(ie)||null,ge(Q,ne,_e,Fe,null);pu(Q,_e)}return null}function De(ne,Q,ie,_e){for(var Fe=null,$e=null,He=Q,Qe=Q=0,kn=null;He!==null&&Qe<ie.length;Qe++){He.index>Qe?(kn=He,He=null):kn=He.sibling;var wt=pe(ne,He,ie[Qe],_e);if(wt===null){He===null&&(He=kn);break}o&&He&&wt.alternate===null&&a(ne,He),Q=_(wt,Q,Qe),$e===null?Fe=wt:$e.sibling=wt,$e=wt,He=kn}if(Qe===ie.length)return u(ne,He),Ht&&_o(ne,Qe),Fe;if(He===null){for(;Qe<ie.length;Qe++)He=be(ne,ie[Qe],_e),He!==null&&(Q=_(He,Q,Qe),$e===null?Fe=He:$e.sibling=He,$e=He);return Ht&&_o(ne,Qe),Fe}for(He=m(ne,He);Qe<ie.length;Qe++)kn=Pe(He,ne,Qe,ie[Qe],_e),kn!==null&&(o&&kn.alternate!==null&&He.delete(kn.key===null?Qe:kn.key),Q=_(kn,Q,Qe),$e===null?Fe=kn:$e.sibling=kn,$e=kn);return o&&He.forEach(function(Vi){return a(ne,Vi)}),Ht&&_o(ne,Qe),Fe}function Le(ne,Q,ie,_e){var Fe=we(ie);if(typeof Fe!="function")throw Error(t(150));if(ie=Fe.call(ie),ie==null)throw Error(t(151));for(var $e=Fe=null,He=Q,Qe=Q=0,kn=null,wt=ie.next();He!==null&&!wt.done;Qe++,wt=ie.next()){He.index>Qe?(kn=He,He=null):kn=He.sibling;var Vi=pe(ne,He,wt.value,_e);if(Vi===null){He===null&&(He=kn);break}o&&He&&Vi.alternate===null&&a(ne,He),Q=_(Vi,Q,Qe),$e===null?Fe=Vi:$e.sibling=Vi,$e=Vi,He=kn}if(wt.done)return u(ne,He),Ht&&_o(ne,Qe),Fe;if(He===null){for(;!wt.done;Qe++,wt=ie.next())wt=be(ne,wt.value,_e),wt!==null&&(Q=_(wt,Q,Qe),$e===null?Fe=wt:$e.sibling=wt,$e=wt);return Ht&&_o(ne,Qe),Fe}for(He=m(ne,He);!wt.done;Qe++,wt=ie.next())wt=Pe(He,ne,Qe,wt.value,_e),wt!==null&&(o&&wt.alternate!==null&&He.delete(wt.key===null?Qe:wt.key),Q=_(wt,Q,Qe),$e===null?Fe=wt:$e.sibling=wt,$e=wt);return o&&He.forEach(function(tS){return a(ne,tS)}),Ht&&_o(ne,Qe),Fe}function sn(ne,Q,ie,_e){if(typeof ie=="object"&&ie!==null&&ie.type===F&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case he:e:{for(var Fe=ie.key,$e=Q;$e!==null;){if($e.key===Fe){if(Fe=ie.type,Fe===F){if($e.tag===7){u(ne,$e.sibling),Q=v($e,ie.props.children),Q.return=ne,ne=Q;break e}}else if($e.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===ke&&s0(Fe)===$e.type){u(ne,$e.sibling),Q=v($e,ie.props),Q.ref=El(ne,$e,ie),Q.return=ne,ne=Q;break e}u(ne,$e);break}else a(ne,$e);$e=$e.sibling}ie.type===F?(Q=jo(ie.props.children,ne.mode,_e,ie.key),Q.return=ne,ne=Q):(_e=Ou(ie.type,ie.key,ie.props,null,ne.mode,_e),_e.ref=El(ne,Q,ie),_e.return=ne,ne=_e)}return C(ne);case K:e:{for($e=ie.key;Q!==null;){if(Q.key===$e)if(Q.tag===4&&Q.stateNode.containerInfo===ie.containerInfo&&Q.stateNode.implementation===ie.implementation){u(ne,Q.sibling),Q=v(Q,ie.children||[]),Q.return=ne,ne=Q;break e}else{u(ne,Q);break}else a(ne,Q);Q=Q.sibling}Q=$f(ie,ne.mode,_e),Q.return=ne,ne=Q}return C(ne);case ke:return $e=ie._init,sn(ne,Q,$e(ie._payload),_e)}if(Ce(ie))return De(ne,Q,ie,_e);if(we(ie))return Le(ne,Q,ie,_e);pu(ne,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"?(ie=""+ie,Q!==null&&Q.tag===6?(u(ne,Q.sibling),Q=v(Q,ie),Q.return=ne,ne=Q):(u(ne,Q),Q=qf(ie,ne.mode,_e),Q.return=ne,ne=Q),C(ne)):u(ne,Q)}return sn}var wa=i0(!0),o0=i0(!1),mu=Ci(null),gu=null,_a=null,Xh=null;function Zh(){Xh=_a=gu=null}function ef(o){var a=mu.current;zt(mu),o._currentValue=a}function tf(o,a,u){for(;o!==null;){var m=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),o===u)break;o=o.return}}function Na(o,a){gu=o,Xh=_a=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&a)!==0&&(ur=!0),o.firstContext=null)}function Fr(o){var a=o._currentValue;if(Xh!==o)if(o={context:o,memoizedValue:a,next:null},_a===null){if(gu===null)throw Error(t(308));_a=o,gu.dependencies={lanes:0,firstContext:o}}else _a=_a.next=o;return a}var No=null;function nf(o){No===null?No=[o]:No.push(o)}function a0(o,a,u,m){var v=a.interleaved;return v===null?(u.next=u,nf(a)):(u.next=v.next,v.next=u),a.interleaved=u,Js(o,m)}function Js(o,a){o.lanes|=a;var u=o.alternate;for(u!==null&&(u.lanes|=a),u=o,o=o.return;o!==null;)o.childLanes|=a,u=o.alternate,u!==null&&(u.childLanes|=a),u=o,o=o.return;return u.tag===3?u.stateNode:null}var Pi=!1;function rf(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l0(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ys(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function ji(o,a,u){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(vt&2)!==0){var v=m.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),m.pending=a,Js(o,u)}return v=m.interleaved,v===null?(a.next=a,nf(m)):(a.next=v.next,v.next=a),m.interleaved=a,Js(o,u)}function xu(o,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var m=a.lanes;m&=o.pendingLanes,u|=m,a.lanes=u,vi(o,u)}}function c0(o,a){var u=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var C={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?v=_=C:_=_.next=C,u=u.next}while(u!==null);_===null?v=_=a:_=_.next=a}else v=_=a;u={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:m.shared,effects:m.effects},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=a:o.next=a,u.lastBaseUpdate=a}function yu(o,a,u,m){var v=o.updateQueue;Pi=!1;var _=v.firstBaseUpdate,C=v.lastBaseUpdate,U=v.shared.pending;if(U!==null){v.shared.pending=null;var G=U,oe=G.next;G.next=null,C===null?_=oe:C.next=oe,C=G;var ge=o.alternate;ge!==null&&(ge=ge.updateQueue,U=ge.lastBaseUpdate,U!==C&&(U===null?ge.firstBaseUpdate=oe:U.next=oe,ge.lastBaseUpdate=G))}if(_!==null){var be=v.baseState;C=0,ge=oe=G=null,U=_;do{var pe=U.lane,Pe=U.eventTime;if((m&pe)===pe){ge!==null&&(ge=ge.next={eventTime:Pe,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var De=o,Le=U;switch(pe=a,Pe=u,Le.tag){case 1:if(De=Le.payload,typeof De=="function"){be=De.call(Pe,be,pe);break e}be=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Le.payload,pe=typeof De=="function"?De.call(Pe,be,pe):De,pe==null)break e;be=W({},be,pe);break e;case 2:Pi=!0}}U.callback!==null&&U.lane!==0&&(o.flags|=64,pe=v.effects,pe===null?v.effects=[U]:pe.push(U))}else Pe={eventTime:Pe,lane:pe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},ge===null?(oe=ge=Pe,G=be):ge=ge.next=Pe,C|=pe;if(U=U.next,U===null){if(U=v.shared.pending,U===null)break;pe=U,U=pe.next,pe.next=null,v.lastBaseUpdate=pe,v.shared.pending=null}}while(!0);if(ge===null&&(G=be),v.baseState=G,v.firstBaseUpdate=oe,v.lastBaseUpdate=ge,a=v.shared.interleaved,a!==null){v=a;do C|=v.lane,v=v.next;while(v!==a)}else _===null&&(v.shared.lanes=0);Co|=C,o.lanes=C,o.memoizedState=be}}function u0(o,a,u){if(o=a.effects,a.effects=null,o!==null)for(a=0;a<o.length;a++){var m=o[a],v=m.callback;if(v!==null){if(m.callback=null,m=u,typeof v!="function")throw Error(t(191,v));v.call(m)}}}var Cl={},_s=Ci(Cl),kl=Ci(Cl),Tl=Ci(Cl);function So(o){if(o===Cl)throw Error(t(174));return o}function sf(o,a){switch(At(Tl,a),At(kl,o),At(_s,Cl),o=a.nodeType,o){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ot(null,"");break;default:o=o===8?a.parentNode:a,a=o.namespaceURI||null,o=o.tagName,a=Ot(a,o)}zt(_s),At(_s,a)}function Sa(){zt(_s),zt(kl),zt(Tl)}function d0(o){So(Tl.current);var a=So(_s.current),u=Ot(a,o.type);a!==u&&(At(kl,o),At(_s,u))}function of(o){kl.current===o&&(zt(_s),zt(kl))}var Gt=Ci(0);function vu(o){for(var a=o;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var af=[];function lf(){for(var o=0;o<af.length;o++)af[o]._workInProgressVersionPrimary=null;af.length=0}var bu=se.ReactCurrentDispatcher,cf=se.ReactCurrentBatchConfig,Eo=0,Wt=null,xn=null,En=null,wu=!1,Pl=!1,jl=0,N1=0;function Un(){throw Error(t(321))}function uf(o,a){if(a===null)return!1;for(var u=0;u<a.length&&u<o.length;u++)if(!Zr(o[u],a[u]))return!1;return!0}function df(o,a,u,m,v,_){if(Eo=_,Wt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,bu.current=o===null||o.memoizedState===null?k1:T1,o=u(m,v),Pl){_=0;do{if(Pl=!1,jl=0,25<=_)throw Error(t(301));_+=1,En=xn=null,a.updateQueue=null,bu.current=P1,o=u(m,v)}while(Pl)}if(bu.current=Su,a=xn!==null&&xn.next!==null,Eo=0,En=xn=Wt=null,wu=!1,a)throw Error(t(300));return o}function hf(){var o=jl!==0;return jl=0,o}function Ns(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Wt.memoizedState=En=o:En=En.next=o,En}function zr(){if(xn===null){var o=Wt.alternate;o=o!==null?o.memoizedState:null}else o=xn.next;var a=En===null?Wt.memoizedState:En.next;if(a!==null)En=a,xn=o;else{if(o===null)throw Error(t(310));xn=o,o={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},En===null?Wt.memoizedState=En=o:En=En.next=o}return En}function Il(o,a){return typeof a=="function"?a(o):a}function ff(o){var a=zr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var m=xn,v=m.baseQueue,_=u.pending;if(_!==null){if(v!==null){var C=v.next;v.next=_.next,_.next=C}m.baseQueue=v=_,u.pending=null}if(v!==null){_=v.next,m=m.baseState;var U=C=null,G=null,oe=_;do{var ge=oe.lane;if((Eo&ge)===ge)G!==null&&(G=G.next={lane:0,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),m=oe.hasEagerState?oe.eagerState:o(m,oe.action);else{var be={lane:ge,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null};G===null?(U=G=be,C=m):G=G.next=be,Wt.lanes|=ge,Co|=ge}oe=oe.next}while(oe!==null&&oe!==_);G===null?C=m:G.next=U,Zr(m,a.memoizedState)||(ur=!0),a.memoizedState=m,a.baseState=C,a.baseQueue=G,u.lastRenderedState=m}if(o=u.interleaved,o!==null){v=o;do _=v.lane,Wt.lanes|=_,Co|=_,v=v.next;while(v!==o)}else v===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function pf(o){var a=zr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var m=u.dispatch,v=u.pending,_=a.memoizedState;if(v!==null){u.pending=null;var C=v=v.next;do _=o(_,C.action),C=C.next;while(C!==v);Zr(_,a.memoizedState)||(ur=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),u.lastRenderedState=_}return[_,m]}function h0(){}function f0(o,a){var u=Wt,m=zr(),v=a(),_=!Zr(m.memoizedState,v);if(_&&(m.memoizedState=v,ur=!0),m=m.queue,mf(g0.bind(null,u,m,o),[o]),m.getSnapshot!==a||_||En!==null&&En.memoizedState.tag&1){if(u.flags|=2048,Al(9,m0.bind(null,u,m,v,a),void 0,null),Cn===null)throw Error(t(349));(Eo&30)!==0||p0(u,a,v)}return v}function p0(o,a,u){o.flags|=16384,o={getSnapshot:a,value:u},a=Wt.updateQueue,a===null?(a={lastEffect:null,stores:null},Wt.updateQueue=a,a.stores=[o]):(u=a.stores,u===null?a.stores=[o]:u.push(o))}function m0(o,a,u,m){a.value=u,a.getSnapshot=m,x0(a)&&y0(o)}function g0(o,a,u){return u(function(){x0(a)&&y0(o)})}function x0(o){var a=o.getSnapshot;o=o.value;try{var u=a();return!Zr(o,u)}catch{return!0}}function y0(o){var a=Js(o,1);a!==null&&ss(a,o,1,-1)}function v0(o){var a=Ns();return typeof o=="function"&&(o=o()),a.memoizedState=a.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Il,lastRenderedState:o},a.queue=o,o=o.dispatch=C1.bind(null,Wt,o),[a.memoizedState,o]}function Al(o,a,u,m){return o={tag:o,create:a,destroy:u,deps:m,next:null},a=Wt.updateQueue,a===null?(a={lastEffect:null,stores:null},Wt.updateQueue=a,a.lastEffect=o.next=o):(u=a.lastEffect,u===null?a.lastEffect=o.next=o:(m=u.next,u.next=o,o.next=m,a.lastEffect=o)),o}function b0(){return zr().memoizedState}function _u(o,a,u,m){var v=Ns();Wt.flags|=o,v.memoizedState=Al(1|a,u,void 0,m===void 0?null:m)}function Nu(o,a,u,m){var v=zr();m=m===void 0?null:m;var _=void 0;if(xn!==null){var C=xn.memoizedState;if(_=C.destroy,m!==null&&uf(m,C.deps)){v.memoizedState=Al(a,u,_,m);return}}Wt.flags|=o,v.memoizedState=Al(1|a,u,_,m)}function w0(o,a){return _u(8390656,8,o,a)}function mf(o,a){return Nu(2048,8,o,a)}function _0(o,a){return Nu(4,2,o,a)}function N0(o,a){return Nu(4,4,o,a)}function S0(o,a){if(typeof a=="function")return o=o(),a(o),function(){a(null)};if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function E0(o,a,u){return u=u!=null?u.concat([o]):null,Nu(4,4,S0.bind(null,a,o),u)}function gf(){}function C0(o,a){var u=zr();a=a===void 0?null:a;var m=u.memoizedState;return m!==null&&a!==null&&uf(a,m[1])?m[0]:(u.memoizedState=[o,a],o)}function k0(o,a){var u=zr();a=a===void 0?null:a;var m=u.memoizedState;return m!==null&&a!==null&&uf(a,m[1])?m[0]:(o=o(),u.memoizedState=[o,a],o)}function T0(o,a,u){return(Eo&21)===0?(o.baseState&&(o.baseState=!1,ur=!0),o.memoizedState=u):(Zr(u,a)||(u=po(),Wt.lanes|=u,Co|=u,o.baseState=!0),a)}function S1(o,a){var u=pt;pt=u!==0&&4>u?u:4,o(!0);var m=cf.transition;cf.transition={};try{o(!1),a()}finally{pt=u,cf.transition=m}}function P0(){return zr().memoizedState}function E1(o,a,u){var m=Mi(o);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},j0(o))I0(a,u);else if(u=a0(o,a,u,m),u!==null){var v=tr();ss(u,o,m,v),A0(u,a,m)}}function C1(o,a,u){var m=Mi(o),v={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(j0(o))I0(a,v);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var C=a.lastRenderedState,U=_(C,u);if(v.hasEagerState=!0,v.eagerState=U,Zr(U,C)){var G=a.interleaved;G===null?(v.next=v,nf(a)):(v.next=G.next,G.next=v),a.interleaved=v;return}}catch{}finally{}u=a0(o,a,v,m),u!==null&&(v=tr(),ss(u,o,m,v),A0(u,a,m))}}function j0(o){var a=o.alternate;return o===Wt||a!==null&&a===Wt}function I0(o,a){Pl=wu=!0;var u=o.pending;u===null?a.next=a:(a.next=u.next,u.next=a),o.pending=a}function A0(o,a,u){if((u&4194240)!==0){var m=a.lanes;m&=o.pendingLanes,u|=m,a.lanes=u,vi(o,u)}}var Su={readContext:Fr,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useInsertionEffect:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useSyncExternalStore:Un,useId:Un,unstable_isNewReconciler:!1},k1={readContext:Fr,useCallback:function(o,a){return Ns().memoizedState=[o,a===void 0?null:a],o},useContext:Fr,useEffect:w0,useImperativeHandle:function(o,a,u){return u=u!=null?u.concat([o]):null,_u(4194308,4,S0.bind(null,a,o),u)},useLayoutEffect:function(o,a){return _u(4194308,4,o,a)},useInsertionEffect:function(o,a){return _u(4,2,o,a)},useMemo:function(o,a){var u=Ns();return a=a===void 0?null:a,o=o(),u.memoizedState=[o,a],o},useReducer:function(o,a,u){var m=Ns();return a=u!==void 0?u(a):a,m.memoizedState=m.baseState=a,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},m.queue=o,o=o.dispatch=E1.bind(null,Wt,o),[m.memoizedState,o]},useRef:function(o){var a=Ns();return o={current:o},a.memoizedState=o},useState:v0,useDebugValue:gf,useDeferredValue:function(o){return Ns().memoizedState=o},useTransition:function(){var o=v0(!1),a=o[0];return o=S1.bind(null,o[1]),Ns().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,u){var m=Wt,v=Ns();if(Ht){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Cn===null)throw Error(t(349));(Eo&30)!==0||p0(m,a,u)}v.memoizedState=u;var _={value:u,getSnapshot:a};return v.queue=_,w0(g0.bind(null,m,_,o),[o]),m.flags|=2048,Al(9,m0.bind(null,m,_,u,a),void 0,null),u},useId:function(){var o=Ns(),a=Cn.identifierPrefix;if(Ht){var u=Ks,m=Ws;u=(m&~(1<<32-Xn(m)-1)).toString(32)+u,a=":"+a+"R"+u,u=jl++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=N1++,a=":"+a+"r"+u.toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},T1={readContext:Fr,useCallback:C0,useContext:Fr,useEffect:mf,useImperativeHandle:E0,useInsertionEffect:_0,useLayoutEffect:N0,useMemo:k0,useReducer:ff,useRef:b0,useState:function(){return ff(Il)},useDebugValue:gf,useDeferredValue:function(o){var a=zr();return T0(a,xn.memoizedState,o)},useTransition:function(){var o=ff(Il)[0],a=zr().memoizedState;return[o,a]},useMutableSource:h0,useSyncExternalStore:f0,useId:P0,unstable_isNewReconciler:!1},P1={readContext:Fr,useCallback:C0,useContext:Fr,useEffect:mf,useImperativeHandle:E0,useInsertionEffect:_0,useLayoutEffect:N0,useMemo:k0,useReducer:pf,useRef:b0,useState:function(){return pf(Il)},useDebugValue:gf,useDeferredValue:function(o){var a=zr();return xn===null?a.memoizedState=o:T0(a,xn.memoizedState,o)},useTransition:function(){var o=pf(Il)[0],a=zr().memoizedState;return[o,a]},useMutableSource:h0,useSyncExternalStore:f0,useId:P0,unstable_isNewReconciler:!1};function ts(o,a){if(o&&o.defaultProps){a=W({},a),o=o.defaultProps;for(var u in o)a[u]===void 0&&(a[u]=o[u]);return a}return a}function xf(o,a,u,m){a=o.memoizedState,u=u(m,a),u=u==null?a:W({},a,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var Eu={isMounted:function(o){return(o=o._reactInternals)?it(o)===o:!1},enqueueSetState:function(o,a,u){o=o._reactInternals;var m=tr(),v=Mi(o),_=Ys(m,v);_.payload=a,u!=null&&(_.callback=u),a=ji(o,_,v),a!==null&&(ss(a,o,v,m),xu(a,o,v))},enqueueReplaceState:function(o,a,u){o=o._reactInternals;var m=tr(),v=Mi(o),_=Ys(m,v);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=ji(o,_,v),a!==null&&(ss(a,o,v,m),xu(a,o,v))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var u=tr(),m=Mi(o),v=Ys(u,m);v.tag=2,a!=null&&(v.callback=a),a=ji(o,v,m),a!==null&&(ss(a,o,m,u),xu(a,o,m))}};function R0(o,a,u,m,v,_,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,_,C):a.prototype&&a.prototype.isPureReactComponent?!yl(u,m)||!yl(v,_):!0}function M0(o,a,u){var m=!1,v=ki,_=a.contextType;return typeof _=="object"&&_!==null?_=Fr(_):(v=cr(a)?bo:zn.current,m=a.contextTypes,_=(m=m!=null)?xa(o,v):ki),a=new a(u,_),o.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Eu,o.stateNode=a,a._reactInternals=o,m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=v,o.__reactInternalMemoizedMaskedChildContext=_),a}function D0(o,a,u,m){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,m),a.state!==o&&Eu.enqueueReplaceState(a,a.state,null)}function yf(o,a,u,m){var v=o.stateNode;v.props=u,v.state=o.memoizedState,v.refs={},rf(o);var _=a.contextType;typeof _=="object"&&_!==null?v.context=Fr(_):(_=cr(a)?bo:zn.current,v.context=xa(o,_)),v.state=o.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(xf(o,a,_,u),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(a=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),a!==v.state&&Eu.enqueueReplaceState(v,v.state,null),yu(o,u,v,m),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308)}function Ea(o,a){try{var u="",m=a;do u+=Ie(m),m=m.return;while(m);var v=u}catch(_){v=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:a,stack:v,digest:null}}function vf(o,a,u){return{value:o,source:null,stack:u??null,digest:a??null}}function bf(o,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var j1=typeof WeakMap=="function"?WeakMap:Map;function L0(o,a,u){u=Ys(-1,u),u.tag=3,u.payload={element:null};var m=a.value;return u.callback=function(){Au||(Au=!0,Df=m),bf(o,a)},u}function V0(o,a,u){u=Ys(-1,u),u.tag=3;var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var v=a.value;u.payload=function(){return m(v)},u.callback=function(){bf(o,a)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){bf(o,a),typeof m!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),u}function O0(o,a,u){var m=o.pingCache;if(m===null){m=o.pingCache=new j1;var v=new Set;m.set(a,v)}else v=m.get(a),v===void 0&&(v=new Set,m.set(a,v));v.has(u)||(v.add(u),o=$1.bind(null,o,a,u),a.then(o,o))}function F0(o){do{var a;if((a=o.tag===13)&&(a=o.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return o;o=o.return}while(o!==null);return null}function z0(o,a,u,m,v){return(o.mode&1)===0?(o===a?o.flags|=65536:(o.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Ys(-1,1),a.tag=2,ji(u,a,1))),u.lanes|=1),o):(o.flags|=65536,o.lanes=v,o)}var I1=se.ReactCurrentOwner,ur=!1;function er(o,a,u,m){a.child=o===null?o0(a,null,u,m):wa(a,o.child,u,m)}function U0(o,a,u,m,v){u=u.render;var _=a.ref;return Na(a,v),m=df(o,a,u,m,_,v),u=hf(),o!==null&&!ur?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~v,Qs(o,a,v)):(Ht&&u&&Wh(a),a.flags|=1,er(o,a,m,v),a.child)}function B0(o,a,u,m,v){if(o===null){var _=u.type;return typeof _=="function"&&!Bf(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=_,q0(o,a,_,m,v)):(o=Ou(u.type,null,m,a,a.mode,v),o.ref=a.ref,o.return=a,a.child=o)}if(_=o.child,(o.lanes&v)===0){var C=_.memoizedProps;if(u=u.compare,u=u!==null?u:yl,u(C,m)&&o.ref===a.ref)return Qs(o,a,v)}return a.flags|=1,o=Li(_,m),o.ref=a.ref,o.return=a,a.child=o}function q0(o,a,u,m,v){if(o!==null){var _=o.memoizedProps;if(yl(_,m)&&o.ref===a.ref)if(ur=!1,a.pendingProps=m=_,(o.lanes&v)!==0)(o.flags&131072)!==0&&(ur=!0);else return a.lanes=o.lanes,Qs(o,a,v)}return wf(o,a,u,m,v)}function $0(o,a,u){var m=a.pendingProps,v=m.children,_=o!==null?o.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(ka,Cr),Cr|=u;else{if((u&1073741824)===0)return o=_!==null?_.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,At(ka,Cr),Cr|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=_!==null?_.baseLanes:u,At(ka,Cr),Cr|=m}else _!==null?(m=_.baseLanes|u,a.memoizedState=null):m=u,At(ka,Cr),Cr|=m;return er(o,a,v,u),a.child}function H0(o,a){var u=a.ref;(o===null&&u!==null||o!==null&&o.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function wf(o,a,u,m,v){var _=cr(u)?bo:zn.current;return _=xa(a,_),Na(a,v),u=df(o,a,u,m,_,v),m=hf(),o!==null&&!ur?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~v,Qs(o,a,v)):(Ht&&m&&Wh(a),a.flags|=1,er(o,a,u,v),a.child)}function G0(o,a,u,m,v){if(cr(u)){var _=!0;cu(a)}else _=!1;if(Na(a,v),a.stateNode===null)ku(o,a),M0(a,u,m),yf(a,u,m,v),m=!0;else if(o===null){var C=a.stateNode,U=a.memoizedProps;C.props=U;var G=C.context,oe=u.contextType;typeof oe=="object"&&oe!==null?oe=Fr(oe):(oe=cr(u)?bo:zn.current,oe=xa(a,oe));var ge=u.getDerivedStateFromProps,be=typeof ge=="function"||typeof C.getSnapshotBeforeUpdate=="function";be||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(U!==m||G!==oe)&&D0(a,C,m,oe),Pi=!1;var pe=a.memoizedState;C.state=pe,yu(a,m,C,v),G=a.memoizedState,U!==m||pe!==G||lr.current||Pi?(typeof ge=="function"&&(xf(a,u,ge,m),G=a.memoizedState),(U=Pi||R0(a,u,U,m,pe,G,oe))?(be||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=G),C.props=m,C.state=G,C.context=oe,m=U):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{C=a.stateNode,l0(o,a),U=a.memoizedProps,oe=a.type===a.elementType?U:ts(a.type,U),C.props=oe,be=a.pendingProps,pe=C.context,G=u.contextType,typeof G=="object"&&G!==null?G=Fr(G):(G=cr(u)?bo:zn.current,G=xa(a,G));var Pe=u.getDerivedStateFromProps;(ge=typeof Pe=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(U!==be||pe!==G)&&D0(a,C,m,G),Pi=!1,pe=a.memoizedState,C.state=pe,yu(a,m,C,v);var De=a.memoizedState;U!==be||pe!==De||lr.current||Pi?(typeof Pe=="function"&&(xf(a,u,Pe,m),De=a.memoizedState),(oe=Pi||R0(a,u,oe,m,pe,De,G)||!1)?(ge||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(m,De,G),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(m,De,G)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||U===o.memoizedProps&&pe===o.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&pe===o.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=De),C.props=m,C.state=De,C.context=G,m=oe):(typeof C.componentDidUpdate!="function"||U===o.memoizedProps&&pe===o.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&pe===o.memoizedState||(a.flags|=1024),m=!1)}return _f(o,a,u,m,_,v)}function _f(o,a,u,m,v,_){H0(o,a);var C=(a.flags&128)!==0;if(!m&&!C)return v&&Qg(a,u,!1),Qs(o,a,_);m=a.stateNode,I1.current=a;var U=C&&typeof u.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,o!==null&&C?(a.child=wa(a,o.child,null,_),a.child=wa(a,null,U,_)):er(o,a,U,_),a.memoizedState=m.state,v&&Qg(a,u,!0),a.child}function W0(o){var a=o.stateNode;a.pendingContext?Jg(o,a.pendingContext,a.pendingContext!==a.context):a.context&&Jg(o,a.context,!1),sf(o,a.containerInfo)}function K0(o,a,u,m,v){return ba(),Qh(v),a.flags|=256,er(o,a,u,m),a.child}var Nf={dehydrated:null,treeContext:null,retryLane:0};function Sf(o){return{baseLanes:o,cachePool:null,transitions:null}}function J0(o,a,u){var m=a.pendingProps,v=Gt.current,_=!1,C=(a.flags&128)!==0,U;if((U=C)||(U=o!==null&&o.memoizedState===null?!1:(v&2)!==0),U?(_=!0,a.flags&=-129):(o===null||o.memoizedState!==null)&&(v|=1),At(Gt,v&1),o===null)return Yh(a),o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((a.mode&1)===0?a.lanes=1:o.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(C=m.children,o=m.fallback,_?(m=a.mode,_=a.child,C={mode:"hidden",children:C},(m&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=C):_=Fu(C,m,0,null),o=jo(o,m,u,null),_.return=a,o.return=a,_.sibling=o,a.child=_,a.child.memoizedState=Sf(u),a.memoizedState=Nf,o):Ef(a,C));if(v=o.memoizedState,v!==null&&(U=v.dehydrated,U!==null))return A1(o,a,C,m,U,v,u);if(_){_=m.fallback,C=a.mode,v=o.child,U=v.sibling;var G={mode:"hidden",children:m.children};return(C&1)===0&&a.child!==v?(m=a.child,m.childLanes=0,m.pendingProps=G,a.deletions=null):(m=Li(v,G),m.subtreeFlags=v.subtreeFlags&14680064),U!==null?_=Li(U,_):(_=jo(_,C,u,null),_.flags|=2),_.return=a,m.return=a,m.sibling=_,a.child=m,m=_,_=a.child,C=o.child.memoizedState,C=C===null?Sf(u):{baseLanes:C.baseLanes|u,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=o.childLanes&~u,a.memoizedState=Nf,m}return _=o.child,o=_.sibling,m=Li(_,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=u),m.return=a,m.sibling=null,o!==null&&(u=a.deletions,u===null?(a.deletions=[o],a.flags|=16):u.push(o)),a.child=m,a.memoizedState=null,m}function Ef(o,a){return a=Fu({mode:"visible",children:a},o.mode,0,null),a.return=o,o.child=a}function Cu(o,a,u,m){return m!==null&&Qh(m),wa(a,o.child,null,u),o=Ef(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function A1(o,a,u,m,v,_,C){if(u)return a.flags&256?(a.flags&=-257,m=vf(Error(t(422))),Cu(o,a,C,m)):a.memoizedState!==null?(a.child=o.child,a.flags|=128,null):(_=m.fallback,v=a.mode,m=Fu({mode:"visible",children:m.children},v,0,null),_=jo(_,v,C,null),_.flags|=2,m.return=a,_.return=a,m.sibling=_,a.child=m,(a.mode&1)!==0&&wa(a,o.child,null,C),a.child.memoizedState=Sf(C),a.memoizedState=Nf,_);if((a.mode&1)===0)return Cu(o,a,C,null);if(v.data==="$!"){if(m=v.nextSibling&&v.nextSibling.dataset,m)var U=m.dgst;return m=U,_=Error(t(419)),m=vf(_,m,void 0),Cu(o,a,C,m)}if(U=(C&o.childLanes)!==0,ur||U){if(m=Cn,m!==null){switch(C&-C){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(m.suspendedLanes|C))!==0?0:v,v!==0&&v!==_.retryLane&&(_.retryLane=v,Js(o,v),ss(m,o,v,-1))}return Uf(),m=vf(Error(t(421))),Cu(o,a,C,m)}return v.data==="$?"?(a.flags|=128,a.child=o.child,a=H1.bind(null,o),v._reactRetry=a,null):(o=_.treeContext,Er=Ei(v.nextSibling),Sr=a,Ht=!0,es=null,o!==null&&(Vr[Or++]=Ws,Vr[Or++]=Ks,Vr[Or++]=wo,Ws=o.id,Ks=o.overflow,wo=a),a=Ef(a,m.children),a.flags|=4096,a)}function Y0(o,a,u){o.lanes|=a;var m=o.alternate;m!==null&&(m.lanes|=a),tf(o.return,a,u)}function Cf(o,a,u,m,v){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:v}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=m,_.tail=u,_.tailMode=v)}function Q0(o,a,u){var m=a.pendingProps,v=m.revealOrder,_=m.tail;if(er(o,a,m.children,u),m=Gt.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Y0(o,u,a);else if(o.tag===19)Y0(o,u,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}if(At(Gt,m),(a.mode&1)===0)a.memoizedState=null;else switch(v){case"forwards":for(u=a.child,v=null;u!==null;)o=u.alternate,o!==null&&vu(o)===null&&(v=u),u=u.sibling;u=v,u===null?(v=a.child,a.child=null):(v=u.sibling,u.sibling=null),Cf(a,!1,v,u,_);break;case"backwards":for(u=null,v=a.child,a.child=null;v!==null;){if(o=v.alternate,o!==null&&vu(o)===null){a.child=v;break}o=v.sibling,v.sibling=u,u=v,v=o}Cf(a,!0,u,null,_);break;case"together":Cf(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function ku(o,a){(a.mode&1)===0&&o!==null&&(o.alternate=null,a.alternate=null,a.flags|=2)}function Qs(o,a,u){if(o!==null&&(a.dependencies=o.dependencies),Co|=a.lanes,(u&a.childLanes)===0)return null;if(o!==null&&a.child!==o.child)throw Error(t(153));if(a.child!==null){for(o=a.child,u=Li(o,o.pendingProps),a.child=u,u.return=a;o.sibling!==null;)o=o.sibling,u=u.sibling=Li(o,o.pendingProps),u.return=a;u.sibling=null}return a.child}function R1(o,a,u){switch(a.tag){case 3:W0(a),ba();break;case 5:d0(a);break;case 1:cr(a.type)&&cu(a);break;case 4:sf(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,v=a.memoizedProps.value;At(mu,m._currentValue),m._currentValue=v;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(At(Gt,Gt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?J0(o,a,u):(At(Gt,Gt.current&1),o=Qs(o,a,u),o!==null?o.sibling:null);At(Gt,Gt.current&1);break;case 19:if(m=(u&a.childLanes)!==0,(o.flags&128)!==0){if(m)return Q0(o,a,u);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),At(Gt,Gt.current),m)break;return null;case 22:case 23:return a.lanes=0,$0(o,a,u)}return Qs(o,a,u)}var X0,kf,Z0,ex;X0=function(o,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)o.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},kf=function(){},Z0=function(o,a,u,m){var v=o.memoizedProps;if(v!==m){o=a.stateNode,So(_s.current);var _=null;switch(u){case"input":v=Te(o,v),m=Te(o,m),_=[];break;case"select":v=W({},v,{value:void 0}),m=W({},m,{value:void 0}),_=[];break;case"textarea":v=On(o,v),m=On(o,m),_=[];break;default:typeof v.onClick!="function"&&typeof m.onClick=="function"&&(o.onclick=ou)}Ds(u,m);var C;u=null;for(oe in v)if(!m.hasOwnProperty(oe)&&v.hasOwnProperty(oe)&&v[oe]!=null)if(oe==="style"){var U=v[oe];for(C in U)U.hasOwnProperty(C)&&(u||(u={}),u[C]="")}else oe!=="dangerouslySetInnerHTML"&&oe!=="children"&&oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&oe!=="autoFocus"&&(i.hasOwnProperty(oe)?_||(_=[]):(_=_||[]).push(oe,null));for(oe in m){var G=m[oe];if(U=v!=null?v[oe]:void 0,m.hasOwnProperty(oe)&&G!==U&&(G!=null||U!=null))if(oe==="style")if(U){for(C in U)!U.hasOwnProperty(C)||G&&G.hasOwnProperty(C)||(u||(u={}),u[C]="");for(C in G)G.hasOwnProperty(C)&&U[C]!==G[C]&&(u||(u={}),u[C]=G[C])}else u||(_||(_=[]),_.push(oe,u)),u=G;else oe==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,U=U?U.__html:void 0,G!=null&&U!==G&&(_=_||[]).push(oe,G)):oe==="children"?typeof G!="string"&&typeof G!="number"||(_=_||[]).push(oe,""+G):oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&(i.hasOwnProperty(oe)?(G!=null&&oe==="onScroll"&&Ft("scroll",o),_||U===G||(_=[])):(_=_||[]).push(oe,G))}u&&(_=_||[]).push("style",u);var oe=_;(a.updateQueue=oe)&&(a.flags|=4)}},ex=function(o,a,u,m){u!==m&&(a.flags|=4)};function Rl(o,a){if(!Ht)switch(o.tailMode){case"hidden":a=o.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Bn(o){var a=o.alternate!==null&&o.alternate.child===o.child,u=0,m=0;if(a)for(var v=o.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=m,o.childLanes=u,a}function M1(o,a,u){var m=a.pendingProps;switch(Kh(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(a),null;case 1:return cr(a.type)&&lu(),Bn(a),null;case 3:return m=a.stateNode,Sa(),zt(lr),zt(zn),lf(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(fu(a)?a.flags|=4:o===null||o.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,es!==null&&(Of(es),es=null))),kf(o,a),Bn(a),null;case 5:of(a);var v=So(Tl.current);if(u=a.type,o!==null&&a.stateNode!=null)Z0(o,a,u,m,v),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(t(166));return Bn(a),null}if(o=So(_s.current),fu(a)){m=a.stateNode,u=a.type;var _=a.memoizedProps;switch(m[ws]=a,m[Nl]=_,o=(a.mode&1)!==0,u){case"dialog":Ft("cancel",m),Ft("close",m);break;case"iframe":case"object":case"embed":Ft("load",m);break;case"video":case"audio":for(v=0;v<bl.length;v++)Ft(bl[v],m);break;case"source":Ft("error",m);break;case"img":case"image":case"link":Ft("error",m),Ft("load",m);break;case"details":Ft("toggle",m);break;case"input":ut(m,_),Ft("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!_.multiple},Ft("invalid",m);break;case"textarea":rr(m,_),Ft("invalid",m)}Ds(u,_),v=null;for(var C in _)if(_.hasOwnProperty(C)){var U=_[C];C==="children"?typeof U=="string"?m.textContent!==U&&(_.suppressHydrationWarning!==!0&&iu(m.textContent,U,o),v=["children",U]):typeof U=="number"&&m.textContent!==""+U&&(_.suppressHydrationWarning!==!0&&iu(m.textContent,U,o),v=["children",""+U]):i.hasOwnProperty(C)&&U!=null&&C==="onScroll"&&Ft("scroll",m)}switch(u){case"input":Tt(m),_n(m,_,!0);break;case"textarea":Tt(m),Nn(m);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(m.onclick=ou)}m=v,a.updateQueue=m,m!==null&&(a.flags|=4)}else{C=v.nodeType===9?v:v.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Pt(u)),o==="http://www.w3.org/1999/xhtml"?u==="script"?(o=C.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof m.is=="string"?o=C.createElement(u,{is:m.is}):(o=C.createElement(u),u==="select"&&(C=o,m.multiple?C.multiple=!0:m.size&&(C.size=m.size))):o=C.createElementNS(o,u),o[ws]=a,o[Nl]=m,X0(o,a,!1,!1),a.stateNode=o;e:{switch(C=Ls(u,m),u){case"dialog":Ft("cancel",o),Ft("close",o),v=m;break;case"iframe":case"object":case"embed":Ft("load",o),v=m;break;case"video":case"audio":for(v=0;v<bl.length;v++)Ft(bl[v],o);v=m;break;case"source":Ft("error",o),v=m;break;case"img":case"image":case"link":Ft("error",o),Ft("load",o),v=m;break;case"details":Ft("toggle",o),v=m;break;case"input":ut(o,m),v=Te(o,m),Ft("invalid",o);break;case"option":v=m;break;case"select":o._wrapperState={wasMultiple:!!m.multiple},v=W({},m,{value:void 0}),Ft("invalid",o);break;case"textarea":rr(o,m),v=On(o,m),Ft("invalid",o);break;default:v=m}Ds(u,v),U=v;for(_ in U)if(U.hasOwnProperty(_)){var G=U[_];_==="style"?pn(o,G):_==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&sr(o,G)):_==="children"?typeof G=="string"?(u!=="textarea"||G!=="")&&Yn(o,G):typeof G=="number"&&Yn(o,""+G):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?G!=null&&_==="onScroll"&&Ft("scroll",o):G!=null&&J(o,_,G,C))}switch(u){case"input":Tt(o),_n(o,m,!1);break;case"textarea":Tt(o),Nn(o);break;case"option":m.value!=null&&o.setAttribute("value",""+Ze(m.value));break;case"select":o.multiple=!!m.multiple,_=m.value,_!=null?Jt(o,!!m.multiple,_,!1):m.defaultValue!=null&&Jt(o,!!m.multiple,m.defaultValue,!0);break;default:typeof v.onClick=="function"&&(o.onclick=ou)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Bn(a),null;case 6:if(o&&a.stateNode!=null)ex(o,a,o.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(t(166));if(u=So(Tl.current),So(_s.current),fu(a)){if(m=a.stateNode,u=a.memoizedProps,m[ws]=a,(_=m.nodeValue!==u)&&(o=Sr,o!==null))switch(o.tag){case 3:iu(m.nodeValue,u,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&iu(m.nodeValue,u,(o.mode&1)!==0)}_&&(a.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[ws]=a,a.stateNode=m}return Bn(a),null;case 13:if(zt(Gt),m=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ht&&Er!==null&&(a.mode&1)!==0&&(a.flags&128)===0)r0(),ba(),a.flags|=98560,_=!1;else if(_=fu(a),m!==null&&m.dehydrated!==null){if(o===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[ws]=a}else ba(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bn(a),_=!1}else es!==null&&(Of(es),es=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(m=m!==null,m!==(o!==null&&o.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(o===null||(Gt.current&1)!==0?yn===0&&(yn=3):Uf())),a.updateQueue!==null&&(a.flags|=4),Bn(a),null);case 4:return Sa(),kf(o,a),o===null&&wl(a.stateNode.containerInfo),Bn(a),null;case 10:return ef(a.type._context),Bn(a),null;case 17:return cr(a.type)&&lu(),Bn(a),null;case 19:if(zt(Gt),_=a.memoizedState,_===null)return Bn(a),null;if(m=(a.flags&128)!==0,C=_.rendering,C===null)if(m)Rl(_,!1);else{if(yn!==0||o!==null&&(o.flags&128)!==0)for(o=a.child;o!==null;){if(C=vu(o),C!==null){for(a.flags|=128,Rl(_,!1),m=C.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=u,u=a.child;u!==null;)_=u,o=m,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,o=C.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),u=u.sibling;return At(Gt,Gt.current&1|2),a.child}o=o.sibling}_.tail!==null&&ot()>Ta&&(a.flags|=128,m=!0,Rl(_,!1),a.lanes=4194304)}else{if(!m)if(o=vu(C),o!==null){if(a.flags|=128,m=!0,u=o.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Rl(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!Ht)return Bn(a),null}else 2*ot()-_.renderingStartTime>Ta&&u!==1073741824&&(a.flags|=128,m=!0,Rl(_,!1),a.lanes=4194304);_.isBackwards?(C.sibling=a.child,a.child=C):(u=_.last,u!==null?u.sibling=C:a.child=C,_.last=C)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=ot(),a.sibling=null,u=Gt.current,At(Gt,m?u&1|2:u&1),a):(Bn(a),null);case 22:case 23:return zf(),m=a.memoizedState!==null,o!==null&&o.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(Cr&1073741824)!==0&&(Bn(a),a.subtreeFlags&6&&(a.flags|=8192)):Bn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function D1(o,a){switch(Kh(a),a.tag){case 1:return cr(a.type)&&lu(),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return Sa(),zt(lr),zt(zn),lf(),o=a.flags,(o&65536)!==0&&(o&128)===0?(a.flags=o&-65537|128,a):null;case 5:return of(a),null;case 13:if(zt(Gt),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(t(340));ba()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return zt(Gt),null;case 4:return Sa(),null;case 10:return ef(a.type._context),null;case 22:case 23:return zf(),null;case 24:return null;default:return null}}var Tu=!1,qn=!1,L1=typeof WeakSet=="function"?WeakSet:Set,Re=null;function Ca(o,a){var u=o.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){Yt(o,a,m)}else u.current=null}function Tf(o,a,u){try{u()}catch(m){Yt(o,a,m)}}var tx=!1;function V1(o,a){if(Fh=_i,o=Rg(),Ih(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var v=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var C=0,U=-1,G=-1,oe=0,ge=0,be=o,pe=null;t:for(;;){for(var Pe;be!==u||v!==0&&be.nodeType!==3||(U=C+v),be!==_||m!==0&&be.nodeType!==3||(G=C+m),be.nodeType===3&&(C+=be.nodeValue.length),(Pe=be.firstChild)!==null;)pe=be,be=Pe;for(;;){if(be===o)break t;if(pe===u&&++oe===v&&(U=C),pe===_&&++ge===m&&(G=C),(Pe=be.nextSibling)!==null)break;be=pe,pe=be.parentNode}be=Pe}u=U===-1||G===-1?null:{start:U,end:G}}else u=null}u=u||{start:0,end:0}}else u=null;for(zh={focusedElem:o,selectionRange:u},_i=!1,Re=a;Re!==null;)if(a=Re,o=a.child,(a.subtreeFlags&1028)!==0&&o!==null)o.return=a,Re=o;else for(;Re!==null;){a=Re;try{var De=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(De!==null){var Le=De.memoizedProps,sn=De.memoizedState,ne=a.stateNode,Q=ne.getSnapshotBeforeUpdate(a.elementType===a.type?Le:ts(a.type,Le),sn);ne.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var ie=a.stateNode.containerInfo;ie.nodeType===1?ie.textContent="":ie.nodeType===9&&ie.documentElement&&ie.removeChild(ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(_e){Yt(a,a.return,_e)}if(o=a.sibling,o!==null){o.return=a.return,Re=o;break}Re=a.return}return De=tx,tx=!1,De}function Ml(o,a,u){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&o)===o){var _=v.destroy;v.destroy=void 0,_!==void 0&&Tf(a,u,_)}v=v.next}while(v!==m)}}function Pu(o,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&o)===o){var m=u.create;u.destroy=m()}u=u.next}while(u!==a)}}function Pf(o){var a=o.ref;if(a!==null){var u=o.stateNode;switch(o.tag){case 5:o=u;break;default:o=u}typeof a=="function"?a(o):a.current=o}}function nx(o){var a=o.alternate;a!==null&&(o.alternate=null,nx(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&(delete a[ws],delete a[Nl],delete a[$h],delete a[v1],delete a[b1])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function rx(o){return o.tag===5||o.tag===3||o.tag===4}function sx(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||rx(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function jf(o,a,u){var m=o.tag;if(m===5||m===6)o=o.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(o,a):u.insertBefore(o,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(o,u)):(a=u,a.appendChild(o)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ou));else if(m!==4&&(o=o.child,o!==null))for(jf(o,a,u),o=o.sibling;o!==null;)jf(o,a,u),o=o.sibling}function If(o,a,u){var m=o.tag;if(m===5||m===6)o=o.stateNode,a?u.insertBefore(o,a):u.appendChild(o);else if(m!==4&&(o=o.child,o!==null))for(If(o,a,u),o=o.sibling;o!==null;)If(o,a,u),o=o.sibling}var An=null,ns=!1;function Ii(o,a,u){for(u=u.child;u!==null;)ix(o,a,u),u=u.sibling}function ix(o,a,u){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(ho,u)}catch{}switch(u.tag){case 5:qn||Ca(u,a);case 6:var m=An,v=ns;An=null,Ii(o,a,u),An=m,ns=v,An!==null&&(ns?(o=An,u=u.stateNode,o.nodeType===8?o.parentNode.removeChild(u):o.removeChild(u)):An.removeChild(u.stateNode));break;case 18:An!==null&&(ns?(o=An,u=u.stateNode,o.nodeType===8?qh(o.parentNode,u):o.nodeType===1&&qh(o,u),Qr(o)):qh(An,u.stateNode));break;case 4:m=An,v=ns,An=u.stateNode.containerInfo,ns=!0,Ii(o,a,u),An=m,ns=v;break;case 0:case 11:case 14:case 15:if(!qn&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var _=v,C=_.destroy;_=_.tag,C!==void 0&&((_&2)!==0||(_&4)!==0)&&Tf(u,a,C),v=v.next}while(v!==m)}Ii(o,a,u);break;case 1:if(!qn&&(Ca(u,a),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(U){Yt(u,a,U)}Ii(o,a,u);break;case 21:Ii(o,a,u);break;case 22:u.mode&1?(qn=(m=qn)||u.memoizedState!==null,Ii(o,a,u),qn=m):Ii(o,a,u);break;default:Ii(o,a,u)}}function ox(o){var a=o.updateQueue;if(a!==null){o.updateQueue=null;var u=o.stateNode;u===null&&(u=o.stateNode=new L1),a.forEach(function(m){var v=G1.bind(null,o,m);u.has(m)||(u.add(m),m.then(v,v))})}}function rs(o,a){var u=a.deletions;if(u!==null)for(var m=0;m<u.length;m++){var v=u[m];try{var _=o,C=a,U=C;e:for(;U!==null;){switch(U.tag){case 5:An=U.stateNode,ns=!1;break e;case 3:An=U.stateNode.containerInfo,ns=!0;break e;case 4:An=U.stateNode.containerInfo,ns=!0;break e}U=U.return}if(An===null)throw Error(t(160));ix(_,C,v),An=null,ns=!1;var G=v.alternate;G!==null&&(G.return=null),v.return=null}catch(oe){Yt(v,a,oe)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)ax(a,o),a=a.sibling}function ax(o,a){var u=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(rs(a,o),Ss(o),m&4){try{Ml(3,o,o.return),Pu(3,o)}catch(Le){Yt(o,o.return,Le)}try{Ml(5,o,o.return)}catch(Le){Yt(o,o.return,Le)}}break;case 1:rs(a,o),Ss(o),m&512&&u!==null&&Ca(u,u.return);break;case 5:if(rs(a,o),Ss(o),m&512&&u!==null&&Ca(u,u.return),o.flags&32){var v=o.stateNode;try{Yn(v,"")}catch(Le){Yt(o,o.return,Le)}}if(m&4&&(v=o.stateNode,v!=null)){var _=o.memoizedProps,C=u!==null?u.memoizedProps:_,U=o.type,G=o.updateQueue;if(o.updateQueue=null,G!==null)try{U==="input"&&_.type==="radio"&&_.name!=null&&Lt(v,_),Ls(U,C);var oe=Ls(U,_);for(C=0;C<G.length;C+=2){var ge=G[C],be=G[C+1];ge==="style"?pn(v,be):ge==="dangerouslySetInnerHTML"?sr(v,be):ge==="children"?Yn(v,be):J(v,ge,be,oe)}switch(U){case"input":Vt(v,_);break;case"textarea":xr(v,_);break;case"select":var pe=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!_.multiple;var Pe=_.value;Pe!=null?Jt(v,!!_.multiple,Pe,!1):pe!==!!_.multiple&&(_.defaultValue!=null?Jt(v,!!_.multiple,_.defaultValue,!0):Jt(v,!!_.multiple,_.multiple?[]:"",!1))}v[Nl]=_}catch(Le){Yt(o,o.return,Le)}}break;case 6:if(rs(a,o),Ss(o),m&4){if(o.stateNode===null)throw Error(t(162));v=o.stateNode,_=o.memoizedProps;try{v.nodeValue=_}catch(Le){Yt(o,o.return,Le)}}break;case 3:if(rs(a,o),Ss(o),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Qr(a.containerInfo)}catch(Le){Yt(o,o.return,Le)}break;case 4:rs(a,o),Ss(o);break;case 13:rs(a,o),Ss(o),v=o.child,v.flags&8192&&(_=v.memoizedState!==null,v.stateNode.isHidden=_,!_||v.alternate!==null&&v.alternate.memoizedState!==null||(Mf=ot())),m&4&&ox(o);break;case 22:if(ge=u!==null&&u.memoizedState!==null,o.mode&1?(qn=(oe=qn)||ge,rs(a,o),qn=oe):rs(a,o),Ss(o),m&8192){if(oe=o.memoizedState!==null,(o.stateNode.isHidden=oe)&&!ge&&(o.mode&1)!==0)for(Re=o,ge=o.child;ge!==null;){for(be=Re=ge;Re!==null;){switch(pe=Re,Pe=pe.child,pe.tag){case 0:case 11:case 14:case 15:Ml(4,pe,pe.return);break;case 1:Ca(pe,pe.return);var De=pe.stateNode;if(typeof De.componentWillUnmount=="function"){m=pe,u=pe.return;try{a=m,De.props=a.memoizedProps,De.state=a.memoizedState,De.componentWillUnmount()}catch(Le){Yt(m,u,Le)}}break;case 5:Ca(pe,pe.return);break;case 22:if(pe.memoizedState!==null){ux(be);continue}}Pe!==null?(Pe.return=pe,Re=Pe):ux(be)}ge=ge.sibling}e:for(ge=null,be=o;;){if(be.tag===5){if(ge===null){ge=be;try{v=be.stateNode,oe?(_=v.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(U=be.stateNode,G=be.memoizedProps.style,C=G!=null&&G.hasOwnProperty("display")?G.display:null,U.style.display=jt("display",C))}catch(Le){Yt(o,o.return,Le)}}}else if(be.tag===6){if(ge===null)try{be.stateNode.nodeValue=oe?"":be.memoizedProps}catch(Le){Yt(o,o.return,Le)}}else if((be.tag!==22&&be.tag!==23||be.memoizedState===null||be===o)&&be.child!==null){be.child.return=be,be=be.child;continue}if(be===o)break e;for(;be.sibling===null;){if(be.return===null||be.return===o)break e;ge===be&&(ge=null),be=be.return}ge===be&&(ge=null),be.sibling.return=be.return,be=be.sibling}}break;case 19:rs(a,o),Ss(o),m&4&&ox(o);break;case 21:break;default:rs(a,o),Ss(o)}}function Ss(o){var a=o.flags;if(a&2){try{e:{for(var u=o.return;u!==null;){if(rx(u)){var m=u;break e}u=u.return}throw Error(t(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&(Yn(v,""),m.flags&=-33);var _=sx(o);If(o,_,v);break;case 3:case 4:var C=m.stateNode.containerInfo,U=sx(o);jf(o,U,C);break;default:throw Error(t(161))}}catch(G){Yt(o,o.return,G)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function O1(o,a,u){Re=o,lx(o)}function lx(o,a,u){for(var m=(o.mode&1)!==0;Re!==null;){var v=Re,_=v.child;if(v.tag===22&&m){var C=v.memoizedState!==null||Tu;if(!C){var U=v.alternate,G=U!==null&&U.memoizedState!==null||qn;U=Tu;var oe=qn;if(Tu=C,(qn=G)&&!oe)for(Re=v;Re!==null;)C=Re,G=C.child,C.tag===22&&C.memoizedState!==null?dx(v):G!==null?(G.return=C,Re=G):dx(v);for(;_!==null;)Re=_,lx(_),_=_.sibling;Re=v,Tu=U,qn=oe}cx(o)}else(v.subtreeFlags&8772)!==0&&_!==null?(_.return=v,Re=_):cx(o)}}function cx(o){for(;Re!==null;){var a=Re;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:qn||Pu(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!qn)if(u===null)m.componentDidMount();else{var v=a.elementType===a.type?u.memoizedProps:ts(a.type,u.memoizedProps);m.componentDidUpdate(v,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&u0(a,_,m);break;case 3:var C=a.updateQueue;if(C!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}u0(a,C,u)}break;case 5:var U=a.stateNode;if(u===null&&a.flags&4){u=U;var G=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&u.focus();break;case"img":G.src&&(u.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var oe=a.alternate;if(oe!==null){var ge=oe.memoizedState;if(ge!==null){var be=ge.dehydrated;be!==null&&Qr(be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}qn||a.flags&512&&Pf(a)}catch(pe){Yt(a,a.return,pe)}}if(a===o){Re=null;break}if(u=a.sibling,u!==null){u.return=a.return,Re=u;break}Re=a.return}}function ux(o){for(;Re!==null;){var a=Re;if(a===o){Re=null;break}var u=a.sibling;if(u!==null){u.return=a.return,Re=u;break}Re=a.return}}function dx(o){for(;Re!==null;){var a=Re;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Pu(4,a)}catch(G){Yt(a,u,G)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var v=a.return;try{m.componentDidMount()}catch(G){Yt(a,v,G)}}var _=a.return;try{Pf(a)}catch(G){Yt(a,_,G)}break;case 5:var C=a.return;try{Pf(a)}catch(G){Yt(a,C,G)}}}catch(G){Yt(a,a.return,G)}if(a===o){Re=null;break}var U=a.sibling;if(U!==null){U.return=a.return,Re=U;break}Re=a.return}}var F1=Math.ceil,ju=se.ReactCurrentDispatcher,Af=se.ReactCurrentOwner,Ur=se.ReactCurrentBatchConfig,vt=0,Cn=null,cn=null,Rn=0,Cr=0,ka=Ci(0),yn=0,Dl=null,Co=0,Iu=0,Rf=0,Ll=null,dr=null,Mf=0,Ta=1/0,Xs=null,Au=!1,Df=null,Ai=null,Ru=!1,Ri=null,Mu=0,Vl=0,Lf=null,Du=-1,Lu=0;function tr(){return(vt&6)!==0?ot():Du!==-1?Du:Du=ot()}function Mi(o){return(o.mode&1)===0?1:(vt&2)!==0&&Rn!==0?Rn&-Rn:_1.transition!==null?(Lu===0&&(Lu=po()),Lu):(o=pt,o!==0||(o=window.event,o=o===void 0?16:dl(o.type)),o)}function ss(o,a,u,m){if(50<Vl)throw Vl=0,Lf=null,Error(t(185));yi(o,u,m),((vt&2)===0||o!==Cn)&&(o===Cn&&((vt&2)===0&&(Iu|=u),yn===4&&Di(o,Rn)),hr(o,m),u===1&&vt===0&&(a.mode&1)===0&&(Ta=ot()+500,uu&&Ti()))}function hr(o,a){var u=o.callbackNode;zs(o,a);var m=fo(o,o===Cn?Rn:0);if(m===0)u!==null&&Oe(u),o.callbackNode=null,o.callbackPriority=0;else if(a=m&-m,o.callbackPriority!==a){if(u!=null&&Oe(u),a===1)o.tag===0?w1(fx.bind(null,o)):Xg(fx.bind(null,o)),x1(function(){(vt&6)===0&&Ti()}),u=null;else{switch(bi(m)){case 1:u=mn;break;case 4:u=Fs;break;case 16:u=Mr;break;case 536870912:u=Lc;break;default:u=Mr}u=wx(u,hx.bind(null,o))}o.callbackPriority=a,o.callbackNode=u}}function hx(o,a){if(Du=-1,Lu=0,(vt&6)!==0)throw Error(t(327));var u=o.callbackNode;if(Pa()&&o.callbackNode!==u)return null;var m=fo(o,o===Cn?Rn:0);if(m===0)return null;if((m&30)!==0||(m&o.expiredLanes)!==0||a)a=Vu(o,m);else{a=m;var v=vt;vt|=2;var _=mx();(Cn!==o||Rn!==a)&&(Xs=null,Ta=ot()+500,To(o,a));do try{B1();break}catch(U){px(o,U)}while(!0);Zh(),ju.current=_,vt=v,cn!==null?a=0:(Cn=null,Rn=0,a=yn)}if(a!==0){if(a===2&&(v=wr(o),v!==0&&(m=v,a=Vf(o,v))),a===1)throw u=Dl,To(o,0),Di(o,m),hr(o,ot()),u;if(a===6)Di(o,m);else{if(v=o.current.alternate,(m&30)===0&&!z1(v)&&(a=Vu(o,m),a===2&&(_=wr(o),_!==0&&(m=_,a=Vf(o,_))),a===1))throw u=Dl,To(o,0),Di(o,m),hr(o,ot()),u;switch(o.finishedWork=v,o.finishedLanes=m,a){case 0:case 1:throw Error(t(345));case 2:Po(o,dr,Xs);break;case 3:if(Di(o,m),(m&130023424)===m&&(a=Mf+500-ot(),10<a)){if(fo(o,0)!==0)break;if(v=o.suspendedLanes,(v&m)!==m){tr(),o.pingedLanes|=o.suspendedLanes&v;break}o.timeoutHandle=Bh(Po.bind(null,o,dr,Xs),a);break}Po(o,dr,Xs);break;case 4:if(Di(o,m),(m&4194240)===m)break;for(a=o.eventTimes,v=-1;0<m;){var C=31-Xn(m);_=1<<C,C=a[C],C>v&&(v=C),m&=~_}if(m=v,m=ot()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*F1(m/1960))-m,10<m){o.timeoutHandle=Bh(Po.bind(null,o,dr,Xs),m);break}Po(o,dr,Xs);break;case 5:Po(o,dr,Xs);break;default:throw Error(t(329))}}}return hr(o,ot()),o.callbackNode===u?hx.bind(null,o):null}function Vf(o,a){var u=Ll;return o.current.memoizedState.isDehydrated&&(To(o,a).flags|=256),o=Vu(o,a),o!==2&&(a=dr,dr=u,a!==null&&Of(a)),o}function Of(o){dr===null?dr=o:dr.push.apply(dr,o)}function z1(o){for(var a=o;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var v=u[m],_=v.getSnapshot;v=v.value;try{if(!Zr(_(),v))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Di(o,a){for(a&=~Rf,a&=~Iu,o.suspendedLanes|=a,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var u=31-Xn(a),m=1<<u;o[u]=-1,a&=~m}}function fx(o){if((vt&6)!==0)throw Error(t(327));Pa();var a=fo(o,0);if((a&1)===0)return hr(o,ot()),null;var u=Vu(o,a);if(o.tag!==0&&u===2){var m=wr(o);m!==0&&(a=m,u=Vf(o,m))}if(u===1)throw u=Dl,To(o,0),Di(o,a),hr(o,ot()),u;if(u===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,Po(o,dr,Xs),hr(o,ot()),null}function Ff(o,a){var u=vt;vt|=1;try{return o(a)}finally{vt=u,vt===0&&(Ta=ot()+500,uu&&Ti())}}function ko(o){Ri!==null&&Ri.tag===0&&(vt&6)===0&&Pa();var a=vt;vt|=1;var u=Ur.transition,m=pt;try{if(Ur.transition=null,pt=1,o)return o()}finally{pt=m,Ur.transition=u,vt=a,(vt&6)===0&&Ti()}}function zf(){Cr=ka.current,zt(ka)}function To(o,a){o.finishedWork=null,o.finishedLanes=0;var u=o.timeoutHandle;if(u!==-1&&(o.timeoutHandle=-1,g1(u)),cn!==null)for(u=cn.return;u!==null;){var m=u;switch(Kh(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&lu();break;case 3:Sa(),zt(lr),zt(zn),lf();break;case 5:of(m);break;case 4:Sa();break;case 13:zt(Gt);break;case 19:zt(Gt);break;case 10:ef(m.type._context);break;case 22:case 23:zf()}u=u.return}if(Cn=o,cn=o=Li(o.current,null),Rn=Cr=a,yn=0,Dl=null,Rf=Iu=Co=0,dr=Ll=null,No!==null){for(a=0;a<No.length;a++)if(u=No[a],m=u.interleaved,m!==null){u.interleaved=null;var v=m.next,_=u.pending;if(_!==null){var C=_.next;_.next=v,m.next=C}u.pending=m}No=null}return o}function px(o,a){do{var u=cn;try{if(Zh(),bu.current=Su,wu){for(var m=Wt.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}wu=!1}if(Eo=0,En=xn=Wt=null,Pl=!1,jl=0,Af.current=null,u===null||u.return===null){yn=1,Dl=a,cn=null;break}e:{var _=o,C=u.return,U=u,G=a;if(a=Rn,U.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var oe=G,ge=U,be=ge.tag;if((ge.mode&1)===0&&(be===0||be===11||be===15)){var pe=ge.alternate;pe?(ge.updateQueue=pe.updateQueue,ge.memoizedState=pe.memoizedState,ge.lanes=pe.lanes):(ge.updateQueue=null,ge.memoizedState=null)}var Pe=F0(C);if(Pe!==null){Pe.flags&=-257,z0(Pe,C,U,_,a),Pe.mode&1&&O0(_,oe,a),a=Pe,G=oe;var De=a.updateQueue;if(De===null){var Le=new Set;Le.add(G),a.updateQueue=Le}else De.add(G);break e}else{if((a&1)===0){O0(_,oe,a),Uf();break e}G=Error(t(426))}}else if(Ht&&U.mode&1){var sn=F0(C);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),z0(sn,C,U,_,a),Qh(Ea(G,U));break e}}_=G=Ea(G,U),yn!==4&&(yn=2),Ll===null?Ll=[_]:Ll.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var ne=L0(_,G,a);c0(_,ne);break e;case 1:U=G;var Q=_.type,ie=_.stateNode;if((_.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(Ai===null||!Ai.has(ie)))){_.flags|=65536,a&=-a,_.lanes|=a;var _e=V0(_,U,a);c0(_,_e);break e}}_=_.return}while(_!==null)}xx(u)}catch(Fe){a=Fe,cn===u&&u!==null&&(cn=u=u.return);continue}break}while(!0)}function mx(){var o=ju.current;return ju.current=Su,o===null?Su:o}function Uf(){(yn===0||yn===3||yn===2)&&(yn=4),Cn===null||(Co&268435455)===0&&(Iu&268435455)===0||Di(Cn,Rn)}function Vu(o,a){var u=vt;vt|=2;var m=mx();(Cn!==o||Rn!==a)&&(Xs=null,To(o,a));do try{U1();break}catch(v){px(o,v)}while(!0);if(Zh(),vt=u,ju.current=m,cn!==null)throw Error(t(261));return Cn=null,Rn=0,yn}function U1(){for(;cn!==null;)gx(cn)}function B1(){for(;cn!==null&&!ft();)gx(cn)}function gx(o){var a=bx(o.alternate,o,Cr);o.memoizedProps=o.pendingProps,a===null?xx(o):cn=a,Af.current=null}function xx(o){var a=o;do{var u=a.alternate;if(o=a.return,(a.flags&32768)===0){if(u=M1(u,a,Cr),u!==null){cn=u;return}}else{if(u=D1(u,a),u!==null){u.flags&=32767,cn=u;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{yn=6,cn=null;return}}if(a=a.sibling,a!==null){cn=a;return}cn=a=o}while(a!==null);yn===0&&(yn=5)}function Po(o,a,u){var m=pt,v=Ur.transition;try{Ur.transition=null,pt=1,q1(o,a,u,m)}finally{Ur.transition=v,pt=m}return null}function q1(o,a,u,m){do Pa();while(Ri!==null);if((vt&6)!==0)throw Error(t(327));u=o.finishedWork;var v=o.finishedLanes;if(u===null)return null;if(o.finishedWork=null,o.finishedLanes=0,u===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var _=u.lanes|u.childLanes;if(kt(o,_),o===Cn&&(cn=Cn=null,Rn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Ru||(Ru=!0,wx(Mr,function(){return Pa(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=Ur.transition,Ur.transition=null;var C=pt;pt=1;var U=vt;vt|=4,Af.current=null,V1(o,u),ax(u,o),c1(zh),_i=!!Fh,zh=Fh=null,o.current=u,O1(u),at(),vt=U,pt=C,Ur.transition=_}else o.current=u;if(Ru&&(Ru=!1,Ri=o,Mu=v),_=o.pendingLanes,_===0&&(Ai=null),Vc(u.stateNode),hr(o,ot()),a!==null)for(m=o.onRecoverableError,u=0;u<a.length;u++)v=a[u],m(v.value,{componentStack:v.stack,digest:v.digest});if(Au)throw Au=!1,o=Df,Df=null,o;return(Mu&1)!==0&&o.tag!==0&&Pa(),_=o.pendingLanes,(_&1)!==0?o===Lf?Vl++:(Vl=0,Lf=o):Vl=0,Ti(),null}function Pa(){if(Ri!==null){var o=bi(Mu),a=Ur.transition,u=pt;try{if(Ur.transition=null,pt=16>o?16:o,Ri===null)var m=!1;else{if(o=Ri,Ri=null,Mu=0,(vt&6)!==0)throw Error(t(331));var v=vt;for(vt|=4,Re=o.current;Re!==null;){var _=Re,C=_.child;if((Re.flags&16)!==0){var U=_.deletions;if(U!==null){for(var G=0;G<U.length;G++){var oe=U[G];for(Re=oe;Re!==null;){var ge=Re;switch(ge.tag){case 0:case 11:case 15:Ml(8,ge,_)}var be=ge.child;if(be!==null)be.return=ge,Re=be;else for(;Re!==null;){ge=Re;var pe=ge.sibling,Pe=ge.return;if(nx(ge),ge===oe){Re=null;break}if(pe!==null){pe.return=Pe,Re=pe;break}Re=Pe}}}var De=_.alternate;if(De!==null){var Le=De.child;if(Le!==null){De.child=null;do{var sn=Le.sibling;Le.sibling=null,Le=sn}while(Le!==null)}}Re=_}}if((_.subtreeFlags&2064)!==0&&C!==null)C.return=_,Re=C;else e:for(;Re!==null;){if(_=Re,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Ml(9,_,_.return)}var ne=_.sibling;if(ne!==null){ne.return=_.return,Re=ne;break e}Re=_.return}}var Q=o.current;for(Re=Q;Re!==null;){C=Re;var ie=C.child;if((C.subtreeFlags&2064)!==0&&ie!==null)ie.return=C,Re=ie;else e:for(C=Q;Re!==null;){if(U=Re,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:Pu(9,U)}}catch(Fe){Yt(U,U.return,Fe)}if(U===C){Re=null;break e}var _e=U.sibling;if(_e!==null){_e.return=U.return,Re=_e;break e}Re=U.return}}if(vt=v,Ti(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(ho,o)}catch{}m=!0}return m}finally{pt=u,Ur.transition=a}}return!1}function yx(o,a,u){a=Ea(u,a),a=L0(o,a,1),o=ji(o,a,1),a=tr(),o!==null&&(yi(o,1,a),hr(o,a))}function Yt(o,a,u){if(o.tag===3)yx(o,o,u);else for(;a!==null;){if(a.tag===3){yx(a,o,u);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ai===null||!Ai.has(m))){o=Ea(u,o),o=V0(a,o,1),a=ji(a,o,1),o=tr(),a!==null&&(yi(a,1,o),hr(a,o));break}}a=a.return}}function $1(o,a,u){var m=o.pingCache;m!==null&&m.delete(a),a=tr(),o.pingedLanes|=o.suspendedLanes&u,Cn===o&&(Rn&u)===u&&(yn===4||yn===3&&(Rn&130023424)===Rn&&500>ot()-Mf?To(o,0):Rf|=u),hr(o,a)}function vx(o,a){a===0&&((o.mode&1)===0?a=1:(a=Xo,Xo<<=1,(Xo&130023424)===0&&(Xo=4194304)));var u=tr();o=Js(o,a),o!==null&&(yi(o,a,u),hr(o,u))}function H1(o){var a=o.memoizedState,u=0;a!==null&&(u=a.retryLane),vx(o,u)}function G1(o,a){var u=0;switch(o.tag){case 13:var m=o.stateNode,v=o.memoizedState;v!==null&&(u=v.retryLane);break;case 19:m=o.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(a),vx(o,u)}var bx;bx=function(o,a,u){if(o!==null)if(o.memoizedProps!==a.pendingProps||lr.current)ur=!0;else{if((o.lanes&u)===0&&(a.flags&128)===0)return ur=!1,R1(o,a,u);ur=(o.flags&131072)!==0}else ur=!1,Ht&&(a.flags&1048576)!==0&&Zg(a,hu,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;ku(o,a),o=a.pendingProps;var v=xa(a,zn.current);Na(a,u),v=df(null,a,m,o,v,u);var _=hf();return a.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,cr(m)?(_=!0,cu(a)):_=!1,a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,rf(a),v.updater=Eu,a.stateNode=v,v._reactInternals=a,yf(a,m,o,u),a=_f(null,a,m,!0,_,u)):(a.tag=0,Ht&&_&&Wh(a),er(null,a,v,u),a=a.child),a;case 16:m=a.elementType;e:{switch(ku(o,a),o=a.pendingProps,v=m._init,m=v(m._payload),a.type=m,v=a.tag=K1(m),o=ts(m,o),v){case 0:a=wf(null,a,m,o,u);break e;case 1:a=G0(null,a,m,o,u);break e;case 11:a=U0(null,a,m,o,u);break e;case 14:a=B0(null,a,m,ts(m.type,o),u);break e}throw Error(t(306,m,""))}return a;case 0:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:ts(m,v),wf(o,a,m,v,u);case 1:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:ts(m,v),G0(o,a,m,v,u);case 3:e:{if(W0(a),o===null)throw Error(t(387));m=a.pendingProps,_=a.memoizedState,v=_.element,l0(o,a),yu(a,m,null,u);var C=a.memoizedState;if(m=C.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){v=Ea(Error(t(423)),a),a=K0(o,a,m,u,v);break e}else if(m!==v){v=Ea(Error(t(424)),a),a=K0(o,a,m,u,v);break e}else for(Er=Ei(a.stateNode.containerInfo.firstChild),Sr=a,Ht=!0,es=null,u=o0(a,null,m,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ba(),m===v){a=Qs(o,a,u);break e}er(o,a,m,u)}a=a.child}return a;case 5:return d0(a),o===null&&Yh(a),m=a.type,v=a.pendingProps,_=o!==null?o.memoizedProps:null,C=v.children,Uh(m,v)?C=null:_!==null&&Uh(m,_)&&(a.flags|=32),H0(o,a),er(o,a,C,u),a.child;case 6:return o===null&&Yh(a),null;case 13:return J0(o,a,u);case 4:return sf(a,a.stateNode.containerInfo),m=a.pendingProps,o===null?a.child=wa(a,null,m,u):er(o,a,m,u),a.child;case 11:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:ts(m,v),U0(o,a,m,v,u);case 7:return er(o,a,a.pendingProps,u),a.child;case 8:return er(o,a,a.pendingProps.children,u),a.child;case 12:return er(o,a,a.pendingProps.children,u),a.child;case 10:e:{if(m=a.type._context,v=a.pendingProps,_=a.memoizedProps,C=v.value,At(mu,m._currentValue),m._currentValue=C,_!==null)if(Zr(_.value,C)){if(_.children===v.children&&!lr.current){a=Qs(o,a,u);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var U=_.dependencies;if(U!==null){C=_.child;for(var G=U.firstContext;G!==null;){if(G.context===m){if(_.tag===1){G=Ys(-1,u&-u),G.tag=2;var oe=_.updateQueue;if(oe!==null){oe=oe.shared;var ge=oe.pending;ge===null?G.next=G:(G.next=ge.next,ge.next=G),oe.pending=G}}_.lanes|=u,G=_.alternate,G!==null&&(G.lanes|=u),tf(_.return,u,a),U.lanes|=u;break}G=G.next}}else if(_.tag===10)C=_.type===a.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(t(341));C.lanes|=u,U=C.alternate,U!==null&&(U.lanes|=u),tf(C,u,a),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===a){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}er(o,a,v.children,u),a=a.child}return a;case 9:return v=a.type,m=a.pendingProps.children,Na(a,u),v=Fr(v),m=m(v),a.flags|=1,er(o,a,m,u),a.child;case 14:return m=a.type,v=ts(m,a.pendingProps),v=ts(m.type,v),B0(o,a,m,v,u);case 15:return q0(o,a,a.type,a.pendingProps,u);case 17:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:ts(m,v),ku(o,a),a.tag=1,cr(m)?(o=!0,cu(a)):o=!1,Na(a,u),M0(a,m,v),yf(a,m,v,u),_f(null,a,m,!0,o,u);case 19:return Q0(o,a,u);case 22:return $0(o,a,u)}throw Error(t(156,a.tag))};function wx(o,a){return le(o,a)}function W1(o,a,u,m){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(o,a,u,m){return new W1(o,a,u,m)}function Bf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function K1(o){if(typeof o=="function")return Bf(o)?1:0;if(o!=null){if(o=o.$$typeof,o===O)return 11;if(o===Ue)return 14}return 2}function Li(o,a){var u=o.alternate;return u===null?(u=Br(o.tag,a,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=a,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&14680064,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,a=o.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u}function Ou(o,a,u,m,v,_){var C=2;if(m=o,typeof o=="function")Bf(o)&&(C=1);else if(typeof o=="string")C=5;else e:switch(o){case F:return jo(u.children,v,_,a);case A:C=8,v|=8;break;case L:return o=Br(12,u,a,v|2),o.elementType=L,o.lanes=_,o;case D:return o=Br(13,u,a,v),o.elementType=D,o.lanes=_,o;case ve:return o=Br(19,u,a,v),o.elementType=ve,o.lanes=_,o;case je:return Fu(u,v,_,a);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case V:C=10;break e;case T:C=9;break e;case O:C=11;break e;case Ue:C=14;break e;case ke:C=16,m=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return a=Br(C,u,a,v),a.elementType=o,a.type=m,a.lanes=_,a}function jo(o,a,u,m){return o=Br(7,o,m,a),o.lanes=u,o}function Fu(o,a,u,m){return o=Br(22,o,m,a),o.elementType=je,o.lanes=u,o.stateNode={isHidden:!1},o}function qf(o,a,u){return o=Br(6,o,null,a),o.lanes=u,o}function $f(o,a,u){return a=Br(4,o.children!==null?o.children:[],o.key,a),a.lanes=u,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function J1(o,a,u,m,v){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xi(0),this.expirationTimes=xi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.identifierPrefix=m,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Hf(o,a,u,m,v,_,C,U,G){return o=new J1(o,a,u,U,G),a===1?(a=1,_===!0&&(a|=8)):a=0,_=Br(3,null,null,a),o.current=_,_.stateNode=o,_.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},rf(_),o}function Y1(o,a,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:m==null?null:""+m,children:o,containerInfo:a,implementation:u}}function _x(o){if(!o)return ki;o=o._reactInternals;e:{if(it(o)!==o||o.tag!==1)throw Error(t(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(cr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(o.tag===1){var u=o.type;if(cr(u))return Yg(o,u,a)}return a}function Nx(o,a,u,m,v,_,C,U,G){return o=Hf(u,m,!0,o,v,_,C,U,G),o.context=_x(null),u=o.current,m=tr(),v=Mi(u),_=Ys(m,v),_.callback=a??null,ji(u,_,v),o.current.lanes=v,yi(o,v,m),hr(o,m),o}function zu(o,a,u,m){var v=a.current,_=tr(),C=Mi(v);return u=_x(u),a.context===null?a.context=u:a.pendingContext=u,a=Ys(_,C),a.payload={element:o},m=m===void 0?null:m,m!==null&&(a.callback=m),o=ji(v,a,C),o!==null&&(ss(o,v,C,_),xu(o,v,C)),C}function Uu(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Sx(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<a?u:a}}function Gf(o,a){Sx(o,a),(o=o.alternate)&&Sx(o,a)}function Q1(){return null}var Ex=typeof reportError=="function"?reportError:function(o){console.error(o)};function Wf(o){this._internalRoot=o}Bu.prototype.render=Wf.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(t(409));zu(o,a,null,null)},Bu.prototype.unmount=Wf.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;ko(function(){zu(null,o,null,null)}),a[Hs]=null}};function Bu(o){this._internalRoot=o}Bu.prototype.unstable_scheduleHydration=function(o){if(o){var a=Bc();o={blockedOn:null,target:o,priority:a};for(var u=0;u<xs.length&&a!==0&&a<xs[u].priority;u++);xs.splice(u,0,o),u===0&&Hc(o)}};function Kf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function qu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Cx(){}function X1(o,a,u,m,v){if(v){if(typeof m=="function"){var _=m;m=function(){var oe=Uu(C);_.call(oe)}}var C=Nx(a,m,o,0,null,!1,!1,"",Cx);return o._reactRootContainer=C,o[Hs]=C.current,wl(o.nodeType===8?o.parentNode:o),ko(),C}for(;v=o.lastChild;)o.removeChild(v);if(typeof m=="function"){var U=m;m=function(){var oe=Uu(G);U.call(oe)}}var G=Hf(o,0,!1,null,null,!1,!1,"",Cx);return o._reactRootContainer=G,o[Hs]=G.current,wl(o.nodeType===8?o.parentNode:o),ko(function(){zu(a,G,u,m)}),G}function $u(o,a,u,m,v){var _=u._reactRootContainer;if(_){var C=_;if(typeof v=="function"){var U=v;v=function(){var G=Uu(C);U.call(G)}}zu(a,C,o,v)}else C=X1(u,a,o,v,m);return Uu(C)}zc=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var u=gi(a.pendingLanes);u!==0&&(vi(a,u|1),hr(a,ot()),(vt&6)===0&&(Ta=ot()+500,Ti()))}break;case 13:ko(function(){var m=Js(o,1);if(m!==null){var v=tr();ss(m,o,1,v)}}),Gf(o,1)}},Zo=function(o){if(o.tag===13){var a=Js(o,134217728);if(a!==null){var u=tr();ss(a,o,134217728,u)}Gf(o,134217728)}},Uc=function(o){if(o.tag===13){var a=Mi(o),u=Js(o,a);if(u!==null){var m=tr();ss(u,o,a,m)}Gf(o,a)}},Bc=function(){return pt},qc=function(o,a){var u=pt;try{return pt=o,a()}finally{pt=u}},Hr=function(o,a,u){switch(a){case"input":if(Vt(o,u),a=u.name,u.type==="radio"&&a!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var m=u[a];if(m!==o&&m.form===o.form){var v=au(m);if(!v)throw Error(t(90));Ct(m),Vt(m,v)}}}break;case"textarea":xr(o,u);break;case"select":a=u.value,a!=null&&Jt(o,!!u.multiple,a,!1)}},Gr=Ff,Wr=ko;var Z1={usingClientEntryPoint:!1,Events:[Sl,ma,au,ir,Vs,Ff]},Ol={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eS={bundleType:Ol.bundleType,version:Ol.version,rendererPackageName:Ol.rendererPackageName,rendererConfig:Ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:se.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=vr(o),o===null?null:o.stateNode},findFiberByHostInstance:Ol.findFiberByHostInstance||Q1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hu.isDisabled&&Hu.supportsFiber)try{ho=Hu.inject(eS),br=Hu}catch{}}return fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z1,fr.createPortal=function(o,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kf(a))throw Error(t(200));return Y1(o,a,null,u)},fr.createRoot=function(o,a){if(!Kf(o))throw Error(t(299));var u=!1,m="",v=Ex;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Hf(o,1,!1,null,null,u,!1,m,v),o[Hs]=a.current,wl(o.nodeType===8?o.parentNode:o),new Wf(a)},fr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=vr(a),o=o===null?null:o.stateNode,o},fr.flushSync=function(o){return ko(o)},fr.hydrate=function(o,a,u){if(!qu(a))throw Error(t(200));return $u(null,o,a,!0,u)},fr.hydrateRoot=function(o,a,u){if(!Kf(o))throw Error(t(405));var m=u!=null&&u.hydratedSources||null,v=!1,_="",C=Ex;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),a=Nx(a,null,o,1,u??null,v,!1,_,C),o[Hs]=a.current,wl(o),m)for(o=0;o<m.length;o++)u=m[o],v=u._getVersion,v=v(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,v]:a.mutableSourceEagerHydrationData.push(u,v);return new Bu(a)},fr.render=function(o,a,u){if(!qu(a))throw Error(t(200));return $u(null,o,a,!1,u)},fr.unmountComponentAtNode=function(o){if(!qu(o))throw Error(t(40));return o._reactRootContainer?(ko(function(){$u(null,null,o,!1,function(){o._reactRootContainer=null,o[Hs]=null})}),!0):!1},fr.unstable_batchedUpdates=Ff,fr.unstable_renderSubtreeIntoContainer=function(o,a,u,m){if(!qu(u))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return $u(o,a,u,!1,m)},fr.version="18.3.1-next-f1338f8080-20240426",fr}var Mx;function Ob(){if(Mx)return Qf.exports;Mx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qf.exports=cS(),Qf.exports}var Dx;function uS(){if(Dx)return Gu;Dx=1;var n=Ob();return Gu.createRoot=n.createRoot,Gu.hydrateRoot=n.hydrateRoot,Gu}var dS=uS();const hS=Lb(dS);Ob();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rc(){return rc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rc.apply(this,arguments)}var $i;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})($i||($i={}));const Lx="popstate";function fS(n){n===void 0&&(n={});function e(i,l){let{pathname:c="/",search:d="",hash:p=""}=Go(i.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),bp("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(i,l){let c=i.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=i.location.href,f=p.indexOf("#");d=f===-1?p:p.slice(0,f)}return d+"#"+(typeof l=="string"?l:wd(l))}function r(i,l){Gd(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return mS(e,t,r,n)}function an(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Gd(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function pS(){return Math.random().toString(36).substr(2,8)}function Vx(n,e){return{usr:n.state,key:n.key,idx:e}}function bp(n,e,t,r){return t===void 0&&(t=null),rc({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Go(e):e,{state:t,key:e&&e.key||r||pS()})}function wd(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Go(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function mS(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:l=!1}=r,c=i.history,d=$i.Pop,p=null,f=y();f==null&&(f=0,c.replaceState(rc({},c.state,{idx:f}),""));function y(){return(c.state||{idx:null}).idx}function b(){d=$i.Pop;let P=y(),$=P==null?null:P-f;f=P,p&&p({action:d,location:k.location,delta:$})}function N(P,$){d=$i.Push;let q=bp(k.location,P,$);t&&t(q,P),f=y()+1;let J=Vx(q,f),se=k.createHref(q);try{c.pushState(J,"",se)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;i.location.assign(se)}l&&p&&p({action:d,location:k.location,delta:1})}function E(P,$){d=$i.Replace;let q=bp(k.location,P,$);t&&t(q,P),f=y();let J=Vx(q,f),se=k.createHref(q);c.replaceState(J,"",se),l&&p&&p({action:d,location:k.location,delta:0})}function j(P){let $=i.location.origin!=="null"?i.location.origin:i.location.href,q=typeof P=="string"?P:wd(P);return q=q.replace(/ $/,"%20"),an($,"No window.location.(origin|href) available to create URL for href: "+q),new URL(q,$)}let k={get action(){return d},get location(){return n(i,c)},listen(P){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(Lx,b),p=P,()=>{i.removeEventListener(Lx,b),p=null}},createHref(P){return e(i,P)},createURL:j,encodeLocation(P){let $=j(P);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:N,replace:E,go(P){return c.go(P)}};return k}var Ox;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Ox||(Ox={}));function gS(n,e,t){return t===void 0&&(t="/"),xS(n,e,t)}function xS(n,e,t,r){let i=typeof e=="string"?Go(e):e,l=om(i.pathname||"/",t);if(l==null)return null;let c=Fb(n);yS(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let f=jS(l);d=kS(c[p],f)}return d}function Fb(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(l,c,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(an(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let f=Gi([r,p.relativePath]),y=t.concat(p);l.children&&l.children.length>0&&(an(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Fb(l.children,e,y,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:ES(f,l.index),routesMeta:y})};return n.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,c);else for(let p of zb(l.path))i(l,c,p)}),e}function zb(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return i?[l,""]:[l];let c=zb(r.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),i&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function yS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:CS(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const vS=/^:[\w-]+$/,bS=3,wS=2,_S=1,NS=10,SS=-2,Fx=n=>n==="*";function ES(n,e){let t=n.split("/"),r=t.length;return t.some(Fx)&&(r+=SS),e&&(r+=wS),t.filter(i=>!Fx(i)).reduce((i,l)=>i+(vS.test(l)?bS:l===""?_S:NS),r)}function CS(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function kS(n,e,t){let{routesMeta:r}=n,i={},l="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],f=d===r.length-1,y=l==="/"?e:e.slice(l.length)||"/",b=TS({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},y),N=p.route;if(!b)return null;Object.assign(i,b.params),c.push({params:i,pathname:Gi([l,b.pathname]),pathnameBase:DS(Gi([l,b.pathnameBase])),route:N}),b.pathnameBase!=="/"&&(l=Gi([l,b.pathnameBase]))}return c}function TS(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=PS(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((f,y,b)=>{let{paramName:N,isOptional:E}=y;if(N==="*"){let k=d[b]||"";c=l.slice(0,l.length-k.length).replace(/(.)\/+$/,"$1")}const j=d[b];return E&&!j?f[N]=void 0:f[N]=(j||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:n}}function PS(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Gd(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function jS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gd(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function om(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const IS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AS=n=>IS.test(n);function RS(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Go(n):n,l;if(t)if(AS(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Gd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+t))}t.startsWith("/")?l=zx(t.substring(1),"/"):l=zx(t,e)}else l=e;return{pathname:l,search:LS(r),hash:VS(i)}}function zx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function ep(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function am(n,e){let t=MS(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function lm(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Go(n):(i=rc({},n),an(!i.pathname||!i.pathname.includes("?"),ep("?","pathname","search",i)),an(!i.pathname||!i.pathname.includes("#"),ep("#","pathname","hash",i)),an(!i.search||!i.search.includes("#"),ep("#","search","hash",i)));let l=n===""||i.pathname==="",c=l?"/":i.pathname,d;if(c==null)d=t;else{let b=e.length-1;if(!r&&c.startsWith("..")){let N=c.split("/");for(;N[0]==="..";)N.shift(),b-=1;i.pathname=N.join("/")}d=b>=0?e[b]:"/"}let p=RS(i,d),f=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(f||y)&&(p.pathname+="/"),p}const Gi=n=>n.join("/").replace(/\/\/+/g,"/"),DS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),LS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,VS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function OS(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Ub=["post","put","patch","delete"];new Set(Ub);const FS=["get",...Ub];new Set(FS);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sc(){return sc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sc.apply(this,arguments)}const cm=I.createContext(null),zS=I.createContext(null),ro=I.createContext(null),Wd=I.createContext(null),Rs=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Bb=I.createContext(null);function US(n,e){let{relative:t}=e===void 0?{}:e;Xa()||an(!1);let{basename:r,navigator:i}=I.useContext(ro),{hash:l,pathname:c,search:d}=$b(n,{relative:t}),p=c;return r!=="/"&&(p=c==="/"?r:Gi([r,c])),i.createHref({pathname:p,search:d,hash:l})}function Xa(){return I.useContext(Wd)!=null}function so(){return Xa()||an(!1),I.useContext(Wd).location}function qb(n){I.useContext(ro).static||I.useLayoutEffect(n)}function fs(){let{isDataRoute:n}=I.useContext(Rs);return n?nE():BS()}function BS(){Xa()||an(!1);let n=I.useContext(cm),{basename:e,future:t,navigator:r}=I.useContext(ro),{matches:i}=I.useContext(Rs),{pathname:l}=so(),c=JSON.stringify(am(i,t.v7_relativeSplatPath)),d=I.useRef(!1);return qb(()=>{d.current=!0}),I.useCallback(function(f,y){if(y===void 0&&(y={}),!d.current)return;if(typeof f=="number"){r.go(f);return}let b=lm(f,JSON.parse(c),l,y.relative==="path");n==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Gi([e,b.pathname])),(y.replace?r.replace:r.push)(b,y.state,y)},[e,r,c,l,n])}const qS=I.createContext(null);function $S(n){let e=I.useContext(Rs).outlet;return e&&I.createElement(qS.Provider,{value:n},e)}function um(){let{matches:n}=I.useContext(Rs),e=n[n.length-1];return e?e.params:{}}function $b(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=I.useContext(ro),{matches:i}=I.useContext(Rs),{pathname:l}=so(),c=JSON.stringify(am(i,r.v7_relativeSplatPath));return I.useMemo(()=>lm(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function HS(n,e){return GS(n,e)}function GS(n,e,t,r){Xa()||an(!1);let{navigator:i}=I.useContext(ro),{matches:l}=I.useContext(Rs),c=l[l.length-1],d=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let f=so(),y;if(e){var b;let P=typeof e=="string"?Go(e):e;p==="/"||(b=P.pathname)!=null&&b.startsWith(p)||an(!1),y=P}else y=f;let N=y.pathname||"/",E=N;if(p!=="/"){let P=p.replace(/^\//,"").split("/");E="/"+N.replace(/^\//,"").split("/").slice(P.length).join("/")}let j=gS(n,{pathname:E}),k=QS(j&&j.map(P=>Object.assign({},P,{params:Object.assign({},d,P.params),pathname:Gi([p,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?p:Gi([p,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),l,t,r);return e&&k?I.createElement(Wd.Provider,{value:{location:sc({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:$i.Pop}},k):k}function WS(){let n=tE(),e=OS(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:i},t):null,null)}const KS=I.createElement(WS,null);class JS extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?I.createElement(Rs.Provider,{value:this.props.routeContext},I.createElement(Bb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YS(n){let{routeContext:e,match:t,children:r}=n,i=I.useContext(cm);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(Rs.Provider,{value:e},r)}function QS(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=r)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(i=t)==null?void 0:i.errors;if(d!=null){let y=c.findIndex(b=>b.route.id&&(d==null?void 0:d[b.route.id])!==void 0);y>=0||an(!1),c=c.slice(0,Math.min(c.length,y+1))}let p=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let y=0;y<c.length;y++){let b=c[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(f=y),b.route.id){let{loaderData:N,errors:E}=t,j=b.route.loader&&N[b.route.id]===void 0&&(!E||E[b.route.id]===void 0);if(b.route.lazy||j){p=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((y,b,N)=>{let E,j=!1,k=null,P=null;t&&(E=d&&b.route.id?d[b.route.id]:void 0,k=b.route.errorElement||KS,p&&(f<0&&N===0?(rE("route-fallback"),j=!0,P=null):f===N&&(j=!0,P=b.route.hydrateFallbackElement||null)));let $=e.concat(c.slice(0,N+1)),q=()=>{let J;return E?J=k:j?J=P:b.route.Component?J=I.createElement(b.route.Component,null):b.route.element?J=b.route.element:J=y,I.createElement(YS,{match:b,routeContext:{outlet:y,matches:$,isDataRoute:t!=null},children:J})};return t&&(b.route.ErrorBoundary||b.route.errorElement||N===0)?I.createElement(JS,{location:t.location,revalidation:t.revalidation,component:k,error:E,children:q(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):q()},null)}var Hb=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Hb||{}),Gb=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Gb||{});function XS(n){let e=I.useContext(cm);return e||an(!1),e}function ZS(n){let e=I.useContext(zS);return e||an(!1),e}function eE(n){let e=I.useContext(Rs);return e||an(!1),e}function Wb(n){let e=eE(),t=e.matches[e.matches.length-1];return t.route.id||an(!1),t.route.id}function tE(){var n;let e=I.useContext(Bb),t=ZS(),r=Wb();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function nE(){let{router:n}=XS(Hb.UseNavigateStable),e=Wb(Gb.UseNavigateStable),t=I.useRef(!1);return qb(()=>{t.current=!0}),I.useCallback(function(i,l){l===void 0&&(l={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,sc({fromRouteId:e},l)))},[n,e])}const Ux={};function rE(n,e,t){Ux[n]||(Ux[n]=!0)}function sE(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function iE(n){let{to:e,replace:t,state:r,relative:i}=n;Xa()||an(!1);let{future:l,static:c}=I.useContext(ro),{matches:d}=I.useContext(Rs),{pathname:p}=so(),f=fs(),y=lm(e,am(d,l.v7_relativeSplatPath),p,i==="path"),b=JSON.stringify(y);return I.useEffect(()=>f(JSON.parse(b),{replace:t,state:r,relative:i}),[f,b,i,t,r]),null}function Kb(n){return $S(n.context)}function Ut(n){an(!1)}function oE(n){let{basename:e="/",children:t=null,location:r,navigationType:i=$i.Pop,navigator:l,static:c=!1,future:d}=n;Xa()&&an(!1);let p=e.replace(/^\/*/,"/"),f=I.useMemo(()=>({basename:p,navigator:l,static:c,future:sc({v7_relativeSplatPath:!1},d)}),[p,d,l,c]);typeof r=="string"&&(r=Go(r));let{pathname:y="/",search:b="",hash:N="",state:E=null,key:j="default"}=r,k=I.useMemo(()=>{let P=om(y,p);return P==null?null:{location:{pathname:P,search:b,hash:N,state:E,key:j},navigationType:i}},[p,y,b,N,E,j,i]);return k==null?null:I.createElement(ro.Provider,{value:f},I.createElement(Wd.Provider,{children:t,value:k}))}function aE(n){let{children:e,location:t}=n;return HS(wp(e),t)}new Promise(()=>{});function wp(n,e){e===void 0&&(e=[]);let t=[];return I.Children.forEach(n,(r,i)=>{if(!I.isValidElement(r))return;let l=[...e,i];if(r.type===I.Fragment){t.push.apply(t,wp(r.props.children,l));return}r.type!==Ut&&an(!1),!r.props.index||!r.props.children||an(!1);let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=wp(r.props.children,l)),t.push(c)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _p(){return _p=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_p.apply(this,arguments)}function lE(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,l;for(l=0;l<r.length;l++)i=r[l],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function cE(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uE(n,e){return n.button===0&&(!e||e==="_self")&&!cE(n)}const dE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hE="6";try{window.__reactRouterVersion=hE}catch{}const fE="startTransition",Bx=oS[fE];function pE(n){let{basename:e,children:t,future:r,window:i}=n,l=I.useRef();l.current==null&&(l.current=fS({window:i,v5Compat:!0}));let c=l.current,[d,p]=I.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},y=I.useCallback(b=>{f&&Bx?Bx(()=>p(b)):p(b)},[p,f]);return I.useLayoutEffect(()=>c.listen(y),[c,y]),I.useEffect(()=>sE(r),[r]),I.createElement(oE,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:r})}const mE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Me=I.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:l,replace:c,state:d,target:p,to:f,preventScrollReset:y,viewTransition:b}=e,N=lE(e,dE),{basename:E}=I.useContext(ro),j,k=!1;if(typeof f=="string"&&gE.test(f)&&(j=f,mE))try{let J=new URL(window.location.href),se=f.startsWith("//")?new URL(J.protocol+f):new URL(f),he=om(se.pathname,E);se.origin===J.origin&&he!=null?f=he+se.search+se.hash:k=!0}catch{}let P=US(f,{relative:i}),$=xE(f,{replace:c,state:d,target:p,preventScrollReset:y,relative:i,viewTransition:b});function q(J){r&&r(J),J.defaultPrevented||$(J)}return I.createElement("a",_p({},N,{href:j||P,onClick:k||l?r:q,ref:t,target:p}))});var qx;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(qx||(qx={}));var $x;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})($x||($x={}));function xE(n,e){let{target:t,replace:r,state:i,preventScrollReset:l,relative:c,viewTransition:d}=e===void 0?{}:e,p=fs(),f=so(),y=$b(n,{relative:c});return I.useCallback(b=>{if(uE(b,t)){b.preventDefault();let N=r!==void 0?r:wd(f)===wd(y);p(n,{replace:N,state:i,preventScrollReset:l,relative:c,viewTransition:d})}},[f,p,y,r,i,t,n,l,c,d])}new Date().toISOString(),new Date().toISOString();const is={id:"guest",name:"Guest",email:"",isMember:!1,membershipTier:"none",loyaltyPoints:0,affiliateCode:"",affiliateEarnings:0,wishlist:[],notifications:[],isAdmin:!1,socialRewards:{},shippingAddress:{street:"",suburb:"",city:"",province:"",postalCode:""}},yE=[{id:"s1",title:"Summer Tech Sale",products:["1761729812469"],discountPercentage:15,endsAt:new Date(Date.now()+864e5*2).toISOString(),image:"https://picsum.photos/800/400?random=20"}];var Hx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},vE=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const l=n[t++];e[r++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=n[t++],c=n[t++],d=n[t++],p=((i&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Yb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const l=n[i],c=i+1<n.length,d=c?n[i+1]:0,p=i+2<n.length,f=p?n[i+2]:0,y=l>>2,b=(l&3)<<4|d>>4;let N=(d&15)<<2|f>>6,E=f&63;p||(E=64,c||(N=64)),r.push(t[y],t[b],t[N],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Jb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):vE(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const l=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const b=i<n.length?t[n.charAt(i)]:64;if(++i,l==null||d==null||f==null||b==null)throw new bE;const N=l<<2|d>>4;if(r.push(N),f!==64){const E=d<<4&240|f>>2;if(r.push(E),b!==64){const j=f<<6&192|b;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class bE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wE=function(n){const e=Jb(n);return Yb.encodeByteArray(e,!0)},_d=function(n){return wE(n).replace(/\./g,"")},Qb=function(n){try{return Yb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=()=>_E().__FIREBASE_DEFAULTS__,SE=()=>{if(typeof process>"u"||typeof Hx>"u")return;const n=Hx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},EE=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Qb(n[1]);return e&&JSON.parse(e)},Kd=()=>{try{return NE()||SE()||EE()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Xb=n=>{var e,t;return(t=(e=Kd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Zb=n=>{const e=Xb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},ew=()=>{var n;return(n=Kd())===null||n===void 0?void 0:n.config},tw=n=>{var e;return(e=Kd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[_d(JSON.stringify(t)),_d(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function TE(){var n;const e=(n=Kd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jE(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function IE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function AE(){const n=Jn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function RE(){return!TE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ME(){try{return typeof indexedDB=="object"}catch{return!1}}function DE(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var l;e(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="FirebaseError";class Ms extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=LE,Object.setPrototypeOf(this,Ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nc.prototype.create)}}class Nc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,l=this.errors[e],c=l?VE(l,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new Ms(i,d,r)}}function VE(n,e){return n.replace(OE,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const OE=/\{\$([^}]+)}/g;function FE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ic(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const l=n[i],c=e[i];if(Gx(l)&&Gx(c)){if(!ic(l,c))return!1}else if(l!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Gx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ql(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,l]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(l)}}),e}function $l(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function zE(n,e){const t=new UE(n,e);return t.subscribe.bind(t)}class UE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");BE(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=tp),i.error===void 0&&(i.error=tp),i.complete===void 0&&(i.complete=tp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BE(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(n){return n&&n._delegate?n._delegate:n}class Qi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new CE;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HE(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:i});r.resolve(l)}catch{}}}}clearInstance(e=Ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ao){return this.instances.has(e)}getOptions(e=Ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&e(c,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$E(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ao){return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $E(n){return n===Ao?void 0:n}function HE(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(mt||(mt={}));const WE={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},KE=mt.INFO,JE={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},YE=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=JE[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dm{constructor(e){this.name=e,this._logLevel=KE,this._logHandler=YE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}}const QE=(n,e)=>e.some(t=>n instanceof t);let Wx,Kx;function XE(){return Wx||(Wx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZE(){return Kx||(Kx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rw=new WeakMap,Np=new WeakMap,sw=new WeakMap,np=new WeakMap,hm=new WeakMap;function e2(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Wi(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&rw.set(t,n)}).catch(()=>{}),hm.set(e,n),e}function t2(n){if(Np.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Np.set(n,e)}let Sp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Np.get(n);if(e==="objectStoreNames")return n.objectStoreNames||sw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function n2(n){Sp=n(Sp)}function r2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(rp(this),e,...t);return sw.set(r,e.sort?e.sort():[e]),Wi(r)}:ZE().includes(n)?function(...e){return n.apply(rp(this),e),Wi(rw.get(this))}:function(...e){return Wi(n.apply(rp(this),e))}}function s2(n){return typeof n=="function"?r2(n):(n instanceof IDBTransaction&&t2(n),QE(n,XE())?new Proxy(n,Sp):n)}function Wi(n){if(n instanceof IDBRequest)return e2(n);if(np.has(n))return np.get(n);const e=s2(n);return e!==n&&(np.set(n,e),hm.set(e,n)),e}const rp=n=>hm.get(n);function i2(n,e,{blocked:t,upgrade:r,blocking:i,terminated:l}={}){const c=indexedDB.open(n,e),d=Wi(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Wi(c.result),p.oldVersion,p.newVersion,Wi(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),i&&p.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const o2=["get","getKey","getAll","getAllKeys","count"],a2=["put","add","delete","clear"],sp=new Map;function Jx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sp.get(e))return sp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=a2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||o2.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,i?"readwrite":"readonly");let f=p.store;return r&&(f=f.index(d.shift())),(await Promise.all([f[t](...d),i&&p.done]))[0]};return sp.set(e,l),l}n2(n=>({...n,get:(e,t,r)=>Jx(e,t)||n.get(e,t,r),has:(e,t)=>!!Jx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function c2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ep="@firebase/app",Yx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui=new dm("@firebase/app"),u2="@firebase/app-compat",d2="@firebase/analytics-compat",h2="@firebase/analytics",f2="@firebase/app-check-compat",p2="@firebase/app-check",m2="@firebase/auth",g2="@firebase/auth-compat",x2="@firebase/database",y2="@firebase/data-connect",v2="@firebase/database-compat",b2="@firebase/functions",w2="@firebase/functions-compat",_2="@firebase/installations",N2="@firebase/installations-compat",S2="@firebase/messaging",E2="@firebase/messaging-compat",C2="@firebase/performance",k2="@firebase/performance-compat",T2="@firebase/remote-config",P2="@firebase/remote-config-compat",j2="@firebase/storage",I2="@firebase/storage-compat",A2="@firebase/firestore",R2="@firebase/vertexai-preview",M2="@firebase/firestore-compat",D2="firebase",L2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp="[DEFAULT]",V2={[Ep]:"fire-core",[u2]:"fire-core-compat",[h2]:"fire-analytics",[d2]:"fire-analytics-compat",[p2]:"fire-app-check",[f2]:"fire-app-check-compat",[m2]:"fire-auth",[g2]:"fire-auth-compat",[x2]:"fire-rtdb",[y2]:"fire-data-connect",[v2]:"fire-rtdb-compat",[b2]:"fire-fn",[w2]:"fire-fn-compat",[_2]:"fire-iid",[N2]:"fire-iid-compat",[S2]:"fire-fcm",[E2]:"fire-fcm-compat",[C2]:"fire-perf",[k2]:"fire-perf-compat",[T2]:"fire-rc",[P2]:"fire-rc-compat",[j2]:"fire-gcs",[I2]:"fire-gcs-compat",[A2]:"fire-fst",[M2]:"fire-fst-compat",[R2]:"fire-vertex","fire-js":"fire-js",[D2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nd=new Map,O2=new Map,kp=new Map;function Qx(n,e){try{n.container.addComponent(e)}catch(t){ui.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fo(n){const e=n.name;if(kp.has(e))return ui.debug(`There were multiple attempts to register component ${e}.`),!1;kp.set(e,n);for(const t of Nd.values())Qx(t,n);for(const t of O2.values())Qx(t,n);return!0}function Jd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ti(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ki=new Nc("app","Firebase",F2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=L2;function iw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ki.create("bad-app-name",{appName:String(i)});if(t||(t=ew()),!t)throw Ki.create("no-options");const l=Nd.get(i);if(l){if(ic(t,l.options)&&ic(r,l.config))return l;throw Ki.create("duplicate-app",{appName:i})}const c=new GE(i);for(const p of kp.values())c.addComponent(p);const d=new z2(t,r,c);return Nd.set(i,d),d}function fm(n=Cp){const e=Nd.get(n);if(!e&&n===Cp&&ew())return iw();if(!e)throw Ki.create("no-app",{appName:n});return e}function Cs(n,e,t){var r;let i=(r=V2[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const l=i.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ui.warn(d.join(" "));return}Fo(new Qi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="firebase-heartbeat-database",B2=1,oc="firebase-heartbeat-store";let ip=null;function ow(){return ip||(ip=i2(U2,B2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(oc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ki.create("idb-open",{originalErrorMessage:n.message})})),ip}async function q2(n){try{const t=(await ow()).transaction(oc),r=await t.objectStore(oc).get(aw(n));return await t.done,r}catch(e){if(e instanceof Ms)ui.warn(e.message);else{const t=Ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ui.warn(t.message)}}}async function Xx(n,e){try{const r=(await ow()).transaction(oc,"readwrite");await r.objectStore(oc).put(e,aw(n)),await r.done}catch(t){if(t instanceof Ms)ui.warn(t.message);else{const r=Ki.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ui.warn(r.message)}}}function aw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=1024,H2=720*60*60*1e3;class G2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new K2(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Zx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=H2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ui.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zx(),{heartbeatsToSend:r,unsentEntries:i}=W2(this._heartbeatsCache.heartbeats),l=_d(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ui.warn(t),""}}}function Zx(){return new Date().toISOString().substring(0,10)}function W2(n,e=$2){const t=[];let r=n.slice();for(const i of n){const l=t.find(c=>c.agent===i.agent);if(l){if(l.dates.push(i.date),ey(t)>e){l.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ey(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class K2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ME()?DE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await q2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xx(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ey(n){return _d(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(n){Fo(new Qi("platform-logger",e=>new l2(e),"PRIVATE")),Fo(new Qi("heartbeat",e=>new G2(e),"PRIVATE")),Cs(Ep,Yx,n),Cs(Ep,Yx,"esm2017"),Cs("fire-js","")}J2("");var Y2="firebase",Q2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(Y2,Q2,"app");var ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vo,lw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,A){function L(){}L.prototype=A.prototype,F.D=A.prototype,F.prototype=new L,F.prototype.constructor=F,F.C=function(V,T,O){for(var D=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)D[ve-2]=arguments[ve];return A.prototype[T].apply(V,D)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(F,A,L){L||(L=0);var V=Array(16);if(typeof A=="string")for(var T=0;16>T;++T)V[T]=A.charCodeAt(L++)|A.charCodeAt(L++)<<8|A.charCodeAt(L++)<<16|A.charCodeAt(L++)<<24;else for(T=0;16>T;++T)V[T]=A[L++]|A[L++]<<8|A[L++]<<16|A[L++]<<24;A=F.g[0],L=F.g[1],T=F.g[2];var O=F.g[3],D=A+(O^L&(T^O))+V[0]+3614090360&4294967295;A=L+(D<<7&4294967295|D>>>25),D=O+(T^A&(L^T))+V[1]+3905402710&4294967295,O=A+(D<<12&4294967295|D>>>20),D=T+(L^O&(A^L))+V[2]+606105819&4294967295,T=O+(D<<17&4294967295|D>>>15),D=L+(A^T&(O^A))+V[3]+3250441966&4294967295,L=T+(D<<22&4294967295|D>>>10),D=A+(O^L&(T^O))+V[4]+4118548399&4294967295,A=L+(D<<7&4294967295|D>>>25),D=O+(T^A&(L^T))+V[5]+1200080426&4294967295,O=A+(D<<12&4294967295|D>>>20),D=T+(L^O&(A^L))+V[6]+2821735955&4294967295,T=O+(D<<17&4294967295|D>>>15),D=L+(A^T&(O^A))+V[7]+4249261313&4294967295,L=T+(D<<22&4294967295|D>>>10),D=A+(O^L&(T^O))+V[8]+1770035416&4294967295,A=L+(D<<7&4294967295|D>>>25),D=O+(T^A&(L^T))+V[9]+2336552879&4294967295,O=A+(D<<12&4294967295|D>>>20),D=T+(L^O&(A^L))+V[10]+4294925233&4294967295,T=O+(D<<17&4294967295|D>>>15),D=L+(A^T&(O^A))+V[11]+2304563134&4294967295,L=T+(D<<22&4294967295|D>>>10),D=A+(O^L&(T^O))+V[12]+1804603682&4294967295,A=L+(D<<7&4294967295|D>>>25),D=O+(T^A&(L^T))+V[13]+4254626195&4294967295,O=A+(D<<12&4294967295|D>>>20),D=T+(L^O&(A^L))+V[14]+2792965006&4294967295,T=O+(D<<17&4294967295|D>>>15),D=L+(A^T&(O^A))+V[15]+1236535329&4294967295,L=T+(D<<22&4294967295|D>>>10),D=A+(T^O&(L^T))+V[1]+4129170786&4294967295,A=L+(D<<5&4294967295|D>>>27),D=O+(L^T&(A^L))+V[6]+3225465664&4294967295,O=A+(D<<9&4294967295|D>>>23),D=T+(A^L&(O^A))+V[11]+643717713&4294967295,T=O+(D<<14&4294967295|D>>>18),D=L+(O^A&(T^O))+V[0]+3921069994&4294967295,L=T+(D<<20&4294967295|D>>>12),D=A+(T^O&(L^T))+V[5]+3593408605&4294967295,A=L+(D<<5&4294967295|D>>>27),D=O+(L^T&(A^L))+V[10]+38016083&4294967295,O=A+(D<<9&4294967295|D>>>23),D=T+(A^L&(O^A))+V[15]+3634488961&4294967295,T=O+(D<<14&4294967295|D>>>18),D=L+(O^A&(T^O))+V[4]+3889429448&4294967295,L=T+(D<<20&4294967295|D>>>12),D=A+(T^O&(L^T))+V[9]+568446438&4294967295,A=L+(D<<5&4294967295|D>>>27),D=O+(L^T&(A^L))+V[14]+3275163606&4294967295,O=A+(D<<9&4294967295|D>>>23),D=T+(A^L&(O^A))+V[3]+4107603335&4294967295,T=O+(D<<14&4294967295|D>>>18),D=L+(O^A&(T^O))+V[8]+1163531501&4294967295,L=T+(D<<20&4294967295|D>>>12),D=A+(T^O&(L^T))+V[13]+2850285829&4294967295,A=L+(D<<5&4294967295|D>>>27),D=O+(L^T&(A^L))+V[2]+4243563512&4294967295,O=A+(D<<9&4294967295|D>>>23),D=T+(A^L&(O^A))+V[7]+1735328473&4294967295,T=O+(D<<14&4294967295|D>>>18),D=L+(O^A&(T^O))+V[12]+2368359562&4294967295,L=T+(D<<20&4294967295|D>>>12),D=A+(L^T^O)+V[5]+4294588738&4294967295,A=L+(D<<4&4294967295|D>>>28),D=O+(A^L^T)+V[8]+2272392833&4294967295,O=A+(D<<11&4294967295|D>>>21),D=T+(O^A^L)+V[11]+1839030562&4294967295,T=O+(D<<16&4294967295|D>>>16),D=L+(T^O^A)+V[14]+4259657740&4294967295,L=T+(D<<23&4294967295|D>>>9),D=A+(L^T^O)+V[1]+2763975236&4294967295,A=L+(D<<4&4294967295|D>>>28),D=O+(A^L^T)+V[4]+1272893353&4294967295,O=A+(D<<11&4294967295|D>>>21),D=T+(O^A^L)+V[7]+4139469664&4294967295,T=O+(D<<16&4294967295|D>>>16),D=L+(T^O^A)+V[10]+3200236656&4294967295,L=T+(D<<23&4294967295|D>>>9),D=A+(L^T^O)+V[13]+681279174&4294967295,A=L+(D<<4&4294967295|D>>>28),D=O+(A^L^T)+V[0]+3936430074&4294967295,O=A+(D<<11&4294967295|D>>>21),D=T+(O^A^L)+V[3]+3572445317&4294967295,T=O+(D<<16&4294967295|D>>>16),D=L+(T^O^A)+V[6]+76029189&4294967295,L=T+(D<<23&4294967295|D>>>9),D=A+(L^T^O)+V[9]+3654602809&4294967295,A=L+(D<<4&4294967295|D>>>28),D=O+(A^L^T)+V[12]+3873151461&4294967295,O=A+(D<<11&4294967295|D>>>21),D=T+(O^A^L)+V[15]+530742520&4294967295,T=O+(D<<16&4294967295|D>>>16),D=L+(T^O^A)+V[2]+3299628645&4294967295,L=T+(D<<23&4294967295|D>>>9),D=A+(T^(L|~O))+V[0]+4096336452&4294967295,A=L+(D<<6&4294967295|D>>>26),D=O+(L^(A|~T))+V[7]+1126891415&4294967295,O=A+(D<<10&4294967295|D>>>22),D=T+(A^(O|~L))+V[14]+2878612391&4294967295,T=O+(D<<15&4294967295|D>>>17),D=L+(O^(T|~A))+V[5]+4237533241&4294967295,L=T+(D<<21&4294967295|D>>>11),D=A+(T^(L|~O))+V[12]+1700485571&4294967295,A=L+(D<<6&4294967295|D>>>26),D=O+(L^(A|~T))+V[3]+2399980690&4294967295,O=A+(D<<10&4294967295|D>>>22),D=T+(A^(O|~L))+V[10]+4293915773&4294967295,T=O+(D<<15&4294967295|D>>>17),D=L+(O^(T|~A))+V[1]+2240044497&4294967295,L=T+(D<<21&4294967295|D>>>11),D=A+(T^(L|~O))+V[8]+1873313359&4294967295,A=L+(D<<6&4294967295|D>>>26),D=O+(L^(A|~T))+V[15]+4264355552&4294967295,O=A+(D<<10&4294967295|D>>>22),D=T+(A^(O|~L))+V[6]+2734768916&4294967295,T=O+(D<<15&4294967295|D>>>17),D=L+(O^(T|~A))+V[13]+1309151649&4294967295,L=T+(D<<21&4294967295|D>>>11),D=A+(T^(L|~O))+V[4]+4149444226&4294967295,A=L+(D<<6&4294967295|D>>>26),D=O+(L^(A|~T))+V[11]+3174756917&4294967295,O=A+(D<<10&4294967295|D>>>22),D=T+(A^(O|~L))+V[2]+718787259&4294967295,T=O+(D<<15&4294967295|D>>>17),D=L+(O^(T|~A))+V[9]+3951481745&4294967295,F.g[0]=F.g[0]+A&4294967295,F.g[1]=F.g[1]+(T+(D<<21&4294967295|D>>>11))&4294967295,F.g[2]=F.g[2]+T&4294967295,F.g[3]=F.g[3]+O&4294967295}r.prototype.u=function(F,A){A===void 0&&(A=F.length);for(var L=A-this.blockSize,V=this.B,T=this.h,O=0;O<A;){if(T==0)for(;O<=L;)i(this,F,O),O+=this.blockSize;if(typeof F=="string"){for(;O<A;)if(V[T++]=F.charCodeAt(O++),T==this.blockSize){i(this,V),T=0;break}}else for(;O<A;)if(V[T++]=F[O++],T==this.blockSize){i(this,V),T=0;break}}this.h=T,this.o+=A},r.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var A=1;A<F.length-8;++A)F[A]=0;var L=8*this.o;for(A=F.length-8;A<F.length;++A)F[A]=L&255,L/=256;for(this.u(F),F=Array(16),A=L=0;4>A;++A)for(var V=0;32>V;V+=8)F[L++]=this.g[A]>>>V&255;return F};function l(F,A){var L=d;return Object.prototype.hasOwnProperty.call(L,F)?L[F]:L[F]=A(F)}function c(F,A){this.h=A;for(var L=[],V=!0,T=F.length-1;0<=T;T--){var O=F[T]|0;V&&O==A||(L[T]=O,V=!1)}this.g=L}var d={};function p(F){return-128<=F&&128>F?l(F,function(A){return new c([A|0],0>A?-1:0)}):new c([F|0],0>F?-1:0)}function f(F){if(isNaN(F)||!isFinite(F))return b;if(0>F)return P(f(-F));for(var A=[],L=1,V=0;F>=L;V++)A[V]=F/L|0,L*=4294967296;return new c(A,0)}function y(F,A){if(F.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(F.charAt(0)=="-")return P(y(F.substring(1),A));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=f(Math.pow(A,8)),V=b,T=0;T<F.length;T+=8){var O=Math.min(8,F.length-T),D=parseInt(F.substring(T,T+O),A);8>O?(O=f(Math.pow(A,O)),V=V.j(O).add(f(D))):(V=V.j(L),V=V.add(f(D)))}return V}var b=p(0),N=p(1),E=p(16777216);n=c.prototype,n.m=function(){if(k(this))return-P(this).m();for(var F=0,A=1,L=0;L<this.g.length;L++){var V=this.i(L);F+=(0<=V?V:4294967296+V)*A,A*=4294967296}return F},n.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(j(this))return"0";if(k(this))return"-"+P(this).toString(F);for(var A=f(Math.pow(F,6)),L=this,V="";;){var T=se(L,A).g;L=$(L,T.j(A));var O=((0<L.g.length?L.g[0]:L.h)>>>0).toString(F);if(L=T,j(L))return O+V;for(;6>O.length;)O="0"+O;V=O+V}},n.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function j(F){if(F.h!=0)return!1;for(var A=0;A<F.g.length;A++)if(F.g[A]!=0)return!1;return!0}function k(F){return F.h==-1}n.l=function(F){return F=$(this,F),k(F)?-1:j(F)?0:1};function P(F){for(var A=F.g.length,L=[],V=0;V<A;V++)L[V]=~F.g[V];return new c(L,~F.h).add(N)}n.abs=function(){return k(this)?P(this):this},n.add=function(F){for(var A=Math.max(this.g.length,F.g.length),L=[],V=0,T=0;T<=A;T++){var O=V+(this.i(T)&65535)+(F.i(T)&65535),D=(O>>>16)+(this.i(T)>>>16)+(F.i(T)>>>16);V=D>>>16,O&=65535,D&=65535,L[T]=D<<16|O}return new c(L,L[L.length-1]&-2147483648?-1:0)};function $(F,A){return F.add(P(A))}n.j=function(F){if(j(this)||j(F))return b;if(k(this))return k(F)?P(this).j(P(F)):P(P(this).j(F));if(k(F))return P(this.j(P(F)));if(0>this.l(E)&&0>F.l(E))return f(this.m()*F.m());for(var A=this.g.length+F.g.length,L=[],V=0;V<2*A;V++)L[V]=0;for(V=0;V<this.g.length;V++)for(var T=0;T<F.g.length;T++){var O=this.i(V)>>>16,D=this.i(V)&65535,ve=F.i(T)>>>16,Ue=F.i(T)&65535;L[2*V+2*T]+=D*Ue,q(L,2*V+2*T),L[2*V+2*T+1]+=O*Ue,q(L,2*V+2*T+1),L[2*V+2*T+1]+=D*ve,q(L,2*V+2*T+1),L[2*V+2*T+2]+=O*ve,q(L,2*V+2*T+2)}for(V=0;V<A;V++)L[V]=L[2*V+1]<<16|L[2*V];for(V=A;V<2*A;V++)L[V]=0;return new c(L,0)};function q(F,A){for(;(F[A]&65535)!=F[A];)F[A+1]+=F[A]>>>16,F[A]&=65535,A++}function J(F,A){this.g=F,this.h=A}function se(F,A){if(j(A))throw Error("division by zero");if(j(F))return new J(b,b);if(k(F))return A=se(P(F),A),new J(P(A.g),P(A.h));if(k(A))return A=se(F,P(A)),new J(P(A.g),A.h);if(30<F.g.length){if(k(F)||k(A))throw Error("slowDivide_ only works with positive integers.");for(var L=N,V=A;0>=V.l(F);)L=he(L),V=he(V);var T=K(L,1),O=K(V,1);for(V=K(V,2),L=K(L,2);!j(V);){var D=O.add(V);0>=D.l(F)&&(T=T.add(L),O=D),V=K(V,1),L=K(L,1)}return A=$(F,T.j(A)),new J(T,A)}for(T=b;0<=F.l(A);){for(L=Math.max(1,Math.floor(F.m()/A.m())),V=Math.ceil(Math.log(L)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),O=f(L),D=O.j(A);k(D)||0<D.l(F);)L-=V,O=f(L),D=O.j(A);j(O)&&(O=N),T=T.add(O),F=$(F,D)}return new J(T,F)}n.A=function(F){return se(this,F).h},n.and=function(F){for(var A=Math.max(this.g.length,F.g.length),L=[],V=0;V<A;V++)L[V]=this.i(V)&F.i(V);return new c(L,this.h&F.h)},n.or=function(F){for(var A=Math.max(this.g.length,F.g.length),L=[],V=0;V<A;V++)L[V]=this.i(V)|F.i(V);return new c(L,this.h|F.h)},n.xor=function(F){for(var A=Math.max(this.g.length,F.g.length),L=[],V=0;V<A;V++)L[V]=this.i(V)^F.i(V);return new c(L,this.h^F.h)};function he(F){for(var A=F.g.length+1,L=[],V=0;V<A;V++)L[V]=F.i(V)<<1|F.i(V-1)>>>31;return new c(L,F.h)}function K(F,A){var L=A>>5;A%=32;for(var V=F.g.length-L,T=[],O=0;O<V;O++)T[O]=0<A?F.i(O+L)>>>A|F.i(O+L+1)<<32-A:F.i(O+L);return new c(T,F.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lw=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=y,Vo=c}).apply(typeof ty<"u"?ty:typeof self<"u"?self:typeof window<"u"?window:{});var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cw,Hl,uw,ad,Tp,dw,hw,fw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,w,S){return h==Array.prototype||h==Object.prototype||(h[w]=S.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var w=0;w<h.length;++w){var S=h[w];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function i(h,w){if(w)e:{var S=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var te=h[R];if(!(te in S))break e;S=S[te]}h=h[h.length-1],R=S[h],w=w(R),w!=R&&w!=null&&e(S,h,{configurable:!0,writable:!0,value:w})}}function l(h,w){h instanceof String&&(h+="");var S=0,R=!1,te={next:function(){if(!R&&S<h.length){var ae=S++;return{value:w(ae,h[ae]),done:!1}}return R=!0,{done:!0,value:void 0}}};return te[Symbol.iterator]=function(){return te},te}i("Array.prototype.values",function(h){return h||function(){return l(this,function(w,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(h){var w=typeof h;return w=w!="object"?w:h?Array.isArray(h)?"array":w:"null",w=="array"||w=="object"&&typeof h.length=="number"}function f(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function y(h,w,S){return h.call.apply(h.bind,arguments)}function b(h,w,S){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(te,R),h.apply(w,te)}}return function(){return h.apply(w,arguments)}}function N(h,w,S){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:b,N.apply(null,arguments)}function E(h,w){var S=Array.prototype.slice.call(arguments,1);return function(){var R=S.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function j(h,w){function S(){}S.prototype=w.prototype,h.aa=w.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(R,te,ae){for(var Se=Array(arguments.length-2),St=2;St<arguments.length;St++)Se[St-2]=arguments[St];return w.prototype[te].apply(R,Se)}}function k(h){const w=h.length;if(0<w){const S=Array(w);for(let R=0;R<w;R++)S[R]=h[R];return S}return[]}function P(h,w){for(let S=1;S<arguments.length;S++){const R=arguments[S];if(p(R)){const te=h.length||0,ae=R.length||0;h.length=te+ae;for(let Se=0;Se<ae;Se++)h[te+Se]=R[Se]}else h.push(R)}}class ${constructor(w,S){this.i=w,this.j=S,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function q(h){return/^[\s\xa0]*$/.test(h)}function J(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function se(h){return se[" "](h),h}se[" "]=function(){};var he=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function K(h,w,S){for(const R in h)w.call(S,h[R],R,h)}function F(h,w){for(const S in h)w.call(void 0,h[S],S,h)}function A(h){const w={};for(const S in h)w[S]=h[S];return w}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,w){let S,R;for(let te=1;te<arguments.length;te++){R=arguments[te];for(S in R)h[S]=R[S];for(let ae=0;ae<L.length;ae++)S=L[ae],Object.prototype.hasOwnProperty.call(R,S)&&(h[S]=R[S])}}function T(h){var w=1;h=h.split(":");const S=[];for(;0<w&&h.length;)S.push(h.shift()),w--;return h.length&&S.push(h.join(":")),S}function O(h){d.setTimeout(()=>{throw h},0)}function D(){var h=we;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class ve{constructor(){this.h=this.g=null}add(w,S){const R=Ue.get();R.set(w,S),this.h?this.h.next=R:this.g=R,this.h=R}}var Ue=new $(()=>new ke,h=>h.reset());class ke{constructor(){this.next=this.g=this.h=null}set(w,S){this.h=w,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let je,z=!1,we=new ve,W=()=>{const h=d.Promise.resolve(void 0);je=()=>{h.then(B)}};var B=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(S){O(S)}var w=Ue;w.j(h),100>w.h&&(w.h++,h.next=w.g,w.g=h)}z=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ee(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}ee.prototype.h=function(){this.defaultPrevented=!0};var de=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};d.addEventListener("test",S,w),d.removeEventListener("test",S,w)}catch{}return h})();function Ie(h,w){if(ee.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget){if(he){e:{try{se(w.nodeName);var te=!0;break e}catch{}te=!1}te||(w=null)}}else S=="mouseover"?w=h.fromElement:S=="mouseout"&&(w=h.toElement);this.relatedTarget=w,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:H[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ie.aa.h.call(this)}}j(Ie,ee);var H={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function Ye(h,w,S,R,te){this.listener=h,this.proxy=null,this.src=w,this.type=S,this.capture=!!R,this.ha=te,this.key=++Ze,this.da=this.fa=!1}function et(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Tt(h){this.src=h,this.g={},this.h=0}Tt.prototype.add=function(h,w,S,R,te){var ae=h.toString();h=this.g[ae],h||(h=this.g[ae]=[],this.h++);var Se=ct(h,w,R,te);return-1<Se?(w=h[Se],S||(w.fa=!1)):(w=new Ye(w,this.src,ae,!!R,te),w.fa=S,h.push(w)),w};function Ct(h,w){var S=w.type;if(S in h.g){var R=h.g[S],te=Array.prototype.indexOf.call(R,w,void 0),ae;(ae=0<=te)&&Array.prototype.splice.call(R,te,1),ae&&(et(w),h.g[S].length==0&&(delete h.g[S],h.h--))}}function ct(h,w,S,R){for(var te=0;te<h.length;++te){var ae=h[te];if(!ae.da&&ae.listener==w&&ae.capture==!!S&&ae.ha==R)return te}return-1}var Te="closure_lm_"+(1e6*Math.random()|0),ut={};function Lt(h,w,S,R,te){if(Array.isArray(w)){for(var ae=0;ae<w.length;ae++)Lt(h,w[ae],S,R,te);return null}return S=Nn(S),h&&h[fe]?h.K(w,S,f(R)?!!R.capture:!1,te):Vt(h,w,S,!1,R,te)}function Vt(h,w,S,R,te,ae){if(!w)throw Error("Invalid event type");var Se=f(te)?!!te.capture:!!te,St=rr(h);if(St||(h[Te]=St=new Tt(h)),S=St.add(w,S,R,Se,ae),S.proxy)return S;if(R=_n(),S.proxy=R,R.src=h,R.listener=S,h.addEventListener)de||(te=Se),te===void 0&&(te=!1),h.addEventListener(w.toString(),R,te);else if(h.attachEvent)h.attachEvent(Jt(w.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return S}function _n(){function h(S){return w.call(h.src,h.listener,S)}const w=On;return h}function qt(h,w,S,R,te){if(Array.isArray(w))for(var ae=0;ae<w.length;ae++)qt(h,w[ae],S,R,te);else R=f(R)?!!R.capture:!!R,S=Nn(S),h&&h[fe]?(h=h.i,w=String(w).toString(),w in h.g&&(ae=h.g[w],S=ct(ae,S,R,te),-1<S&&(et(ae[S]),Array.prototype.splice.call(ae,S,1),ae.length==0&&(delete h.g[w],h.h--)))):h&&(h=rr(h))&&(w=h.g[w.toString()],h=-1,w&&(h=ct(w,S,R,te)),(S=-1<h?w[h]:null)&&Ce(S))}function Ce(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[fe])Ct(w.i,h);else{var S=h.type,R=h.proxy;w.removeEventListener?w.removeEventListener(S,R,h.capture):w.detachEvent?w.detachEvent(Jt(S),R):w.addListener&&w.removeListener&&w.removeListener(R),(S=rr(w))?(Ct(S,h),S.h==0&&(S.src=null,w[Te]=null)):et(h)}}}function Jt(h){return h in ut?ut[h]:ut[h]="on"+h}function On(h,w){if(h.da)h=!0;else{w=new Ie(w,this);var S=h.listener,R=h.ha||h.src;h.fa&&Ce(h),h=S.call(R,w)}return h}function rr(h){return h=h[Te],h instanceof Tt?h:null}var xr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nn(h){return typeof h=="function"?h:(h[xr]||(h[xr]=function(w){return h.handleEvent(w)}),h[xr])}function Pt(){Z.call(this),this.i=new Tt(this),this.M=this,this.F=null}j(Pt,Z),Pt.prototype[fe]=!0,Pt.prototype.removeEventListener=function(h,w,S,R){qt(this,h,w,S,R)};function Ot(h,w){var S,R=h.F;if(R)for(S=[];R;R=R.F)S.push(R);if(h=h.M,R=w.type||w,typeof w=="string")w=new ee(w,h);else if(w instanceof ee)w.target=w.target||h;else{var te=w;w=new ee(R,h),V(w,te)}if(te=!0,S)for(var ae=S.length-1;0<=ae;ae--){var Se=w.g=S[ae];te=fn(Se,R,!0,w)&&te}if(Se=w.g=h,te=fn(Se,R,!0,w)&&te,te=fn(Se,R,!1,w)&&te,S)for(ae=0;ae<S.length;ae++)Se=w.g=S[ae],te=fn(Se,R,!1,w)&&te}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var h=this.i,w;for(w in h.g){for(var S=h.g[w],R=0;R<S.length;R++)et(S[R]);delete h.g[w],h.h--}}this.F=null},Pt.prototype.K=function(h,w,S,R){return this.i.add(String(h),w,!1,S,R)},Pt.prototype.L=function(h,w,S,R){return this.i.add(String(h),w,!0,S,R)};function fn(h,w,S,R){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();for(var te=!0,ae=0;ae<w.length;++ae){var Se=w[ae];if(Se&&!Se.da&&Se.capture==S){var St=Se.listener,gn=Se.ha||Se.src;Se.fa&&Ct(h.i,Se),te=St.call(gn,R)!==!1&&te}}return te&&!R.defaultPrevented}function sr(h,w,S){if(typeof h=="function")S&&(h=N(h,S));else if(h&&typeof h.handleEvent=="function")h=N(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:d.setTimeout(h,w||0)}function Yn(h){h.g=sr(()=>{h.g=null,h.i&&(h.i=!1,Yn(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class me extends Z{constructor(w,S){super(),this.m=w,this.l=S,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Yn(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ge(h){Z.call(this),this.h=h,this.g={}}j(Ge,Z);var jt=[];function pn(h){K(h.g,function(w,S){this.g.hasOwnProperty(S)&&Ce(w)},h),h.g={}}Ge.prototype.N=function(){Ge.aa.N.call(this),pn(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pn=d.JSON.stringify,Ds=d.JSON.parse,Ls=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Ar(){}Ar.prototype.h=null;function ps(h){return h.h||(h.h=h.i())}function Hr(){}var Fn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qn(){ee.call(this,"d")}j(Qn,ee);function ms(){ee.call(this,"c")}j(ms,ee);var ir={},Vs=null;function Gr(){return Vs=Vs||new Pt}ir.La="serverreachability";function Wr(h){ee.call(this,ir.La,h)}j(Wr,ee);function yr(h){const w=Gr();Ot(w,new Wr(w))}ir.STAT_EVENT="statevent";function Os(h,w){ee.call(this,ir.STAT_EVENT,h),this.stat=w}j(Os,ee);function X(h){const w=Gr();Ot(w,new Os(w,h))}ir.Ma="timingevent";function Y(h,w){ee.call(this,ir.Ma,h),this.size=w}j(Y,ee);function re(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},w)}function ce(){this.g=!0}ce.prototype.xa=function(){this.g=!1};function Ne(h,w,S,R,te,ae){h.info(function(){if(h.g)if(ae)for(var Se="",St=ae.split("&"),gn=0;gn<St.length;gn++){var xt=St[gn].split("=");if(1<xt.length){var Sn=xt[0];xt=xt[1];var ln=Sn.split("_");Se=2<=ln.length&&ln[1]=="type"?Se+(Sn+"="+xt+"&"):Se+(Sn+"=redacted&")}}else Se=null;else Se=ae;return"XMLHTTP REQ ("+R+") [attempt "+te+"]: "+w+`
`+S+`
`+Se})}function We(h,w,S,R,te,ae,Se){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+te+"]: "+w+`
`+S+`
`+ae+" "+Se})}function Ke(h,w,S,R){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+ze(h,S)+(R?" "+R:"")})}function ht(h,w){h.info(function(){return"TIMEOUT: "+w})}ce.prototype.info=function(){};function ze(h,w){if(!h.g)return w;if(!w)return null;try{var S=JSON.parse(w);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var R=S[h];if(!(2>R.length)){var te=R[1];if(Array.isArray(te)&&!(1>te.length)){var ae=te[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var Se=1;Se<te.length;Se++)te[Se]=""}}}}return Pn(S)}catch{return w}}var Be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},st={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},it;function Nt(){}j(Nt,Ar),Nt.prototype.g=function(){return new XMLHttpRequest},Nt.prototype.i=function(){return{}},it=new Nt;function rn(h,w,S,R){this.j=h,this.i=w,this.l=S,this.R=R||1,this.U=new Ge(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rr}function Rr(){this.i=null,this.g="",this.h=!1}var vr={},M={};function le(h,w,S){h.L=1,h.v=vi(wr(w)),h.m=S,h.P=!0,Oe(h,null)}function Oe(h,w){h.F=Date.now(),ot(h),h.A=wr(h.v);var S=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),wi(S.i,"t",R),h.C=0,S=h.j.J,h.h=new Rr,h.g=Qc(h.j,S?w:null,!h.m),0<h.O&&(h.M=new me(N(h.Y,h,h.g),h.O)),w=h.U,S=h.g,R=h.ca;var te="readystatechange";Array.isArray(te)||(te&&(jt[0]=te.toString()),te=jt);for(var ae=0;ae<te.length;ae++){var Se=Lt(S,te[ae],R||w.handleEvent,!1,w.h||w);if(!Se)break;w.g[Se.key]=Se}w=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,w)):(h.u="GET",h.g.ea(h.A,h.u,null,w)),yr(),Ne(h.i,h.u,h.A,h.l,h.R,h.m)}rn.prototype.ca=function(h){h=h.target;const w=this.M;w&&ar(h)==3?w.j():this.Y(h)},rn.prototype.Y=function(h){try{if(h==this.g)e:{const ln=ar(this.g);var w=this.g.Ba();const Lr=this.g.Z();if(!(3>ln)&&(ln!=3||this.g&&(this.h.h||this.g.oa()||hl(this.g)))){this.J||ln!=4||w==7||(w==8||0>=Lr?yr(3):yr(2)),mn(this);var S=this.g.Z();this.X=S;t:if(ft(this)){var R=hl(this.g);h="";var te=R.length,ae=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mr(this),Fs(this);var Se="";break t}this.h.i=new d.TextDecoder}for(w=0;w<te;w++)this.h.h=!0,h+=this.h.i.decode(R[w],{stream:!(ae&&w==te-1)});R.length=0,this.h.g+=h,this.C=0,Se=this.h.g}else Se=this.g.oa();if(this.o=S==200,We(this.i,this.u,this.A,this.l,this.R,ln,S),this.o){if(this.T&&!this.K){t:{if(this.g){var St,gn=this.g;if((St=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(St)){var xt=St;break t}}xt=null}if(S=xt)Ke(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,al(this,S);else{this.o=!1,this.s=3,X(12),Mr(this),Fs(this);break e}}if(this.P){S=!0;let Nr;for(;!this.J&&this.C<Se.length;)if(Nr=at(this,Se),Nr==M){ln==4&&(this.s=4,X(14),S=!1),Ke(this.i,this.l,null,"[Incomplete Response]");break}else if(Nr==vr){this.s=4,X(15),Ke(this.i,this.l,Se,"[Invalid Chunk]"),S=!1;break}else Ke(this.i,this.l,Nr,null),al(this,Nr);if(ft(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ln!=4||Se.length!=0||this.h.h||(this.s=1,X(16),S=!1),this.o=this.o&&S,!S)Ke(this.i,this.l,Se,"[Invalid Chunked Response]"),Mr(this),Fs(this);else if(0<Se.length&&!this.W){this.W=!0;var Sn=this.j;Sn.g==this&&Sn.ba&&!Sn.M&&(Sn.j.info("Great, no buffering proxy detected. Bytes received: "+Se.length),pl(Sn),Sn.M=!0,X(11))}}else Ke(this.i,this.l,Se,null),al(this,Se);ln==4&&Mr(this),this.o&&!this.J&&(ln==4?aa(this.j,this):(this.o=!1,ot(this)))}else na(this.g),S==400&&0<Se.indexOf("Unknown SID")?(this.s=3,X(12)):(this.s=0,X(13)),Mr(this),Fs(this)}}}catch{}finally{}};function ft(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function at(h,w){var S=h.C,R=w.indexOf(`
`,S);return R==-1?M:(S=Number(w.substring(S,R)),isNaN(S)?vr:(R+=1,R+S>w.length?M:(w=w.slice(R,R+S),h.C=R+S,w)))}rn.prototype.cancel=function(){this.J=!0,Mr(this)};function ot(h){h.S=Date.now()+h.I,It(h,h.I)}function It(h,w){if(h.B!=null)throw Error("WatchDog timer not null");h.B=re(N(h.ba,h),w)}function mn(h){h.B&&(d.clearTimeout(h.B),h.B=null)}rn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(ht(this.i,this.A),this.L!=2&&(yr(),X(17)),Mr(this),this.s=2,Fs(this)):It(this,this.S-h)};function Fs(h){h.j.G==0||h.J||aa(h.j,h)}function Mr(h){mn(h);var w=h.M;w&&typeof w.ma=="function"&&w.ma(),h.M=null,pn(h.U),h.g&&(w=h.g,h.g=null,w.abort(),w.ma())}function al(h,w){try{var S=h.j;if(S.G!=0&&(S.g==h||Xn(S.h,h))){if(!h.K&&Xn(S.h,h)&&S.G==3){try{var R=S.Da.g.parse(w)}catch{R=null}if(Array.isArray(R)&&R.length==3){var te=R;if(te[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)oa(S),Xr(S);else break e;ia(S),X(18)}}else S.za=te[1],0<S.za-S.T&&37500>te[2]&&S.F&&S.v==0&&!S.C&&(S.C=re(N(S.Za,S),6e3));if(1>=Vc(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else $s(S,11)}else if((h.K||S.g==h)&&oa(S),!q(w))for(te=S.Da.g.parse(w),w=0;w<te.length;w++){let xt=te[w];if(S.T=xt[0],xt=xt[1],S.G==2)if(xt[0]=="c"){S.K=xt[1],S.ia=xt[2];const Sn=xt[3];Sn!=null&&(S.la=Sn,S.j.info("VER="+S.la));const ln=xt[4];ln!=null&&(S.Aa=ln,S.j.info("SVER="+S.Aa));const Lr=xt[5];Lr!=null&&typeof Lr=="number"&&0<Lr&&(R=1.5*Lr,S.L=R,S.j.info("backChannelRequestTimeoutMs_="+R)),R=S;const Nr=h.g;if(Nr){const yo=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yo){var ae=R.h;ae.g||yo.indexOf("spdy")==-1&&yo.indexOf("quic")==-1&&yo.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(ll(ae,ae.h),ae.h=null))}if(R.D){const ca=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;ca&&(R.ya=ca,kt(R.I,R.D,ca))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),R=S;var Se=h;if(R.qa=Yc(R,R.J?R.ia:null,R.W),Se.K){Oc(R.h,Se);var St=Se,gn=R.L;gn&&(St.I=gn),St.B&&(mn(St),ot(St)),R.g=Se}else xo(R);0<S.i.length&&vs(S)}else xt[0]!="stop"&&xt[0]!="close"||$s(S,7);else S.G==3&&(xt[0]=="stop"||xt[0]=="close"?xt[0]=="stop"?$s(S,7):In(S):xt[0]!="noop"&&S.l&&S.l.ta(xt),S.v=0)}}yr(4)}catch{}}var Lc=class{constructor(h,w){this.g=h,this.map=w}};function ho(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function br(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Vc(h){return h.h?1:h.g?h.g.size:0}function Xn(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function ll(h,w){h.g?h.g.add(w):h.h=w}function Oc(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}ho.prototype.cancel=function(){if(this.i=Fc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Fc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const S of h.g.values())w=w.concat(S.D);return w}return k(h.i)}function Qo(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var w=[],S=h.length,R=0;R<S;R++)w.push(h[R]);return w}w=[],S=0;for(R in h)w[S++]=h[R];return w}function Xo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var w=[];h=h.length;for(var S=0;S<h;S++)w.push(S);return w}w=[],S=0;for(const R in h)w[S++]=R;return w}}}function gi(h,w){if(h.forEach&&typeof h.forEach=="function")h.forEach(w,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,w,void 0);else for(var S=Xo(h),R=Qo(h),te=R.length,ae=0;ae<te;ae++)w.call(void 0,R[ae],S&&S[ae],h)}var fo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sh(h,w){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var R=h[S].indexOf("="),te=null;if(0<=R){var ae=h[S].substring(0,R);te=h[S].substring(R+1)}else ae=h[S];w(ae,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function zs(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof zs){this.h=h.h,po(this,h.j),this.o=h.o,this.g=h.g,xi(this,h.s),this.l=h.l;var w=h.i,S=new gs;S.i=w.i,w.g&&(S.g=new Map(w.g),S.h=w.h),yi(this,S),this.m=h.m}else h&&(w=String(h).match(fo))?(this.h=!1,po(this,w[1]||"",!0),this.o=pt(w[2]||""),this.g=pt(w[3]||"",!0),xi(this,w[4]),this.l=pt(w[5]||"",!0),yi(this,w[6]||"",!0),this.m=pt(w[7]||"")):(this.h=!1,this.i=new gs(null,this.h))}zs.prototype.toString=function(){var h=[],w=this.j;w&&h.push(bi(w,Zo,!0),":");var S=this.g;return(S||w=="file")&&(h.push("//"),(w=this.o)&&h.push(bi(w,Zo,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(bi(S,S.charAt(0)=="/"?Bc:Uc,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",bi(S,cl)),h.join("")};function wr(h){return new zs(h)}function po(h,w,S){h.j=S?pt(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function xi(h,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);h.s=w}else h.s=null}function yi(h,w,S){w instanceof gs?(h.i=w,xs(h.i,h.h)):(S||(w=bi(w,qc)),h.i=new gs(w,h.h))}function kt(h,w,S){h.i.set(w,S)}function vi(h){return kt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function pt(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function bi(h,w,S){return typeof h=="string"?(h=encodeURI(h).replace(w,zc),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function zc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Zo=/[#\/\?@]/g,Uc=/[#\?:]/g,Bc=/[#\?]/g,qc=/[#\?@]/g,cl=/#/g;function gs(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function jn(h){h.g||(h.g=new Map,h.h=0,h.i&&Sh(h.i,function(w,S){h.add(decodeURIComponent(w.replace(/\+/g," ")),S)}))}n=gs.prototype,n.add=function(h,w){jn(this),this.i=null,h=Dr(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(w),this.h+=1,this};function Kr(h,w){jn(h),w=Dr(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function Jr(h,w){return jn(h),w=Dr(h,w),h.g.has(w)}n.forEach=function(h,w){jn(this),this.g.forEach(function(S,R){S.forEach(function(te){h.call(w,te,R,this)},this)},this)},n.na=function(){jn(this);const h=Array.from(this.g.values()),w=Array.from(this.g.keys()),S=[];for(let R=0;R<w.length;R++){const te=h[R];for(let ae=0;ae<te.length;ae++)S.push(w[R])}return S},n.V=function(h){jn(this);let w=[];if(typeof h=="string")Jr(this,h)&&(w=w.concat(this.g.get(Dr(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)w=w.concat(h[S])}return w},n.set=function(h,w){return jn(this),this.i=null,h=Dr(this,h),Jr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},n.get=function(h,w){return h?(h=this.V(h),0<h.length?String(h[0]):w):w};function wi(h,w,S){Kr(h,w),0<S.length&&(h.i=null,h.g.set(Dr(h,w),k(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(var S=0;S<w.length;S++){var R=w[S];const ae=encodeURIComponent(String(R)),Se=this.V(R);for(R=0;R<Se.length;R++){var te=ae;Se[R]!==""&&(te+="="+encodeURIComponent(String(Se[R]))),h.push(te)}}return this.i=h.join("&")};function Dr(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function xs(h,w){w&&!h.j&&(jn(h),h.i=null,h.g.forEach(function(S,R){var te=R.toLowerCase();R!=te&&(Kr(this,R),wi(this,te,S))},h)),h.j=w}function Eh(h,w){const S=new ce;if(d.Image){const R=new Image;R.onload=E(or,S,"TestLoadImage: loaded",!0,w,R),R.onerror=E(or,S,"TestLoadImage: error",!1,w,R),R.onabort=E(or,S,"TestLoadImage: abort",!1,w,R),R.ontimeout=E(or,S,"TestLoadImage: timeout",!1,w,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else w(!1)}function $c(h,w){const S=new ce,R=new AbortController,te=setTimeout(()=>{R.abort(),or(S,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:R.signal}).then(ae=>{clearTimeout(te),ae.ok?or(S,"TestPingServer: ok",!0,w):or(S,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(te),or(S,"TestPingServer: error",!1,w)})}function or(h,w,S,R,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),R(S)}catch{}}function Ch(){this.g=new Ls}function Hc(h,w,S){const R=S||"";try{gi(h,function(te,ae){let Se=te;f(te)&&(Se=Pn(te)),w.push(R+ae+"="+encodeURIComponent(Se))})}catch(te){throw w.push(R+"type="+encodeURIComponent("_badmap")),te}}function Us(h){this.l=h.Ub||null,this.j=h.eb||!1}j(Us,Ar),Us.prototype.g=function(){return new mo(this.l,this.j)},Us.prototype.i=(function(h){return function(){return h}})({});function mo(h,w){Pt.call(this),this.D=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(mo,Pt),n=mo.prototype,n.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=w,this.readyState=1,Qr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(w.body=h),(this.D||d).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Qr(this)),this.g&&(this.readyState=3,Qr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?Yr(this):Qr(this),this.readyState==3&&Gc(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Yr(this))},n.Qa=function(h){this.g&&(this.response=h,Yr(this))},n.ga=function(){this.g&&Yr(this)};function Yr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Qr(h)}n.setRequestHeader=function(h,w){this.u.append(h,w)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var S=w.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=w.next();return h.join(`\r
`)};function Qr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(mo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Bs(h){let w="";return K(h,function(S,R){w+=R,w+=":",w+=S,w+=`\r
`}),w}function _i(h,w,S){e:{for(R in S){var R=!1;break e}R=!0}R||(S=Bs(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):kt(h,w,S))}function $t(h){Pt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j($t,Pt);var kh=/^https?$/i,ul=["POST","PUT"];n=$t.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,w,S,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():it.g(),this.v=this.o?ps(this.o):ps(it),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(ae){go(this,ae);return}if(h=S||"",S=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var te in R)S.set(te,R[te]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ae of R.keys())S.set(ae,R.get(ae));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(S.keys()).find(ae=>ae.toLowerCase()=="content-type"),te=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ul,w,void 0))||R||te||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Se]of S)this.g.setRequestHeader(ae,Se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ta(this),this.u=!0,this.g.send(h),this.u=!1}catch(ae){go(this,ae)}};function go(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.m=5,ea(h),_r(h)}function ea(h){h.A||(h.A=!0,Ot(h,"complete"),Ot(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ot(this,"complete"),Ot(this,"abort"),_r(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_r(this,!0)),$t.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?dl(this):this.bb())},n.bb=function(){dl(this)};function dl(h){if(h.h&&typeof c<"u"&&(!h.v[1]||ar(h)!=4||h.Z()!=2)){if(h.u&&ar(h)==4)sr(h.Ea,0,h);else if(Ot(h,"readystatechange"),ar(h)==4){h.h=!1;try{const Se=h.Z();e:switch(Se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var S;if(!(S=w)){var R;if(R=Se===0){var te=String(h.D).match(fo)[1]||null;!te&&d.self&&d.self.location&&(te=d.self.location.protocol.slice(0,-1)),R=!kh.test(te?te.toLowerCase():"")}S=R}if(S)Ot(h,"complete"),Ot(h,"success");else{h.m=6;try{var ae=2<ar(h)?h.g.statusText:""}catch{ae=""}h.l=ae+" ["+h.Z()+"]",ea(h)}}finally{_r(h)}}}}function _r(h,w){if(h.g){ta(h);const S=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,w||Ot(h,"ready");try{S.onreadystatechange=R}catch{}}}function ta(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function ar(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),Ds(w)}};function hl(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function na(h){const w={};h=(h.g&&2<=ar(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(q(h[R]))continue;var S=T(h[R]);const te=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ae=w[te]||[];w[te]=ae,ae.push(S)}F(w,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ys(h,w,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||w}function fl(h){this.Aa=0,this.i=[],this.j=new ce,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ys("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ys("baseRetryDelayMs",5e3,h),this.cb=ys("retryDelaySeedMs",1e4,h),this.Wa=ys("forwardChannelMaxRetries",2,h),this.wa=ys("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ho(h&&h.concurrentRequestLimit),this.Da=new Ch,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=fl.prototype,n.la=8,n.G=1,n.connect=function(h,w,S,R){X(0),this.W=h,this.H=w||{},S&&R!==void 0&&(this.H.OSID=S,this.H.OAID=R),this.F=this.X,this.I=Yc(this,null,this.W),vs(this)};function In(h){if(ra(h),h.G==3){var w=h.U++,S=wr(h.I);if(kt(S,"SID",h.K),kt(S,"RID",w),kt(S,"TYPE","terminate"),qs(h,S),w=new rn(h,h.j,w),w.L=2,w.v=vi(wr(S)),S=!1,d.navigator&&d.navigator.sendBeacon)try{S=d.navigator.sendBeacon(w.v.toString(),"")}catch{}!S&&d.Image&&(new Image().src=w.v,S=!0),S||(w.g=Qc(w.j,null),w.g.ea(w.v)),w.F=Date.now(),ot(w)}Jc(h)}function Xr(h){h.g&&(pl(h),h.g.cancel(),h.g=null)}function ra(h){Xr(h),h.u&&(d.clearTimeout(h.u),h.u=null),oa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function vs(h){if(!br(h.h)&&!h.s){h.s=!0;var w=h.Ga;je||W(),z||(je(),z=!0),we.add(w,h),h.B=0}}function Th(h,w){return Vc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=w.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=re(N(h.Ga,h,w),Kc(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const te=new rn(this,this.j,h);let ae=this.o;if(this.S&&(ae?(ae=A(ae),V(ae,this.S)):ae=this.S),this.m!==null||this.O||(te.H=ae,ae=null),this.P)e:{for(var w=0,S=0;S<this.i.length;S++){t:{var R=this.i[S];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(w+=R,4096<w){w=S;break e}if(w===4096||S===this.i.length-1){w=S+1;break e}}w=1e3}else w=1e3;w=Ni(this,te,w),S=wr(this.I),kt(S,"RID",h),kt(S,"CVER",22),this.D&&kt(S,"X-HTTP-Session-Id",this.D),qs(this,S),ae&&(this.O?w="headers="+encodeURIComponent(String(Bs(ae)))+"&"+w:this.m&&_i(S,this.m,ae)),ll(this.h,te),this.Ua&&kt(S,"TYPE","init"),this.P?(kt(S,"$req",w),kt(S,"SID","null"),te.T=!0,le(te,S,null)):le(te,S,w),this.G=2}}else this.G==3&&(h?sa(this,h):this.i.length==0||br(this.h)||sa(this))};function sa(h,w){var S;w?S=w.l:S=h.U++;const R=wr(h.I);kt(R,"SID",h.K),kt(R,"RID",S),kt(R,"AID",h.T),qs(h,R),h.m&&h.o&&_i(R,h.m,h.o),S=new rn(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),w&&(h.i=w.D.concat(h.i)),w=Ni(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ll(h.h,S),le(S,R,w)}function qs(h,w){h.H&&K(h.H,function(S,R){kt(w,R,S)}),h.l&&gi({},function(S,R){kt(w,R,S)})}function Ni(h,w,S){S=Math.min(h.i.length,S);var R=h.l?N(h.l.Na,h.l,h):null;e:{var te=h.i;let ae=-1;for(;;){const Se=["count="+S];ae==-1?0<S?(ae=te[0].g,Se.push("ofs="+ae)):ae=0:Se.push("ofs="+ae);let St=!0;for(let gn=0;gn<S;gn++){let xt=te[gn].g;const Sn=te[gn].map;if(xt-=ae,0>xt)ae=Math.max(0,te[gn].g-100),St=!1;else try{Hc(Sn,Se,"req"+xt+"_")}catch{R&&R(Sn)}}if(St){R=Se.join("&");break e}}}return h=h.i.splice(0,S),w.D=h,R}function xo(h){if(!h.g&&!h.u){h.Y=1;var w=h.Fa;je||W(),z||(je(),z=!0),we.add(w,h),h.v=0}}function ia(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=re(N(h.Fa,h),Kc(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Wc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=re(N(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,X(10),Xr(this),Wc(this))};function pl(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Wc(h){h.g=new rn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var w=wr(h.qa);kt(w,"RID","rpc"),kt(w,"SID",h.K),kt(w,"AID",h.T),kt(w,"CI",h.F?"0":"1"),!h.F&&h.ja&&kt(w,"TO",h.ja),kt(w,"TYPE","xmlhttp"),qs(h,w),h.m&&h.o&&_i(w,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=vi(wr(w)),S.m=null,S.P=!0,Oe(S,h)}n.Za=function(){this.C!=null&&(this.C=null,Xr(this),ia(this),X(19))};function oa(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function aa(h,w){var S=null;if(h.g==w){oa(h),pl(h),h.g=null;var R=2}else if(Xn(h.h,w))S=w.D,Oc(h.h,w),R=1;else return;if(h.G!=0){if(w.o)if(R==1){S=w.m?w.m.length:0,w=Date.now()-w.F;var te=h.B;R=Gr(),Ot(R,new Y(R,S)),vs(h)}else xo(h);else if(te=w.s,te==3||te==0&&0<w.X||!(R==1&&Th(h,w)||R==2&&ia(h)))switch(S&&0<S.length&&(w=h.h,w.i=w.i.concat(S)),te){case 1:$s(h,5);break;case 4:$s(h,10);break;case 3:$s(h,6);break;default:$s(h,2)}}}function Kc(h,w){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*w}function $s(h,w){if(h.j.info("Error code "+w),w==2){var S=N(h.fb,h),R=h.Xa;const te=!R;R=new zs(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||po(R,"https"),vi(R),te?Eh(R.toString(),S):$c(R.toString(),S)}else X(2);h.G=0,h.l&&h.l.sa(w),Jc(h),ra(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),X(2)):(this.j.info("Failed to ping google.com"),X(1))};function Jc(h){if(h.G=0,h.ka=[],h.l){const w=Fc(h.h);(w.length!=0||h.i.length!=0)&&(P(h.ka,w),P(h.ka,h.i),h.h.i.length=0,k(h.i),h.i.length=0),h.l.ra()}}function Yc(h,w,S){var R=S instanceof zs?wr(S):new zs(S);if(R.g!="")w&&(R.g=w+"."+R.g),xi(R,R.s);else{var te=d.location;R=te.protocol,w=w?w+"."+te.hostname:te.hostname,te=+te.port;var ae=new zs(null);R&&po(ae,R),w&&(ae.g=w),te&&xi(ae,te),S&&(ae.l=S),R=ae}return S=h.D,w=h.ya,S&&w&&kt(R,S,w),kt(R,"VER",h.la),qs(h,R),R}function Qc(h,w,S){if(w&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Ca&&!h.pa?new $t(new Us({eb:S})):new $t(h.pa),w.Ha(h.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ml(){}n=ml.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function la(){}la.prototype.g=function(h,w){return new Zn(h,w)};function Zn(h,w){Pt.call(this),this.g=new fl(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(h?h["X-WebChannel-Client-Profile"]=w.va:h={"X-WebChannel-Client-Profile":w.va}),this.g.S=h,(h=w&&w.Sb)&&!q(h)&&(this.g.m=h),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!q(w)&&(this.g.D=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new bs(this)}j(Zn,Pt),Zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){In(this.g)},Zn.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=Pn(h),h=S);w.i.push(new Lc(w.Ya++,h)),w.G==3&&vs(w)},Zn.prototype.N=function(){this.g.l=null,delete this.j,In(this.g),delete this.g,Zn.aa.N.call(this)};function Xc(h){Qn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const S in w){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}j(Xc,Qn);function Zc(){ms.call(this),this.status=1}j(Zc,ms);function bs(h){this.g=h}j(bs,ml),bs.prototype.ua=function(){Ot(this.g,"a")},bs.prototype.ta=function(h){Ot(this.g,new Xc(h))},bs.prototype.sa=function(h){Ot(this.g,new Zc)},bs.prototype.ra=function(){Ot(this.g,"b")},la.prototype.createWebChannel=la.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,fw=function(){return new la},hw=function(){return Gr()},dw=ir,Tp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,ad=Be,st.COMPLETE="complete",uw=st,Hr.EventType=Fn,Fn.OPEN="a",Fn.CLOSE="b",Fn.ERROR="c",Fn.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,Hl=Hr,$t.prototype.listenOnce=$t.prototype.L,$t.prototype.getLastError=$t.prototype.Ka,$t.prototype.getLastErrorCode=$t.prototype.Ba,$t.prototype.getStatus=$t.prototype.Z,$t.prototype.getResponseJson=$t.prototype.Oa,$t.prototype.getResponseText=$t.prototype.oa,$t.prototype.send=$t.prototype.ea,$t.prototype.setWithCredentials=$t.prototype.Ha,cw=$t}).apply(typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{});const ny="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=new dm("@firebase/firestore");function zl(){return zo.logLevel}function Ve(n,...e){if(zo.logLevel<=mt.DEBUG){const t=e.map(pm);zo.debug(`Firestore (${Za}): ${n}`,...t)}}function di(n,...e){if(zo.logLevel<=mt.ERROR){const t=e.map(pm);zo.error(`Firestore (${Za}): ${n}`,...t)}}function Ba(n,...e){if(zo.logLevel<=mt.WARN){const t=e.map(pm);zo.warn(`Firestore (${Za}): ${n}`,...t)}}function pm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(n="Unexpected state"){const e=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: `+n;throw di(e),new Error(e)}function Et(n,e){n||Xe()}function nt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Hn.UNAUTHENTICATED)))}shutdown(){}}class Z2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class eC{constructor(e){this.t=e,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Et(this.o===void 0);let r=this.i;const i=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ai,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await i(this.currentUser)}))},d=p=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ai)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string"),new pw(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Et(e===null||typeof e=="string"),new Hn(e)}}class tC{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nC{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new tC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class rC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Et(this.o===void 0);const r=l=>{l.error!=null&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const i=l=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>i(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?i(l):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Et(typeof t.token=="string"),this.R=t.token,new rC(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=iC(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<t&&(r+=e.charAt(i[l]%e.length))}return r}}function _t(n,e){return n<e?-1:n>e?1:0}function qa(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_t(this.nanoseconds,e.nanoseconds):_t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tt(e)}static min(){return new tt(new bn(0,0))}static max(){return new tt(new bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t,r){t===void 0?t=0:t>e.length&&Xe(),r===void 0?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ac.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ac?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const l=e.get(i),c=t.get(i);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Bt extends ac{construct(e,t,r){return new Bt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Bt(t)}static emptyPath(){return new Bt([])}}const oC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends ac{construct(e,t,r){return new Dn(e,t,r)}static isValidIdentifier(e){return oC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const l=()=>{if(r.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Ae(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ae(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(l(),i++)}if(l(),c)throw new Ae(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dn(t)}static emptyPath(){return new Dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Bt.fromString(e))}static fromName(e){return new qe(Bt.fromString(e).popFirst(5))}static empty(){return new qe(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Bt(e.slice()))}}function aC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=tt.fromTimestamp(r===1e9?new bn(t+1,0):new bn(t,r));return new Xi(i,qe.empty(),e)}function lC(n){return new Xi(n.readTime,n.key,-1)}class Xi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Xi(tt.min(),qe.empty(),-1)}static max(){return new Xi(tt.max(),qe.empty(),-1)}}function cC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=qe.comparator(n.documentKey,e.documentKey),t!==0?t:_t(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==uC)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe(((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(t){return xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):xe.reject(t)}static resolve(e){return new xe(((t,r)=>{t(e)}))}static reject(e){return new xe(((t,r)=>{r(e)}))}static waitFor(e){return new xe(((t,r)=>{let i=0,l=0,c=!1;e.forEach((d=>{++i,d.next((()=>{++l,c&&l===i&&t()}),(p=>r(p)))})),c=!0,l===i&&t()}))}static or(e){let t=xe.resolve(!1);for(const r of e)t=t.next((i=>i?xe.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,l)=>{r.push(t.call(this,i,l))})),this.waitFor(r)}static mapArray(e,t){return new xe(((r,i)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const f=p;t(e[f]).next((y=>{c[f]=y,++d,d===l&&r(c)}),(y=>i(y)))}}))}static doWhile(e,t){return new xe(((r,i)=>{const l=()=>{e()===!0?t().next((()=>{l()}),i):r()};l()}))}}function hC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Cc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}mm.oe=-1;function Yd(n){return n==null}function Sd(n){return n===0&&1/n==-1/0}function fC(n){return typeof n=="number"&&Number.isInteger(n)&&!Sd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ko(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t){this.comparator=e,this.root=t||Mn.EMPTY}insert(e,t){return new Kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}}class Ku{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,t,r,i,l){this.key=e,this.value=t,this.color=r??Mn.RED,this.left=i??Mn.EMPTY,this.right=l??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,l){return new Mn(e??this.key,t??this.value,r??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,r),null):l===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Mn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(e,t,r,i,l){return this}insert(e,t,r){return new Mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sy(this.data.getIterator())}getIteratorFrom(e){return new sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.fields=e,e.sort(Dn.comparator)}static empty(){return new kr([])}unionWith(e){let t=new Ln(Dn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new kr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new xw("Invalid base64 string: "+l):l}})(e);return new Vn(t)}static fromUint8Array(e){const t=(function(i){let l="";for(let c=0;c<i.length;++c)l+=String.fromCharCode(i[c]);return l})(e);return new Vn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vn.EMPTY_BYTE_STRING=new Vn("");const pC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(n){if(Et(!!n),typeof n=="string"){let e=0;const t=pC.exec(n);if(Et(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:on(n.seconds),nanos:on(n.nanos)}}function on(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Uo(n){return typeof n=="string"?Vn.fromBase64String(n):Vn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function xm(n){const e=n.mapValue.fields.__previous_value__;return gm(e)?xm(e):e}function lc(n){const e=Zi(n.mapValue.fields.__local_write_time__.timestampValue);return new bn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t,r,i,l,c,d,p,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=f}}class cc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new cc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof cc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju={mapValue:{}};function Bo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gm(n)?4:xC(n)?9007199254740991:gC(n)?10:11:Xe()}function Is(n,e){if(n===e)return!0;const t=Bo(n);if(t!==Bo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lc(n).isEqual(lc(e));case 3:return(function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const c=Zi(i.timestampValue),d=Zi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,l){return Uo(i.bytesValue).isEqual(Uo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,l){return on(i.geoPointValue.latitude)===on(l.geoPointValue.latitude)&&on(i.geoPointValue.longitude)===on(l.geoPointValue.longitude)})(n,e);case 2:return(function(i,l){if("integerValue"in i&&"integerValue"in l)return on(i.integerValue)===on(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const c=on(i.doubleValue),d=on(l.doubleValue);return c===d?Sd(c)===Sd(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return(function(i,l){const c=i.mapValue.fields||{},d=l.mapValue.fields||{};if(ry(c)!==ry(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Is(c[p],d[p])))return!1;return!0})(n,e);default:return Xe()}}function uc(n,e){return(n.values||[]).find((t=>Is(t,e)))!==void 0}function $a(n,e){if(n===e)return 0;const t=Bo(n),r=Bo(e);if(t!==r)return _t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return _t(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=on(l.integerValue||l.doubleValue),p=on(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return iy(n.timestampValue,e.timestampValue);case 4:return iy(lc(n),lc(e));case 5:return _t(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=Uo(l),p=Uo(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let f=0;f<d.length&&f<p.length;f++){const y=_t(d[f],p[f]);if(y!==0)return y}return _t(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=_t(on(l.latitude),on(c.latitude));return d!==0?d:_t(on(l.longitude),on(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return oy(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,p,f,y;const b=l.fields||{},N=c.fields||{},E=(d=b.value)===null||d===void 0?void 0:d.arrayValue,j=(p=N.value)===null||p===void 0?void 0:p.arrayValue,k=_t(((f=E==null?void 0:E.values)===null||f===void 0?void 0:f.length)||0,((y=j==null?void 0:j.values)===null||y===void 0?void 0:y.length)||0);return k!==0?k:oy(E,j)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Ju.mapValue&&c===Ju.mapValue)return 0;if(l===Ju.mapValue)return 1;if(c===Ju.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),f=c.fields||{},y=Object.keys(f);p.sort(),y.sort();for(let b=0;b<p.length&&b<y.length;++b){const N=_t(p[b],y[b]);if(N!==0)return N;const E=$a(d[p[b]],f[y[b]]);if(E!==0)return E}return _t(p.length,y.length)})(n.mapValue,e.mapValue);default:throw Xe()}}function iy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return _t(n,e);const t=Zi(n),r=Zi(e),i=_t(t.seconds,r.seconds);return i!==0?i:_t(t.nanos,r.nanos)}function oy(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const l=$a(t[i],r[i]);if(l)return l}return _t(t.length,r.length)}function Ha(n){return Pp(n)}function Pp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Zi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Uo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return qe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const l of t.values||[])i?i=!1:r+=",",r+=Pp(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",l=!0;for(const c of r)l?l=!1:i+=",",i+=`${c}:${Pp(t.fields[c])}`;return i+"}"})(n.mapValue):Xe()}function ay(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jp(n){return!!n&&"integerValue"in n}function ym(n){return!!n&&"arrayValue"in n}function ly(n){return!!n&&"nullValue"in n}function cy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ld(n){return!!n&&"mapValue"in n}function gC(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Jl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ko(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Jl(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Jl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this.value=e}static empty(){return new mr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ld(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jl(t)}setAll(e){let t=Dn.emptyPath(),r={},i=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=Jl(c):i.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,i)}delete(e){const t=this.field(e.popLast());ld(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ld(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ko(t,((i,l)=>e[i]=l));for(const i of r)delete e[i]}clone(){return new mr(Jl(this.value))}}function yw(n){const e=[];return Ko(n.fields,((t,r)=>{const i=new Dn([t]);if(ld(r)){const l=yw(r.mapValue).fields;if(l.length===0)e.push(i);else for(const c of l)e.push(i.child(c))}else e.push(i)})),new kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t,r,i,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Wn(e,0,tt.min(),tt.min(),tt.min(),mr.empty(),0)}static newFoundDocument(e,t,r,i){return new Wn(e,1,t,tt.min(),r,i,0)}static newNoDocument(e,t){return new Wn(e,2,t,tt.min(),tt.min(),mr.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,tt.min(),tt.min(),mr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t){this.position=e,this.inclusive=t}}function uy(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const l=e[i],c=n.position[i];if(l.field.isKeyField()?r=qe.comparator(qe.fromName(c.referenceValue),t.key):r=$a(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function dy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Is(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t="asc"){this.field=e,this.dir=t}}function yC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vw=class{};class hn extends vw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bC(e,t,r):t==="array-contains"?new NC(e,r):t==="in"?new SC(e,r):t==="not-in"?new EC(e,r):t==="array-contains-any"?new CC(e,r):new hn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new wC(e,r):new _C(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison($a(t,this.value)):t!==null&&Bo(this.value)===Bo(t)&&this.matchesComparison($a(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class us extends vw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new us(e,t)}matches(e){return bw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bw(n){return n.op==="and"}function ww(n){return vC(n)&&bw(n)}function vC(n){for(const e of n.filters)if(e instanceof us)return!1;return!0}function Ip(n){if(n instanceof hn)return n.field.canonicalString()+n.op.toString()+Ha(n.value);if(ww(n))return n.filters.map((e=>Ip(e))).join(",");{const e=n.filters.map((t=>Ip(t))).join(",");return`${n.op}(${e})`}}function _w(n,e){return n instanceof hn?(function(r,i){return i instanceof hn&&r.op===i.op&&r.field.isEqual(i.field)&&Is(r.value,i.value)})(n,e):n instanceof us?(function(r,i){return i instanceof us&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((l,c,d)=>l&&_w(c,i.filters[d])),!0):!1})(n,e):void Xe()}function Nw(n){return n instanceof hn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ha(t.value)}`})(n):n instanceof us?(function(t){return t.op.toString()+" {"+t.getFilters().map(Nw).join(" ,")+"}"})(n):"Filter"}class bC extends hn{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class wC extends hn{constructor(e,t){super(e,"in",t),this.keys=Sw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class _C extends hn{constructor(e,t){super(e,"not-in",t),this.keys=Sw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Sw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>qe.fromName(r.referenceValue)))}class NC extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ym(t)&&uc(t.arrayValue,this.value)}}class SC extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uc(this.value.arrayValue,t)}}class EC extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!uc(this.value.arrayValue,t)}}class CC extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ym(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>uc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t=null,r=[],i=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function hy(n,e=null,t=[],r=[],i=null,l=null,c=null){return new kC(n,e,t,r,i,l,c)}function vm(n){const e=nt(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Ip(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Yd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ha(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ha(r))).join(",")),e.ue=t}return e.ue}function bm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!yC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_w(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dy(n.startAt,e.startAt)&&dy(n.endAt,e.endAt)}function Ap(n){return qe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,t=null,r=[],i=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function TC(n,e,t,r,i,l,c,d){return new el(n,e,t,r,i,l,c,d)}function Qd(n){return new el(n)}function fy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ew(n){return n.collectionGroup!==null}function Yl(n){const e=nt(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ln(Dn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new dc(l,r))})),t.has(Dn.keyField().canonicalString())||e.ce.push(new dc(Dn.keyField(),r))}return e.ce}function ks(n){const e=nt(n);return e.le||(e.le=PC(e,Yl(n))),e.le}function PC(n,e){if(n.limitType==="F")return hy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const l=i.dir==="desc"?"asc":"desc";return new dc(i.field,l)}));const t=n.endAt?new Ed(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ed(n.startAt.position,n.startAt.inclusive):null;return hy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Rp(n,e){const t=n.filters.concat([e]);return new el(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Mp(n,e,t){return new el(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xd(n,e){return bm(ks(n),ks(e))&&n.limitType===e.limitType}function Cw(n){return`${vm(ks(n))}|lt:${n.limitType}`}function Ia(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>Nw(i))).join(", ")}]`),Yd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Ha(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Ha(i))).join(",")),`Target(${r})`})(ks(n))}; limitType=${n.limitType})`}function Zd(n,e){return e.isFoundDocument()&&(function(r,i){const l=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):qe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,i){for(const l of Yl(r))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const l of r.filters)if(!l.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,d,p){const f=uy(c,d,p);return c.inclusive?f<=0:f<0})(r.startAt,Yl(r),i)||r.endAt&&!(function(c,d,p){const f=uy(c,d,p);return c.inclusive?f>=0:f>0})(r.endAt,Yl(r),i))})(n,e)}function jC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kw(n){return(e,t)=>{let r=!1;for(const i of Yl(n)){const l=IC(i,e,t);if(l!==0)return l;r=r||i.field.isKeyField()}return 0}}function IC(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),f=d.data.field(l);return p!==null&&f!==null?$a(p,f):Xe()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,l]of r)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ko(this.inner,((t,r)=>{for(const[i,l]of r)e(i,l)}))}isEmpty(){return gw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=new Kt(qe.comparator);function hi(){return AC}const Tw=new Kt(qe.comparator);function Gl(...n){let e=Tw;for(const t of n)e=e.insert(t.key,t);return e}function Pw(n){let e=Tw;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ro(){return Ql()}function jw(){return Ql()}function Ql(){return new tl((n=>n.toString()),((n,e)=>n.isEqual(e)))}const RC=new Kt(qe.comparator),MC=new Ln(qe.comparator);function dt(...n){let e=MC;for(const t of n)e=e.add(t);return e}const DC=new Ln(_t);function LC(){return DC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sd(e)?"-0":e}}function Iw(n){return{integerValue:""+n}}function VC(n,e){return fC(e)?Iw(e):wm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this._=void 0}}function OC(n,e,t){return n instanceof Cd?(function(i,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&gm(l)&&(l=xm(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}})(t,e):n instanceof Ga?Rw(n,e):n instanceof hc?Mw(n,e):(function(i,l){const c=Aw(i,l),d=py(c)+py(i.Pe);return jp(c)&&jp(i.Pe)?Iw(d):wm(i.serializer,d)})(n,e)}function FC(n,e,t){return n instanceof Ga?Rw(n,e):n instanceof hc?Mw(n,e):t}function Aw(n,e){return n instanceof kd?(function(r){return jp(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Cd extends eh{}class Ga extends eh{constructor(e){super(),this.elements=e}}function Rw(n,e){const t=Dw(e);for(const r of n.elements)t.some((i=>Is(i,r)))||t.push(r);return{arrayValue:{values:t}}}class hc extends eh{constructor(e){super(),this.elements=e}}function Mw(n,e){let t=Dw(e);for(const r of n.elements)t=t.filter((i=>!Is(i,r)));return{arrayValue:{values:t}}}class kd extends eh{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function py(n){return on(n.integerValue||n.doubleValue)}function Dw(n){return ym(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,t){this.field=e,this.transform=t}}function UC(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ga&&i instanceof Ga||r instanceof hc&&i instanceof hc?qa(r.elements,i.elements,Is):r instanceof kd&&i instanceof kd?Is(r.Pe,i.Pe):r instanceof Cd&&i instanceof Cd})(n.transform,e.transform)}class BC{constructor(e,t){this.version=e,this.transformResults=t}}class cs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cs}static exists(e){return new cs(void 0,e)}static updateTime(e){return new cs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class th{}function Lw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _m(n.key,cs.none()):new kc(n.key,n.data,cs.none());{const t=n.data,r=mr.empty();let i=new Ln(Dn.comparator);for(let l of e.fields)if(!i.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),i=i.add(l)}return new io(n.key,r,new kr(i.toArray()),cs.none())}}function qC(n,e,t){n instanceof kc?(function(i,l,c){const d=i.value.clone(),p=gy(i.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof io?(function(i,l,c){if(!cd(i.precondition,l))return void l.convertToUnknownDocument(c.version);const d=gy(i.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Vw(i)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(i,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Xl(n,e,t,r){return n instanceof kc?(function(l,c,d,p){if(!cd(l.precondition,c))return d;const f=l.value.clone(),y=xy(l.fieldTransforms,p,c);return f.setAll(y),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof io?(function(l,c,d,p){if(!cd(l.precondition,c))return d;const f=xy(l.fieldTransforms,p,c),y=c.data;return y.setAll(Vw(l)),y.setAll(f),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,r):(function(l,c,d){return cd(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function $C(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),l=Aw(r.transform,i||null);l!=null&&(t===null&&(t=mr.empty()),t.set(r.field,l))}return t||null}function my(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qa(r,i,((l,c)=>UC(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class kc extends th{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class io extends th{constructor(e,t,r,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Vw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function gy(n,e,t){const r=new Map;Et(n.length===t.length);for(let i=0;i<t.length;i++){const l=n[i],c=l.transform,d=e.data.field(l.field);r.set(l.field,FC(c,d,t[i]))}return r}function xy(n,e,t){const r=new Map;for(const i of n){const l=i.transform,c=t.data.field(i.field);r.set(i.field,OC(l,c,e))}return r}class _m extends th{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HC extends th{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&qC(l,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Xl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jw();return this.mutations.forEach((i=>{const l=e.get(i.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(i.key)?null:d;const p=Lw(c,d);p!==null&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(tt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dt())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,((t,r)=>my(t,r)))&&qa(this.baseMutations,e.baseMutations,((t,r)=>my(t,r)))}}class Nm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Et(e.mutations.length===r.length);let i=(function(){return RC})();const l=e.mutations;for(let c=0;c<l.length;c++)i=i.insert(l[c].key,r[c].version);return new Nm(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,yt;function JC(n){switch(n){default:return Xe();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function Ow(n){if(n===void 0)return di("GRPC error has no .code"),ue.UNKNOWN;switch(n){case dn.OK:return ue.OK;case dn.CANCELLED:return ue.CANCELLED;case dn.UNKNOWN:return ue.UNKNOWN;case dn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case dn.INTERNAL:return ue.INTERNAL;case dn.UNAVAILABLE:return ue.UNAVAILABLE;case dn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case dn.NOT_FOUND:return ue.NOT_FOUND;case dn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case dn.ABORTED:return ue.ABORTED;case dn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case dn.DATA_LOSS:return ue.DATA_LOSS;default:return Xe()}}(yt=dn||(dn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=new Vo([4294967295,4294967295],0);function yy(n){const e=YC().encode(n),t=new lw;return t.update(e),new Uint8Array(t.digest())}function vy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Vo([t,r],0),new Vo([i,l],0)]}class Sm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wl(`Invalid padding: ${t}`);if(r<0)throw new Wl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Wl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Vo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Vo.fromNumber(r)));return i.compare(QC)===1&&(i=new Vo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=yy(e),[r,i]=vy(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(r,i,l);if(!this.de(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Sm(l,i,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.Ie===0)return;const t=yy(e),[r,i]=vy(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(r,i,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,t,r,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nh(tt.min(),i,new Kt(_t),hi(),dt())}}class Tc{constructor(e,t,r,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Tc(r,t,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Fw{constructor(e,t){this.targetId=e,this.me=t}}class zw{constructor(e,t,r=Vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class by{constructor(){this.fe=0,this.ge=_y(),this.pe=Vn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=dt(),t=dt(),r=dt();return this.ge.forEach(((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Xe()}})),new Tc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=_y()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Et(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class XC{constructor(e){this.Le=e,this.Be=new Map,this.ke=hi(),this.qe=wy(),this.Qe=new Kt(_t)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Xe()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,i)=>{this.ze(i)&&t(i)}))}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const l=i.target;if(Ap(l))if(r===0){const c=new qe(l.path);this.Ue(t,c,Wn.newNoDocument(c,tt.min()))}else Et(r===1);else{const c=this.Ye(t);if(c!==r){const d=this.Ze(e),p=d?this.Xe(d,e,c):1;if(p!==0){this.je(t);const f=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:l=0}=t;let c,d;try{c=Uo(r).toUint8Array()}catch(p){if(p instanceof xw)return Ba("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Sm(c,i,l)}catch(p){return Ba(p instanceof Wl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ie===0?null:d}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach((l=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,l,null),i++)})),i}rt(e){const t=new Map;this.Be.forEach(((l,c)=>{const d=this.Je(c);if(d){if(l.current&&Ap(d.target)){const p=new qe(d.target.path);this.ke.get(p)!==null||this.it(c,p)||this.Ue(c,p,Wn.newNoDocument(p,e))}l.be&&(t.set(c,l.ve()),l.Ce())}}));let r=dt();this.qe.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const f=this.Je(p);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.ke.forEach(((l,c)=>c.setReadTime(e)));const i=new nh(e,t,this.Qe,this.ke,r);return this.ke=hi(),this.qe=wy(),this.Qe=new Kt(_t),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new by,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ln(_t),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new by),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function wy(){return new Kt(qe.comparator)}function _y(){return new Kt(qe.comparator)}const ZC={asc:"ASCENDING",desc:"DESCENDING"},ek={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tk={and:"AND",or:"OR"};class nk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dp(n,e){return n.useProto3Json||Yd(e)?e:{value:e}}function Td(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rk(n,e){return Td(n,e.toTimestamp())}function Ts(n){return Et(!!n),tt.fromTimestamp((function(t){const r=Zi(t);return new bn(r.seconds,r.nanos)})(n))}function Em(n,e){return Lp(n,e).canonicalString()}function Lp(n,e){const t=(function(i){return new Bt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Bw(n){const e=Bt.fromString(n);return Et(Ww(e)),e}function Vp(n,e){return Em(n.databaseId,e.path)}function op(n,e){const t=Bw(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe($w(t))}function qw(n,e){return Em(n.databaseId,e)}function sk(n){const e=Bw(n);return e.length===4?Bt.emptyPath():$w(e)}function Op(n){return new Bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $w(n){return Et(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Ny(n,e,t){return{name:Vp(n,e),fields:t.value.mapValue.fields}}function ik(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Xe()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=(function(f,y){return f.useProto3Json?(Et(y===void 0||typeof y=="string"),Vn.fromBase64String(y||"")):(Et(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Vn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(f){const y=f.code===void 0?ue.UNKNOWN:Ow(f.code);return new Ae(y,f.message||"")})(c);t=new zw(r,i,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=op(n,r.document.name),l=Ts(r.document.updateTime),c=r.document.createTime?Ts(r.document.createTime):tt.min(),d=new mr({mapValue:{fields:r.document.fields}}),p=Wn.newFoundDocument(i,l,c,d),f=r.targetIds||[],y=r.removedTargetIds||[];t=new ud(f,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=op(n,r.document),l=r.readTime?Ts(r.readTime):tt.min(),c=Wn.newNoDocument(i,l),d=r.removedTargetIds||[];t=new ud([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=op(n,r.document),l=r.removedTargetIds||[];t=new ud([],l,i,null)}else{if(!("filter"in e))return Xe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:l}=r,c=new KC(i,l),d=r.targetId;t=new Fw(d,c)}}return t}function ok(n,e){let t;if(e instanceof kc)t={update:Ny(n,e.key,e.value)};else if(e instanceof _m)t={delete:Vp(n,e.key)};else if(e instanceof io)t={update:Ny(n,e.key,e.data),updateMask:mk(e.fieldMask)};else{if(!(e instanceof HC))return Xe();t={verify:Vp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof Cd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Ga)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof hc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof kd)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw Xe()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,l){return l.updateTime!==void 0?{updateTime:rk(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Xe()})(n,e.precondition)),t}function ak(n,e){return n&&n.length>0?(Et(e!==void 0),n.map((t=>(function(i,l){let c=i.updateTime?Ts(i.updateTime):Ts(l);return c.isEqual(tt.min())&&(c=Ts(l)),new BC(c,i.transformResults||[])})(t,e)))):[]}function lk(n,e){return{documents:[qw(n,e.path)]}}function ck(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=qw(n,i);const l=(function(f){if(f.length!==0)return Gw(us.create(f,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(f){if(f.length!==0)return f.map((y=>(function(N){return{field:Aa(N.field),direction:hk(N.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Dp(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{_t:t,parent:i}}function uk(n){let e=sk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Et(r===1);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(b){const N=Hw(b);return N instanceof us&&ww(N)?N.getFilters():[N]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((N=>(function(j){return new dc(Ra(j.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(N)))})(t.orderBy));let d=null;t.limit&&(d=(function(b){let N;return N=typeof b=="object"?b.value:b,Yd(N)?null:N})(t.limit));let p=null;t.startAt&&(p=(function(b){const N=!!b.before,E=b.values||[];return new Ed(E,N)})(t.startAt));let f=null;return t.endAt&&(f=(function(b){const N=!b.before,E=b.values||[];return new Ed(E,N)})(t.endAt)),TC(e,i,c,l,d,"F",p,f)}function dk(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Hw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ra(t.unaryFilter.field);return hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ra(t.unaryFilter.field);return hn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ra(t.unaryFilter.field);return hn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ra(t.unaryFilter.field);return hn.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}})(n):n.fieldFilter!==void 0?(function(t){return hn.create(Ra(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return us.create(t.compositeFilter.filters.map((r=>Hw(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Xe()}})(t.compositeFilter.op))})(n):Xe()}function hk(n){return ZC[n]}function fk(n){return ek[n]}function pk(n){return tk[n]}function Aa(n){return{fieldPath:n.canonicalString()}}function Ra(n){return Dn.fromServerFormat(n.fieldPath)}function Gw(n){return n instanceof hn?(function(t){if(t.op==="=="){if(cy(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NAN"}};if(ly(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cy(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NOT_NAN"}};if(ly(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Aa(t.field),op:fk(t.op),value:t.value}}})(n):n instanceof us?(function(t){const r=t.getFilters().map((i=>Gw(i)));return r.length===1?r[0]:{compositeFilter:{op:pk(t.op),filters:r}}})(n):Xe()}function mk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Ww(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t,r,i,l=tt.min(),c=tt.min(),d=Vn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.ct=e}}function xk(n){const e=uk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.un=new vk}addToCollectionParentIndex(e,t){return this.un.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return xe.resolve()}deleteFieldIndex(e,t){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,t){return xe.resolve()}getDocumentsMatchingTarget(e,t){return xe.resolve(null)}getIndexType(e,t){return xe.resolve(0)}getFieldIndexes(e,t){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,t){return xe.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,t){return xe.resolve(Xi.min())}updateCollectionGroup(e,t,r){return xe.resolve()}updateIndexEntries(e,t){return xe.resolve()}}class vk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ln(Bt.comparator),l=!i.has(r);return this.index[t]=i.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ln(Bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wa(0)}static kn(){return new Wa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.changes=new tl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?xe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Xl(r.mutation,i,kr.empty(),bn.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,dt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=dt()){const i=Ro();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((l=>{let c=Gl();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Ro();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,dt())))}populateOverlays(e,t,r){const i=[];return r.forEach((l=>{t.has(l)||i.push(l)})),this.documentOverlayCache.getOverlays(e,i).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,i){let l=hi();const c=Ql(),d=(function(){return Ql()})();return t.forEach(((p,f)=>{const y=r.get(f.key);i.has(f.key)&&(y===void 0||y.mutation instanceof io)?l=l.insert(f.key,f):y!==void 0?(c.set(f.key,y.mutation.getFieldMask()),Xl(y.mutation,f,y.mutation.getFieldMask(),bn.now())):c.set(f.key,kr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((f,y)=>c.set(f,y))),t.forEach(((f,y)=>{var b;return d.set(f,new wk(y,(b=c.get(f))!==null&&b!==void 0?b:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=Ql();let i=new Kt(((c,d)=>c-d)),l=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const f=t.get(p);if(f===null)return;let y=r.get(p)||kr.empty();y=d.applyToLocalView(f,y),r.set(p,y);const b=(i.get(d.batchId)||dt()).add(p);i=i.insert(d.batchId,b)}))})).next((()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),f=p.key,y=p.value,b=jw();y.forEach((N=>{if(!l.has(N)){const E=Lw(t.get(N),r.get(N));E!==null&&b.set(N,E),l=l.add(N)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,b))}return xe.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return qe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ew(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((l=>{const c=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-l.size):xe.resolve(Ro());let d=-1,p=l;return c.next((f=>xe.forEach(f,((y,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),l.get(y)?xe.resolve():this.remoteDocumentCache.getEntry(e,y).next((N=>{p=p.insert(y,N)}))))).next((()=>this.populateOverlays(e,f,l))).next((()=>this.computeViews(e,p,f,dt()))).next((y=>({batchId:d,changes:Pw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next((r=>{let i=Gl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const l=t.collectionGroup;let c=Gl();return this.indexManager.getCollectionParents(e,l).next((d=>xe.forEach(d,(p=>{const f=(function(b,N){return new el(N,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((y=>{y.forEach(((b,N)=>{c=c.insert(b,N)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,i)))).next((c=>{l.forEach(((p,f)=>{const y=f.getKey();c.get(y)===null&&(c=c.insert(y,Wn.newInvalidDocument(y)))}));let d=Gl();return c.forEach(((p,f)=>{const y=l.get(p);y!==void 0&&Xl(y.mutation,f,kr.empty(),bn.now()),Zd(t,f)&&(d=d.insert(p,f))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return xe.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ts(i.createTime)}})(t)),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(i){return{name:i.name,query:xk(i.bundledQuery),readTime:Ts(i.readTime)}})(t)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.overlays=new Kt(qe.comparator),this.Ir=new Map}getOverlay(e,t){return xe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ro();return xe.forEach(t,(i=>this.getOverlay(e,i).next((l=>{l!==null&&r.set(i,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,l)=>{this.ht(e,t,l)})),xe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(r)),xe.resolve()}getOverlaysForCollection(e,t,r){const i=Ro(),l=t.length+1,c=new qe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,f=p.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===l&&p.largestBatchId>r&&i.set(p.getKey(),p)}return xe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let l=new Kt(((f,y)=>f-y));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let y=l.get(f.largestBatchId);y===null&&(y=Ro(),l=l.insert(f.largestBatchId,y)),y.set(f.getKey(),f)}}const d=Ro(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((f,y)=>d.set(f,y))),!(d.size()>=i)););return xe.resolve(d)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new WC(t,r));let l=this.Ir.get(t);l===void 0&&(l=dt(),this.Ir.set(t,l)),this.Ir.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this.sessionToken=Vn.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(){this.Tr=new Ln(Tn.Er),this.dr=new Ln(Tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Tn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new Tn(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new qe(new Bt([])),r=new Tn(t,e),i=new Tn(t,e+1),l=[];return this.dr.forEachInRange([r,i],(c=>{this.Vr(c),l.push(c.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new qe(new Bt([])),r=new Tn(t,e),i=new Tn(t,e+1);let l=dt();return this.dr.forEachInRange([r,i],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Tn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Tn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return qe.comparator(e.key,t.key)||_t(e.wr,t.wr)}static Ar(e,t){return _t(e.wr,t.wr)||qe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ln(Tn.Er)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new GC(l,t,r,i);this.mutationQueue.push(c);for(const d of i)this.br=this.br.add(new Tn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return xe.resolve(c)}lookupMutationBatch(e,t){return xe.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),l=i<0?0:i;return xe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Tn(t,0),i=new Tn(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([r,i],(c=>{const d=this.Dr(c.wr);l.push(d)})),xe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ln(_t);return t.forEach((i=>{const l=new Tn(i,0),c=new Tn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,c],(d=>{r=r.add(d.wr)}))})),xe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let l=r;qe.isDocumentKey(l)||(l=l.child(""));const c=new Tn(new qe(l),0);let d=new Ln(_t);return this.br.forEachWhile((p=>{const f=p.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(d=d.add(p.wr)),!0)}),c),xe.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Et(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return xe.forEach(t.mutations,(i=>{const l=new Tn(i.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new Tn(t,0),i=this.br.firstAfterOrEqual(r);return xe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.Mr=e,this.docs=(function(){return new Kt(qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),l=i?i.size:0,c=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return xe.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let r=hi();return t.forEach((i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():Wn.newInvalidDocument(i))})),xe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let l=hi();const c=t.path,d=new qe(c.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:f,value:{document:y}}=p.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||cC(lC(y),r)<=0||(i.has(y.key)||Zd(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return xe.resolve(l)}getAllFromCollectionGroup(e,t,r,i){Xe()}Or(e,t){return xe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Tk(this)}getSize(e){return xe.resolve(this.size)}}class Tk extends bk{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),xe.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.persistence=e,this.Nr=new tl((t=>vm(t)),bm),this.lastRemoteSnapshotVersion=tt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Cm,this.targetCount=0,this.kr=Wa.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,i)=>t(i))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),xe.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Wa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.Kn(t),xe.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,r){let i=0;const l=[];return this.Nr.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Nr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),xe.waitFor(l).next((()=>i))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return xe.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),xe.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach((c=>{l.push(i.markPotentiallyOrphaned(e,c))})),xe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return xe.resolve(r)}containsKey(e,t){return xe.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,t){this.qr={},this.overlays={},this.Qr=new mm(0),this.Kr=!1,this.Kr=!0,this.$r=new Ek,this.referenceDelegate=e(this),this.Ur=new Pk(this),this.indexManager=new yk,this.remoteDocumentCache=(function(i){return new kk(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new gk(t),this.Gr=new Nk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Ck(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new Ik(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((l=>this.referenceDelegate.jr(i).next((()=>l)))).toPromise().then((l=>(i.raiseOnCommittedEvent(),l)))}Hr(e,t){return xe.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class Ik extends dC{constructor(e){super(),this.currentSequenceNumber=e}}class km{constructor(e){this.persistence=e,this.Jr=new Cm,this.Yr=null}static Zr(e){return new km(e)}get Xr(){if(this.Yr)return this.Yr;throw Xe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),xe.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((l=>this.Xr.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.Xr,(r=>{const i=qe.fromPath(r);return this.ei(e,i).next((l=>{l||t.removeEntry(i,tt.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return xe.or([()=>xe.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=dt(),i=dt();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new Tm(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return RE()?8:hC(Jn())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const l={result:null};return this.Yi(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.Zi(e,t,i,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new Ak;return this.Xi(e,t,c).next((d=>{if(l.result=d,this.zi)return this.es(e,t,c,d.size)}))})).next((()=>l.result))}es(e,t,r,i){return r.documentReadCount<this.ji?(zl()<=mt.DEBUG&&Ve("QueryEngine","SDK will not create cache indexes for query:",Ia(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),xe.resolve()):(zl()<=mt.DEBUG&&Ve("QueryEngine","Query:",Ia(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(zl()<=mt.DEBUG&&Ve("QueryEngine","The SDK decides to create cache indexes for query:",Ia(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ks(t))):xe.resolve())}Yi(e,t){if(fy(t))return xe.resolve(null);let r=ks(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Mp(t,null,"F"),r=ks(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=dt(...l);return this.Ji.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const f=this.ts(t,d);return this.ns(t,f,c,p.readTime)?this.Yi(e,Mp(t,null,"F")):this.rs(e,f,t,p)}))))})))))}Zi(e,t,r,i){return fy(t)||i.isEqual(tt.min())?xe.resolve(null):this.Ji.getDocuments(e,r).next((l=>{const c=this.ts(t,l);return this.ns(t,c,r,i)?xe.resolve(null):(zl()<=mt.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ia(t)),this.rs(e,c,t,aC(i,-1)).next((d=>d)))}))}ts(e,t){let r=new Ln(kw(e));return t.forEach(((i,l)=>{Zd(e,l)&&(r=r.add(l))})),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Xi(e,t,r){return zl()<=mt.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Ia(t)),this.Ji.getDocumentsMatchingQuery(e,t,Xi.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Kt(_t),this._s=new tl((l=>vm(l)),bm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _k(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function Dk(n,e,t,r){return new Mk(n,e,t,r)}async function Kw(n,e){const t=nt(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((l=>(i=l,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let p=dt();for(const f of i){c.push(f.batchId);for(const y of f.mutations)p=p.add(y.key)}for(const f of l){d.push(f.batchId);for(const y of f.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(r,p).next((f=>({hs:f,removedBatchIds:c,addedBatchIds:d})))}))}))}function Lk(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,p,f,y){const b=f.batch,N=b.keys();let E=xe.resolve();return N.forEach((j=>{E=E.next((()=>y.getEntry(p,j))).next((k=>{const P=f.docVersions.get(j);Et(P!==null),k.version.compareTo(P)<0&&(b.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),y.addEntry(k)))}))})),E.next((()=>d.mutationQueue.removeMutationBatch(p,b)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=dt();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(p=p.add(d.batch.mutations[f].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function Jw(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function Vk(n,e){const t=nt(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const d=[];e.targetChanges.forEach(((y,b)=>{const N=i.get(b);if(!N)return;d.push(t.Ur.removeMatchingKeys(l,y.removedDocuments,b).next((()=>t.Ur.addMatchingKeys(l,y.addedDocuments,b))));let E=N.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?E=E.withResumeToken(Vn.EMPTY_BYTE_STRING,tt.min()).withLastLimboFreeSnapshotVersion(tt.min()):y.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(y.resumeToken,r)),i=i.insert(b,E),(function(k,P,$){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(N,E,y)&&d.push(t.Ur.updateTargetData(l,E))}));let p=hi(),f=dt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(Ok(l,c,e.documentUpdates).next((y=>{p=y.Ps,f=y.Is}))),!r.isEqual(tt.min())){const y=t.Ur.getLastRemoteSnapshotVersion(l).next((b=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(y)}return xe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,f))).next((()=>p))})).then((l=>(t.os=i,l)))}function Ok(n,e,t){let r=dt(),i=dt();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=hi();return t.forEach(((d,p)=>{const f=l.get(d);p.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(tt.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!f.isValidDocument()||p.version.compareTo(f.version)>0||p.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Ve("LocalStore","Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",p.version)})),{Ps:c,Is:i}}))}function Fk(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function zk(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Ur.getTargetData(r,e).next((l=>l?(i=l,xe.resolve(i)):t.Ur.allocateTargetId(r).next((c=>(i=new Hi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function Fp(n,e,t){const r=nt(n),i=r.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Cc(c))throw c;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Sy(n,e,t){const r=nt(n);let i=tt.min(),l=dt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,f,y){const b=nt(p),N=b._s.get(y);return N!==void 0?xe.resolve(b.os.get(N)):b.Ur.getTargetData(f,y)})(r,c,ks(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>r.ss.getDocumentsMatchingQuery(c,e,t?i:tt.min(),t?l:dt()))).next((d=>(Uk(r,jC(e),d),{documents:d,Ts:l})))))}function Uk(n,e,t){let r=n.us.get(e)||tt.min();t.forEach(((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.us.set(e,r)}class Ey{constructor(){this.activeTargetIds=LC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bk{constructor(){this.so=new Ey,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ey,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function ap(){return Yu===null?Yu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Yu++,"0x"+Yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection";class Gk extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${l}`}get Fo(){return!1}Mo(t,r,i,l,c){const d=ap(),p=this.xo(t,r.toUriEncodedString());Ve("RestConnection",`Sending RPC '${t}' ${d}:`,p,i);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,l,c),this.No(t,p,f,i).then((y=>(Ve("RestConnection",`Received RPC '${t}' ${d}: `,y),y)),(y=>{throw Ba("RestConnection",`RPC '${t}' ${d} failed with error: `,y,"url: ",p,"request:",i),y}))}Lo(t,r,i,l,c,d){return this.Mo(t,r,i,l,c)}Oo(t,r,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Za})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((l,c)=>t[c]=l)),i&&i.headers.forEach(((l,c)=>t[c]=l))}xo(t,r){const i=$k[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const l=ap();return new Promise(((c,d)=>{const p=new cw;p.setWithCredentials(!0),p.listenOnce(uw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case ad.NO_ERROR:const y=p.getResponseJson();Ve($n,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case ad.TIMEOUT:Ve($n,`RPC '${e}' ${l} timed out`),d(new Ae(ue.DEADLINE_EXCEEDED,"Request time out"));break;case ad.HTTP_ERROR:const b=p.getStatus();if(Ve($n,`RPC '${e}' ${l} failed with status:`,b,"response text:",p.getResponseText()),b>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const E=N==null?void 0:N.error;if(E&&E.status&&E.message){const j=(function(P){const $=P.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf($)>=0?$:ue.UNKNOWN})(E.status);d(new Ae(j,E.message))}else d(new Ae(ue.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Ae(ue.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Ve($n,`RPC '${e}' ${l} completed.`)}}));const f=JSON.stringify(i);Ve($n,`RPC '${e}' ${l} sending request:`,i),p.send(t,"POST",f,r,15)}))}Bo(e,t,r){const i=ap(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=fw(),d=hw(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(p.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const y=l.join("");Ve($n,`Creating RPC '${e}' stream ${i}: ${y}`,p);const b=c.createWebChannel(y,p);let N=!1,E=!1;const j=new Hk({Io:P=>{E?Ve($n,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(N||(Ve($n,`Opening RPC '${e}' stream ${i} transport.`),b.open(),N=!0),Ve($n,`RPC '${e}' stream ${i} sending:`,P),b.send(P))},To:()=>b.close()}),k=(P,$,q)=>{P.listen($,(J=>{try{q(J)}catch(se){setTimeout((()=>{throw se}),0)}}))};return k(b,Hl.EventType.OPEN,(()=>{E||(Ve($n,`RPC '${e}' stream ${i} transport opened.`),j.yo())})),k(b,Hl.EventType.CLOSE,(()=>{E||(E=!0,Ve($n,`RPC '${e}' stream ${i} transport closed`),j.So())})),k(b,Hl.EventType.ERROR,(P=>{E||(E=!0,Ba($n,`RPC '${e}' stream ${i} transport errored:`,P),j.So(new Ae(ue.UNAVAILABLE,"The operation could not be completed")))})),k(b,Hl.EventType.MESSAGE,(P=>{var $;if(!E){const q=P.data[0];Et(!!q);const J=q,se=J.error||(($=J[0])===null||$===void 0?void 0:$.error);if(se){Ve($n,`RPC '${e}' stream ${i} received error:`,se);const he=se.status;let K=(function(L){const V=dn[L];if(V!==void 0)return Ow(V)})(he),F=se.message;K===void 0&&(K=ue.INTERNAL,F="Unknown error status: "+he+" with message "+se.message),E=!0,j.So(new Ae(K,F)),b.close()}else Ve($n,`RPC '${e}' stream ${i} received:`,q),j.bo(q)}})),k(d,dw.STAT_EVENT,(P=>{P.stat===Tp.PROXY?Ve($n,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Tp.NOPROXY&&Ve($n,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{j.wo()}),0),j}}function lp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n){return new nk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t,r=1e3,i=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,t,r,i,l,c,d,p){this.ui=e,this.Ho=r,this.Jo=i,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yw(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(di(t.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===t&&this.P_(r,i)}),(r=>{e((()=>{const i=new Ae(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wk extends Qw{constructor(e,t,r,i,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=ik(this.serializer,e),r=(function(l){if(!("targetChange"in l))return tt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?tt.min():c.readTime?Ts(c.readTime):tt.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Op(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Ap(p)?{documents:lk(l,p)}:{query:ck(l,p)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Uw(l,c.resumeToken);const f=Dp(l,c.expectedCount);f!==null&&(d.expectedCount=f)}else if(c.snapshotVersion.compareTo(tt.min())>0){d.readTime=Td(l,c.snapshotVersion.toTimestamp());const f=Dp(l,c.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const r=dk(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Op(this.serializer),t.removeTarget=e,this.a_(t)}}class Kk extends Qw{constructor(e,t,r,i,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Et(!!e.streamToken),this.lastStreamToken=e.streamToken,Et(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=ak(e.writeResults,e.commitTime),r=Ts(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Op(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>ok(this.serializer,r)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Mo(e,Lp(t,r),i,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ae(ue.UNKNOWN,l.toString())}))}Lo(e,t,r,i,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Lo(e,Lp(t,r),i,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ae(ue.UNKNOWN,c.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Yk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(di(t),this.D_=!1):Ve("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,t,r,i,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((c=>{r.enqueueAndForget((async()=>{Jo(this)&&(Ve("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const f=nt(p);f.L_.add(4),await Pc(f),f.q_.set("Unknown"),f.L_.delete(4),await sh(f)})(this))}))})),this.q_=new Yk(r,i)}}async function sh(n){if(Jo(n))for(const e of n.B_)await e(!0)}async function Pc(n){for(const e of n.B_)await e(!1)}function Xw(n,e){const t=nt(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Am(t)?Im(t):nl(t).r_()&&jm(t,e))}function Pm(n,e){const t=nt(n),r=nl(t);t.N_.delete(e),r.r_()&&Zw(t,e),t.N_.size===0&&(r.r_()?r.o_():Jo(t)&&t.q_.set("Unknown"))}function jm(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nl(n).A_(e)}function Zw(n,e){n.Q_.xe(e),nl(n).R_(e)}function Im(n){n.Q_=new XC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),nl(n).start(),n.q_.v_()}function Am(n){return Jo(n)&&!nl(n).n_()&&n.N_.size>0}function Jo(n){return nt(n).L_.size===0}function e_(n){n.Q_=void 0}async function Xk(n){n.q_.set("Online")}async function Zk(n){n.N_.forEach(((e,t)=>{jm(n,e)}))}async function eT(n,e){e_(n),Am(n)?(n.q_.M_(e),Im(n)):n.q_.set("Unknown")}async function tT(n,e,t){if(n.q_.set("Online"),e instanceof zw&&e.state===2&&e.cause)try{await(async function(i,l){const c=l.cause;for(const d of l.targetIds)i.N_.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.N_.delete(d),i.Q_.removeTarget(d))})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pd(n,r)}else if(e instanceof ud?n.Q_.Ke(e):e instanceof Fw?n.Q_.He(e):n.Q_.We(e),!t.isEqual(tt.min()))try{const r=await Jw(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.Q_.rt(c);return d.targetChanges.forEach(((p,f)=>{if(p.resumeToken.approximateByteSize()>0){const y=l.N_.get(f);y&&l.N_.set(f,y.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,f)=>{const y=l.N_.get(p);if(!y)return;l.N_.set(p,y.withResumeToken(Vn.EMPTY_BYTE_STRING,y.snapshotVersion)),Zw(l,p);const b=new Hi(y.target,p,f,y.sequenceNumber);jm(l,b)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),await Pd(n,r)}}async function Pd(n,e,t){if(!Cc(e))throw e;n.L_.add(1),await Pc(n),n.q_.set("Offline"),t||(t=()=>Jw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ve("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await sh(n)}))}function t_(n,e){return e().catch((t=>Pd(n,t,e)))}async function ih(n){const e=nt(n),t=eo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;nT(e);)try{const i=await Fk(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,rT(e,i)}catch(i){await Pd(e,i)}n_(e)&&r_(e)}function nT(n){return Jo(n)&&n.O_.length<10}function rT(n,e){n.O_.push(e);const t=eo(n);t.r_()&&t.V_&&t.m_(e.mutations)}function n_(n){return Jo(n)&&!eo(n).n_()&&n.O_.length>0}function r_(n){eo(n).start()}async function sT(n){eo(n).p_()}async function iT(n){const e=eo(n);for(const t of n.O_)e.m_(t.mutations)}async function oT(n,e,t){const r=n.O_.shift(),i=Nm.from(r,e,t);await t_(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await ih(n)}async function aT(n,e){e&&eo(n).V_&&await(async function(r,i){if((function(c){return JC(c)&&c!==ue.ABORTED})(i.code)){const l=r.O_.shift();eo(r).s_(),await t_(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i))),await ih(r)}})(n,e),n_(n)&&r_(n)}async function ky(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=Jo(t);t.L_.add(3),await Pc(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await sh(t)}async function lT(n,e){const t=nt(n);e?(t.L_.delete(2),await sh(t)):e||(t.L_.add(2),await Pc(t),t.q_.set("Unknown"))}function nl(n){return n.K_||(n.K_=(function(t,r,i){const l=nt(t);return l.w_(),new Wk(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)})(n.datastore,n.asyncQueue,{Eo:Xk.bind(null,n),Ro:Zk.bind(null,n),mo:eT.bind(null,n),d_:tT.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),Am(n)?Im(n):n.q_.set("Unknown")):(await n.K_.stop(),e_(n))}))),n.K_}function eo(n){return n.U_||(n.U_=(function(t,r,i){const l=nt(t);return l.w_(),new Kk(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:sT.bind(null,n),mo:aT.bind(null,n),f_:iT.bind(null,n),g_:oT.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await ih(n)):(await n.U_.stop(),n.O_.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,t,r,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,l){const c=Date.now()+r,d=new Rm(e,t,c,i,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mm(n,e){if(di("AsyncQueue",`${e}: ${n}`),Cc(n))return new Ae(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=Gl(),this.sortedSet=new Kt(this.comparator)}static emptySet(e){return new Oa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Oa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.W_=new Kt(qe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Xe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ka{constructor(e,t,r,i,l,c,d,p,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ka(e,t,Oa.emptySet(t),c,r,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class uT{constructor(){this.queries=Py(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=nt(t),l=i.queries;i.queries=Py(),l.forEach(((c,d)=>{for(const p of d.j_)p.onError(r)}))})(this,new Ae(ue.ABORTED,"Firestore shutting down"))}}function Py(){return new tl((n=>Cw(n)),Xd)}async function Dm(n,e){const t=nt(n);let r=3;const i=e.query;let l=t.queries.get(i);l?!l.H_()&&e.J_()&&(r=2):(l=new cT,r=e.J_()?0:1);try{switch(r){case 0:l.z_=await t.onListen(i,!0);break;case 1:l.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=Mm(c,`Initialization of query '${Ia(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&Vm(t)}async function Lm(n,e){const t=nt(n),r=e.query;let i=3;const l=t.queries.get(r);if(l){const c=l.j_.indexOf(e);c>=0&&(l.j_.splice(c,1),l.j_.length===0?i=e.J_()?0:1:!l.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function dT(n,e){const t=nt(n);let r=!1;for(const i of e){const l=i.query,c=t.queries.get(l);if(c){for(const d of c.j_)d.X_(i)&&(r=!0);c.z_=i}}r&&Vm(t)}function hT(n,e,t){const r=nt(n),i=r.queries.get(e);if(i)for(const l of i.j_)l.onError(t);r.queries.delete(e)}function Vm(n){n.Y_.forEach((e=>{e.next()}))}var zp,jy;(jy=zp||(zp={})).ea="default",jy.Cache="cache";class Om{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ka(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==zp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e){this.key=e}}class i_{constructor(e){this.key=e}}class fT{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=dt(),this.mutatedKeys=dt(),this.Aa=kw(e),this.Ra=new Oa(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Ty,i=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,b)=>{const N=i.get(y),E=Zd(this.query,b)?b:null,j=!!N&&this.mutatedKeys.has(N.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let P=!1;N&&E?N.data.isEqual(E.data)?j!==k&&(r.track({type:3,doc:E}),P=!0):this.ga(N,E)||(r.track({type:2,doc:E}),P=!0,(p&&this.Aa(E,p)>0||f&&this.Aa(E,f)<0)&&(d=!0)):!N&&E?(r.track({type:0,doc:E}),P=!0):N&&!E&&(r.track({type:1,doc:N}),P=!0,(p||f)&&(d=!0)),P&&(E?(c=c.add(E),l=k?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Ra:c,fa:r,ns:d,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort(((y,b)=>(function(E,j){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return k(E)-k(j)})(y.type,b.type)||this.Aa(y.doc,b.doc))),this.pa(r),i=i!=null&&i;const d=t&&!i?this.ya():[],p=this.da.size===0&&this.current&&!i?1:0,f=p!==this.Ea;return this.Ea=p,c.length!==0||f?{snapshot:new Ka(this.query,e.Ra,l,c,e.mutatedKeys,p===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ty,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=dt(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new i_(r))})),this.da.forEach((r=>{e.has(r)||t.push(new s_(r))})),t}ba(e){this.Ta=e.Ts,this.da=dt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ka.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class pT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class mT{constructor(e){this.key=e,this.va=!1}}class gT{constructor(e,t,r,i,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new tl((d=>Cw(d)),Xd),this.Ma=new Map,this.xa=new Set,this.Oa=new Kt(qe.comparator),this.Na=new Map,this.La=new Cm,this.Ba={},this.ka=new Map,this.qa=Wa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function xT(n,e,t=!0){const r=d_(n);let i;const l=r.Fa.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.Da()):i=await o_(r,e,t,!0),i}async function yT(n,e){const t=d_(n);await o_(t,e,!0,!1)}async function o_(n,e,t,r){const i=await zk(n.localStore,ks(e)),l=i.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await vT(n,e,l,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&Xw(n.remoteStore,i),d}async function vT(n,e,t,r,i){n.Ka=(b,N,E)=>(async function(k,P,$,q){let J=P.view.ma($);J.ns&&(J=await Sy(k.localStore,P.query,!1).then((({documents:F})=>P.view.ma(F,J))));const se=q&&q.targetChanges.get(P.targetId),he=q&&q.targetMismatches.get(P.targetId)!=null,K=P.view.applyChanges(J,k.isPrimaryClient,se,he);return Ay(k,P.targetId,K.wa),K.snapshot})(n,b,N,E);const l=await Sy(n.localStore,e,!0),c=new fT(e,l.Ts),d=c.ma(l.documents),p=Tc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=c.applyChanges(d,n.isPrimaryClient,p);Ay(n,t,f.wa);const y=new pT(e,t,c);return n.Fa.set(e,y),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),f.snapshot}async function bT(n,e,t){const r=nt(n),i=r.Fa.get(e),l=r.Ma.get(i.targetId);if(l.length>1)return r.Ma.set(i.targetId,l.filter((c=>!Xd(c,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Fp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Pm(r.remoteStore,i.targetId),Up(r,i.targetId)})).catch(Ec)):(Up(r,i.targetId),await Fp(r.localStore,i.targetId,!0))}async function wT(n,e){const t=nt(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Pm(t.remoteStore,r.targetId))}async function _T(n,e,t){const r=PT(n);try{const i=await(function(c,d){const p=nt(c),f=bn.now(),y=d.reduce(((E,j)=>E.add(j.key)),dt());let b,N;return p.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let j=hi(),k=dt();return p.cs.getEntries(E,y).next((P=>{j=P,j.forEach((($,q)=>{q.isValidDocument()||(k=k.add($))}))})).next((()=>p.localDocuments.getOverlayedDocuments(E,j))).next((P=>{b=P;const $=[];for(const q of d){const J=$C(q,b.get(q.key).overlayedDocument);J!=null&&$.push(new io(q.key,J,yw(J.value.mapValue),cs.exists(!0)))}return p.mutationQueue.addMutationBatch(E,f,$,d)})).next((P=>{N=P;const $=P.applyToLocalDocumentSet(b,k);return p.documentOverlayCache.saveOverlays(E,P.batchId,$)}))})).then((()=>({batchId:N.batchId,changes:Pw(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,d,p){let f=c.Ba[c.currentUser.toKey()];f||(f=new Kt(_t)),f=f.insert(d,p),c.Ba[c.currentUser.toKey()]=f})(r,i.batchId,t),await jc(r,i.changes),await ih(r.remoteStore)}catch(i){const l=Mm(i,"Failed to persist write");t.reject(l)}}async function a_(n,e){const t=nt(n);try{const r=await Vk(t.localStore,e);e.targetChanges.forEach(((i,l)=>{const c=t.Na.get(l);c&&(Et(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.va=!0:i.modifiedDocuments.size>0?Et(c.va):i.removedDocuments.size>0&&(Et(c.va),c.va=!1))})),await jc(t,r,e)}catch(r){await Ec(r)}}function Iy(n,e,t){const r=nt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach(((l,c)=>{const d=c.view.Z_(e);d.snapshot&&i.push(d.snapshot)})),(function(c,d){const p=nt(c);p.onlineState=d;let f=!1;p.queries.forEach(((y,b)=>{for(const N of b.j_)N.Z_(d)&&(f=!0)})),f&&Vm(p)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NT(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),l=i&&i.key;if(l){let c=new Kt(qe.comparator);c=c.insert(l,Wn.newNoDocument(l,tt.min()));const d=dt().add(l),p=new nh(tt.min(),new Map,new Kt(_t),c,d);await a_(r,p),r.Oa=r.Oa.remove(l),r.Na.delete(e),Fm(r)}else await Fp(r.localStore,e,!1).then((()=>Up(r,e,t))).catch(Ec)}async function ST(n,e){const t=nt(n),r=e.batch.batchId;try{const i=await Lk(t.localStore,e);c_(t,r,null),l_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await jc(t,i)}catch(i){await Ec(i)}}async function ET(n,e,t){const r=nt(n);try{const i=await(function(c,d){const p=nt(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let y;return p.mutationQueue.lookupMutationBatch(f,d).next((b=>(Et(b!==null),y=b.keys(),p.mutationQueue.removeMutationBatch(f,b)))).next((()=>p.mutationQueue.performConsistencyCheck(f))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(f,y,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y))).next((()=>p.localDocuments.getDocuments(f,y)))}))})(r.localStore,e);c_(r,e,t),l_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await jc(r,i)}catch(i){await Ec(i)}}function l_(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function c_(n,e,t){const r=nt(n);let i=r.Ba[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Up(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||u_(n,r)}))}function u_(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Pm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Fm(n))}function Ay(n,e,t){for(const r of t)r instanceof s_?(n.La.addReference(r.key,e),CT(n,r)):r instanceof i_?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||u_(n,r.key)):Xe()}function CT(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.xa.add(r),Fm(n))}function Fm(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new qe(Bt.fromString(e)),r=n.qa.next();n.Na.set(r,new mT(t)),n.Oa=n.Oa.insert(t,r),Xw(n.remoteStore,new Hi(ks(Qd(t.path)),r,"TargetPurposeLimboResolution",mm.oe))}}async function jc(n,e,t){const r=nt(n),i=[],l=[],c=[];r.Fa.isEmpty()||(r.Fa.forEach(((d,p)=>{c.push(r.Ka(p,e,t).then((f=>{var y;if((f||t)&&r.isPrimaryClient){const b=f?!f.fromCache:(y=t==null?void 0:t.targetChanges.get(p.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(f){i.push(f);const b=Tm.Wi(p.targetId,f);l.push(b)}})))})),await Promise.all(c),r.Ca.d_(i),await(async function(p,f){const y=nt(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>xe.forEach(f,(N=>xe.forEach(N.$i,(E=>y.persistence.referenceDelegate.addReference(b,N.targetId,E))).next((()=>xe.forEach(N.Ui,(E=>y.persistence.referenceDelegate.removeReference(b,N.targetId,E)))))))))}catch(b){if(!Cc(b))throw b;Ve("LocalStore","Failed to update sequence numbers: "+b)}for(const b of f){const N=b.targetId;if(!b.fromCache){const E=y.os.get(N),j=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(j);y.os=y.os.insert(N,k)}}})(r.localStore,l))}async function kT(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=await Kw(t.localStore,e);t.currentUser=e,(function(l,c){l.ka.forEach((d=>{d.forEach((p=>{p.reject(new Ae(ue.CANCELLED,c))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jc(t,r.hs)}}function TT(n,e){const t=nt(n),r=t.Na.get(e);if(r&&r.va)return dt().add(r.key);{let i=dt();const l=t.Ma.get(e);if(!l)return i;for(const c of l){const d=t.Fa.get(c);i=i.unionWith(d.view.Va)}return i}}function d_(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=a_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NT.bind(null,e),e.Ca.d_=dT.bind(null,e.eventManager),e.Ca.$a=hT.bind(null,e.eventManager),e}function PT(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ST.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ET.bind(null,e),e}class jd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=rh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Dk(this.persistence,new Rk,e.initialUser,this.serializer)}Ga(e){return new jk(km.Zr,this.serializer)}Wa(e){return new Bk}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jd.provider={build:()=>new jd};class Bp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Iy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kT.bind(null,this.syncEngine),await lT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uT})()}createDatastore(e){const t=rh(e.databaseInfo.databaseId),r=(function(l){return new Gk(l)})(e.databaseInfo);return(function(l,c,d,p){return new Jk(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,l,c,d){return new Qk(r,i,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Iy(this.syncEngine,t,0)),(function(){return Cy.D()?new Cy:new qk})())}createSyncEngine(e,t){return(function(i,l,c,d,p,f,y){const b=new gT(i,l,c,d,p,f);return y&&(b.Qa=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const l=nt(i);Ve("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await Pc(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Bp.provider={build:()=>new Bp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,t,r,i,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Hn.UNAUTHENTICATED,this.clientId=mw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{Ve("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(Ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Mm(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function cp(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Kw(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Ry(n,e){n.asyncQueue.verifyOperationInProgress();const t=await IT(n);Ve("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>ky(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>ky(e.remoteStore,i))),n._onlineComponents=e}async function IT(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve("FirestoreClient","Using user provided OfflineComponentProvider");try{await cp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ue.FAILED_PRECONDITION||i.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ba("Error using user provided cache. Falling back to memory cache: "+t),await cp(n,new jd)}}else Ve("FirestoreClient","Using default OfflineComponentProvider"),await cp(n,new jd);return n._offlineComponents}async function h_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve("FirestoreClient","Using user provided OnlineComponentProvider"),await Ry(n,n._uninitializedComponentsProvider._online)):(Ve("FirestoreClient","Using default OnlineComponentProvider"),await Ry(n,new Bp))),n._onlineComponents}function AT(n){return h_(n).then((e=>e.syncEngine))}async function Id(n){const e=await h_(n),t=e.eventManager;return t.onListen=xT.bind(null,e.syncEngine),t.onUnlisten=bT.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=yT.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wT.bind(null,e.syncEngine),t}function RT(n,e,t={}){const r=new ai;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,f){const y=new zm({next:N=>{y.Za(),c.enqueueAndForget((()=>Lm(l,b)));const E=N.docs.has(d);!E&&N.fromCache?f.reject(new Ae(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&N.fromCache&&p&&p.source==="server"?f.reject(new Ae(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(N)},error:N=>f.reject(N)}),b=new Om(Qd(d.path),y,{includeMetadataChanges:!0,_a:!0});return Dm(l,b)})(await Id(n),n.asyncQueue,e,t,r))),r.promise}function MT(n,e,t={}){const r=new ai;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,f){const y=new zm({next:N=>{y.Za(),c.enqueueAndForget((()=>Lm(l,b))),N.fromCache&&p.source==="server"?f.reject(new Ae(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(N)},error:N=>f.reject(N)}),b=new Om(d,y,{includeMetadataChanges:!0,_a:!0});return Dm(l,b)})(await Id(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(n,e,t){if(!t)throw new Ae(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DT(n,e,t,r){if(e===!0&&r===!0)throw new Ae(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Dy(n){if(!qe.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ly(n){if(qe.isDocumentKey(n))throw new Ae(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Xe()}function jr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=oh(n);throw new Ae(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ae(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=f_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ae(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ah{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vy(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new X2;switch(r.type){case"firstParty":return new nC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ae(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=My.get(t);r&&(Ve("ComponentProvider","Removing Datastore"),My.delete(t),r.terminate())})(this),Promise.resolve()}}function LT(n,e,t,r={}){var i;const l=(n=jr(n,ah))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&Ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),r.mockUserToken){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=Hn.MOCK_USER;else{d=nw(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new Ae(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Hn(f)}n._authCredentials=new Z2(new pw(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oo(this.firestore,e,this._query)}}class Kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}}class Ji extends oo{constructor(e,t,r){super(e,t,Qd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new qe(e))}withConverter(e){return new Ji(this.firestore,e,this._path)}}function Es(n,e,...t){if(n=Zt(n),p_("collection","path",e),n instanceof ah){const r=Bt.fromString(e,...t);return Ly(r),new Ji(n,null,r)}{if(!(n instanceof Kn||n instanceof Ji))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bt.fromString(e,...t));return Ly(r),new Ji(n.firestore,null,r)}}function bt(n,e,...t){if(n=Zt(n),arguments.length===1&&(e=mw.newId()),p_("doc","path",e),n instanceof ah){const r=Bt.fromString(e,...t);return Dy(r),new Kn(n,null,new qe(r))}{if(!(n instanceof Kn||n instanceof Ji))throw new Ae(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Bt.fromString(e,...t));return Dy(r),new Kn(n.firestore,n instanceof Ji?n.converter:null,new qe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yw(this,"async_queue_retry"),this.Vu=()=>{const r=lp();r&&Ve("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=lp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=lp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new ai;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Cc(e))throw e;Ve("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d})(r);throw di("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=Rm.createAndSchedule(this,e,t,r,(l=>this.yu(l)));return this.Tu.push(i),i}fu(){this.Eu&&Xe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Fy(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const l of r)if(l in i&&typeof i[l]=="function")return!0;return!1})(n,["next","error","complete"])}class to extends ah{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Oy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Oy(e),this._firestoreClient=void 0,await e}}}function VT(n,e){const t=typeof n=="object"?n:fm(),r=typeof n=="string"?n:"(default)",i=Jd(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const l=Zb("firestore");l&&LT(i,...l)}return i}function lh(n){if(n._terminated)throw new Ae(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||OT(n),n._firestoreClient}function OT(n){var e,t,r;const i=n._freezeSettings(),l=(function(d,p,f,y){return new mC(d,p,f,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,f_(y.experimentalLongPollingOptions),y.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new jT(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ja(Vn.fromBase64String(e))}catch(t){throw new Ae(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ja(Vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ae(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _t(this._lat,e._lat)||_t(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==i[l])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=/^__.*__$/;class zT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new io(e,this.data,this.fieldMask,t,this.fieldTransforms):new kc(e,this.data,t,this.fieldTransforms)}}class m_{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new io(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function g_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class dh{constructor(e,t,r,i,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new dh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ad(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(g_(this.Cu)&&FT.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class UT{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rh(e)}Qu(e,t,r,i=!1){return new dh({Cu:e,methodName:t,qu:r,path:Dn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qm(n){const e=n._freezeSettings(),t=rh(n._databaseId);return new UT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BT(n,e,t,r,i,l={}){const c=n.Qu(l.merge||l.mergeFields?2:0,e,t,i);Hm("Data must be an object, but it was:",c,r);const d=x_(r,c);let p,f;if(l.merge)p=new kr(c.fieldMask),f=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const b of l.mergeFields){const N=qp(e,b,t);if(!c.contains(N))throw new Ae(ue.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);v_(y,N)||y.push(N)}p=new kr(y),f=c.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,f=c.fieldTransforms;return new zT(new mr(d),p,f)}class hh extends uh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hh}}function qT(n,e,t){return new dh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class $m extends uh{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=qT(this,e,!0),r=this.Ku.map((l=>rl(l,t))),i=new Ga(r);return new zC(e.path,i)}isEqual(e){return e instanceof $m&&ic(this.Ku,e.Ku)}}function $T(n,e,t,r){const i=n.Qu(1,e,t);Hm("Data must be an object, but it was:",i,r);const l=[],c=mr.empty();Ko(r,((p,f)=>{const y=Gm(e,p,t);f=Zt(f);const b=i.Nu(y);if(f instanceof hh)l.push(y);else{const N=rl(f,b);N!=null&&(l.push(y),c.set(y,N))}}));const d=new kr(l);return new m_(c,d,i.fieldTransforms)}function HT(n,e,t,r,i,l){const c=n.Qu(1,e,t),d=[qp(e,r,t)],p=[i];if(l.length%2!=0)throw new Ae(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<l.length;N+=2)d.push(qp(e,l[N])),p.push(l[N+1]);const f=[],y=mr.empty();for(let N=d.length-1;N>=0;--N)if(!v_(f,d[N])){const E=d[N];let j=p[N];j=Zt(j);const k=c.Nu(E);if(j instanceof hh)f.push(E);else{const P=rl(j,k);P!=null&&(f.push(E),y.set(E,P))}}const b=new kr(f);return new m_(y,b,c.fieldTransforms)}function GT(n,e,t,r=!1){return rl(t,n.Qu(r?4:3,e))}function rl(n,e){if(y_(n=Zt(n)))return Hm("Unsupported field value:",e,n),x_(n,e);if(n instanceof uh)return(function(r,i){if(!g_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(i);l&&i.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const l=[];let c=0;for(const d of r){let p=rl(d,i.Lu(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,i){if((r=Zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=bn.fromDate(r);return{timestampValue:Td(i.serializer,l)}}if(r instanceof bn){const l=new bn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Td(i.serializer,l)}}if(r instanceof Um)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ja)return{bytesValue:Uw(i.serializer,r._byteString)};if(r instanceof Kn){const l=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw i.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Em(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bm)return(function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.Bu("VectorValues must only contain numeric values.");return wm(d.serializer,p)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${oh(r)}`)})(n,e)}function x_(n,e){const t={};return gw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ko(n,((r,i)=>{const l=rl(i,e.Mu(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function y_(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bn||n instanceof Um||n instanceof Ja||n instanceof Kn||n instanceof uh||n instanceof Bm)}function Hm(n,e,t){if(!y_(t)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(t)){const r=oh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function qp(n,e,t){if((e=Zt(e))instanceof ch)return e._internalPath;if(typeof e=="string")return Gm(n,e);throw Ad("Field path arguments must be of type string or ",n,!1,void 0,t)}const WT=new RegExp("[~\\*/\\[\\]]");function Gm(n,e,t){if(e.search(WT)>=0)throw Ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ch(...e.split("."))._internalPath}catch{throw Ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ad(n,e,t,r,i){const l=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new Ae(ue.INVALID_ARGUMENT,d+n+p)}function v_(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t,r,i,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new KT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class KT extends b_{data(){return super.data()}}function fh(n,e){return typeof e=="string"?Gm(n,e):e instanceof ch?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ae(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wm{}class __ extends Wm{}function Zs(n,e,...t){let r=[];e instanceof Wm&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((p=>p instanceof Km)).length,d=l.filter((p=>p instanceof ph)).length;if(c>1||c>0&&d>0)throw new Ae(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class ph extends __{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ph(e,t,r)}_apply(e){const t=this._parse(e);return N_(e._query,t),new oo(e.firestore,e.converter,Rp(e._query,t))}_parse(e){const t=qm(e.firestore);return(function(l,c,d,p,f,y,b){let N;if(f.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Uy(b,y);const E=[];for(const j of b)E.push(zy(p,l,j));N={arrayValue:{values:E}}}else N=zy(p,l,b)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Uy(b,y),N=GT(d,c,b,y==="in"||y==="not-in");return hn.create(f,y,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ma(n,e,t){const r=e,i=fh("where",n);return ph._create(i,r,t)}class Km extends Wm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Km(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:us.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,l){let c=i;const d=l.getFlattenedFilters();for(const p of d)N_(c,p),c=Rp(c,p)})(e._query,t),new oo(e.firestore,e.converter,Rp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jm extends __{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Jm(e,t)}_apply(e){const t=(function(i,l,c){if(i.startAt!==null)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dc(l,c)})(e._query,this._field,this._direction);return new oo(e.firestore,e.converter,(function(i,l){const c=i.explicitOrderBy.concat([l]);return new el(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function up(n,e="asc"){const t=e,r=fh("orderBy",n);return Jm._create(r,t)}function zy(n,e,t){if(typeof(t=Zt(t))=="string"){if(t==="")throw new Ae(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ew(e)&&t.indexOf("/")!==-1)throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Bt.fromString(t));if(!qe.isDocumentKey(r))throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ay(n,new qe(r))}if(t instanceof Kn)return ay(n,t._key);throw new Ae(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oh(t)}.`)}function Uy(n,e){if(!Array.isArray(n)||n.length===0)throw new Ae(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function N_(n,e){const t=(function(i,l){for(const c of i)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class JT{convertValue(e,t="none"){switch(Bo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return on(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ko(e,((i,l)=>{r[i]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,i;const l=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((c=>on(c.doubleValue)));return new Bm(l)}convertGeoPoint(e){return new Um(on(e.latitude),on(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=xm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){const t=Zi(e);return new bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Bt.fromString(e);Et(Ww(r));const i=new cc(r.get(1),r.get(3)),l=new qe(r.popFirst(5));return i.isEqual(t)||di(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class S_ extends b_{constructor(e,t,r,i,l,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new dd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(fh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class dd extends S_{data(e={}){return super.data(e)}}class E_{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Kl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new dd(this._firestore,this._userDataWriter,r.key,r,new Kl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,l){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((d=>{const p=new dd(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Kl(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new dd(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Kl(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,y=-1;return d.type!==0&&(f=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:QT(d.type),doc:p,oldIndex:f,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function QT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(n){n=jr(n,Kn);const e=jr(n.firestore,to);return RT(lh(e),n._key).then((t=>C_(e,n,t)))}class Ym extends JT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ja(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}function Da(n){n=jr(n,oo);const e=jr(n.firestore,to),t=lh(e),r=new Ym(e);return w_(n._query),MT(t,n._query).then((i=>new E_(e,r,n,i)))}function os(n,e,t){n=jr(n,Kn);const r=jr(n.firestore,to),i=YT(n.converter,e,t);return Qm(r,[BT(qm(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,cs.none())])}function un(n,e,t,...r){n=jr(n,Kn);const i=jr(n.firestore,to),l=qm(i);let c;return c=typeof(e=Zt(e))=="string"||e instanceof ch?HT(l,"updateDoc",n._key,e,t,r):$T(l,"updateDoc",n._key,e),Qm(i,[c.toMutation(n._key,cs.exists(!0))])}function Qu(n){return Qm(jr(n.firestore,to),[new _m(n._key,cs.none())])}function Xu(n,...e){var t,r,i;n=Zt(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Fy(e[c])||(l=e[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Fy(e[c])){const b=e[c];e[c]=(t=b.next)===null||t===void 0?void 0:t.bind(b),e[c+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),e[c+2]=(i=b.complete)===null||i===void 0?void 0:i.bind(b)}let p,f,y;if(n instanceof Kn)f=jr(n.firestore,to),y=Qd(n._key.path),p={next:b=>{e[c]&&e[c](C_(f,n,b))},error:e[c+1],complete:e[c+2]};else{const b=jr(n,oo);f=jr(b.firestore,to),y=b._query;const N=new Ym(f);p={next:E=>{e[c]&&e[c](new E_(f,N,b,E))},error:e[c+1],complete:e[c+2]},w_(n._query)}return(function(N,E,j,k){const P=new zm(k),$=new Om(E,P,j);return N.asyncQueue.enqueueAndForget((async()=>Dm(await Id(N),$))),()=>{P.Za(),N.asyncQueue.enqueueAndForget((async()=>Lm(await Id(N),$)))}})(lh(f),y,d,p)}function Qm(n,e){return(function(r,i){const l=new ai;return r.asyncQueue.enqueueAndForget((async()=>_T(await AT(r),i,l))),l.promise})(lh(n),e)}function C_(n,e,t){const r=t.docs.get(e._key),i=new Ym(n);return new S_(n,i,e._key,r,new Kl(t.hasPendingWrites,t.fromCache),e.converter)}function $p(...n){return new $m("arrayUnion",n)}(function(e,t=!0){(function(i){Za=i})(Wo),Fo(new Qi("firestore",((r,{instanceIdentifier:i,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new to(new eC(r.getProvider("auth-internal")),new sC(r.getProvider("app-check-internal")),(function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ae(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cc(f.options.projectId,y)})(c,i),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Cs(ny,"4.7.3",e),Cs(ny,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="firebasestorage.googleapis.com",T_="storageBucket",XT=120*1e3,ZT=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn extends Ms{constructor(e,t,r=0){super(dp(e),`Firebase Storage: ${t} (${dp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var en;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(en||(en={}));function dp(n){return"storage/"+n}function Xm(){const n="An unknown error occurred, please check the error payload for server response.";return new nn(en.UNKNOWN,n)}function eP(n){return new nn(en.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function tP(n){return new nn(en.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function nP(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new nn(en.UNAUTHENTICATED,n)}function rP(){return new nn(en.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function sP(n){return new nn(en.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function iP(){return new nn(en.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oP(){return new nn(en.CANCELED,"User canceled the upload/download.")}function aP(n){return new nn(en.INVALID_URL,"Invalid URL '"+n+"'.")}function lP(n){return new nn(en.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function cP(){return new nn(en.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+T_+"' property when initializing the app?")}function uP(){return new nn(en.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dP(){return new nn(en.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hP(n){return new nn(en.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hp(n){return new nn(en.INVALID_ARGUMENT,n)}function P_(){return new nn(en.APP_DELETED,"The Firebase app was deleted.")}function fP(n){return new nn(en.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zl(n,e){return new nn(en.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ul(n){throw new nn(en.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Tr.makeFromUrl(e,t)}catch{return new Tr(e,"")}if(r.path==="")return r;throw lP(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function l(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+i+c,"i"),p={bucket:1,path:3};function f(se){se.path_=decodeURIComponent(se.path)}const y="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",E=new RegExp(`^https?://${b}/${y}/b/${i}/o${N}`,"i"),j={bucket:1,path:3},k=t===k_?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",$=new RegExp(`^https?://${k}/${i}/${P}`,"i"),J=[{regex:d,indices:p,postModify:l},{regex:E,indices:j,postModify:f},{regex:$,indices:{bucket:1,path:2},postModify:f}];for(let se=0;se<J.length;se++){const he=J[se],K=he.regex.exec(e);if(K){const F=K[he.indices.bucket];let A=K[he.indices.path];A||(A=""),r=new Tr(F,A),he.postModify(r);break}}if(r==null)throw aP(e);return r}}class pP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(n,e,t){let r=1,i=null,l=null,c=!1,d=0;function p(){return d===2}let f=!1;function y(...P){f||(f=!0,e.apply(null,P))}function b(P){i=setTimeout(()=>{i=null,n(E,p())},P)}function N(){l&&clearTimeout(l)}function E(P,...$){if(f){N();return}if(P){N(),y.call(null,P,...$);return}if(p()||c){N(),y.call(null,P,...$);return}r<64&&(r*=2);let J;d===1?(d=2,J=0):J=(r+Math.random())*1e3,b(J)}let j=!1;function k(P){j||(j=!0,N(),!f&&(i!==null?(P||(d=2),clearTimeout(i),b(0)):P||(d=1)))}return b(0),l=setTimeout(()=>{c=!0,k(!0)},t),k}function gP(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(n){return n!==void 0}function yP(n){return typeof n=="object"&&!Array.isArray(n)}function Zm(n){return typeof n=="string"||n instanceof String}function qy(n){return eg()&&n instanceof Blob}function eg(){return typeof Blob<"u"}function $y(n,e,t,r){if(r<e)throw Hp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Hp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tg(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function j_(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Oo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Oo||(Oo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||i||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t,r,i,l,c,d,p,f,y,b,N=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=f,this.progressCallback_=y,this.connectionFactory_=b,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,j)=>{this.resolve_=E,this.reject_=j,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Zu(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const p=d.loaded,f=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,f)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===Oo.NO_ERROR,p=l.getStatus();if(!d||vP(p,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Oo.ABORT;r(!1,new Zu(!1,null,y));return}const f=this.successCodes_.indexOf(p)!==-1;r(!0,new Zu(f,l))})},t=(r,i)=>{const l=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());xP(p)?l(p):l()}catch(p){c(p)}else if(d!==null){const p=Xm();p.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,p)):c(p)}else if(i.canceled){const p=this.appDelete_?P_():oP();c(p)}else{const p=iP();c(p)}};this.canceled_?t(!1,new Zu(!1,null,!0)):this.backoffId_=mP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Zu{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function wP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function _P(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function SP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function EP(n,e,t,r,i,l,c=!0){const d=j_(n.urlParams),p=n.url+d,f=Object.assign({},n.headers);return NP(f,e),wP(f,t),_P(f,l),SP(f,r),new bP(p,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function kP(...n){const e=CP();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(eg())return new Blob(n);throw new nn(en.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function TP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n){if(typeof atob>"u")throw hP("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hp{constructor(e,t){this.data=e,this.contentType=t||null}}function I_(n,e){switch(n){case ls.RAW:return new hp(A_(e));case ls.BASE64:case ls.BASE64URL:return new hp(R_(n,e));case ls.DATA_URL:return new hp(IP(e),AP(e))}throw Xm()}function A_(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=r,c=n.charCodeAt(++t);r=65536|(l&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function jP(n){let e;try{e=decodeURIComponent(n)}catch{throw Zl(ls.DATA_URL,"Malformed data URL.")}return A_(e)}function R_(n,e){switch(n){case ls.BASE64:{const i=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(i||l)throw Zl(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ls.BASE64URL:{const i=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(i||l)throw Zl(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=PP(e)}catch(i){throw i.message.includes("polyfill")?i:Zl(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class M_{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Zl(ls.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=RP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function IP(n){const e=new M_(n);return e.base64?R_(ls.BASE64,e.rest):jP(e.rest)}function AP(n){return new M_(n).contentType}function RP(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){let r=0,i="";qy(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(qy(this.data_)){const r=this.data_,i=TP(r,e,t);return i===null?null:new Fi(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Fi(r,!0)}}static getBlob(...e){if(eg()){const t=e.map(r=>r instanceof Fi?r.data_:r);return new Fi(kP.apply(null,t))}else{const t=e.map(c=>Zm(c)?I_(ls.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let l=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)i[l++]=c[d]}),new Fi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(n){let e;try{e=JSON.parse(n)}catch{return null}return yP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function DP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function L_(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(n,e){return e}class nr{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||LP}}let ed=null;function VP(n){return!Zm(n)||n.length<2?n:L_(n)}function V_(){if(ed)return ed;const n=[];n.push(new nr("bucket")),n.push(new nr("generation")),n.push(new nr("metageneration")),n.push(new nr("name","fullPath",!0));function e(l,c){return VP(c)}const t=new nr("name");t.xform=e,n.push(t);function r(l,c){return c!==void 0?Number(c):c}const i=new nr("size");return i.xform=r,n.push(i),n.push(new nr("timeCreated")),n.push(new nr("updated")),n.push(new nr("md5Hash",null,!0)),n.push(new nr("cacheControl",null,!0)),n.push(new nr("contentDisposition",null,!0)),n.push(new nr("contentEncoding",null,!0)),n.push(new nr("contentLanguage",null,!0)),n.push(new nr("contentType",null,!0)),n.push(new nr("metadata","customMetadata",!0)),ed=n,ed}function OP(n,e){function t(){const r=n.bucket,i=n.fullPath,l=new Tr(r,i);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function FP(n,e,t){const r={};r.type="file";const i=t.length;for(let l=0;l<i;l++){const c=t[l];r[c.local]=c.xform(r,e[c.server])}return OP(r,n),r}function O_(n,e,t){const r=D_(e);return r===null?null:FP(n,r,t)}function zP(n,e,t,r){const i=D_(e);if(i===null||!Zm(i.downloadTokens))return null;const l=i.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(f=>{const y=n.bucket,b=n.fullPath,N="/b/"+c(y)+"/o/"+c(b),E=tg(N,t,r),j=j_({alt:"media",token:f});return E+j})[0]}function UP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const l=e[i];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class F_{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(n){if(!n)throw Xm()}function BP(n,e){function t(r,i){const l=O_(n,i,e);return z_(l!==null),l}return t}function qP(n,e){function t(r,i){const l=O_(n,i,e);return z_(l!==null),zP(l,i,n.host,n._protocol)}return t}function U_(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=rP():i=nP():t.getStatus()===402?i=tP(n.bucket):t.getStatus()===403?i=sP(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function $P(n){const e=U_(n);function t(r,i){let l=e(r,i);return r.getStatus()===404&&(l=eP(n.path)),l.serverResponse=i.serverResponse,l}return t}function HP(n,e,t){const r=e.fullServerUrl(),i=tg(r,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new F_(i,l,qP(n,t),c);return d.errorHandler=$P(e),d}function GP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function WP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=GP(null,e)),r}function KP(n,e,t,r,i){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let J="";for(let se=0;se<2;se++)J=J+Math.random().toString().slice(2);return J}const p=d();c["Content-Type"]="multipart/related; boundary="+p;const f=WP(e,r,i),y=UP(f,t),b="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+p+`\r
Content-Type: `+f.contentType+`\r
\r
`,N=`\r
--`+p+"--",E=Fi.getBlob(b,r,N);if(E===null)throw uP();const j={name:f.fullPath},k=tg(l,n.host,n._protocol),P="POST",$=n.maxUploadRetryTime,q=new F_(k,P,BP(n,t),$);return q.urlParams=j,q.headers=c,q.body=E.uploadData(),q.errorHandler=U_(e),q}class JP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ul("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ul("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ul("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ul("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ul("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class YP extends JP{initXhr(){this.xhr_.responseType="text"}}function B_(){return new YP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t){this._service=e,t instanceof Tr?this._location=t:this._location=Tr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new qo(e,t)}get root(){const e=new Tr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return L_(this._location.path)}get storage(){return this._service}get parent(){const e=MP(this._location.path);if(e===null)return null;const t=new Tr(this._location.bucket,e);return new qo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw fP(e)}}function q_(n,e,t){n._throwIfRoot("uploadBytes");const r=KP(n.storage,n._location,V_(),new Fi(e,!0),t);return n.storage.makeRequestWithTokens(r,B_).then(i=>({metadata:i,ref:n}))}function QP(n,e,t=ls.RAW,r){n._throwIfRoot("uploadString");const i=I_(t,e),l=Object.assign({},r);return l.contentType==null&&i.contentType!=null&&(l.contentType=i.contentType),q_(n,i.data,l)}function XP(n){n._throwIfRoot("getDownloadURL");const e=HP(n.storage,n._location,V_());return n.storage.makeRequestWithTokens(e,B_).then(t=>{if(t===null)throw dP();return t})}function ZP(n,e){const t=DP(n._location.path,e),r=new Tr(n._location.bucket,t);return new qo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(n){return/^[A-Za-z]+:\/\//.test(n)}function tj(n,e){return new qo(n,e)}function $_(n,e){if(n instanceof ng){const t=n;if(t._bucket==null)throw cP();const r=new qo(t,t._bucket);return e!=null?$_(r,e):r}else return e!==void 0?ZP(n,e):n}function nj(n,e){if(e&&ej(e)){if(n instanceof ng)return tj(n,e);throw Hp("To use ref(service, url), the first argument must be a Storage instance.")}else return $_(n,e)}function Hy(n,e){const t=e==null?void 0:e[T_];return t==null?null:Tr.makeFromBucketSpec(t,n)}function rj(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:nw(i,n.app.options.projectId))}class ng{constructor(e,t,r,i,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=k_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=XT,this._maxUploadRetryTime=ZT,this._requests=new Set,i!=null?this._bucket=Tr.makeFromBucketSpec(i,this._host):this._bucket=Hy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tr.makeFromBucketSpec(this._url,e):this._bucket=Hy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$y("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$y("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qo(this,e)}_makeRequest(e,t,r,i,l=!0){if(this._deleted)return new pP(P_());{const c=EP(e,this._appId,r,i,t,this._firebaseVersion,l);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const Gy="@firebase/storage",Wy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="storage";function sj(n,e,t){return n=Zt(n),q_(n,e,t)}function ij(n,e,t,r){return n=Zt(n),QP(n,e,t,r)}function ni(n){return n=Zt(n),XP(n)}function ri(n,e){return n=Zt(n),nj(n,e)}function oj(n=fm(),e){n=Zt(n);const r=Jd(n,H_).getImmediate({identifier:e}),i=Zb("storage");return i&&aj(r,...i),r}function aj(n,e,t,r={}){rj(n,e,t,r)}function lj(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ng(t,r,i,e,Wo)}function cj(){Fo(new Qi(H_,lj,"PUBLIC").setMultipleInstances(!0)),Cs(Gy,Wy,""),Cs(Gy,Wy,"esm2017")}cj();function rg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function G_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uj=G_,W_=new Nc("auth","Firebase",G_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new dm("@firebase/auth");function dj(n,...e){Rd.logLevel<=mt.WARN&&Rd.warn(`Auth (${Wo}): ${n}`,...e)}function hd(n,...e){Rd.logLevel<=mt.ERROR&&Rd.error(`Auth (${Wo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(n,...e){throw sg(n,...e)}function Ps(n,...e){return sg(n,...e)}function K_(n,e,t){const r=Object.assign(Object.assign({},uj()),{[e]:t});return new Nc("auth","Firebase",r).create(e,{appName:n.name})}function Yi(n){return K_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return W_.create(n,...e)}function Je(n,e,...t){if(!n)throw sg(e,...t)}function si(n){const e="INTERNAL ASSERTION FAILED: "+n;throw hd(e),new Error(e)}function fi(n,e){n||si(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function hj(){return Ky()==="http:"||Ky()==="https:"}function Ky(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hj()||jE()||"connection"in navigator)?navigator.onLine:!0}function pj(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t){this.shortDelay=e,this.longDelay=t,fi(t>e,"Short delay should be less than long delay!"),this.isMobile=kE()||IE()}get(){return fj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(n,e){fi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new Ic(3e4,6e4);function Yo(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ao(n,e,t,r,i={}){return Y_(n,i,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=Sc(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:p},l);return PE()||(f.referrerPolicy="no-referrer"),J_.fetch()(Q_(n,n.config.apiHost,t,d),f)})}async function Y_(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},mj),e);try{const i=new yj(n),l=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw td(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,f]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw td(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw td(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw td(n,"user-disabled",c);const y=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw K_(n,y,f);ds(n,y)}}catch(i){if(i instanceof Ms)throw i;ds(n,"network-request-failed",{message:String(i)})}}async function mh(n,e,t,r,i={}){const l=await ao(n,e,t,r,i);return"mfaPendingCredential"in l&&ds(n,"multi-factor-auth-required",{_serverResponse:l}),l}function Q_(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?ig(n.config,i):`${n.config.apiScheme}://${i}`}function xj(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ps(this.auth,"network-request-failed")),gj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function td(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ps(n,e,r);return i.customData._tokenResponse=t,i}function Jy(n){return n!==void 0&&n.enterprise!==void 0}class vj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xj(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function bj(n,e){return ao(n,"GET","/v2/recaptchaConfig",Yo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wj(n,e){return ao(n,"POST","/v1/accounts:delete",e)}async function X_(n,e){return ao(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _j(n,e=!1){const t=Zt(n),r=await t.getIdToken(e),i=og(r);Je(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:i,token:r,authTime:ec(fp(i.auth_time)),issuedAtTime:ec(fp(i.iat)),expirationTime:ec(fp(i.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function fp(n){return Number(n)*1e3}function og(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return hd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qb(t);return i?JSON.parse(i):(hd("Failed to decode base64 JWT payload"),null)}catch(i){return hd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Yy(n){const e=og(n);return Je(e,"internal-error"),Je(typeof e.exp<"u","internal-error"),Je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ms&&Nj(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Nj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Md(n){var e;const t=n.auth,r=await n.getIdToken(),i=await fc(n,X_(t,{idToken:r}));Je(i==null?void 0:i.users.length,t,"internal-error");const l=i.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Z_(l.providerUserInfo):[],d=Cj(n.providerData,c),p=n.isAnonymous,f=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),y=p?f:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Wp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(n,b)}async function Ej(n){const e=Zt(n);await Md(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Cj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Z_(n){return n.map(e=>{var{providerId:t}=e,r=rg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(n,e){const t=await Y_(n,{},async()=>{const r=Sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=n.config,c=Q_(n,i,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",J_.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Tj(n,e){return ao(n,"POST","/v2/accounts:revokeToken",Yo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Je(e.idToken,"internal-error"),Je(typeof e.idToken<"u","internal-error"),Je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Je(e.length!==0,"internal-error");const t=Yy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:l}=await kj(e,t);this.updateTokensAndExpiration(r,i,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:l}=t,c=new Fa;return r&&(Je(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Je(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),l&&(Je(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fa,this.toJSON())}_performRefresh(){return si("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(n,e){Je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ii{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,l=rg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Sj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Wp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await fc(this,this.stsTokenManager.getToken(this.auth,e));return Je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _j(this,e)}reload(){return Ej(this)}_assign(e){this!==e&&(Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ii(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Md(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ti(this.auth.app))return Promise.reject(Yi(this.auth));const e=await this.getIdToken();return await fc(this,wj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,l,c,d,p,f,y;const b=(r=t.displayName)!==null&&r!==void 0?r:void 0,N=(i=t.email)!==null&&i!==void 0?i:void 0,E=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,j=(c=t.photoURL)!==null&&c!==void 0?c:void 0,k=(d=t.tenantId)!==null&&d!==void 0?d:void 0,P=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,$=(f=t.createdAt)!==null&&f!==void 0?f:void 0,q=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:J,emailVerified:se,isAnonymous:he,providerData:K,stsTokenManager:F}=t;Je(J&&F,e,"internal-error");const A=Fa.fromJSON(this.name,F);Je(typeof J=="string",e,"internal-error"),Oi(b,e.name),Oi(N,e.name),Je(typeof se=="boolean",e,"internal-error"),Je(typeof he=="boolean",e,"internal-error"),Oi(E,e.name),Oi(j,e.name),Oi(k,e.name),Oi(P,e.name),Oi($,e.name),Oi(q,e.name);const L=new ii({uid:J,auth:e,email:N,emailVerified:se,displayName:b,isAnonymous:he,photoURL:j,phoneNumber:E,tenantId:k,stsTokenManager:A,createdAt:$,lastLoginAt:q});return K&&Array.isArray(K)&&(L.providerData=K.map(V=>Object.assign({},V))),P&&(L._redirectEventId=P),L}static async _fromIdTokenResponse(e,t,r=!1){const i=new Fa;i.updateFromServerResponse(t);const l=new ii({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Md(l),l}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Je(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?Z_(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),d=new Fa;d.updateFromIdToken(r);const p=new ii({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Wp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,f),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=new Map;function oi(n){fi(n instanceof Function,"Expected a class definition");let e=Qy.get(n);return e?(fi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Qy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}eN.type="NONE";const Xy=eN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(n,e,t){return`firebase:${n}:${e}:${t}`}class za{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:l}=this.auth;this.fullUserKey=fd(this.userKey,i.apiKey,l),this.fullPersistenceKey=fd("persistence",i.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ii._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new za(oi(Xy),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=i[0]||oi(Xy);const c=fd(r,e.config.apiKey,e.name);let d=null;for(const f of t)try{const y=await f._get(c);if(y){const b=ii._fromJSON(e,y);f!==l&&(d=b),l=f;break}}catch{}const p=i.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new za(l,e,r):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async f=>{if(f!==l)try{await f._remove(c)}catch{}})),new za(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oN(e))return"Blackberry";if(aN(e))return"Webos";if(nN(e))return"Safari";if((e.includes("chrome/")||rN(e))&&!e.includes("edge/"))return"Chrome";if(iN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function tN(n=Jn()){return/firefox\//i.test(n)}function nN(n=Jn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rN(n=Jn()){return/crios\//i.test(n)}function sN(n=Jn()){return/iemobile/i.test(n)}function iN(n=Jn()){return/android/i.test(n)}function oN(n=Jn()){return/blackberry/i.test(n)}function aN(n=Jn()){return/webos/i.test(n)}function ag(n=Jn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Pj(n=Jn()){var e;return ag(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jj(){return AE()&&document.documentMode===10}function lN(n=Jn()){return ag(n)||iN(n)||aN(n)||oN(n)||/windows phone/i.test(n)||sN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n,e=[]){let t;switch(n){case"Browser":t=Zy(Jn());break;case"Worker":t=`${Zy(Jn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aj(n,e={}){return ao(n,"GET","/v2/passwordPolicy",Yo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=6;class Mj{constructor(e){var t,r,i,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:Rj,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,l,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(i=p.containsLowercaseLetter)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ev(this),this.idTokenSubscription=new ev(this),this.beforeStateQueue=new Ij(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oi(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await za.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await X_(this,{idToken:e}),r=await ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ti(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Md(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ti(this.app))return Promise.reject(Yi(this));const t=e?Zt(e):null;return t&&Je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ti(this.app)?Promise.reject(Yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ti(this.app)?Promise.reject(Yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Aj(this),t=new Mj(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Nc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Tj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oi(e)||this._popupRedirectResolver;Je(t,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[oi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,i);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&dj(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function sl(n){return Zt(n)}class ev{constructor(e){this.auth=e,this.observer=null,this.addObserver=zE(t=>this.observer=t)}get next(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Lj(n){gh=n}function uN(n){return gh.loadJS(n)}function Vj(){return gh.recaptchaEnterpriseScript}function Oj(){return gh.gapiScript}function Fj(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const zj="recaptcha-enterprise",Uj="NO_RECAPTCHA";class Bj{constructor(e){this.type=zj,this.auth=sl(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{bj(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const f=new vj(p);return l.tenantId==null?l._agentRecaptchaConfig=f:l._tenantRecaptchaConfigs[l.tenantId]=f,c(f.siteKey)}}).catch(p=>{d(p)})})}function i(l,c,d){const p=window.grecaptcha;Jy(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(f=>{c(f)}).catch(()=>{c(Uj)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,c)=>{r(this.auth).then(d=>{if(!t&&Jy(window.grecaptcha))i(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Vj();p.length!==0&&(p+=d),uN(p).then(()=>{i(d,l,c)}).catch(f=>{c(f)})}}).catch(d=>{c(d)})})}}async function tv(n,e,t,r=!1){const i=new Bj(n);let l;try{l=await i.verify(t)}catch{l=await i.verify(t,!0)}const c=Object.assign({},e);return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function nv(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await tv(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await tv(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(n,e){const t=Jd(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),l=t.getOptions();if(ic(l,e??{}))return i;ds(i,"already-initialized")}return t.initialize({options:e})}function $j(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(oi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Hj(n,e,t){const r=sl(n);Je(r._canInitEmulator,r,"emulator-config-failed"),Je(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,l=dN(e),{host:c,port:d}=Gj(e),p=d===null?"":`:${d}`;r.config.emulator={url:`${l}//${c}${p}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})}),Wj()}function dN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Gj(n){const e=dN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const l=i[1];return{host:l,port:rv(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:rv(c)}}}function rv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Wj(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return si("not implemented")}_getIdTokenResponse(e){return si("not implemented")}_linkToIdToken(e,t){return si("not implemented")}_getReauthenticationResolver(e){return si("not implemented")}}async function Kj(n,e){return ao(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jj(n,e){return mh(n,"POST","/v1/accounts:signInWithPassword",Yo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yj(n,e){return mh(n,"POST","/v1/accounts:signInWithEmailLink",Yo(n,e))}async function Qj(n,e){return mh(n,"POST","/v1/accounts:signInWithEmailLink",Yo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends lg{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new pc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new pc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nv(e,t,"signInWithPassword",Jj);case"emailLink":return Yj(e,{email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nv(e,r,"signUpPassword",Kj);case"emailLink":return Qj(e,{idToken:t,email:this._email,oobCode:this._password});default:ds(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ua(n,e){return mh(n,"POST","/v1/accounts:signInWithIdp",Yo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj="http://localhost";class $o extends lg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ds("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,l=rg(t,["providerId","signInMethod"]);if(!r||!i)return null;const c=new $o(r,i);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ua(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ua(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ua(e,t)}buildRequest(){const e={requestUri:Xj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eI(n){const e=ql($l(n)).link,t=e?ql($l(e)).deep_link_id:null,r=ql($l(n)).deep_link_id;return(r?ql($l(r)).link:null)||r||t||e||n}class cg{constructor(e){var t,r,i,l,c,d;const p=ql($l(e)),f=(t=p.apiKey)!==null&&t!==void 0?t:null,y=(r=p.oobCode)!==null&&r!==void 0?r:null,b=Zj((i=p.mode)!==null&&i!==void 0?i:null);Je(f&&y&&b,"argument-error"),this.apiKey=f,this.operation=b,this.code=y,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=eI(e);try{return new cg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(){this.providerId=il.PROVIDER_ID}static credential(e,t){return pc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=cg.parseLink(t);return Je(r,"argument-error"),pc._fromEmailAndCode(e,r.code,r.tenantId)}}il.PROVIDER_ID="password";il.EMAIL_PASSWORD_SIGN_IN_METHOD="password";il.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends hN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Ac{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $o._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ui.credential(t,r)}catch{return null}}}Ui.GOOGLE_SIGN_IN_METHOD="google.com";Ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Ac{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.GITHUB_SIGN_IN_METHOD="github.com";Bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Ac{constructor(){super("twitter.com")}static credential(e,t){return $o._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qi.credential(t,r)}catch{return null}}}qi.TWITTER_SIGN_IN_METHOD="twitter.com";qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const l=await ii._fromIdTokenResponse(e,r,i),c=sv(r);return new Ya({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=sv(r);return new Ya({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function sv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends Ms{constructor(e,t,r,i){var l;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Dd.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Dd(e,t,r,i)}}function fN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Dd._fromErrorAndOperation(n,l,e,r):l})}async function tI(n,e,t=!1){const r=await fc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ya._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(n,e,t=!1){const{auth:r}=n;if(ti(r.app))return Promise.reject(Yi(r));const i="reauthenticate";try{const l=await fc(n,fN(r,i,e,n),t);Je(l.idToken,r,"internal-error");const c=og(l.idToken);Je(c,r,"internal-error");const{sub:d}=c;return Je(n.uid===d,r,"user-mismatch"),Ya._forOperation(n,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ds(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(n,e,t=!1){if(ti(n.app))return Promise.reject(Yi(n));const r="signIn",i=await fN(n,r,e),l=await Ya._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(l.user),l}async function rI(n,e){return pN(sl(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(n){const e=sl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Bl(n,e,t){return ti(n.app)?Promise.reject(Yi(n)):rI(Zt(n),il.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&sI(n),r})}function iI(n,e,t,r){return Zt(n).onIdTokenChanged(e,t,r)}function oI(n,e,t){return Zt(n).beforeAuthStateChanged(e,t)}const Ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=1e3,lI=10;class gN extends mN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);jj()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,lI):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},aI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gN.type="LOCAL";const cI=gN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN extends mN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}xN.type="SESSION";const yN=xN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new xh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:l}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async f=>f(t.origin,l)),p=await uI(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const f=ug("",20);i.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(b){const N=b;if(N.data.eventId===f)switch(N.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(N.data.response);break;default:clearTimeout(y),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(){return window}function hI(n){js().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(){return typeof js().WorkerGlobalScope<"u"&&typeof js().importScripts=="function"}async function fI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function pI(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function mI(){return vN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="firebaseLocalStorageDb",gI=1,Vd="firebaseLocalStorage",wN="fbase_key";class Rc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function yh(n,e){return n.transaction([Vd],e?"readwrite":"readonly").objectStore(Vd)}function xI(){const n=indexedDB.deleteDatabase(bN);return new Rc(n).toPromise()}function Kp(){const n=indexedDB.open(bN,gI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Vd,{keyPath:wN})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Vd)?e(r):(r.close(),await xI(),e(await Kp()))})})}async function iv(n,e,t){const r=yh(n,!0).put({[wN]:e,value:t});return new Rc(r).toPromise()}async function yI(n,e){const t=yh(n,!1).get(e),r=await new Rc(t).toPromise();return r===void 0?null:r.value}function ov(n,e){const t=yh(n,!0).delete(e);return new Rc(t).toPromise()}const vI=800,bI=3;class _N{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>bI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xh._getInstance(mI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await fI(),!this.activeServiceWorker)return;this.sender=new dI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||pI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Kp();return await iv(e,Ld,"1"),await ov(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>iv(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>yI(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ov(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=yh(i,!1).getAll();return new Rc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:l}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_N.type="LOCAL";const wI=_N;new Ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(n,e){return e?oi(e):(Je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg extends lg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ua(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ua(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function NI(n){return pN(n.auth,new dg(n),n.bypassAuthState)}function SI(n){const{auth:e,user:t}=n;return Je(t,e,"internal-error"),nI(t,new dg(n),n.bypassAuthState)}async function EI(n){const{auth:e,user:t}=n;return Je(t,e,"internal-error"),tI(t,new dg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,t,r,i,l=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NI;case"linkViaPopup":case"linkViaRedirect":return EI;case"reauthViaPopup":case"reauthViaRedirect":return SI;default:ds(this.auth,"internal-error")}}resolve(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=new Ic(2e3,1e4);class La extends NN{constructor(e,t,r,i,l){super(e,t,i,l),this.provider=r,this.authWindow=null,this.pollId=null,La.currentPopupAction&&La.currentPopupAction.cancel(),La.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Je(e,this.auth,"internal-error"),e}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const e=ug();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,La.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CI.get())};e()}}La.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="pendingRedirect",pd=new Map;class TI extends NN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=pd.get(this.auth._key());if(!e){try{const r=await PI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}pd.set(this.auth._key(),e)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PI(n,e){const t=AI(e),r=II(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function jI(n,e){pd.set(n._key(),e)}function II(n){return oi(n._redirectPersistence)}function AI(n){return fd(kI,n.config.apiKey,n.name)}async function RI(n,e,t=!1){if(ti(n.app))return Promise.reject(Yi(n));const r=sl(n),i=_I(r,e),c=await new TI(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=600*1e3;class DI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!SN(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ps(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=MI&&this.cachedEventUids.clear(),this.cachedEventUids.has(av(e))}saveEventToCache(e){this.cachedEventUids.add(av(e)),this.lastProcessedEventTime=Date.now()}}function av(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function SN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(n,e={}){return ao(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,FI=/^https?/;async function zI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await VI(n);for(const t of e)try{if(UI(t))return}catch{}ds(n,"unauthorized-domain")}function UI(n){const e=Gp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!FI.test(t))return!1;if(OI.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=new Ic(3e4,6e4);function lv(){const n=js().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qI(n){return new Promise((e,t)=>{var r,i,l;function c(){lv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lv(),t(Ps(n,"network-request-failed"))},timeout:BI.get()})}if(!((i=(r=js().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((l=js().gapi)===null||l===void 0)&&l.load)c();else{const d=Fj("iframefcb");return js()[d]=()=>{gapi.load?c():t(Ps(n,"network-request-failed"))},uN(`${Oj()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw md=null,e})}let md=null;function $I(n){return md=md||qI(n),md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=new Ic(5e3,15e3),GI="__/auth/iframe",WI="emulator/auth/iframe",KI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YI(n){const e=n.config;Je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ig(e,WI):`https://${n.config.authDomain}/${GI}`,r={apiKey:e.apiKey,appName:n.name,v:Wo},i=JI.get(n.config.apiHost);i&&(r.eid=i);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Sc(r).slice(1)}`}async function QI(n){const e=await $I(n),t=js().gapi;return Je(t,n,"internal-error"),e.open({where:document.body,url:YI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KI,dontclear:!0},r=>new Promise(async(i,l)=>{await r.restyle({setHideOnLeave:!1});const c=Ps(n,"network-request-failed"),d=js().setTimeout(()=>{l(c)},HI.get());function p(){js().clearTimeout(d),i(r)}r.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZI=500,eA=600,tA="_blank",nA="http://localhost";class cv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rA(n,e,t,r=ZI,i=eA){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},XI),{width:r.toString(),height:i.toString(),top:l,left:c}),f=Jn().toLowerCase();t&&(d=rN(f)?tA:t),tN(f)&&(e=e||nA,p.scrollbars="yes");const y=Object.entries(p).reduce((N,[E,j])=>`${N}${E}=${j},`,"");if(Pj(f)&&d!=="_self")return sA(e||"",d),new cv(null);const b=window.open(e||"",d,y);Je(b,n,"popup-blocked");try{b.focus()}catch{}return new cv(b)}function sA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="__/auth/handler",oA="emulator/auth/handler",aA=encodeURIComponent("fac");async function uv(n,e,t,r,i,l){Je(n.config.authDomain,n,"auth-domain-config-required"),Je(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Wo,eventId:i};if(e instanceof hN){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",FE(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,b]of Object.entries({}))c[y]=b}if(e instanceof Ac){const y=e.getScopes().filter(b=>b!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const p=await n._getAppCheckToken(),f=p?`#${aA}=${encodeURIComponent(p)}`:"";return`${lA(n)}?${Sc(d).slice(1)}${f}`}function lA({config:n}){return n.emulator?ig(n,oA):`https://${n.authDomain}/${iA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="webStorageSupport";class cA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yN,this._completeRedirectFn=RI,this._overrideRedirectResult=jI}async _openPopup(e,t,r,i){var l;fi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await uv(e,t,r,Gp(),i);return rA(e,c,ug())}async _openRedirect(e,t,r,i){await this._originValidation(e);const l=await uv(e,t,r,Gp(),i);return hI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:l}=this.eventManagers[t];return i?Promise.resolve(i):(fi(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await QI(e),r=new DI(e);return t.register("authEvent",i=>(Je(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pp,{type:pp},i=>{var l;const c=(l=i==null?void 0:i[0])===null||l===void 0?void 0:l[pp];c!==void 0&&t(!!c),ds(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lN()||nN()||ag()}}const uA=cA;var dv="@firebase/auth",hv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fA(n){Fo(new Qi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Je(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cN(n)},f=new Dj(r,i,l,p);return $j(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Fo(new Qi("auth-internal",e=>{const t=sl(e.getProvider("auth").getImmediate());return(r=>new dA(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(dv,hv,hA(n)),Cs(dv,hv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=300,mA=tw("authIdTokenMaxAge")||pA;let fv=null;const gA=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>mA)return;const i=t==null?void 0:t.token;fv!==i&&(fv=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function xA(n=fm()){const e=Jd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=qj(n,{popupRedirectResolver:uA,persistence:[wI,cI,yN]}),r=tw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=gA(l.toString());oI(t,c,()=>c(t.currentUser)),iI(t,d=>c(d))}}const i=Xb("auth");return i&&Hj(t,`http://${i}`),t}function yA(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Lj({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const l=Ps("internal-error");l.customData=i,t(l)},r.type="text/javascript",r.charset="UTF-8",yA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fA("Browser");const gd={apiKey:"AIzaSyCFi4LIpQBzs9QGnn4QQdNJtCvMOi_-VF8",authDomain:"spoilme-edee0.firebaseapp.com",projectId:"spoilme-edee0",storageBucket:"spoilme-edee0.firebasestorage.app",messagingSenderId:"744288044885",appId:"1:744288044885:web:24614b67ffe485446151dc",measurementId:"G-H9VG45QVZR"},vA=gd.apiKey&&gd.projectId&&gd.projectId!=="your-app-id";let Ee=null,vn=null,Qt=null;if(vA)try{const n=iw(gd);Ee=VT(n);try{vn=oj(n),console.log("Firebase Storage initialized")}catch(e){console.error("Firebase Storage init failed:",e)}try{Qt=xA(n),console.log("Firebase Auth initialized")}catch(e){console.warn("Firebase Auth init failed:",e)}console.log("Firebase initialized successfully")}catch(n){console.error("Firebase initialization error:",n)}else console.warn("Firebase keys missing or invalid. Application running in Demo Mode (Local Storage).");const EN=I.createContext(void 0),Rt=(n,e=new WeakSet)=>{if(n==null)return null;if(typeof n!="object")return n;if(e.has(n))return null;if(e.add(n),n instanceof Date)return n.toISOString();if(typeof n.toDate=="function")try{return n.toDate().toISOString()}catch{return null}if(n.path&&typeof n.path=="string"&&(n.firestore||n._key))return n.path;if(Array.isArray(n))return n.map(i=>Rt(i,e));if(n.seconds!==void 0&&n.nanoseconds!==void 0&&Object.keys(n).length<=4)return new Date(n.seconds*1e3+n.nanoseconds/1e6).toISOString();const t=Object.getPrototypeOf(n);if(t&&t!==Object.prototype&&t!==null)return null;const r={};for(const i in n)if(!(i.startsWith("_")||i==="auth"||i==="firestore"||i==="app"||i==="metadata"||i==="proactiveRefresh"||i==="providerData"||i==="stsTokenManager")&&Object.prototype.hasOwnProperty.call(n,i)){const l=Rt(n[i],e);l!=null&&(r[i]=l)}return r},bA=()=>{const n=["Thandiwe Zulu","Jessica Nel","Precious Khumalo","Sarah Van Der Merwe","Amahle Dlamini","Chloe Naidoo","Nicole Botha","Zanele Mthembu","Ashley Smith","Bianca Fourie"],e=new Date,t=e.getFullYear()*100+e.getMonth(),r=c=>{let d=c+=1831565813;return d=Math.imul(d^d>>>15,d|1),d^=d+Math.imul(d^d>>>7,d|61),((d^d>>>14)>>>0)/4294967296},i=n.map((c,d)=>({id:`aff_${d}`,name:c,sales:0,rank:0,change:"same"}));i[0].sales=28561.68;let l=28561.68;for(let c=1;c<i.length;c++){const p=1500+r(t+c)*3500,f=Math.floor(r(t+c+50)*99)/100;l=Math.max(1e3,l-p);const y=Math.floor(l)+f;i[c].sales=parseFloat(y.toFixed(2))}return i.forEach((c,d)=>{c.rank=d+1;const p=r(t+d+200);c.change=p>.6?"up":p<.3?"down":"same",d===0&&(c.change="same")}),i},wA=()=>{const n=["Thandiwe Zulu","Jessica Nel","Precious Khumalo","Sarah Van Der Merwe","Amahle Dlamini","Chloe Naidoo","Nicole Botha","Zanele Mthembu","Ashley Smith","Bianca Fourie","Elize Venter","Fayruz Adams","Gugulethu Mchunu","Megan Reddy","Nosipho Cele","Anelisa Peterson","Busisiwe Malinga","Danielle Jacobs","Fatima Khan","Isabella Martins","Liesl Jacobs","Nomvula Gqola","Pieterse Van Zyl","Rethabile Mokoena","Sibusiso Ndlovu","Tshegofatso Moloi","Lerato Pillay","Anja Pretorius","Fatima Akoojee","Mandisa Botha"],e=new Date,t=Math.floor((e.getTime()-new Date(e.getFullYear(),0,0).getTime())/1e3/60/60/24),r=Math.ceil(t/7),i=e.getFullYear()*100+r,l=f=>{let y=f+=1831565813;return y=Math.imul(y^y>>>15,y|1),y^=y+Math.imul(y^y>>>7,y|61),((y^y>>>14)>>>0)/4294967296},c=[...n].sort((f,y)=>l(i+f.length)-.5),d=[],p=[500,250,200,...Array(7).fill(100),...Array(10).fill(50)];for(let f=0;f<p.length;f++)d.push({rank:f+1,name:c[f],prize:p[f]});return d},_A=({children:n})=>{const[e,t]=I.useState([]),[r,i]=I.useState([]),[l,c]=I.useState([]),[d,p]=I.useState(()=>{try{const X=localStorage.getItem("spv_cart");return X?JSON.parse(X):[]}catch(X){return console.error("Failed to load cart",X),[]}}),[f,y]=I.useState(is),[b,N]=I.useState(yE),[E,j]=I.useState([]),[k,P]=I.useState(!0),[$,q]=I.useState(null),[J,se]=I.useState(null),[he,K]=I.useState([]),[F,A]=I.useState(0),[L,V]=I.useState([]),[T,O]=I.useState(!Ee),[D,ve]=I.useState(!1),[Ue,ke]=I.useState([]),[je,z]=I.useState([]);I.useEffect(()=>{const X=localStorage.getItem("spv_active_user");if(X)try{const Ne=JSON.parse(X);y(Ne)}catch(Ne){console.error("Error parsing stored user",Ne),y(is)}K(bA()),V(wA());const Y=new Date,re=Y.getFullYear()*100+Y.getMonth();A(780+Math.floor((Ne=>{let We=Ne+=1831565813;return We=Math.imul(We^We>>>15,We|1),We^=We+Math.imul(We^We>>>7,We|61),((We^We>>>14)>>>0)/4294967296})(re)*15));try{const Ne=localStorage.getItem("spv_packaging_presets");Ne&&ke(JSON.parse(Ne));const We=localStorage.getItem("spv_material_presets");We&&z(JSON.parse(We))}catch(Ne){console.error("Error loading presets",Ne)}},[]),I.useEffect(()=>{localStorage.setItem("spv_cart",JSON.stringify(d))},[d]),I.useEffect(()=>{T&&localStorage.setItem("spv_orders",JSON.stringify(l))},[l,T]);const we=X=>{try{const Y=Rt(X);localStorage.setItem("spv_active_user",JSON.stringify(Y))}catch(Y){console.error("Error saving user to localStorage",Y)}};I.useEffect(()=>{if(!Ee||T||!f.id||f.id==="guest")return;const X=Xu(bt(Ee,"users",f.id),Y=>{if(Y.exists()){const re=Y.data();y(ce=>{const Ne={...ce,...re};return we(Ne),Ne})}},Y=>{Y.code==="not-found"&&Y.message.includes("default")&&q("Database ID Mismatch. Please clear browser cache.")});return()=>X()},[f.id,T]);const W=X=>{ke(Y=>{const ce=Y.find(Ne=>Ne.name===X.name)?Y.map(Ne=>Ne.name===X.name?X:Ne):[...Y,X];return localStorage.setItem("spv_packaging_presets",JSON.stringify(ce)),ce})},B=X=>{ke(Y=>{const re=Y.filter(ce=>ce.name!==X);return localStorage.setItem("spv_packaging_presets",JSON.stringify(re)),re})},Z=X=>{z(Y=>{const ce=Y.find(Ne=>Ne.name===X.name)?Y.map(Ne=>Ne.name===X.name?X:Ne):[...Y,X];return localStorage.setItem("spv_material_presets",JSON.stringify(ce)),ce})},ee=X=>{z(Y=>{const re=Y.filter(ce=>ce.name!==X);return localStorage.setItem("spv_material_presets",JSON.stringify(re)),re})},de=async(X,Y)=>{var Ne,We,Ke,ht,ze;const re=X.trim().toLowerCase();let ce=null;if(re==="spoilmevintagediy@gmail.com"&&Y==="admin@spoilme"&&(ce={...is,id:"admin_01",name:"Admin User",email:X,isAdmin:!0,isMember:!0,membershipTier:"deluxe",loyaltyPoints:9999,affiliateCode:"ADMIN_MASTER",socialRewards:{}},Qt))try{const Be=await Bl(Qt,re,Y);console.log("Signed in to Firebase Auth as admin");try{await((Ne=Qt.currentUser)==null?void 0:Ne.getIdToken(!0));const st=await((We=Qt.currentUser)==null?void 0:We.getIdTokenResult());console.log("Admin login token claims:",st==null?void 0:st.claims);const it=(Ke=Qt.currentUser)==null?void 0:Ke.uid;it&&(ce.id=it);try{Ee&&it&&(await os(bt(Ee,"users",it),{id:it,email:re,name:ce.name||"Admin User",isAdmin:!0,updatedAt:new Date().toISOString()},{merge:!0}),console.log("Ensured users/{uid} document exists for admin"))}catch(Nt){console.warn("Failed to write users/{uid} doc for admin during login:",Nt)}if((ht=st==null?void 0:st.claims)!=null&&ht.admin){q(null);try{await Pt()}catch(Nt){console.warn("syncLocalProducts after login failed",Nt)}}else try{const Nt=(ze=Qt.currentUser)==null?void 0:ze.uid;if(Nt&&Ee){const rn=bt(Ee,"users",Nt),Rr=await By(rn);if(Rr.exists()){const vr=Rr.data();if(vr&&vr.isAdmin){console.log("Login fallback: users/{uid}.isAdmin is true — treating user as admin"),q(null);try{await Pt()}catch(M){console.warn("syncLocalProducts fallback failed",M)}}else q("Signed in but admin claim not present yet. Re-login or wait a minute.")}else q("Signed in but admin claim not present yet. Re-login or wait a minute.")}else q("Signed in but admin claim not present yet. Re-login or wait a minute.")}catch(Nt){console.warn("Failed to read users/{uid} for admin fallback:",Nt),q("Signed in but admin claim not present yet. Re-login or wait a minute.")}}catch(st){console.warn("Failed to refresh ID token after sign-in:",st)}}catch(Be){console.warn("Firebase Auth sign in for admin failed (writes may still be denied):",Be)}if(!ce&&Y==="test"&&(re==="eliz@gmail.com"?ce={...is,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",isMember:!1,membershipTier:"none"}:re==="anna@gmail.com"&&(ce={...is,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",isMember:!0,membershipTier:"basic",loyaltyPoints:100})),!ce&&Ee)try{const Be=Es(Ee,"users"),st=Zs(Be,Ma("email","==",re)),it=await Da(st);if(!it.empty){const Nt=Rt(it.docs[0].data());Nt.password===Y&&(ce={...Nt,id:it.docs[0].id})}}catch(Be){console.error("Error logging in via DB:",Be)}return ce?(y(ce),we(ce),!0):!1},Ie=async X=>{const Y={...is,...X,id:`user_${Date.now()}`,affiliateCode:`Spoilme-${Date.now().toString().slice(-6)}`,affiliateStats:X.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1}};try{return!T&&Ee&&await os(bt(Ee,"users",Y.id),Rt(Y)),y(Y),we(Y),!0}catch(re){return console.error("Registration Failed",re),y(Y),we(Y),!0}},H=()=>{y(is),localStorage.removeItem("spv_active_user")},fe=async X=>{const Y={...f,shippingAddress:X};if(y(Y),we(Y),!T&&Ee&&f.id!=="guest")try{await un(bt(Ee,"users",f.id),{shippingAddress:X})}catch(re){console.error("Error saving address to DB",re)}},Ze=async()=>{if(T||!Ee){alert("Database not connected. Cannot seed users.");return}const X=[{...is,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",password:"test",isMember:!1,membershipTier:"none",affiliateCode:"Spoilme-ELIZ01",affiliateStats:{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...is,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",password:"test",isMember:!0,membershipTier:"basic",loyaltyPoints:100,affiliateCode:"Spoilme-ANNA02",affiliateStats:{status:"pending",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...is,id:"u3",name:"Fay Test 3",email:"fay@gmail.com",password:"test",isMember:!0,membershipTier:"premium",loyaltyPoints:500,affiliateCode:"Spoilme-FAY003",affiliateStats:{status:"approved",totalSalesCount:45,totalSalesValue:4500,commissionRate:10,balance:450,recurringBalance:50}},{...is,id:"u4",name:"Debs Test 4",email:"debs@gmail.com",password:"test",isMember:!0,membershipTier:"deluxe",loyaltyPoints:1e3,affiliateCode:"Spoilme-DEBS04",affiliateStats:{status:"approved",totalSalesCount:150,totalSalesValue:15e3,commissionRate:15,balance:2250,recurringBalance:300}}];try{for(const Y of X)await os(bt(Ee,"users",Y.id),Rt(Y));alert("Test Users Created!")}catch(Y){console.error("Error seeding users:",Y)}};I.useEffect(()=>{if(console.log("Loading products, isDemoMode:",T,"db:",!!Ee),T){const Y=localStorage.getItem("spv_products");t(Y?JSON.parse(Y):[]);const re=localStorage.getItem("spv_categories");i(re?JSON.parse(re):[]);const ce=localStorage.getItem("spv_vouchers");ce&&j(JSON.parse(ce));const Ne=localStorage.getItem("spv_orders");c(Ne?JSON.parse(Ne):[]),P(!1);return}const X=setTimeout(()=>{k&&(q("Connection timed out"),P(!1))},5e3);try{const Y=Zs(Es(Ee,"products"),up("createdAt","desc")),re=new Map,ce=async ze=>{if(!ze)return null;if(typeof ze=="string"){if(ze.startsWith("http")||ze.startsWith("data:")||ze.startsWith("blob:")||ze.startsWith("/"))return ze;if(ze.startsWith("gs://"))try{const Be=ze.match(/^gs:\/\/[^/]+\/(.+)$/),st=Be?Be[1]:ze;if(re.has(ze))return re.get(ze);if(vn){const it=await ni(ri(vn,decodeURIComponent(st)));return re.set(ze,it),it}}catch(Be){return console.error("Failed to convert gs:// URL to downloadURL",ze,Be),null}if(!ze.startsWith("http")&&vn)try{if(re.has(ze))return re.get(ze);const Be=await ni(ri(vn,ze));return re.set(ze,Be),Be}catch{}return ze}else if(typeof ze=="object"){if(ze.fullPath)try{const Be=ze.fullPath+"::fullPath";if(re.has(Be))return re.get(Be);if(vn){const st=await ni(ri(vn,ze.fullPath));return re.set(Be,st),st}}catch(Be){return console.error("Failed to convert storage object fullPath to downloadURL",ze,Be),null}if(ze.path)try{const Be=ze.path+"::path";if(re.has(Be))return re.get(Be);if(vn){const st=await ni(ri(vn,ze.path));return re.set(Be,st),st}}catch(Be){return console.error("Failed to convert storage object path to downloadURL",ze,Be),null}}return null},Ne=Xu(Y,async ze=>{console.log("Firestore snapshot received, docs count:",ze.docs.length),clearTimeout(X);const Be=await Promise.all(ze.docs.map(async st=>{const it={...Rt(st.data()),id:st.id};console.log("Raw product:",it.id,"images:",it.images);try{if(it.images&&Array.isArray(it.images)){const Nt=await Promise.all(it.images.map(async rn=>await ce(rn)));it.images=Nt.filter(Boolean),console.log("Resolved images for",it.id,":",it.images)}}catch(Nt){console.error("Failed resolving product images for",it.id,Nt)}return it}));t(Be),console.log("Loaded products and resolved images (first 5):",Be.slice(0,5).map(st=>({id:st.id,images:st.images})))},ze=>{console.log("Firestore products error:",ze),clearTimeout(X),q(ze.message),P(!1)}),We=Xu(Es(Ee,"categories"),ze=>{console.log("Categories snapshot received, docs count:",ze.docs.length);const Be=ze.docs.map(st=>({...Rt(st.data()),id:st.id}));i(Be)},ze=>{console.log("Firestore categories error:",ze)}),Ke=f.isAdmin?Zs(Es(Ee,"orders"),up("date","desc")):Zs(Es(Ee,"orders"),Ma("customerEmail","==",f.email),up("date","desc")),ht=Xu(Ke,ze=>{console.log("Orders snapshot received, docs count:",ze.docs.length);const Be=ze.docs.map(st=>({...Rt(st.data()),id:st.id}));c(Be),P(!1)},()=>{P(!1)});return()=>{clearTimeout(X),Ne(),We(),ht()}}catch(Y){console.log("Try-catch error in products useEffect:",Y),clearTimeout(X),P(!1)}},[T,f.isAdmin,f.email]);const Ye=(X,Y={})=>{p(re=>{const ce=re.findIndex(ht=>ht.id===X.id&&ht.selectedSize===Y.selectedSize&&ht.selectedMaterial===Y.selectedMaterial&&ht.selectedChainStyle===Y.selectedChainStyle&&ht.selectedChainLength===Y.selectedChainLength),Ne=ce>-1?re[ce]:null,We=Ne?Ne.quantity:0;let Ke=X.stock;if(X.type==="Ring"&&Y.selectedSize&&X.ringStock&&(Ke=X.ringStock[Y.selectedSize]||0),We>=Ke)return alert(`Sorry, you can't add more of this item. We only have ${Ke} in stock.`),re;if(ce>-1){const ht=[...re];return ht[ce]={...ht[ce],quantity:ht[ce].quantity+1},ht}return[...re,{...X,quantity:1,...Y}]})},et=(X,Y={})=>{p(re=>re.filter(ce=>!(ce.id===X&&ce.selectedSize===Y.selectedSize&&ce.selectedMaterial===Y.selectedMaterial&&ce.selectedChainStyle===Y.selectedChainStyle&&ce.selectedChainLength===Y.selectedChainLength)))},Tt=(X,Y,re={})=>{if(Y<=0){et(X,re);return}const ce=e.find(Ke=>Ke.id===X);if(!ce)return;let Ne=ce.stock;ce.type==="Ring"&&re.selectedSize&&ce.ringStock&&(Ne=ce.ringStock[re.selectedSize]||0);const We=Math.min(Y,Ne);Y>Ne&&alert(`Sorry, we only have ${Ne} of this item in stock. Quantity has been adjusted.`),p(Ke=>Ke.map(ht=>ht.id===X&&ht.selectedSize===re.selectedSize&&ht.selectedMaterial===re.selectedMaterial&&ht.selectedChainStyle===re.selectedChainStyle&&ht.selectedChainLength===re.selectedChainLength?{...ht,quantity:We}:ht))},Ct=()=>{p([]),se(null)},ct=X=>{y(Y=>{const ce=Y.wishlist.includes(X)?Y.wishlist.filter(We=>We!==X):[...Y.wishlist,X],Ne={...Y,wishlist:ce};return we(Ne),Ne})},Te=async X=>{if(!f.id||f.id==="guest"){console.error("Cannot apply for affiliate as guest user directly.");return}const Y={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},re={...f,name:`${X.name} ${X.surname}`,birthday:X.dob,notifications:[Y,...f.notifications],affiliateStats:{...f.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1},status:"pending",gender:X.gender,joinReason:`${X.reason} | Socials: ${X.socials}`}};y(re),we(re),!T&&Ee&&f.id!=="guest"&&await un(bt(Ee,"users",f.id),Rt(re))},ut=async(X,Y)=>{if(T||!Ee)return;const re=bt(Ee,"users",X),ce={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Welcome to the Partnership Program!",message:`Welcome to Spoil Me Vintage Partnership Program! We are thrilled to have you on the team.${Y?` Note from admin: ${Y}`:""}`,date:new Date().toISOString(),isRead:!1};await un(re,{"affiliateStats.status":"approved","affiliateStats.commissionRate":10,"affiliateStats.adminNote":Y||"",notifications:$p(ce)})},Lt=async(X,Y)=>{if(T||!Ee)return;const re=bt(Ee,"users",X),ce={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Partnership Application Update",message:`We regret to inform you that your application has been declined.${Y?` Note: ${Y}`:""}`,date:new Date().toISOString(),isRead:!1};await un(re,{"affiliateStats.status":"rejected","affiliateStats.adminNote":Y||"",notifications:$p(ce)})},Vt=async(X,Y)=>{if(T||!Ee)return;const re={id:`aff_msg_${Date.now()}`,type:"affiliate_msg",title:"Partnership Update",message:Y,date:new Date().toISOString(),isRead:!1},ce=await Da(Zs(Es(Ee,"users"),Ma("id","==",X)));ce.empty||await un(ce.docs[0].ref,{notifications:[re,...ce.docs[0].data().notifications]})},_n=async(X,Y)=>{if(T||!Ee)return;const re=bt(Ee,"users",X);await un(re,{"affiliateStats.commissionRate":Y})},qt=async(X,Y)=>{if(T||!Ee)return;const re=bt(Ee,"users",X);await un(re,{"affiliateStats.parentId":Y})},Ce=async()=>{const X={...f,affiliateStats:{...f.affiliateStats,hasContentAccess:!0}};y(X),we(X),!T&&Ee&&f.id!=="guest"&&await un(bt(Ee,"users",f.id),Rt(X))},Jt=async()=>{const X={...f,affiliateStats:{...f.affiliateStats,isElite:!0}};y(X),we(X),!T&&Ee&&f.id!=="guest"&&await un(bt(Ee,"users",f.id),Rt(X))},On=async(X,Y)=>{var ht;if(!Ee&&!T)return{success:!1,message:"Database not ready"};let re=null,ce=null;if(T)if(f.affiliateCode===X)re=f;else return{success:!1,message:"In Demo Mode, only your own code works."};else{const ze=Zs(Es(Ee,"users"),Ma("affiliateCode","==",X)),Be=await Da(ze);Be.empty||(re={...Be.docs[0].data(),id:Be.docs[0].id},ce=Be.docs[0].ref)}if(!re)return{success:!1,message:"Affiliate code not found."};if(((ht=re.affiliateStats)==null?void 0:ht.status)!=="approved"&&!T)return{success:!1,message:"Affiliate not approved."};const Ne=re.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},We=Y*Ne.commissionRate/100,Ke={...Ne,totalSalesCount:Ne.totalSalesCount+1,totalSalesValue:Ne.totalSalesValue+Y,balance:Ne.balance+We};if(Ke.totalSalesCount>=500?Ke.commissionRate=20:Ke.totalSalesCount>=100?Ke.commissionRate=15:Ke.totalSalesCount>=50&&(Ke.commissionRate=11),T)y({...re,affiliateStats:Ke});else if(ce){const ze={id:`sale_${Date.now()}`,type:"system",title:"New Partnership Sale!",message:`You earned R${We.toFixed(2)} commission!`,date:new Date().toISOString(),isRead:!1};if(await un(ce,{affiliateStats:Ke,notifications:[ze,...re.notifications||[]]}),Ne.parentId)try{const Be=bt(Ee,"users",Ne.parentId),st=await By(Be);if(st.exists()){const it=st.data(),Nt=it.affiliateStats||{status:"approved",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},rn=Y*.01,Rr={...Nt,balance:(Nt.balance||0)+rn},vr={id:`sub_sale_${Date.now()}`,type:"system",title:"Downline Sale Bonus",message:`You earned R${rn.toFixed(2)} from a recruit's sale!`,date:new Date().toISOString(),isRead:!1};await un(Be,{affiliateStats:Rr,notifications:[vr,...it.notifications||[]]})}}catch(Be){console.error("Failed to process parent commission",Be)}}return{success:!0,message:`Sale simulated! Added R${We.toFixed(2)}.`}},rr=async(X,Y)=>{if(T){if(f.id===X){const re={...f,loyaltyPoints:f.loyaltyPoints+Y};y(re),we(re)}return}if(Ee)if(f.id===X){const re={...f,loyaltyPoints:f.loyaltyPoints+Y};y(re),we(re),await un(bt(Ee,"users",X),{loyaltyPoints:re.loyaltyPoints})}else{const re=await Da(Zs(Es(Ee,"users"),Ma("id","==",X)));re.empty||await un(re.docs[0].ref,{loyaltyPoints:(re.docs[0].data().loyaltyPoints||0)+Y})}},xr=async()=>T||!Ee?[]:(await Da(Zs(Es(Ee,"users")))).docs.map(Y=>({...Rt(Y.data()),id:Y.id})),Nn=async()=>{if(Qt)try{const X=Qt.currentUser;if(X){await X.getIdToken(!0),console.log("ensureAdminToken: refreshed existing user token");return}await Bl(Qt,"spoilmevintagediy@gmail.com","admin@spoilme"),Qt.currentUser&&await Qt.currentUser.getIdToken(!0),console.log("ensureAdminToken: signed in as admin and refreshed token")}catch(X){console.warn("ensureAdminToken failed:",X)}},Pt=async()=>{if(!(!Ee||!Qt))try{const X=localStorage.getItem("spv_products");if(!X)return;const Y=JSON.parse(X);if(!Array.isArray(Y)||Y.length===0)return;console.log("syncLocalProducts: found",Y.length,"local products to push");for(const re of Y)try{const ce=Rt(re);await os(bt(Ee,"products",ce.id),ce),console.log("syncLocalProducts: pushed product",ce.id)}catch(ce){console.warn("syncLocalProducts: failed to push product",re.id,ce)}localStorage.removeItem("spv_products"),q(null),console.log("syncLocalProducts: cleared local spv_products after push")}catch(X){console.warn("syncLocalProducts failed:",X)}},Ot=async X=>{const Y=Rt(X),re=[Y,...e];if(t(re),!T&&Ee){await Nn();try{await os(bt(Ee,"products",Y.id),Y)}catch(ce){if(console.error("Failed to add product to Firestore:",ce,"Product:",Y),ce&&(ce.code==="permission-denied"||ce.message&&ce.message.toLowerCase().includes("missing or insufficient permissions"))){if(Qt)try{await Bl(Qt,"spoilmevintagediy@gmail.com","admin@spoilme"),console.log("Retry: signed in as admin, retrying Firestore write..."),await os(bt(Ee,"products",Y.id),Y),console.log("Retry write successful");return}catch(Ne){console.warn("Retry after sign-in failed:",Ne)}try{localStorage.setItem("spv_products",JSON.stringify(re)),q("Firestore write denied: changes saved locally. Check Firestore rules or authenticate as admin."),console.warn("Firestore permission denied — product saved to localStorage instead.");return}catch(Ne){console.error("Fallback localStorage save also failed:",Ne);return}}try{localStorage.setItem("spv_products",JSON.stringify(re))}catch(Ne){console.error("Local save failed after Firestore error:",Ne)}q("Failed to write to Firestore — changes saved locally. Check console for details.");return}}else try{localStorage.setItem("spv_products",JSON.stringify(re))}catch(ce){console.error("Failed to save products to localStorage on addProduct:",ce)}},fn=async X=>{const Y=Rt(X),re=e.map(ce=>ce.id===Y.id?Y:ce);if(t(re),!T&&Ee){await Nn();try{await os(bt(Ee,"products",Y.id),Y)}catch(ce){if(console.error("Failed to update product in Firestore:",ce,"Product:",Y),ce&&(ce.code==="permission-denied"||ce.message&&ce.message.toLowerCase().includes("missing or insufficient permissions"))){if(Qt)try{await Bl(Qt,"spoilmevintagediy@gmail.com","admin@spoilme"),console.log("Retry: signed in as admin, retrying Firestore update..."),await os(bt(Ee,"products",Y.id),Y),console.log("Retry update successful");return}catch(Ne){console.warn("Retry after sign-in failed:",Ne)}try{localStorage.setItem("spv_products",JSON.stringify(re)),q("Firestore write denied: changes saved locally. Check Firestore rules or authenticate as admin."),console.warn("Firestore permission denied — update saved to localStorage instead.");return}catch(Ne){console.error("Fallback localStorage save also failed:",Ne);return}}try{localStorage.setItem("spv_products",JSON.stringify(re))}catch(Ne){console.error("Local save failed after Firestore error:",Ne)}q("Failed to write to Firestore — changes saved locally. Check console for details.");return}}else try{localStorage.setItem("spv_products",JSON.stringify(re))}catch(ce){console.error("Failed to save products to localStorage on updateProduct:",ce)}},sr=async X=>{const Y=e.filter(re=>re.id!==X);if(t(Y),!T&&Ee){await Nn();try{await Qu(bt(Ee,"products",X))}catch(re){if(console.error("Failed to delete product in Firestore:",re,"productId:",X),re&&(re.code==="permission-denied"||re.message&&re.message.toLowerCase().includes("missing or insufficient permissions"))){if(Qt)try{await Bl(Qt,"spoilmevintagediy@gmail.com","admin@spoilme"),console.log("Retry: signed in as admin, retrying Firestore delete..."),await Qu(bt(Ee,"products",X)),console.log("Retry delete successful");return}catch(ce){console.warn("Retry after sign-in failed:",ce)}try{localStorage.setItem("spv_products",JSON.stringify(Y)),q("Firestore delete denied: change saved locally. Check Firestore rules or authenticate as admin."),console.warn("Firestore permission denied — delete reflected locally.");return}catch(ce){console.error("Fallback localStorage save also failed:",ce);return}}try{localStorage.setItem("spv_products",JSON.stringify(Y))}catch(ce){console.error("Local save failed after Firestore delete error:",ce)}q("Failed to delete from Firestore — change saved locally. Check console for details.");return}}else try{localStorage.setItem("spv_products",JSON.stringify(Y))}catch(re){console.error("Failed to save products to localStorage on deleteProduct:",re)}},Yn=async X=>{const Y=Rt(X);c(re=>[Y,...re]),!T&&Ee&&await os(bt(Ee,"orders",Y.id),Y)},me=async X=>{const Y=Rt(X);c(re=>re.map(ce=>ce.id===Y.id?Y:ce)),!T&&Ee&&await un(bt(Ee,"orders",Y.id),Y)},Ge=async X=>{c(Y=>Y.filter(re=>re.id!==X)),!T&&Ee&&await Qu(bt(Ee,"orders",X))},jt=async X=>{const Y=Rt(X);i(re=>[...re,Y]),!T&&Ee?await os(bt(Ee,"categories",Y.id),Y):localStorage.setItem("spv_categories",JSON.stringify([...r,Y]))},pn=async X=>{const Y=Rt(X);if(i(re=>re.map(ce=>ce.id===Y.id?Y:ce)),!T&&Ee)await os(bt(Ee,"categories",Y.id),Y);else{const re=r.map(ce=>ce.id===Y.id?Y:ce);localStorage.setItem("spv_categories",JSON.stringify(re))}},Pn=async X=>{if(i(Y=>Y.filter(re=>re.id!==X)),!T&&Ee)await Qu(bt(Ee,"categories",X));else{const Y=r.filter(re=>re.id!==X);localStorage.setItem("spv_categories",JSON.stringify(Y))}},Ds=async X=>{const Y=Rt(X);i(Y),T&&localStorage.setItem("spv_categories",JSON.stringify(Y))},Ls=X=>N(Y=>[...Y,X]),Ar=X=>{const Y=Rt(X);j(ce=>[...ce,Y]);const re=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify([...re,Y]))},ps=X=>{j(re=>re.filter(ce=>ce.code!==X));const Y=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify(Y.filter(re=>re.code!==X)))},Hr=X=>{const Y=E.find(re=>re.code===X);return Y?(se(Y),!0):!1},Fn=()=>{localStorage.clear(),window.location.reload()},Qn=()=>d.reduce((X,Y)=>X+(Y.price+(Y.selectedMaterialModifier||0))*Y.quantity,0),ms=async X=>{var We;if(!f.email)throw new Error("User must be logged in to checkout.");const Y={...X,id:`ord_${Date.now()}`,orderNumber:`#SMV-${Date.now().toString().slice(-6)}`,date:new Date().toISOString(),customerName:f.name,customerEmail:f.email,status:"Pending"};await Yn(Y);const re=[];for(const Ke of d)(We=Ke.tags)!=null&&We.includes("Voucher")||re.push({id:`notif_${Date.now()}_${Ke.id}`,type:"review_request",title:"How was your purchase?",message:`Review ${Ke.name} to earn 100 Points!`,productId:Ke.id,productName:Ke.name,date:new Date().toISOString(),isRead:!1});const ce=Math.floor(X.total/10),Ne={...f,loyaltyPoints:Math.max(0,f.loyaltyPoints+ce),notifications:[...re,...f.notifications]};return y(Ne),we(Ne),!T&&Ee&&f.id!=="guest"&&await un(bt(Ee,"users",f.id),Rt(Ne)),Y},ir=async(X,Y)=>{const re="GV-"+Math.random().toString(36).substr(2,9).toUpperCase(),ce={code:re,discountType:"fixed",value:X,minSpend:X,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};Ar(ce);const Ne={id:`gift_${Date.now()}`,type:"gift_ready",title:"Gift Ready",message:"Your voucher is ready.",date:new Date().toISOString(),isRead:!1,voucherData:{code:re,amount:X,meta:Y}},We={...f,notifications:[Ne,...f.notifications]};y(We),we(We),!T&&Ee&&f.id!=="guest"&&await un(bt(Ee,"users",f.id),Rt(We))},Vs=async(X,Y,re,ce)=>{if(f.id==="guest")return;const Ne=e.find(Ke=>Ke.id===X);if(Ne){const Ke={id:`rev_${Date.now()}`,userName:f.name,location:"Verified Buyer",content:re,rating:Y,date:new Date().toLocaleDateString()};await fn({...Ne,reviews:[Ke,...Ne.reviews||[]]})}const We={...f,loyaltyPoints:f.loyaltyPoints+100,notifications:f.notifications.filter(Ke=>Ke.id!==ce)};y(We),we(We),!T&&Ee&&await un(bt(Ee,"users",f.id),Rt(We))},Gr=async X=>{const Y={...f,loyaltyPoints:f.loyaltyPoints+50};y(Y),we(Y),!T&&Ee&&f.id!=="guest"&&await un(bt(Ee,"users",f.id),{loyaltyPoints:Y.loyaltyPoints})},Wr=async(X,Y)=>{if(f.id==="guest")return;const re=f.socialRewards||{};if(re[X])return;const ce={...f,loyaltyPoints:f.loyaltyPoints+100,socialRewards:{...re,[X]:!0},socialHandles:{...f.socialHandles,[X]:Y}};y(ce),we(ce),!T&&Ee&&await un(bt(Ee,"users",f.id),Rt(ce))},yr=(X,Y,re="system")=>{const ce={id:`sys_${Date.now()}`,type:re,title:X,message:Y,date:new Date().toISOString(),isRead:!1},Ne={...f,notifications:[ce,...f.notifications]};y(Ne),we(Ne)},Os=()=>{try{const X=JSON.stringify(e);return X.length>0?{status:"success",details:`Serialization OK. Size: ${(X.length/1024).toFixed(2)} KB`}:{status:"warning",details:"Empty products."}}catch(X){return{status:"error",details:`Error: ${X.message}`}}};return s.jsx(EN.Provider,{value:{products:e,categories:r,cart:d,user:f,specials:b,vouchers:E,appliedVoucher:J,affiliateLeaderboard:he,memberCount:F,weeklyWinners:L,isLoading:k,isDemoMode:T,dbConnectionError:$,orders:l,isStickyProgressBarVisible:D,setIsStickyProgressBarVisible:ve,packagingPresets:Ue,materialPresets:je,savePackagingPreset:W,deletePackagingPreset:B,saveMaterialPreset:Z,deleteMaterialPreset:ee,login:de,logout:H,register:Ie,addToCart:Ye,removeFromCart:et,updateCartQuantity:Tt,clearCart:Ct,toggleWishlist:ct,checkout:ms,submitReview:Vs,addSystemNotification:yr,processGiftVoucherPurchase:ir,applyForAffiliate:Te,approveAffiliate:ut,rejectAffiliate:Lt,sendAffiliateMessage:Vt,buyAffiliateContent:Ce,joinAffiliateElite:Jt,simulateAffiliateSale:On,updateAffiliateTier:_n,assignAffiliateParent:qt,addProduct:Ot,updateProduct:fn,deleteProduct:sr,addOrder:Yn,updateOrder:me,deleteOrder:Ge,addCategory:jt,updateCategory:pn,deleteCategory:Pn,replaceCategories:Ds,addSpecial:Ls,resetStore:Fn,seedTestUsers:Ze,getAllUsers:xr,runDataDiagnostics:Os,adminAdjustPoints:rr,getCartTotal:Qn,addVoucher:Ar,deleteVoucher:ps,applyExternalVoucher:Hr,setAppliedVoucher:se,shareProduct:Gr,claimSocialReward:Wr,updateUserAddress:fe},children:n})},Dt=()=>{const n=I.useContext(EN);if(!n)throw new Error("useStore must be used within StoreProvider");return n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(n,e)=>{const t=I.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:p,...f},y)=>I.createElement("svg",{ref:y,...NA,width:i,height:i,stroke:r,strokeWidth:c?Number(l)*24/Number(i):l,className:["lucide",`lucide-${SA(n)}`,d].join(" "),...f},[...e.map(([b,N])=>I.createElement(b,N)),...Array.isArray(p)?p:[p]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=ye("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=ye("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=ye("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=ye("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=ye("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=ye("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=ye("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=ye("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=ye("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=ye("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=ye("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=ye("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=ye("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hg=ye("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gc=ye("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=ye("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=ye("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=ye("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=ye("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ye("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=ye("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=ye("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=ye("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=ye("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=ye("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=ye("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=ye("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=ye("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=ye("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=ye("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=ye("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=ye("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=ye("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=ye("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=ye("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=ye("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=ye("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=ye("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=ye("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=ye("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=ye("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=ye("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=ye("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=ye("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=ye("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ye("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=ye("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=ye("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=ye("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=ye("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=ye("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=ye("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=ye("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=ye("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=ye("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=ye("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=ye("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=ye("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=ye("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=ye("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=ye("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=ye("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=ye("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=ye("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=ye("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=ye("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=ye("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=ye("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),_v=["Thandi","Jessica","Precious","Elize","Zanele","Sarah","Nosipho","Annelie","Busi","Nicole","Lindiwe","Megan","Nompumelelo","Bianca","Ayanda","Michelle","Gugulethu","Chantelle","Siphesihle","Debbie","Refilwe","Karen"],Nv=["Priya","Meera","Anjali","Deepa","Lakshmi"],Sv=["Wei","Li","Mei","Yuki","Jin"],Ev=["Dlamini","Botha","Nkosi","Nel","Khumalo","Van Der Merwe","Molefe","Smith","Mthembu","Coetzee","Ngcobo","Fourie","Mkhize","Van Wyk","Zulu","Kruger"],Cv=["Naidoo","Patel","Govender","Chetty","Singh"],kv=["Chen","Wang","Lee","Zhang","Liu"],Tv=["Sandton","Cape Town","Durban North","Centurion","Paarl","Soweto","Umhlanga","Bloemfontein","Stellenbosch","George","Ballito","Benoni","Midrand","Somerset West","Port Elizabeth","Pretoria East"],nR=()=>{const{products:n}=Dt(),[e,t]=I.useState(!1),[r,i]=I.useState(null),l=I.useMemo(()=>n.filter(c=>c.stock>1&&(c.soldCount||0)>150),[n]);return I.useEffect(()=>{if(l.length===0)return;let c;const d=()=>{const f=l[Math.floor(Math.random()*l.length)],y=Math.random();let b="",N="";y>.99?(b=Sv[Math.floor(Math.random()*Sv.length)],N=kv[Math.floor(Math.random()*kv.length)]):y>.98?(b=Nv[Math.floor(Math.random()*Nv.length)],N=Cv[Math.floor(Math.random()*Cv.length)]):(b=_v[Math.floor(Math.random()*_v.length)],N=Ev[Math.floor(Math.random()*Ev.length)]);const E=Tv[Math.floor(Math.random()*Tv.length)],j=`${Math.floor(Math.random()*59)+1} minutes ago`,k=f.type==="Pendant"||f.type==="Bracelet";i({img:k?void 0:f.images[0],name:`${b} ${N.charAt(0)}.`,location:E,productName:f.name,productId:f.id,timeAgo:j}),t(!0),setTimeout(()=>{t(!1)},6e3);const P=Math.floor(Math.random()*25001+2e4);c=setTimeout(d,P)};return c=setTimeout(d,5e3),()=>clearTimeout(c)},[l]),r?s.jsx("div",{className:`fixed bottom-4 left-4 z-50 max-w-xs w-full transition-all duration-700 transform ${e?"translate-y-0 opacity-100":"translate-y-20 opacity-0 pointer-events-none"}`,children:s.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md border border-gray-800 p-3 rounded-xl shadow-2xl flex items-center gap-3 relative overflow-hidden group",children:[s.jsx("button",{onClick:()=>t(!1),className:"absolute top-1 right-1 text-gray-500 hover:text-white p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(wn,{size:12})}),r.img?s.jsx("div",{className:"w-16 h-16 shrink-0 rounded-lg overflow-hidden border border-gray-700 bg-black",children:s.jsx("img",{src:r.img,alt:"Product",className:"w-full h-full object-cover",onError:c=>{console.warn("Image failed to load in SocialProofPopup:",c.currentTarget.src),c.currentTarget.src="https://via.placeholder.com/200"}})}):s.jsx("div",{className:"w-16 h-16 shrink-0 rounded-lg border border-purple-500/30 bg-purple-900/20 flex items-center justify-center",children:s.jsxs("span",{className:"font-cherry text-xs text-purple-400 text-center leading-none",children:["Unique",s.jsx("br",{}),"Find"]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[s.jsx("span",{className:"text-xs font-bold text-white truncate",children:r.name}),s.jsxs("span",{className:"text-[9px] text-gray-400",children:["in ",r.location]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-green-400 font-bold uppercase tracking-wide mb-1",children:[s.jsx(gc,{size:10})," Verified Purchase"]}),s.jsx(Me,{to:`/product/${r.productId}`,className:"block text-xs text-gray-300 hover:text-pink-500 transition-colors truncate line-clamp-2 leading-tight",children:r.productName}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:r.timeAgo})]})]})}):null},yp=500,DN=({subtotal:n,isSticky:e=!1,onContinueShopping:t,onClose:r})=>{const i=yp-n,l=Math.min(n/yp*100,100),c=n>=yp,d=c?"Congratulations! You've unlocked FREE shipping!":`You're R${i.toFixed(2)} away from free shipping!`;return e?s.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[s.jsx("div",{className:"p-2 bg-pink-900/20 text-pink-500 rounded-full border border-pink-500/30",children:s.jsx(hs,{size:20})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm font-bold ${c?"text-green-400":"text-white"}`,children:d}),s.jsx("div",{className:"w-full bg-black/50 rounded-full h-2 mt-1 overflow-hidden border border-gray-700",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c?"bg-green-500":"bg-pink-500"}`,style:{width:`${l}%`}})})]}),s.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-white",children:s.jsx(wn,{size:18})})]})}):s.jsx("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-pink-500/30 rounded-2xl p-6 shadow-lg mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[s.jsx("div",{className:"p-3 bg-pink-900/30 text-pink-400 rounded-full border border-pink-500/30",children:s.jsx(hs,{size:28})}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsx("h3",{className:`text-lg font-bold ${c?"text-green-400":"text-white"}`,children:d}),s.jsx("div",{className:"w-full bg-black rounded-full h-2.5 mt-2 overflow-hidden border border-gray-700 shadow-inner",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c?"bg-green-500":"bg-pink-500"} shadow-[inset_0_1px_1px_rgba(255,255,255,0.2)]`,style:{width:`${l}%`}})})]}),!c&&s.jsxs("button",{onClick:t,className:"w-full md:w-auto mt-2 md:mt-0 px-6 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:["Continue Shopping ",s.jsx(Mt,{size:18})]})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Qa;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Qa||(Qa={}));class vp extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const rR=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},sR=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},i=()=>e!==null?e.name:rR(n),l=()=>i()!=="web",c=b=>{const N=f.get(b);return!!(N!=null&&N.platforms.has(i())||d(b))},d=b=>{var N;return(N=t.PluginHeaders)===null||N===void 0?void 0:N.find(E=>E.name===b)},p=b=>n.console.error(b),f=new Map,y=(b,N={})=>{const E=f.get(b);if(E)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),E.proxy;const j=i(),k=d(b);let P;const $=async()=>(!P&&j in N?P=typeof N[j]=="function"?P=await N[j]():P=N[j]:e!==null&&!P&&"web"in N&&(P=typeof N.web=="function"?P=await N.web():P=N.web),P),q=(A,L)=>{var V,T;if(k){const O=k==null?void 0:k.methods.find(D=>L===D.name);if(O)return O.rtype==="promise"?D=>t.nativePromise(b,L.toString(),D):(D,ve)=>t.nativeCallback(b,L.toString(),D,ve);if(A)return(V=A[L])===null||V===void 0?void 0:V.bind(A)}else{if(A)return(T=A[L])===null||T===void 0?void 0:T.bind(A);throw new vp(`"${b}" plugin is not implemented on ${j}`,Qa.Unimplemented)}},J=A=>{let L;const V=(...T)=>{const O=$().then(D=>{const ve=q(D,A);if(ve){const Ue=ve(...T);return L=Ue==null?void 0:Ue.remove,Ue}else throw new vp(`"${b}.${A}()" is not implemented on ${j}`,Qa.Unimplemented)});return A==="addListener"&&(O.remove=async()=>L()),O};return V.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(V,"name",{value:A,writable:!1,configurable:!1}),V},se=J("addListener"),he=J("removeListener"),K=(A,L)=>{const V=se({eventName:A},L),T=async()=>{const D=await V;he({eventName:A,callbackId:D},L)},O=new Promise(D=>V.then(()=>D({remove:T})));return O.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await T()},O},F=new Proxy({},{get(A,L){switch(L){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return k?K:se;case"removeListener":return he;default:return J(L)}}});return r[b]=F,f.set(b,{name:b,proxy:F,platforms:new Set([...Object.keys(N),...k?[j]:[]])}),F};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=i,t.handleError=p,t.isNativePlatform=l,t.isPluginAvailable=c,t.registerPlugin=y,t.Exception=vp,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},iR=n=>n.Capacitor=sR(n),Ud=iR(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),yg=Ud.registerPlugin;class LN{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),r&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const i=this.listeners[e];if(!i){if(r){let l=this.retainedEventArguments[e];l||(l=[]),l.push(t),this.retainedEventArguments[e]=l}return}i.forEach(l=>l(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new Ud.Exception(e,Qa.Unimplemented)}unavailable(e="not available"){return new Ud.Exception(e,Qa.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const Pv=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),jv=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class oR extends LN{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,l]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=jv(i).trim(),l=jv(l).trim(),t[i]=l}),t}async setCookie(e){try{const t=Pv(e.key),r=Pv(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,l=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${l}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}yg("CapacitorCookies",{web:()=>new oR});const aR=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),lR=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,l,c)=>(i[l]=n[e[c]],i),{})},cR=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[l,c]=i;let d,p;return Array.isArray(c)?(p="",c.forEach(f=>{d=e?encodeURIComponent(f):f,p+=`${l}=${d}&`}),p.slice(0,-1)):(d=e?encodeURIComponent(c):c,p=`${l}=${d}`),`${r}&${p}`},"").substr(1):null,uR=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=lR(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[c,d]of Object.entries(n.data||{}))l.set(c,d);t.body=l.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const l=new FormData;if(n.data instanceof FormData)n.data.forEach((d,p)=>{l.append(p,d)});else for(const d of Object.keys(n.data))l.append(d,n.data[d]);t.body=l;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class dR extends LN{async request(e){const t=uR(e,e.webFetchExtra),r=cR(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,l=await fetch(i,t),c=l.headers.get("content-type")||"";let{responseType:d="text"}=l.ok?e:{};c.includes("application/json")&&(d="json");let p,f;switch(d){case"arraybuffer":case"blob":f=await l.blob(),p=await aR(f);break;case"json":p=await l.json();break;case"document":case"text":default:p=await l.text()}const y={};return l.headers.forEach((b,N)=>{y[N]=b}),{data:p,headers:y,status:l.status,url:l.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}yg("CapacitorHttp",{web:()=>new dR});async function hR(n){try{const e=globalThis.Capacitor||window.Capacitor,t=e&&e.Plugins&&e.Plugins.UpdaterPlugin;if(t&&t.downloadAndInstall){await t.downloadAndInstall({url:n});return}}catch{}throw new Error("UpdaterPlugin not available")}yg("UpdaterPlugin",{web:()=>({openUrl:async()=>{console.warn("UpdaterPlugin not available on web")}})});const fR="https://spoilme-edee0.web.app/version.json",pR=()=>{if(typeof navigator>"u")return!1;const n=navigator.userAgent||navigator.vendor||"";return/Android|iPhone|iPad|iPod/i.test(n)};function mR({apkUrl:n="",playStoreUrl:e}){const[t,r]=I.useState(!1),[i,l]=I.useState(!1),[c,d]=I.useState(n);if(I.useEffect(()=>{var N,E;if(!pR())return;const y=(E=(N=window.Capacitor)==null?void 0:N.isNativePlatform)==null?void 0:E.call(N);l(y),(async()=>{try{console.log("Checking for update...");const k=await(await fetch(fR)).json();console.log("Fetched data:",k);const P=k.version,$=localStorage.getItem("appVersion")||"0.1";console.log("Latest version:",P,"Stored version:",$),P!==$?(console.log("New version detected, showing update banner"),d(k.apkUrl),r(!0),localStorage.setItem("appVersion",P)):(console.log("No new version"),(y?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||r(!0))}catch(j){console.error("Failed to check for update:",j),(y?localStorage.getItem("updatePromptDismissed"):localStorage.getItem("installPromptDismissed"))||r(!0)}})()},[]),!t)return null;const p=()=>{const y=i?"updatePromptDismissed":"installPromptDismissed";localStorage.setItem(y,String(Date.now())),r(!1)},f=async()=>{try{window.Capacitor&&window.Capacitor.isNativePlatform&&window.Capacitor.isNativePlatform()?await hR(c):window.open(c,"_blank")}catch(y){console.error("Updater error",y),window.open(c,"_blank")}i||p()};return s.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[s.jsx("div",{className:"p-2 bg-cyan-900/20 text-cyan-500 rounded-full border border-cyan-500/30",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z",clipRule:"evenodd"})})}),s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"text-sm font-bold text-white",children:"Update available - Get the latest features!"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:f,className:"px-4 py-2 bg-green-500 text-black rounded font-semibold text-sm",children:"Install Update"}),s.jsx("button",{onClick:p,className:"px-4 py-2 ring-1 ring-gray-700 rounded text-gray-300 text-sm",children:"Later"})]})]})})}const gR=()=>{const[n,e]=I.useState(!1),[t,r]=I.useState("https://spoilme-edee0.web.app/Spoil-Me-Vintage-0.4.apk"),[i,l]=I.useState("0.4"),{cart:c,user:d,isStickyProgressBarVisible:p,setIsStickyProgressBarVisible:f,getCartTotal:y}=Dt(),b=so();I.useEffect(()=>{window.scrollTo(0,0)},[b.pathname]),I.useEffect(()=>{(async()=>{try{const q=await(await fetch("https://spoilme-edee0.web.app/version.json")).json();r(q.apkUrl),l(q.version)}catch($){console.error("Failed to fetch latest APK URL:",$)}})()},[]);const N=c.reduce((P,$)=>P+$.quantity,0),E=y(),j=d.wishlist?d.wishlist.length:0,k=d.notifications?d.notifications.filter(P=>!P.isRead).length:0;return s.jsxs("div",{className:"min-h-screen flex flex-col bg-black text-gray-100",children:[s.jsx("style",{children:`
        @keyframes marquee {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
        .animate-marquee {
          animation: marquee 10s linear infinite;
        }
        .animate-marquee:hover {
          animation-play-state: paused;
        }
      `}),s.jsx("div",{className:"w-full bg-zinc-900 border-b border-white/5 overflow-hidden py-2 relative z-[60]",children:s.jsxs("div",{className:"flex animate-marquee whitespace-nowrap",children:[s.jsxs("div",{className:"flex items-center gap-8 px-4",children:[s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(mi,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(Ir,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(hs,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[s.jsx(Xt,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[s.jsx(nc,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[s.jsx($r,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(gc,{size:14,className:"text-green-500"})," And lots more!"]})]}),s.jsxs("div",{className:"flex items-center gap-8 px-4",children:[s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(mi,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(Ir,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(hs,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[s.jsx(Xt,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[s.jsx(nc,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[s.jsx($r,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),s.jsx("span",{className:"text-gray-700",children:"•"}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(gc,{size:14,className:"text-green-500"})," And lots more!"]})]})]})}),s.jsxs("header",{className:"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800 transition-all",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"relative flex flex-col lg:flex-row items-center justify-center lg:justify-between h-auto lg:h-20 py-4 lg:py-0 gap-3",children:[s.jsx("button",{className:"absolute top-1/2 -translate-y-1/2 left-4 lg:hidden p-2 rounded-md text-gray-400 hover:text-white",onClick:()=>e(!n),children:n?s.jsx(wn,{size:24}):s.jsx(VA,{size:24})}),s.jsxs(Me,{to:"/",className:"flex-shrink-0 group flex flex-col items-center leading-none",children:[s.jsx("span",{className:"font-cherry text-[24px] font-bold text-pink-500 group-hover:text-pink-400 transition-colors drop-shadow-[0_0_5px_rgba(236,72,153,0.5)]",children:"Spoil Me"}),s.jsx("span",{className:"font-cherry text-[24px] font-bold text-cyan-400 group-hover:text-cyan-300 transition-colors drop-shadow-[0_0_5px_rgba(34,211,238,0.5)] ml-7 -mt-1",children:"Vintage"})]}),s.jsxs("nav",{className:"hidden lg:flex absolute left-1/2 -translate-x-1/2 space-x-8",children:[s.jsx(Me,{to:"/",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${b.pathname==="/"?"text-cyan-400":"text-gray-300"}`,children:"Home"}),s.jsx(Me,{to:"/#catalog",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Catalog"}),s.jsxs(Me,{to:"/membership",className:`text-sm font-medium flex items-center gap-1 hover:text-purple-400 transition-colors ${b.pathname==="/membership"?"text-purple-400 font-bold":"text-gray-300"}`,children:[s.jsx(Pr,{size:14})," Membership"]}),s.jsx(Me,{to:"/#specials",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Specials"})]}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-3 w-full lg:w-auto justify-center lg:justify-end",children:[s.jsx("button",{className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors",children:s.jsx(bh,{size:20})}),d.email?s.jsx(Me,{to:"/earn-rewards",className:"group flex items-center justify-center p-2 relative",title:"Your Loyalty Rewards",children:s.jsxs("div",{className:"flex items-center gap-1.5 hover:bg-purple-900/50 px-2 py-1 rounded-full transition-colors border border-transparent hover:border-purple-500/30",children:[s.jsx($r,{size:20,className:"text-purple-400 group-hover:text-pink-400"}),s.jsx("span",{className:"hidden md:inline-block text-xs font-bold text-purple-200 group-hover:text-white",children:d.loyaltyPoints})]})}):s.jsx(Me,{to:"/earn-rewards",className:"p-2 text-gray-400 hover:text-purple-400 transition-colors relative",title:"Earn Rewards",children:s.jsx($r,{size:20})}),d.email&&s.jsxs(Me,{to:"/profile",className:"p-2 text-gray-400 hover:text-yellow-400 transition-colors relative group",children:[s.jsx(TN,{size:20}),k>0&&s.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-yellow-400 rounded-full shadow-[0_0_5px_rgba(250,204,21,0.8)]",children:k})]}),s.jsxs(Me,{to:"/profile",className:"p-2 text-gray-400 hover:text-pink-500 transition-colors relative group",children:[s.jsx(pg,{size:20}),j>0&&s.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-pink-600 rounded-full shadow-[0_0_5px_rgba(236,72,153,0.8)]",children:j})]}),d.email?s.jsx(Me,{to:"/profile",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative",children:s.jsx(wc,{size:20})}):s.jsx(Me,{to:"/login",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative flex items-center gap-1",children:s.jsx(AN,{size:20})}),s.jsxs(Me,{to:"/cart",className:"p-2 text-gray-400 hover:text-pink-500 transition-colors relative group",children:[s.jsx(gg,{size:20}),N>0&&s.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-green-400 rounded-full shadow-[0_0_5px_rgba(74,222,128,0.8)]",children:N})]})]})]})}),n&&s.jsx("div",{className:"lg:hidden absolute top-full left-0 w-full bg-zinc-900 border-b border-gray-800 shadow-lg animate-in slide-in-from-top-5 duration-200 z-40",children:s.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[s.jsx(Me,{to:"/",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Home"}),s.jsxs(Me,{to:"/membership",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-purple-400 hover:bg-zinc-800 hover:text-purple-300 flex items-center gap-2",children:[s.jsx(Pr,{size:16})," Membership Perks"]}),s.jsxs(Me,{to:"/earn-rewards",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[s.jsx($r,{size:16,className:"text-purple-400"}),d.email?"My Rewards":"Earn Rewards",d.email&&s.jsxs("span",{className:"bg-purple-900/50 text-purple-200 text-[10px] px-2 py-0.5 rounded-full font-bold ml-auto",children:[d.loyaltyPoints," Pts"]})]}),s.jsxs(Me,{to:"/affiliate-program",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-green-400 flex items-center gap-2",children:[s.jsx(xg,{size:16,className:"text-green-500"})," Partnership Program"]}),d.email?s.jsxs(Me,{to:"/profile",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center justify-between",children:["My Profile",k>0&&s.jsxs("span",{className:"bg-yellow-400 text-black text-xs px-2 py-0.5 rounded-full font-bold",children:[k," New"]})]}):s.jsx(Me,{to:"/login",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Login / Register"})]})})]}),s.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx(Kb,{})}),s.jsx(nR,{}),p&&E>0&&s.jsx(DN,{subtotal:E,isSticky:!0,onClose:()=>f(!1)}),s.jsx(mR,{}),s.jsx("footer",{className:"bg-zinc-950 border-t border-gray-800 py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"About"}),s.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Our Story"}),s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Careers"}),s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Press"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"Support"}),s.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Contact Us"}),s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Shipping"}),s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Returns"}),s.jsx("li",{className:"hover:text-green-400 cursor-pointer flex items-center gap-2 text-gray-300 font-medium",children:s.jsxs("a",{href:t,download:!0,style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"inherit",textDecoration:"none"},children:[s.jsx(li,{size:14})," Download App v",i]})})]})]})]}),d.isAdmin&&s.jsx("div",{className:"mt-12 pt-8 border-t border-gray-900 flex justify-center",children:s.jsxs(Me,{to:"/admin",className:"flex items-center gap-2 text-xs text-red-400 hover:text-red-300 uppercase tracking-widest font-bold transition-colors bg-red-900/10 px-4 py-2 rounded border border-red-900/30",children:[s.jsx(Qp,{size:14})," Admin Dashboard"]})})]})})]})},xR=()=>{const n=so(),e=fs(),{user:t}=Dt();I.useEffect(()=>{t.isAdmin||e("/login")},[t,e]);const r=[{path:"/admin",icon:Qp,label:"Dashboard"},{path:"/admin/orders",icon:no,label:"Orders"},{path:"/admin/products",icon:Fd,label:"Products"},{path:"/admin/categories",icon:JA,label:"Categories"},{path:"/admin/gift-cards",icon:Xt,label:"Gift Cards"},{path:"/admin/social",icon:Ho,label:"Social Studio"},{path:"/admin/affiliates",icon:mi,label:"Affiliates"},{path:"/admin/winners",icon:as,label:"Weekly Winners"},{path:"/admin/expenses",icon:As,label:"Expenses"}];return t.isAdmin?s.jsxs("div",{className:"min-h-screen bg-black flex text-gray-100",children:[s.jsxs("aside",{className:"w-64 bg-zinc-900 border-r border-gray-800 hidden md:flex flex-col fixed h-full",children:[s.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-800",children:[s.jsx("span",{className:"text-xl font-bold text-pink-500 drop-shadow-[0_0_3px_rgba(236,72,153,0.6)]",children:"Spoil Me Vintage"}),s.jsx("span",{className:"ml-2 text-xs bg-purple-900/50 border border-purple-500/50 text-purple-300 px-2 py-0.5 rounded",children:"ADMIN"})]}),s.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[s.jsxs(Me,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-gray-400 hover:bg-zinc-800 hover:text-white rounded-lg mb-4 transition-colors",children:[s.jsx(mc,{size:18})," Back to Store"]}),s.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Management"}),r.map(i=>{const l=n.pathname===i.path;return s.jsxs(Me,{to:i.path,className:`flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-colors ${l?"bg-pink-900/20 text-pink-400 border border-pink-500/20":"text-gray-400 hover:bg-zinc-800 hover:text-white"}`,children:[s.jsx(i.icon,{size:18})," ",i.label]},i.path)})]})]}),s.jsx("main",{className:"flex-1 md:ml-64 p-8 overflow-y-auto bg-black",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:s.jsx(Kb,{})})}),s.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 flex justify-around py-3 z-50 overflow-x-auto",children:[s.jsx(Me,{to:"/admin",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Qp,{size:24})}),s.jsx(Me,{to:"/admin/orders",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(no,{size:24})}),s.jsx(Me,{to:"/admin/products",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Fd,{size:24})}),s.jsx(Me,{to:"/admin/social",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Ho,{size:24})}),s.jsx(Me,{to:"/admin/gift-cards",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Xt,{size:24})}),s.jsx(Me,{to:"/admin/affiliates",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(mi,{size:24})}),s.jsx(Me,{to:"/admin/expenses",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(As,{size:24})})]})]}):null},pr=({product:n})=>{const{addToCart:e,toggleWishlist:t,user:r,cart:i}=Dt(),[l,c]=I.useState(!1),d=r.wishlist.includes(n.id),p=fs(),f=new Date,y=n.promoStartsAt?new Date(n.promoStartsAt):null,b=n.promoExpiresAt?new Date(n.promoExpiresAt):null,N=y&&!isNaN(y.getTime()),E=b&&!isNaN(b.getTime()),j=(n.promoPrice||0)>0&&(!N||y<=f)&&(!E||b>f),k=parseFloat((n.price*.8).toFixed(2));let P=n.price,$=!1,q="none";r.isMember?($=!0,j?r.membershipTier==="deluxe"&&n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0?(P=n.promoDeluxeMemberPrice,q="deluxe"):r.membershipTier==="premium"&&n.promoPremiumMemberPrice&&n.promoPremiumMemberPrice>0?(P=n.promoPremiumMemberPrice,q="premium"):r.membershipTier==="basic"&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?(P=n.promoBasicMemberPrice,q="basic"):P=Math.min(k,n.promoPrice||1/0):P=k):j&&(P=n.promoPrice);const J=j&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?n.promoBasicMemberPrice:k,he=n.reviews&&n.reviews.length>0?(n.reviews.reduce((ke,je)=>ke+je.rating,0)/n.reviews.length).toFixed(1):"5.0",K=n.reviews?n.reviews.length:0,F=n.soldCount||0,L=j?(()=>{if(!E||!b)return null;const ke=b.getTime()-f.getTime();if(ke<=0)return null;const je=Math.floor(ke/(1e3*60*60*24)),z=Math.floor(ke%(1e3*60*60*24)/(1e3*60*60)),we=Math.floor(ke%(1e3*60*60)/(1e3*60));return je>0?`${je}d ${z}h`:`${z}h ${we}m`})():null,V=n.type==="Ring"||n.showEarringOptions&&n.earringMaterials&&n.earringMaterials.length>1||n.type==="Pendant"&&n.chainStyles&&n.chainStyles.length>1,T=!!n.isSoldOut||n.stock<=0,O=i.filter(ke=>ke.id===n.id).reduce((ke,je)=>ke+je.quantity,0),D=!V&&O>=n.stock,ve=()=>{T||D||(V?p(`/product/${n.id}`):e({...n,price:P}))},Ue=j&&(n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0||n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0);return s.jsxs("div",{className:"group relative bg-zinc-900 rounded-lg shadow-[0_0_30px_rgba(255,255,255,0.15)] hover:shadow-pink-500/20 transition-all duration-300 border border-gray-800 hover:border-pink-500/50 z-0 flex flex-col h-full",children:[s.jsxs(Me,{to:`/product/${n.id}`,className:"block relative overflow-hidden aspect-square rounded-t-lg",children:[s.jsx("img",{src:n.images[0],alt:n.name,onError:ke=>{console.warn("Image failed to load in ProductCard:",ke.currentTarget.src)},className:`w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500 ${n.stock<=0?"opacity-50 grayscale":"opacity-90 group-hover:opacity-100"}`}),s.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1 z-10",children:[$&&s.jsxs("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-purple-400/30 flex items-center gap-1",children:[s.jsx(Pr,{size:10,fill:"currentColor"}),q!=="none"?`${q.toUpperCase()} PRICE`:"MEMBER"]}),!$&&j&&s.jsx("span",{className:"bg-green-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-green-500/30",children:"PROMO"}),n.isNewArrival&&s.jsx("span",{className:"bg-cyan-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-cyan-500/30",children:"NEW"})]}),j&&L&&!T&&s.jsxs("div",{className:"absolute bottom-0 left-0 w-full bg-black/80 backdrop-blur-md py-1 px-2 flex items-center justify-center gap-1.5 text-[10px] text-green-400 font-bold border-t border-green-500/30",children:[s.jsx(pi,{size:10})," Ends in: ",L]})]}),s.jsx("button",{onClick:ke=>{ke.preventDefault(),t(n.id)},className:`absolute top-2 right-2 p-2 rounded-full bg-black/50 backdrop-blur-md shadow-md transition-colors border border-transparent hover:border-pink-500 z-20 ${d?"text-pink-500":"text-gray-300 hover:text-white"}`,children:s.jsx(pg,{size:18,fill:d?"currentColor":"none"})}),s.jsxs("div",{className:"p-4 rounded-b-lg flex flex-col flex-1 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:"text-xs text-cyan-400 font-medium uppercase tracking-wider truncate pr-2",children:n.category}),s.jsx("button",{onClick:ve,disabled:T||D,className:`p-1.5 rounded-full transition-all flex-shrink-0 -mt-1 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed ${r.isMember?"bg-purple-600/20 text-purple-400 hover:bg-purple-600 hover:text-white border border-purple-500/30":"bg-zinc-800 text-gray-300 hover:bg-cyan-500 hover:text-black border border-gray-700"}`,title:V?"View Options":T?"Sold Out":D?"Stock limit in cart":"Add to Cart",children:V?s.jsx(Jp,{size:16}):s.jsx(no,{size:16})})]}),s.jsx(Me,{to:`/product/${n.id}`,children:s.jsx("h3",{className:"text-sm font-bold text-gray-100 leading-tight group-hover:text-pink-500 transition-colors line-clamp-2 h-10",children:n.name})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[s.jsx(ci,{size:12,fill:"currentColor"}),s.jsx("span",{className:"text-xs font-bold text-gray-300",children:he}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:["(",K,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[F>0&&s.jsxs("div",{className:"text-gray-500 font-medium flex items-center gap-1",children:[F," sold"]}),n.stock>0&&n.stock<=5&&s.jsx("div",{className:"text-orange-400 font-medium flex items-center gap-1",children:"Low Stock"})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 min-h-[20px]",children:[n.compareAtPrice&&s.jsxs("div",{className:"flex items-center gap-1 relative",children:[s.jsxs("span",{className:"text-[10px] text-gray-500 line-through",children:["RRP R",n.compareAtPrice.toFixed(2)]}),s.jsx("button",{onClick:ke=>{ke.preventDefault(),c(!l)},className:"text-gray-600 hover:text-gray-400 focus:outline-none",children:s.jsx(vh,{size:10})}),l&&s.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 p-2 bg-zinc-950 border border-gray-700 rounded shadow-xl text-[10px] text-gray-300 z-50",children:"Recommended retail price."})]}),s.jsxs("span",{className:"text-sm font-bold text-green-400",children:["Retail R",n.price.toFixed(2)]})]}),s.jsx("div",{className:"mt-auto pt-2 border-t border-gray-800/50",children:r.isMember?s.jsx("div",{className:"flex items-end justify-between",children:s.jsxs("div",{className:"flex flex-col w-full",children:[s.jsxs("span",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Pr,{size:10})," ",q!=="none"?q:"Member"," Price"]}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("span",{className:"text-2xl font-bold text-white drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:["R",P.toFixed(2)]}),P<n.price&&s.jsxs("span",{className:"text-xs text-gray-500 line-through",children:["R",n.price.toFixed(2)]})]})]})}):s.jsx("div",{className:"flex items-end justify-between",children:s.jsxs("div",{className:"flex flex-col w-full",children:[j?s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("span",{className:"text-2xl font-bold text-green-400",children:["R",P.toFixed(2)]}),s.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["R",n.price.toFixed(2)]})]}):null,Ue?s.jsxs("div",{className:"flex flex-col gap-0.5 mt-1",children:[s.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[s.jsx("span",{children:"Basic & Premium:"}),s.jsxs("span",{className:"text-purple-400 font-bold",children:["R",(n.promoBasicMemberPrice||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[s.jsx("span",{children:"Deluxe:"}),s.jsxs("span",{className:"text-purple-400 font-bold",children:["R",(n.promoDeluxeMemberPrice||0).toFixed(2)]})]})]}):s.jsxs("div",{className:"text-[10px] text-gray-400 flex items-center gap-1 mt-0.5",children:["Members: ",s.jsxs("span",{className:"text-purple-400 font-bold",children:["R",J.toFixed(2)]})]})]})})})]})]})},yR=({winners:n})=>{const[e,t]=I.useState(0);if(I.useEffect(()=>{if(n.length===0)return;const i=setInterval(()=>{t(l=>(l+1)%n.length)},3e3);return()=>clearInterval(i)},[n.length]),n.length===0)return null;const r=n[e];return s.jsx("div",{className:"flex items-center justify-center bg-yellow-400 p-2 rounded",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(as,{size:16,className:"text-amber-700 mr-3 shrink-0"}),s.jsx("span",{className:"text-sm text-black font-bold tracking-wide",children:r.name}),s.jsx("span",{className:"text-xs text-zinc-700 font-medium mx-2",children:"won"}),s.jsxs("span",{className:"text-sm font-extrabold text-black",children:["R",r.prize.toFixed(2),"!"]})]})})},vR=n=>!!n&&/^https?:\/\//i.test(n),bR=n=>!!n&&n.startsWith("data:"),wR=n=>!!n&&n.startsWith("blob:"),_R=n=>!!n&&n.startsWith("gs://");async function NR(n){if(!n)return null;if(typeof n=="string"){if(vR(n)||bR(n)||wR(n)||n.startsWith("/"))return n;if(_R(n)){const e=n.match(/^gs:\/\/[^/]+\/(.+)$/),t=e?e[1]:n;try{return vn?await ni(ri(vn,decodeURIComponent(t).replace(/^\//,""))):null}catch(r){return console.warn("Failed to resolve gs:// URL",n,r),null}}try{return vn?await ni(ri(vn,n.replace(/^\//,""))):n}catch{}return n}if(typeof n=="object"){const e=n.fullPath||n.path||n.name||null;if(e&&vn)try{return await ni(ri(vn,e.replace(/^\//,"")))}catch(t){return console.warn("Failed to resolve storage object image path",n,t),null}}return null}function VN(n,e){const[t,r]=I.useState(e||void 0);return I.useEffect(()=>{let i=!0;if(!n){r(e);return}return(async()=>{try{const l=await NR(n);i&&r(l||e)}catch(l){console.error("Error resolving image src",l),i&&r(e)}})(),()=>{i=!1}},[n,e]),t}const Bd=({src:n,alt:e="",className:t,fallback:r,onError:i})=>{const l=VN(n,r||"https://via.placeholder.com/600");return s.jsx("img",{src:l,alt:e,className:t,onError:c=>{i==null||i(c)}})},SR=()=>{const{products:n,categories:e,specials:t,user:r,memberCount:i,weeklyWinners:l}=Dt(),c=I.useRef(null),d=I.useRef(null),p=I.useRef(null),f=I.useRef(null),y=I.useRef(null),b=I.useRef(null),N=I.useRef(null),E=I.useRef(null),j=I.useRef(null),k=I.useRef(null),[P,$]=I.useState(!1);I.useEffect(()=>{const ee=setInterval(()=>{$(de=>!de)},5e3);return()=>clearInterval(ee)},[]);const q=n.filter(ee=>ee.isBestSeller),J=n.filter(ee=>ee.type==="Ring"||ee.isFeaturedRing),se=n.filter(ee=>ee.type==="Bracelet"||ee.isFeaturedBracelet),he=n.filter(ee=>ee.isUniquePendant),K=n.filter(ee=>ee.type==="Stud"||ee.isFeaturedStud),F=n.filter(ee=>ee.type==="Dangle"||ee.isFeaturedDangle),A=n.filter(ee=>ee.isJewelrySet),L=n.filter(ee=>ee.type==="Watch"||ee.isFeaturedWatch),V=n.filter(ee=>ee.type==="Jewelry Box"||ee.isFeaturedJewelryBox),T=n.filter(ee=>ee.type==="Perfume Holder"||ee.isFeaturedPerfumeHolder),O=new Date,D=O.getMonth(),ve=O.getFullYear(),ke=23+(D+ve*12)%3,je=O.getDate(),z=new Date(ve,D+1,0).getDate(),we=(je-1)/(z-1),W=ke-we*(ke-2),B=Math.max(2,Math.floor(W)),Z=(ee,de)=>{if(ee.current){const Ie=ee.current.clientWidth*.8;ee.current.scrollBy({left:de==="right"?Ie:-Ie,behavior:"smooth"})}};return s.jsxs("div",{className:"space-y-12",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("section",{className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-pink-900 via-purple-900 to-indigo-900 border border-pink-500/30 shadow-[0_0_20px_rgba(236,72,153,0.2)] group hover:shadow-[0_0_30px_rgba(236,72,153,0.4)] transition-all",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-full bg-white/5 skew-x-12 translate-x-20 group-hover:translate-x-10 transition-transform duration-700"}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between p-6 md:p-8 relative z-10 gap-6",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"p-4 bg-white/10 backdrop-blur-md rounded-full border border-white/20 shadow-lg hidden sm:block",children:s.jsx(xc,{size:32,className:"text-pink-300"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"bg-green-500 text-white text-[10px] font-bold px-2 py-0.5 rounded shadow animate-pulse",children:"LIMITED OFFER"}),s.jsx("span",{className:"text-pink-300 text-xs font-bold uppercase tracking-wider",children:"Give the perfect gift"})]}),s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-1",children:"Buy a Gift Voucher"}),s.jsxs("p",{className:"text-sm md:text-base text-gray-200",children:["Purchase between ",s.jsx("strong",{className:"text-white",children:"R250 - R500"})," and get an ",s.jsx("span",{className:"text-yellow-300 font-bold underline decoration-wavy",children:"EXTRA R100"})," to spend!"]})]})]}),s.jsxs(Me,{to:"/gift-cards",className:"whitespace-nowrap px-8 py-3 bg-white text-purple-900 font-bold rounded-full hover:bg-gray-100 transition-colors shadow-lg flex items-center gap-2 group/btn",children:["Create Voucher ",s.jsx(Mt,{size:18,className:"group-hover/btn:translate-x-1 transition-transform"})]})]})]})}),s.jsxs("div",{className:"relative rounded-2xl overflow-hidden border-4 border-cyan-500",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[s.jsxs("section",{className:"relative bg-zinc-900 text-white",children:[s.jsxs("div",{className:`absolute top-2 right-2 text-xs font-bold px-3 py-1 rounded-full border shadow-md z-20 bg-red-600 border-red-400 text-red-500 ${P?"animate-pulse":""}`,children:[B," spot",B!==1?"s":""," left"]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-900/10 via-black to-zinc-900"}),s.jsx("div",{className:"relative z-10 p-4 flex flex-col justify-center",children:s.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-bold text-cyan-400",children:"🎁 Spoil Me Package"}),s.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-cyan-400 drop-shadow-lg py-1",children:"Join the club… Win weekly."}),s.jsx("p",{className:"text-sm text-gray-300",children:"All for just R19/month — cancel whenever you want!"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center pt-2",children:[s.jsxs(Me,{to:"/membership",className:"px-5 py-2.5 bg-pink-600 hover:bg-pink-500 text-white rounded-lg font-semibold transition-all hover:shadow-[0_0_20px_rgba(236,72,153,0.6)] flex items-center justify-center gap-2 text-xs",children:["Join Now ",s.jsx(Mt,{size:14})]}),s.jsxs(Me,{to:"/weekly-winners",className:"px-5 py-2.5 border border-gray-500 hover:border-cyan-400 hover:text-cyan-400 hover:bg-cyan-950/30 text-gray-300 rounded-lg font-semibold transition-all text-xs flex items-center justify-center gap-2",children:["View This Week's Winners ",s.jsx(as,{size:14})]})]})]})})]}),l.length>0&&s.jsx(yR,{winners:l.slice(0,10)})]}),q.length>0&&s.jsxs("section",{children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-yellow-400 pb-1 inline-block transform -rotate-1 drop-shadow-[0_0_5px_rgba(250,204,21,0.5)]",children:"Best Sellers"}),s.jsxs(Me,{to:"/catalog/best",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(Mt,{size:14})]})]}),s.jsxs("div",{className:"relative group/slider",children:[s.jsx("button",{onClick:()=>Z(c,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/slider:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Io,{size:20})}),s.jsx("button",{onClick:()=>Z(c,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/slider:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(qr,{size:20})}),s.jsx("div",{ref:c,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:q.map(ee=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(pr,{product:ee})},ee.id))})]})]}),s.jsxs("section",{children:[s.jsx("div",{className:"flex justify-between items-end mb-6",children:s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-purple-500 pb-1 inline-block transform -rotate-1 drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:"Shop by Category"})}),s.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 md:p-4",children:e.map(ee=>{const de=ee.name==="Red Collection",Ie=`/collections/${encodeURIComponent(ee.name)}`;return de?s.jsx("div",{className:"relative aspect-[4/5] md:aspect-square group cursor-pointer z-10",children:s.jsxs(Me,{to:Ie,className:"block w-full h-full relative rounded-xl md:rounded-2xl overflow-hidden bg-zinc-900 text-white border-2 md:border-4 border-black transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 15px 3px rgba(220, 38, 38, 0.6)"},children:[s.jsx(Bd,{src:ee.image,alt:ee.name,className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity",fallback:"https://via.placeholder.com/600",onError:H=>{console.warn("Image failed to load in Home category:",H.currentTarget.src),H.currentTarget.src="https://via.placeholder.com/600"}}),s.jsxs("div",{className:"absolute bottom-0 left-0 p-1.5 md:p-4 w-full bg-gradient-to-t from-black/80 to-transparent",children:[s.jsx("h3",{className:"font-handwriting text-xl md:text-3xl font-bold mb-0.5 md:mb-1 text-white drop-shadow-md truncate",children:ee.name}),s.jsx("p",{className:"text-gray-200 text-[9px] md:text-xs drop-shadow-md line-clamp-1",children:ee.description})]})]})},ee.id):s.jsx("div",{className:"relative aspect-[4/5] md:aspect-square cursor-pointer overflow-hidden transition-all duration-300 rounded-lg md:rounded-xl border border-gray-800 bg-zinc-900 hover:border-gray-600 group",children:s.jsxs(Me,{to:Ie,className:"block w-full h-full relative",children:[s.jsx(Bd,{src:ee.image,alt:ee.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",fallback:"https://via.placeholder.com/600",onError:H=>{console.warn("Image failed to load in Home category alt:",H.currentTarget.src),H.currentTarget.src="https://via.placeholder.com/600"}}),s.jsxs("div",{className:"absolute bottom-0 left-0 p-1.5 md:p-4 w-full bg-gradient-to-t from-black/80 to-transparent",children:[s.jsx("h3",{className:"font-handwriting text-xl md:text-3xl font-bold mb-0.5 md:mb-1 text-white drop-shadow-md truncate",children:ee.name}),s.jsx("p",{className:"text-gray-200 text-[9px] md:text-xs drop-shadow-md line-clamp-1",children:ee.description})]})]})},ee.id)})})]}),s.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 py-8 border-y border-gray-800 bg-zinc-900/50 backdrop-blur-sm rounded-xl px-6 my-8",children:[s.jsxs(Me,{to:"/earn-rewards",className:"flex items-center gap-3 group cursor-pointer",children:[s.jsx("div",{className:"p-3 bg-zinc-800 text-pink-500 rounded-full shadow-[0_0_10px_rgba(236,72,153,0.2)] group-hover:shadow-[0_0_15px_rgba(236,72,153,0.5)] transition-all",children:r.email?s.jsx($r,{size:20}):s.jsx(Xt,{size:20})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-100 text-base",children:r.email?`My Points: ${r.loyaltyPoints}`:"Loyalty Rewards"}),s.jsx("p",{className:"text-xs text-gray-400",children:r.email?"Redeem for discounts or earn more":"Earn points on every vintage find."})]})]}),s.jsxs(Me,{to:"/affiliate-program",className:"flex items-center gap-3 group cursor-pointer",children:[s.jsx("div",{className:"p-3 bg-zinc-800 text-green-400 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.2)] group-hover:shadow-[0_0_15px_rgba(74,222,128,0.5)] transition-all",children:s.jsx(xg,{size:20})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-100 text-base",children:"Partnership Program"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Earn 20% commission on referrals."})]})]}),s.jsxs("div",{className:"flex items-center gap-3 group",children:[s.jsx("div",{className:"p-3 bg-zinc-800 text-cyan-400 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.2)] group-hover:shadow-[0_0_15px_rgba(34,211,238,0.5)] transition-all",children:s.jsx(pi,{size:20})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-100 text-base",children:"Flash Sales"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Daily limited-time offers."})]})]})]}),he.length>0&&s.jsxs("section",{children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-purple-500 pl-4 inline-block",children:"Unique Pendants"}),s.jsxs(Me,{to:"/catalog/unique",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(Mt,{size:14})]})]}),s.jsxs("div",{className:"relative group/pendants",children:[s.jsx("button",{onClick:()=>Z(f,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/pendants:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Io,{size:20})}),s.jsx("button",{onClick:()=>Z(f,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/pendants:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(qr,{size:20})}),s.jsx("div",{ref:f,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:he.map(ee=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(pr,{product:ee})},ee.id))})]})]}),J.length>0&&s.jsxs("section",{id:"rings",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-500 pl-4 inline-block",children:"Rings"}),s.jsxs(Me,{to:"/catalog/ring",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(Mt,{size:14})]})]}),s.jsxs("div",{className:"relative group/rings",children:[s.jsx("button",{onClick:()=>Z(d,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/rings:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Io,{size:20})}),s.jsx("button",{onClick:()=>Z(d,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/rings:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(qr,{size:20})}),s.jsx("div",{ref:d,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:J.map(ee=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(pr,{product:ee})},ee.id))})]})]}),se.length>0&&s.jsxs("section",{id:"bracelets",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-teal-500 pl-4 inline-block",children:"Bracelets"}),s.jsxs(Me,{to:"/catalog/bracelet",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(Mt,{size:14})]})]}),s.jsxs("div",{className:"relative group/bracelets",children:[s.jsx("button",{onClick:()=>Z(p,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/bracelets:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Io,{size:20})}),s.jsx("button",{onClick:()=>Z(p,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/bracelets:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(qr,{size:20})}),s.jsx("div",{ref:p,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:se.map(ee=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(pr,{product:ee})},ee.id))})]})]}),K.length>0&&s.jsxs("section",{id:"studs",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-400 pl-4 inline-block",children:"Stud Earrings"}),s.jsxs(Me,{to:"/catalog/stud",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(Mt,{size:14})]})]}),s.jsxs("div",{className:"relative group/studs",children:[s.jsx("button",{onClick:()=>Z(y,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/studs:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Io,{size:20})}),s.jsx("button",{onClick:()=>Z(y,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/studs:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(qr,{size:20})}),s.jsx("div",{ref:y,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:K.map(ee=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(pr,{product:ee})},ee.id))})]})]}),F.length>0&&s.jsxs("section",{id:"dangles",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-cyan-400 pl-4 inline-block",children:"Dangle Earrings"}),s.jsxs(Me,{to:"/catalog/dangle",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(Mt,{size:14})]})]}),s.jsxs("div",{className:"relative group/dangles",children:[s.jsx("button",{onClick:()=>Z(b,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/dangles:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(qr,{size:20})}),s.jsx("button",{onClick:()=>Z(b,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/dangles:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(qr,{size:20})}),s.jsx("div",{ref:b,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:F.map(ee=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(pr,{product:ee})},ee.id))})]})]}),s.jsxs("section",{className:"relative overflow-hidden rounded-2xl p-8 md:p-12 text-center border-2 border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.4)] group mt-12",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900 via-black to-zinc-900"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[s.jsx("div",{className:"bg-purple-600 p-4 rounded-full shadow-[0_0_20px_rgba(168,85,247,0.6)] animate-pulse",children:s.jsx(Pr,{size:40,className:"text-white"})}),s.jsx("h2",{className:"font-cherry text-3xl md:text-5xl text-white drop-shadow-md",children:"Unlock VIP Pricing"}),s.jsxs("p",{className:"text-gray-300 max-w-2xl text-lg leading-relaxed",children:["Join our exclusive membership club to save up to ",s.jsx("span",{className:"text-purple-400 font-bold",children:"50% OFF"})," retail prices, receive monthly free gifts, and access members-only collections."]}),s.jsxs(Me,{to:"/membership",className:"px-8 py-4 bg-white text-purple-900 font-bold rounded-full hover:scale-105 transition-transform shadow-[0_0_20px_rgba(255,255,255,0.3)] flex items-center gap-2",children:["View Membership Perks ",s.jsx(Mt,{size:20})]})]})]}),L.length>0&&s.jsxs("section",{id:"watches",className:"mt-12",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-yellow-500 pl-4 inline-block",children:"Watches"}),s.jsxs(Me,{to:"/catalog/watch",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(Mt,{size:14})]})]}),s.jsxs("div",{className:"relative group/watches",children:[s.jsx("button",{onClick:()=>Z(E,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/watches:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Io,{size:20})}),s.jsx("button",{onClick:()=>Z(E,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/watches:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(qr,{size:20})}),s.jsx("div",{ref:E,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:L.map(ee=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(pr,{product:ee})},ee.id))})]})]}),V.length>0&&s.jsxs("section",{id:"jewelry-boxes",className:"mt-12",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-orange-500 pl-4 inline-block flex items-center gap-2",children:[s.jsx(PN,{size:20})," Jewelry Boxes"]}),s.jsxs(Me,{to:"/catalog/box",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(Mt,{size:14})]})]}),s.jsxs("div",{className:"relative group/boxes",children:[s.jsx("button",{onClick:()=>Z(j,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/boxes:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(qr,{size:20})}),s.jsx("div",{ref:j,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:V.map(ee=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(pr,{product:ee})},ee.id))})]})]}),T.length>0&&s.jsxs("section",{id:"perfumes",className:"mt-12",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-blue-500 pl-4 inline-block flex items-center gap-2",children:[s.jsx(jA,{size:20})," Perfume Holders"]}),s.jsxs(Me,{to:"/catalog/perfume",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(Mt,{size:14})]})]}),s.jsxs("div",{className:"relative group/perfumes",children:[s.jsx("button",{onClick:()=>Z(k,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/perfumes:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(qr,{size:20})}),s.jsx("div",{ref:k,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:T.map(ee=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(pr,{product:ee})},ee.id))})]})]}),A.length>0&&s.jsxs("section",{id:"jewelry-sets",className:"mt-12",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-500 pl-4 inline-block",children:"Jewelry Sets"}),s.jsxs(Me,{to:"/catalog/sets",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(Mt,{size:14})]})]}),s.jsxs("div",{className:"relative group/sets",children:[s.jsx("button",{onClick:()=>Z(N,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/sets:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Io,{size:20})}),s.jsx("button",{onClick:()=>Z(N,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/sets:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(qr,{size:20})}),s.jsx("div",{ref:N,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:A.map(ee=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(pr,{product:ee})},ee.id))})]})]})]})},ER={"Choker – 35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar – 40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess – 45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee – 50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long – 60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},ja=[{size:5,mm:49.3},{size:6,mm:51.9},{size:7,mm:54.4},{size:8,mm:57},{size:9,mm:59.5},{size:10,mm:62.1},{size:11,mm:64.6},{size:12,mm:67.2},{size:13,mm:69.7}],CR=()=>{const{id:n}=um(),{products:e,addToCart:t,toggleWishlist:r,user:i,shareProduct:l,cart:c}=Dt(),d=fs(),[p,f]=I.useState(0),[y,b]=I.useState(!1),[N,E]=I.useState(!1),[j,k]=I.useState(!1),[P,$]=I.useState(!1),[q,J]=I.useState(1),[se,he]=I.useState(""),[K,F]=I.useState("Ring Finger"),[A,L]=I.useState(null),[V,T]=I.useState(""),[O,D]=I.useState(null),[ve,Ue]=I.useState(""),[ke,je]=I.useState(""),z=e.find(me=>me.id===n),we=z?e.filter(me=>me.category===z.category&&me.id!==z.id).slice(0,4):[];I.useEffect(()=>{window.scrollTo(0,0),k(!1)},[n]),I.useEffect(()=>{if(z){if(z.type==="Ring"&&z.ringStock){const me=Object.entries(z.ringStock).filter(([Ge,jt])=>jt>0).map(([Ge])=>Ge);me.length>0&&T(me[0])}(z.type==="Stud"||z.type==="Dangle")&&z.showEarringOptions&&z.earringMaterials&&z.earringMaterials.length>0&&D(z.earringMaterials[0]),z.type==="Pendant"&&z.chainStyles&&z.chainStyles.length>0&&(z.chainStyles.includes("Metal Chain")?Ue("Metal Chain"):Ue(z.chainStyles[0]))}},[z]),I.useEffect(()=>{if(ve==="Leather Cord")je("45cm");else if(ve==="Metal Chain"&&(z!=null&&z.pendantChainLengths)){const me=Object.keys(z.pendantChainLengths).find(Ge=>z.pendantChainLengths[Ge]);me&&je(me)}},[ve,z]);const W=I.useMemo(()=>{var me;return((me=c.find(Ge=>Ge.id===(z==null?void 0:z.id)&&Ge.selectedSize===V&&Ge.selectedMaterial===(O==null?void 0:O.name)&&Ge.selectedChainStyle===ve&&Ge.selectedChainLength===ke))==null?void 0:me.quantity)||0},[c,z==null?void 0:z.id,V,O,ve,ke]),{availableStock:B,isOutOfStock:Z,isStockLimitInCart:ee,buttonText:de}=I.useMemo(()=>{var Pn;if(!z)return{availableStock:0,isOutOfStock:!0,isStockLimitInCart:!0,buttonText:"Product not found"};let me=z.stock,Ge=me<=0,jt="Add to Cart";z.type==="Ring"&&(V?(me=((Pn=z.ringStock)==null?void 0:Pn[V])||0,me<=0&&(Ge=!0,jt="Out of Stock")):(Ge=!0,jt="Select a Size")),z.isSoldOut&&(Ge=!0);const pn=me>0&&W>=me;return!Ge&&pn&&(jt="Stock limit in cart"),{availableStock:me,isOutOfStock:Ge,isStockLimitInCart:pn,buttonText:jt}},[z,V,W]);if(!z)return s.jsx("div",{className:"text-center py-20 text-gray-400",children:"Product not found"});const Ie=i.wishlist.includes(z.id),H=new Date,fe=z.promoStartsAt?new Date(z.promoStartsAt):null,Ze=z.promoExpiresAt?new Date(z.promoExpiresAt):null,Ye=fe&&!isNaN(fe.getTime()),et=Ze&&!isNaN(Ze.getTime()),Tt=(z.promoPrice||0)>0&&(!Ye||fe<=H)&&(!et||Ze>H),Ct=parseFloat((z.price*.8).toFixed(2));let ct=z.price,Te="none";i.isMember?(ct=Ct,Tt&&(i.membershipTier==="deluxe"&&z.promoDeluxeMemberPrice&&z.promoDeluxeMemberPrice>0?(ct=z.promoDeluxeMemberPrice,Te="deluxe"):i.membershipTier==="premium"&&z.promoPremiumMemberPrice&&z.promoPremiumMemberPrice>0?(ct=z.promoPremiumMemberPrice,Te="premium"):i.membershipTier==="basic"&&z.promoBasicMemberPrice&&z.promoBasicMemberPrice>0?(ct=z.promoBasicMemberPrice,Te="basic"):(z.promoPrice||1/0)<Ct&&(ct=z.promoPrice))):Tt&&(ct=z.promoPrice);const ut=Tt&&z.promoBasicMemberPrice&&z.promoBasicMemberPrice>0?z.promoBasicMemberPrice:Ct;let Lt=ct;O&&(Lt+=O.modifier);const Vt=z.price+((O==null?void 0:O.modifier)||0),_n=Vt-ut,qt=Math.round(_n/Vt*100),Ce=Tt&&(z.promoBasicMemberPrice&&z.promoBasicMemberPrice>0||z.promoDeluxeMemberPrice&&z.promoDeluxeMemberPrice>0),Jt=me=>Math.round((Vt-me)/Vt*100),On=z.reviews&&z.reviews.length>0,rr=On?(z.reviews.reduce((me,Ge)=>me+Ge.rating,0)/z.reviews.length).toFixed(1):"4.9",xr=On?z.reviews.length:128,Nn=z.giftProductId?e.find(me=>me.id===z.giftProductId):null,Pt=()=>{Z||ee||(t({...z,price:ct},{selectedSize:V,selectedMaterial:O==null?void 0:O.name,selectedMaterialModifier:O==null?void 0:O.modifier,selectedChainStyle:ve,selectedChainLength:ke}),Nn&&t(Nn,{}))},Ot=()=>{const me=parseFloat(se);if(!me||isNaN(me))return;let Ge=ja[0],jt=Math.abs(me-Ge.mm);for(let pn=1;pn<ja.length;pn++){const Pn=Math.abs(me-ja[pn].mm);Pn<jt&&(jt=Pn,Ge=ja[pn])}me>ja[ja.length-1].mm+1.5?L(13):L(Ge.size),J(4)},fn=()=>{$(!1),J(1),he(""),L(null)},sr=async me=>{const Ge=window.location.href,jt="Look at this I just bought or saw this isn't it beautiful!",pn=`${jt} ${Ge}`;if(i.id&&!j?(l(z.id),k(!0),alert("You earned 50 Loyalty Points for sharing!")):i.id,me==="native"&&navigator.share)try{await navigator.share({title:z.name,text:jt,url:Ge})}catch{console.log("Native share cancelled")}else me==="whatsapp"?window.open(`https://wa.me/?text=${encodeURIComponent(pn)}`,"_blank"):me==="facebook"&&window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(Ge)}&quote=${encodeURIComponent(jt)}`,"_blank")},Yn=VN(z.images[p]||z.images[0]||"","https://via.placeholder.com/800x800");return s.jsxs("div",{className:"space-y-16 pt-4 pb-16 relative",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-4",children:[s.jsx(Me,{to:"/",className:"hover:text-white",children:"Home"}),s.jsx("span",{children:"/"}),s.jsx(Me,{to:`/collections/${encodeURIComponent(z.category)}`,className:"hover:text-white",children:z.category}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-gray-300 truncate max-w-[200px]",children:z.name})]}),N&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>E(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-400",children:[s.jsx(mp,{size:32}),s.jsx("h3",{className:"text-xl font-bold text-white",children:"Verified Purchases Only"})]}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:"To maintain the integrity of our reviews, we only accept feedback from verified customers who have purchased this specific item."}),s.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800 mb-6",children:[s.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"How it works:"}),s.jsxs("ul",{className:"text-xs text-gray-400 space-y-3",children:[s.jsxs("li",{className:"flex gap-2 items-start",children:[s.jsx(pi,{size:14,className:"text-cyan-400 shrink-0 mt-0.5"})," ",s.jsxs("span",{children:["A secure review link will be sent to you ",s.jsx("strong",{children:"25 days after purchase"}),"."]})]}),s.jsxs("li",{className:"flex gap-2 items-start",children:[s.jsx(ci,{size:14,className:"text-yellow-400 shrink-0 mt-0.5"})," ",s.jsxs("span",{children:["Review honestly and earn ",s.jsx("strong",{children:"100 Loyalty Points"}),"!"]})]}),s.jsxs("li",{className:"flex gap-2 items-start",children:[s.jsx(Xt,{size:14,className:"text-pink-500 shrink-0 mt-0.5"})," ",s.jsx("span",{children:"Use points (1000 pts = R10) for discounts on your next order."})]})]})]}),s.jsx("button",{onClick:()=>E(!1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-xl font-semibold transition-colors",children:"Understood"})]})]}),P&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:fn}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(wv,{className:"text-pink-500",size:20})," Find Your Ring Size"]}),s.jsx("button",{onClick:fn,className:"text-gray-500 hover:text-white",children:s.jsx(gp,{size:16})})]}),s.jsxs("div",{className:"min-h-[250px] flex flex-col",children:[q===1&&s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"bg-pink-900/20 p-4 rounded-xl border border-pink-500/20 text-center",children:[s.jsx("span",{className:"text-3xl block mb-2",children:"🧵"}),s.jsx("p",{className:"text-sm text-pink-200 font-semibold",children:"Step 1"})]}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Take a flexible measuring tape or a piece of string and wrap it around the base of the finger you want to wear the ring on."}),s.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/20 rounded-lg",children:[s.jsxs("p",{className:"text-xs text-yellow-400 font-bold flex items-center gap-2",children:[s.jsx(gp,{size:14})," Important:"]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Please read your measurement in Millimeters (MM), not CM."})]})]}),q===2&&s.jsxs("div",{className:"flex-1 space-y-6 text-center flex flex-col justify-center",children:[s.jsx("p",{className:"text-white font-semibold",children:"Did you measure your finger with a tape or string?"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:()=>J(3),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-xl font-bold transition-all",children:"Yes, I measured my finger"}),s.jsx("button",{onClick:()=>J(1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-gray-300 rounded-xl font-medium transition-all",children:"Back to Instructions"})]})]}),q===3&&s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Which finger?"}),s.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-sm",value:K,onChange:me=>F(me.target.value),children:[s.jsx("option",{children:"Thumb"}),s.jsx("option",{children:"Index Finger"}),s.jsx("option",{children:"Middle Finger"}),s.jsx("option",{children:"Ring Finger"}),s.jsx("option",{children:"Pinky Finger"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Measured Length (MM)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",placeholder:"e.g. 54.5",className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-lg font-bold focus:border-pink-500 focus:outline-none",value:se,onChange:me=>he(me.target.value)}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-bold",children:"mm"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please enter the exact circumference."})]})]}),q===4&&s.jsxs("div",{className:"flex-1 text-center flex flex-col justify-center space-y-6",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Based on your ",K," measurement:"]}),s.jsxs("div",{className:"inline-block p-6 bg-zinc-800 rounded-full border-4 border-pink-500 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[s.jsx("span",{className:"block text-xs text-gray-400 uppercase tracking-wide",children:"US Size"}),s.jsx("span",{className:"text-4xl font-black text-white",children:A})]})]}),z.ringStock&&z.ringStock[(A==null?void 0:A.toString())||""]>0?s.jsxs("button",{onClick:()=>{T((A==null?void 0:A.toString())||""),fn()},className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2",children:[s.jsx(gt,{size:18})," Select Size ",A]}):s.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/20 rounded-lg text-red-300 text-sm",children:["Sorry, Size ",A," is currently out of stock."]})]})]}),s.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-800",children:[q>1&&q<4?s.jsxs("button",{onClick:()=>J(me=>me-1),className:"text-gray-400 hover:text-white text-sm flex items-center gap-1",children:[s.jsx(mc,{size:14})," Back"]}):s.jsx("div",{}),q===1&&s.jsxs("button",{onClick:()=>J(2),className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500",children:["Next Step ",s.jsx(Mt,{size:14,className:"inline"})]}),q===3&&s.jsx("button",{onClick:Ot,disabled:!se,className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Get My Size"}),q===4&&s.jsx("button",{onClick:fn,className:"text-gray-400 hover:text-white text-sm",children:"Close"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-zinc-900 shadow-lg border border-gray-800 relative group",children:[s.jsx(Bd,{src:Yn,alt:z.name,className:"w-full h-full object-cover opacity-95",onError:me=>{console.warn("Image failed to load in ProductDetail primary:",me.currentTarget.src),me.currentTarget.src="https://via.placeholder.com/800x800"}}),s.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[z.isNewArrival&&s.jsx("span",{className:"bg-cyan-600/90 text-white text-xs font-bold px-3 py-1 rounded-full w-fit",children:"NEW"}),i.isMember&&s.jsxs("span",{className:"bg-purple-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-purple-400 flex items-center gap-1 w-fit",children:[s.jsx(Pr,{size:12,fill:"currentColor"}),Te!=="none"?`${Te.toUpperCase()} PRICE`:"MEMBER DEAL"]})]}),Tt&&!i.isMember&&s.jsx("span",{className:"absolute top-4 right-4 bg-green-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.5)]",children:"PROMO"})]}),s.jsx("div",{className:"grid grid-cols-4 gap-4",children:z.images.map((me,Ge)=>s.jsx("button",{onClick:()=>f(Ge),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${p===Ge?"border-pink-500 opacity-100 shadow-[0_0_10px_rgba(236,72,153,0.4)]":"border-gray-800 opacity-60 hover:opacity-100"}`,children:s.jsx(Bd,{src:me,alt:`View ${Ge}`,className:"w-full h-full object-cover",onError:jt=>{console.warn("Image failed to load in ProductDetail thumb:",jt.currentTarget.src),jt.currentTarget.src="https://via.placeholder.com/320x320"}})},Ge))})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[s.jsx("span",{className:"uppercase tracking-wider font-semibold text-cyan-400",children:z.category}),s.jsx("span",{children:"•"}),s.jsxs("div",{className:"flex items-center text-yellow-400 gap-1",children:[s.jsx(ci,{size:14,fill:"currentColor"})," ",rr," (",xr," reviews)"]})]}),s.jsx("h1",{className:"text-[26px] font-bold text-white mb-4",children:z.name}),s.jsxs("div",{className:"flex flex-col gap-1",children:[z.compareAtPrice&&z.compareAtPrice>Lt&&s.jsxs("div",{className:"flex items-center gap-2 relative",children:[s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["RRP R",z.compareAtPrice.toFixed(2)]}),s.jsx("button",{onClick:()=>b(!y),className:"text-gray-500 hover:text-cyan-400",children:s.jsx(vh,{size:14})}),y&&s.jsx("div",{className:"absolute top-6 left-0 z-10 bg-zinc-950 border border-gray-700 p-3 rounded-lg shadow-xl w-64 text-xs text-gray-300 leading-relaxed",children:"Recommended retail price (RRP) set by the manufacturer and used for price comparison purposes."})]}),s.jsxs("div",{className:"flex items-baseline gap-3",children:[s.jsxs("span",{className:`text-[32px] font-bold drop-shadow-sm ${i.isMember?"text-purple-400":"text-green-400"}`,children:["R",Lt.toFixed(2)]}),Vt>Lt+.01&&s.jsxs("span",{className:"text-lg text-gray-600 line-through",children:["R",Vt.toFixed(2)]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[Tt&&s.jsxs("div",{className:"flex items-center gap-2 text-xs bg-green-900/30 border border-green-500/30 text-green-400 px-2 py-1 rounded w-fit",children:[s.jsx(pi,{size:12})," Ends: ",new Date(z.promoExpiresAt).toLocaleDateString()]}),i.isMember&&s.jsxs("div",{className:"flex items-center gap-2 text-xs bg-purple-900/30 border border-purple-500/30 text-purple-400 px-2 py-1 rounded w-fit font-bold",children:[s.jsx(Pr,{size:12})," ",Te!=="none"?Te:"Member"," Pricing Applied"]})]}),s.jsx("div",{className:"mt-3 flex items-center gap-2 text-sm",children:Z?s.jsx("span",{className:"bg-red-600 text-white font-black px-3 py-1 rounded-lg shadow-[0_0_10px_rgba(220,38,38,0.8)] border-2 border-red-400 animate-pulse",children:"Just SOLD"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${B>0?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.8)]":"bg-red-500"}`}),s.jsx("span",{className:`${B>0?B<=5?"text-orange-400":"text-green-400":"text-red-400"} font-bold`,children:B>0?B<=5?`Only ${B} left!`:"In Stock":"Out of Stock"})]})})]})]}),!i.isMember&&s.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-900/50 rounded-xl p-5 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:s.jsx(Pr,{size:80,className:"text-purple-500 transform rotate-12"})}),s.jsxs("h3",{className:"text-purple-400 font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2",children:[s.jsx(Pr,{size:16,fill:"currentColor"})," Unlock Membership Savings"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-zinc-800/50 border border-zinc-700/50",children:[s.jsx("span",{className:"text-gray-400",children:"Retail Price"}),s.jsxs("span",{className:"text-gray-300 font-medium",children:["R",Vt.toFixed(2)]})]}),Ce?s.jsxs("div",{className:"space-y-2",children:[z.promoBasicMemberPrice&&z.promoBasicMemberPrice>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Basic Member"}),s.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[Jt(z.promoBasicMemberPrice),"% Off"]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:["R",z.promoBasicMemberPrice.toFixed(0)]})})]}),z.promoPremiumMemberPrice&&z.promoPremiumMemberPrice>0&&z.promoPremiumMemberPrice!==z.promoBasicMemberPrice&&s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Premium Member"}),s.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[Jt(z.promoPremiumMemberPrice),"% Off"]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:["R",z.promoPremiumMemberPrice.toFixed(0)]})})]}),z.promoDeluxeMemberPrice&&z.promoDeluxeMemberPrice>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-lime-900/20 border border-lime-500/40",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-lime-200 font-bold text-xs",children:"Deluxe Member"}),s.jsxs("span",{className:"text-xs text-lime-300 uppercase font-bold",children:[Jt(z.promoDeluxeMemberPrice),"% Off"]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"block text-lime-400 font-bold text-lg",children:["R",z.promoDeluxeMemberPrice.toFixed(0)]})})]})]}):s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[s.jsx("span",{className:"text-purple-200 font-bold",children:"Member Price"}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:["R",ut.toFixed(2)]}),s.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:["Save ",qt,"%"]})]})]})]}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx("button",{onClick:()=>d("/membership"),className:"w-full py-3 text-sm font-bold uppercase tracking-widest text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded hover:shadow-[0_0_15px_rgba(168,85,247,0.4)] transition-all",children:"Join Now"}),s.jsx("p",{className:"text-[10px] text-red-400 font-bold mt-2 uppercase tracking-wide animate-pulse",children:"LIMITED places Available"})]})]}),s.jsxs("div",{className:"space-y-6 mt-6 border-t border-gray-800 pt-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-cherry text-2xl text-pink-500 mb-2 tracking-wide",children:"Description"}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:z.description})]}),z.whenAndHowToWear&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-cherry text-2xl text-cyan-400 mb-2 tracking-wide",children:"Stylish Suggestions"}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:z.whenAndHowToWear})]}),z.material&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-cherry text-2xl text-purple-400 mb-2 tracking-wide",children:"Materials"}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:z.material})]}),z.isUniquePendant&&s.jsxs("div",{className:"bg-orange-900/10 border border-orange-500/20 rounded-xl p-5 mt-4",children:[s.jsxs("h3",{className:"font-cherry text-xl text-orange-400 mb-3 tracking-wide flex items-center gap-2",children:[s.jsx(gp,{size:20})," Oxidized Jewelry Care"]}),s.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"This unique pendant features a deliberate oxidized finish (darkened patina) to enhance the vintage detail."}),s.jsxs("ul",{className:"text-xs text-gray-400 space-y-2 list-disc pl-4",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Do NOT use liquid silver cleaner or dips:"})," These will strip the antique finish instantly."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Avoid polishing cloths:"})," Aggressive rubbing can remove the darkened details."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Keep it dry:"})," Remove before swimming or showering to preserve the wire wrapping."]}),s.jsx("li",{children:"To clean, simply wipe gently with a soft, dry cotton cloth."})]})]})]}),Nn&&s.jsxs("div",{className:"bg-gradient-to-r from-purple-900/40 to-pink-900/40 border border-purple-500/30 rounded-xl p-4 flex items-center gap-4 shadow-[0_0_15px_rgba(168,85,247,0.1)]",children:[s.jsx("div",{className:"p-3 bg-black/50 rounded-full text-pink-400 border border-pink-500/30",children:s.jsx(Xt,{size:24})}),s.jsxs("div",{children:[s.jsx("span",{className:"block text-xs font-bold text-pink-400 uppercase tracking-wider mb-1",children:"Free Gift Included"}),s.jsx("h4",{className:"font-bold text-white",children:Nn.name}),s.jsxs("p",{className:"text-xs text-gray-400",children:["Value: R",z.giftValue||Nn.price]})]}),s.jsx("div",{className:"ml-auto",children:s.jsx("img",{src:Nn.images[0],alt:"Gift",className:"w-12 h-12 rounded object-cover border border-gray-700"})})]}),s.jsxs("div",{className:"space-y-6 py-4 border-t border-gray-800",children:[z.type==="Ring"&&z.ringStock&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Size"}),s.jsxs("button",{onClick:()=>{$(!0),J(1)},className:"text-xs text-pink-400 hover:text-pink-300 flex items-center gap-1 underline decoration-dotted underline-offset-4",children:[s.jsx(wv,{size:14})," Find My Ring Size"]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(z.ringStock).map(([me,Ge])=>s.jsx("button",{disabled:Ge===0,onClick:()=>T(me),className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium border transition-all ${V===me?"bg-pink-600 border-pink-600 text-white shadow-[0_0_10px_rgba(236,72,153,0.5)]":Ge===0?"bg-zinc-900 border-gray-800 text-gray-600 cursor-not-allowed decoration-slice line-through":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:me},me))}),V&&z.ringStock[V]>0&&s.jsxs("p",{className:`text-xs mt-2 flex items-center gap-1 ${z.ringStock[V]<=5?"text-orange-400 font-bold":"text-green-400"}`,children:[s.jsx(gt,{size:12}),z.ringStock[V]<=5?`Only ${z.ringStock[V]} left in stock!`:"In Stock"]}),V&&z.ringStock[V]===0&&s.jsx("p",{className:"text-xs text-red-500 mt-2 font-bold",children:"Out of stock for this size."})]}),(z.type==="Stud"||z.type==="Dangle")&&z.showEarringOptions&&z.earringMaterials&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Material"}),s.jsx("div",{className:"grid gap-3",children:z.earringMaterials.map(me=>s.jsxs("div",{onClick:()=>D(me),className:`relative p-4 rounded-xl border cursor-pointer transition-all ${(O==null?void 0:O.name)===me.name?"bg-pink-900/10 border-pink-500 shadow-[0_0_10px_rgba(236,72,153,0.2)]":"bg-zinc-900 border-gray-800 hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:`font-medium text-sm ${(O==null?void 0:O.name)===me.name?"text-white":"text-gray-300"}`,children:me.name}),s.jsx("span",{className:"text-xs font-bold text-pink-400",children:me.modifier>0?`+R${me.modifier}`:""})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:me.description}),(O==null?void 0:O.name)===me.name&&s.jsx("div",{className:"absolute top-3 right-3 w-4 h-4 bg-pink-500 rounded-full flex items-center justify-center",children:s.jsx(gt,{size:10,className:"text-white"})})]},me.name))})]}),z.type==="Pendant"&&z.chainStyles&&z.chainStyles.length>0&&s.jsxs("div",{className:"space-y-6",children:[z.chainStyles.length>1&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Chain Style"}),s.jsx("div",{className:"flex gap-4",children:z.chainStyles.map(me=>s.jsx("button",{onClick:()=>Ue(me),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${ve===me?"bg-pink-600 border-pink-600 text-white":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:me},me))})]}),ve==="Metal Chain"&&z.pendantChainLengths&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Length"}),s.jsx("div",{className:"grid gap-2",children:Object.keys(z.pendantChainLengths).filter(me=>z.pendantChainLengths[me]).map(me=>s.jsxs("button",{onClick:()=>je(me),className:`text-left p-3 rounded-lg border transition-all ${ke===me?"bg-cyan-900/20 border-cyan-500":"bg-zinc-900 border-gray-800 hover:bg-zinc-800"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:`text-sm font-medium ${ke===me?"text-cyan-400":"text-gray-200"}`,children:me}),ke===me&&s.jsx(gt,{size:14,className:"text-cyan-400"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:ER[me]||""})]},me))})]}),ve==="Leather Cord"&&s.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg border border-gray-700 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-gray-700 rounded-full",children:s.jsx(gt,{size:14,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-white",children:"Fixed Length: 45cm"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Standard leather cord length."})]})]})]})]}),s.jsxs("div",{className:"flex gap-4 pt-4",children:[s.jsxs("button",{onClick:Pt,disabled:Z||ee,className:"flex-1 bg-pink-600 text-white py-4 rounded-xl font-semibold hover:bg-pink-500 transition-all flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(236,72,153,0.4)] text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(no,{size:20})," ",de]}),s.jsx("button",{onClick:()=>r(z.id),className:`p-4 rounded-xl border transition-colors ${Ie?"border-pink-500 bg-pink-500/10 text-pink-500":"border-gray-700 hover:bg-zinc-800 text-gray-400 hover:text-white"}`,children:s.jsx(pg,{size:24,fill:Ie?"currentColor":"none"})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 to-purple-900/20 border border-cyan-500/30 rounded-xl p-5 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 pointer-events-none",children:s.jsx(Ho,{size:60})}),s.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-2",children:[s.jsx(Xt,{size:18,className:"text-pink-500"})," Share & Earn"]}),s.jsxs("p",{className:"text-xs text-gray-300 mb-4 max-w-sm",children:["Share this treasure with friends and earn ",s.jsx("strong",{className:"text-green-400",children:"50 Loyalty Points"})," instantly!"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>sr("whatsapp"),className:"flex-1 py-2 bg-[#25D366] hover:bg-[#1ebc57] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(37,211,102,0.4)]",children:[s.jsx(vc,{size:16})," WhatsApp"]}),s.jsxs("button",{onClick:()=>sr("facebook"),className:"flex-1 py-2 bg-[#1877F2] hover:bg-[#166fe5] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(24,119,242,0.4)]",children:[s.jsx(tc,{size:16})," Facebook"]}),navigator.share&&s.jsxs("button",{onClick:()=>sr("native"),className:"flex-1 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all",children:[s.jsx(Ho,{size:16})," More"]})]}),j&&s.jsxs("div",{className:"mt-3 text-xs text-green-400 font-bold flex items-center gap-1 justify-center animate-in fade-in zoom-in",children:[s.jsx(gt,{size:12})," 50 Points Awarded!"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-8 border-t border-gray-800",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(hs,{className:"text-cyan-400 mt-1",size:20}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm text-gray-200",children:"Free Delivery"}),s.jsx("p",{className:"text-xs text-gray-500",children:"On orders over R500 (PUDO/PAXI only)"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Va,{className:"text-cyan-400 mt-1",size:20}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm text-gray-200",children:""}),s.jsx("p",{className:"text-xs text-gray-500",children:""})]})]})]})]})]}),s.jsxs("div",{className:"pt-12 border-t border-gray-800 animate-in fade-in slide-in-from-bottom-10 duration-700",children:[z.isUniquePendant&&s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl mb-8 flex gap-3 items-start",children:[s.jsx(hg,{className:"text-purple-400 shrink-0 mt-1",size:20}),s.jsxs("p",{className:"text-sm text-gray-300",children:[s.jsx("strong",{children:"Please note:"})," As this is a one-of-a-kind treasure, these reviews reflect experiences from customers who have purchased similar unique pendants from our collection."]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"font-cherry text-[26px] font-bold text-white flex items-center gap-3",children:["Customer Reviews",s.jsx("span",{className:"text-sm font-sans font-normal text-gray-500 bg-zinc-900 px-3 py-1 rounded-full",children:xr})]}),s.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[s.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-green-900/20 border border-green-500/30 text-green-400 px-2 py-1 rounded text-xs font-bold w-fit",children:[s.jsx(mp,{size:14,fill:"currentColor",className:"text-green-500"})," Verified Purchases Only"]}),s.jsx("p",{className:"text-xs text-gray-500 max-w-md",children:"To ensure authenticity, only customers who have purchased this item can leave a review."})]})]}),s.jsx("button",{onClick:()=>E(!0),className:"px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg border border-gray-700 hover:border-gray-600 transition-all flex items-center gap-2 text-sm font-semibold shadow-lg",children:"Write a review"})]}),On?s.jsx("div",{className:"space-y-8",children:z.reviews.map(me=>s.jsxs("div",{className:"flex flex-col md:flex-row gap-6 border-b border-gray-800 pb-8 last:border-0",children:[s.jsxs("div",{className:"md:w-48 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-white font-bold text-xs",children:me.userName.charAt(0)}),s.jsx("span",{className:"font-bold text-gray-200 text-sm",children:me.userName})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-10 mb-1",children:[s.jsx(mp,{size:12,className:"text-green-500"}),s.jsx("span",{className:"text--[10px] text-green-500 font-medium",children:"Verified Buyer"})]}),s.jsx("p",{className:"text-xs text-gray-500 ml-10 mb-2",children:me.location}),s.jsxs("div",{className:"flex items-center gap-1 ml-10",children:[s.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map(Ge=>s.jsx(ci,{size:12,fill:Ge<=Math.round(me.rating)?"currentColor":"none",className:Ge<=Math.round(me.rating)?"text-yellow-400":"text-gray-700"},Ge))}),s.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["(",me.rating,")"]})]})]}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl rounded-tl-none border border-gray-800/50",children:[s.jsxs("p",{className:"text-gray-300 text-sm italic mb-3 leading-relaxed",children:['"',me.content,'"']}),s.jsx("p",{className:"text-xs text-gray-500 font-medium text-right",children:me.date})]})})]},me.id))}):s.jsx("div",{className:"bg-zinc-900/30 border border-dashed border-gray-800 rounded-xl p-8 text-center",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"No reviews yet. Be the first to own and review this treasure!"})})]}),we.length>0&&s.jsxs("div",{className:"pt-12 border-t border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white flex items-center gap-2",children:[s.jsx(Ir,{size:20,className:"text-pink-500"})," More from ",z.category]}),s.jsxs(Me,{to:`/collections/${encodeURIComponent(z.category)}`,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View Collection ",s.jsx(Mt,{size:14})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:we.map(me=>s.jsx(pr,{product:me},me.id))})]})]})},nd={IS_SANDBOX:!1,MERCHANT_ID:"113371222",MERCHANT_KEY:"cbhnt80ljkt7g",getProcessUrl:()=>"https://www.payfast.co.za/eng/process",getUrls:()=>{const n=window.location.origin;return{return_url:`${n}/#/profile`,cancel_url:`${n}/#/cart`,notify_url:`${n}/api/notify`}}},vg=I.forwardRef(({amount:n,itemName:e,email:t,returnUrl:r,cancelUrl:i,notifyUrl:l,customStr1:c,customStr2:d,customStr3:p,customInt1:f,isSubscription:y=!1,frequency:b=3,cycles:N=0},E)=>{const j=I.useRef(null);I.useImperativeHandle(E,()=>({submit:()=>{j.current&&j.current.submit()}}));const k=nd.getUrls(),P=nd.MERCHANT_ID,$=nd.MERCHANT_KEY,q=new Date;q.setDate(q.getDate()+1);const J=q.toISOString().split("T")[0];return s.jsxs("form",{ref:j,action:nd.getProcessUrl(),method:"POST",className:"hidden",children:[s.jsx("input",{type:"hidden",name:"merchant_id",value:P}),s.jsx("input",{type:"hidden",name:"merchant_key",value:$}),s.jsx("input",{type:"hidden",name:"return_url",value:r||k.return_url}),s.jsx("input",{type:"hidden",name:"cancel_url",value:i||k.cancel_url}),s.jsx("input",{type:"hidden",name:"notify_url",value:l||k.notify_url}),s.jsx("input",{type:"hidden",name:"amount",value:n.toFixed(2)}),s.jsx("input",{type:"hidden",name:"item_name",value:e}),s.jsx("input",{type:"hidden",name:"email_address",value:t||""}),c&&s.jsx("input",{type:"hidden",name:"custom_str1",value:c}),d&&s.jsx("input",{type:"hidden",name:"custom_str2",value:d}),p&&s.jsx("input",{type:"hidden",name:"custom_str3",value:p}),f&&s.jsx("input",{type:"hidden",name:"custom_int1",value:f}),y&&s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"hidden",name:"subscription_type",value:"1"}),s.jsx("input",{type:"hidden",name:"billing_date",value:J}),s.jsx("input",{type:"hidden",name:"recurring_amount",value:n.toFixed(2)}),s.jsx("input",{type:"hidden",name:"frequency",value:b}),s.jsx("input",{type:"hidden",name:"cycles",value:N})]})]})}),Iv={"Eastern Cape":{"Gqeberha (Port Elizabeth)":["PEP Pier 14 (Ground Floor, 444 Govan Mbeki Ave)","PEP Home Walmer Park (Shop 87A, Walmer Park Shopping Centre)","PEP Greenacres","PEP Newton Park","PEP Summerstrand"],"East London":["PEP EL CBD (32 Oxford St)","PEP Hemingways Mall (Shop UG54, Hemingways Mall)","PEP Vincent Park","PEP Beacon Bay","PEP Gonubie"],Mthatha:["PEP Mthatha BT Ngebs City (Shop 89, BT Ngebs City)","PEP Mthatha Circus Triangle (Shop 7, Circus Triangle)","PEP Mthatha Plaza"],"Makhanda (Grahamstown)":["PEP Grahamstown High Street (48 High St)","PEP Market Square"],"Queenstown (Komani)":["PEP Queenstown Lukhanji Mall (Shop 45, Lukhanji Mall)"],Uitenhage:["PEP Uitenhage Mall","PEP Corkwood Square"],"Jeffreys Bay":["PEP Fountains Mall","PEP Jeffrey's Bay CBD"],"King William's Town":["PEP King William's Town CBD","PEP Metlife Mall"]},"Free State":{Bloemfontein:["PEP BFN St Andrew St (45 St Andrew St)","PEP Home Mimosa Mall (Mimosa Mall, 131 Kellner St)","PEP Loch Logan","PEP Fleurdal","PEP Northridge Mall"],Welkom:["PEP Welkom Bok Street (Shop 22A, Bok Street)","PEP Welkom Goldfields Mall (Shop U5, Goldfields Mall)","PEP Boitumelo Junction"],Bethlehem:["PEP Bethlehem Dihlabeng Mall (Shop 52, Dihlabeng Mall)","PEP Bethlehem CBD"],Sasolburg:["PEP Sasolburg (Shop 9 Sake Complex, Wandellaan Street)","PEP Sasolburg Mall"],Parys:["PEP Parys (Cnr Kort Street & Middle Street)"],Kroonstad:["PEP Kroonstad Reitz Street (21 Reitz St)","PEP Maokeng Mall"]},Gauteng:{Johannesburg:["PEP JHB Carlton Centre (C/O Commissioner St & Kruis Sts)","PEP Home Jabulani Mall (Shop 84, Jabulani Mall, Soweto)","PEP Sandton City (Shop U12, Sandton City, Rivonia Rd)","PEP Jozi CBD","PEP Braamfontein","PEP Rosebank Mall","PEP Mellville","PEP Cresta","PEP Clearwater Mall"],Pretoria:["PEP PTA Central (Cnr Paul Kruger & Pretorius St)","PEP Home Menlyn Park (Menlyn Park, Garsfontein Road)","PEP Centurion Mall (Shop 15, Centurion Mall, Heuwel Ave)","PEP Sunnyside","PEP Brooklyn","PEP Kolonnade","PEP Wonderpark"],Soweto:["PEP Maponya Mall","PEP Jabulani Mall","PEP Bara Mall","PEP Dobsonville"],Centurion:["PEP Centurion Mall","PEP Lyttelton","PEP Mall @ Reds","PEP Forest Hill"],Midrand:["PEP Mall of Africa","PEP Boulders","PEP Midrand CBD"],Benoni:["PEP Benoni Lakeside Mall (Shop L20, Lakeside Mall, Tom Jones St)","PEP Northmead Square"],Boksburg:["PEP East Rand Mall","PEP Sunward Park"],Krugersdorp:["PEP Krugersdorp Cnr Ockerse (Cnr Ockerse & Human Street)","PEP Krugersdorp Westgate (Shop 30, Westgate Shopping Centre)"],Alberton:["PEP Alberton City (SHOP L106, Alberton City, Voortrekker Street)"],Vereeniging:["PEP Vereeniging Arcon Park (Arcon Park Shopping Centre)","PEP Vereeniging CBD (12 Joubert Street)"]},"KwaZulu-Natal":{Durban:["PEP Durban Dr Pixley Kaseme St (442 Dr Pixley Kaseme Street)","PEP Bluff Towers (Shop 94 Bluff Twrs, 15 Tara Rd)","PEP Home Pavilion (Shop L94, The Pavilion Shopping Centre)","PEP Durban Workshop","PEP Musgrave","PEP Berea","PEP South Beach","PEP Ushaka"],Umhlanga:["PEP Gateway","PEP Crescent","PEP Cornubia"],Pietermaritzburg:["PEP PMB Liberty Mall (Shop 15, Liberty Midlands Mall)","PEP PMB CBD (335 Church Street)","PEP Greater Edendale"],"Richards Bay":["PEP Cell Richards Bay Boardwalk (Shop U004, Boardwalk Inkwazi)","PEP Richards Bay Checkers (Shop 17A, Checkers Centre)"],Ballito:["PEP Ballito Junction","PEP Lifestyle Centre"],Newcastle:["PEP Newcastle Mall","PEP Amajuba Mall"],"Port Shepstone":["PEP Port Shepstone (Cnr Escombe & Wooley St)","PEP South Coast Mall"],Ladysmith:["PEP Ladysmith Murchison Mall (Shop LG11, Murchison Mall)"],Kokstad:["PEP Kokstad Main Street (Shop 1 Spargs Building, 40 Main Street)"]},Limpopo:{Hoedspruit:["PEP Hoedspruit (Wildlife Shop 12)","PEP Hoedspruit Centre"],Ohrigstad:["PEP Ohrigstad (Potgieter St)"],Metz:["PEP Metz Mahlakung Shopping Centre (Shop 7)","PEP Cell Metz (Shop 11)"],Phalaborwa:["PEP Home Ba-phalaborwa Eden Square (Shop 13)","PEP Phalaborwa Shoprite Centre (Shop 8)","PEP Phalaborwa Mall (Shop 5)","PEP Cell Ba-phalaborwa (Shop 7C)","PEP Ba-phalaborwa Checkers (Shop 9)","PEP Phalaborwa Standard Bank Centre (Shop B1)","PEP Ba-phalaborwa Namakwale Crossing (Shop 7)","PEP Cell Phalaborwa Namakgale Crossing (Shop 26)","PEP Lulekani Spar Centre (Shop A3)"],Burgersfort:["PEP Home Burgersfort Tubatse (Shop L50)","PEP Cell Burgersfort Morone Centre (Shop 23A)","PEP Burgersfort Morone Shopping Centre (Shop 5 & 6)","PEP Burgersfort Twin City Mall (Shop 17)","PEP Cell Burgersfort Twin City (Shop 5)","PEP Cell Burgersfort Twin City Shop 41","PEP Burgersfort Platinum Place (Shop 1-3)","PEP Cell Burgersfort Castle Square (Shop 10)","PEP Burgersfort Castle Square (Shop 8)","PEP Burgersfort Burgersfort Mall (Shop 18)","PEP Cell Burgersfort Mall (Shop 28)","PEP Burgersfort Tubatse Mall (Shop L87)","PEP Cell Burgersfort Tubatse Crossing (Shop L57)"],Steelpoort:["PEP Home Steelpoort (Steelpoort Centre)","PEP Steelpoort (Shop 5)","PEP Cell Steelpoort Shopping Centre (Shop 19)"],Polokwane:["PEP Polokwane CBD (Cnr Grobler & Thabo Mbeki St)","PEP Mall of the North (Shop 10, Mall of the North)","PEP Savanna Mall","PEP Limpopo Mall"],Tzaneen:["PEP Tzaneen Tzaneng Mall (Shop B5, Tzaneng Mall, Danie Joubert St)","PEP Tzaneen CBD","PEP Tzaneen Crossing"],Thohoyandou:["PEP Thohoyandou Venda Plaza (Shop B1, Venda Plaza)","PEP Home Thohoyandou (Next to Shoprite, Thohoyandou)","PEP Thavhani Mall","PEP Mvyu"],Mokopane:["PEP Mokopane Mall","PEP Crossing"],"Makhado (Louis Trichardt)":["PEP Louis Trichardt Burger Str (Cnr Burger St & Songozwi Rd)"]},Mpumalanga:{Acornhoek:["PEP Home Acornhoek Mall (Shop 27)","PEP Acornhoek Plaza Extension (Shop 75)","PEP Cell Acornhoek Plaza (Shop 71)","PEP Cell Acornhoek Mall (Shop 3)","PEP Acornhoek Mall (Shop 10)","PEP Cell Acornhoek Mall (Shop 33B)","PEP Acornhoek Shopping Centre (Station Centre)","PEP Cell Acornhoek Shopping Centre"],Thulamahashe:["PEP Cell Thulamahashe (Thula Mall)","PEP Thulamahashe Thula Mall (Shop 17)","PEP Cell Thulamahashe Plaza (Shop 103)","PEP Thulamahashe (Plaza Shop 7)","PEP Cell Thulamahashe Plaza (Shop 14)"],Dwarsloop:["PEP Home Dwarsloop Mall (Shop 208)","PEP Dwarsloop Mall (Shop 66)","PEP Cell Dwarsloop Mall (Shop 48)"],Bushbuckridge:["PEP Bushbuckridge Twin City Mall (Shop 9)","PEP Cell Bushbuckridge Twin City Mall (Shop 2A)","PEP Cell Bushbuckridge Shopping Centre (Shop 1B)","PEP Bushbuckridge Shopping Centre (Shop 6)"],Graskop:["PEP Graskop (Spar Centre)"],Mkhuhlu:["PEP Cell Mkhuhlu (Plaza Shop 12)","PEP Mkhuhlu (Plaza Shop 7)"],Hazyview:["PEP Home Hazyview Junction (Shop 5A)","PEP Home Numbi Gate Dayizenza (Shop 7)","PEP Hazyview Junction (Shop 14B)","PEP Cell Lowveld Mall PNP (Shop 168)","PEP Cell Lowveld Mall Spar (Shop 12)","PEP Hazyview Blue Haze (Shop 304)","PEP Hazyview Lowveld Mall (Shop 232)","PEP Hazyview Lowveld Mall (Shop 155)","PEP Numbigate Dayizenza Plaza (Shop 38A)","PEP Cell Numbigate Dayizenza Plaza (Shop 12)"],Sabie:["PEP Sabie (Shopping Centre)"],"White River":["PEP Home White River Square (Shop 20)","PEP White River (Square Shop 17)","PEP Whiteriver Square 1 (Shop 17)","PEP White River Crossing (Shop 15)","PEP White River Kabokweni (Plaza Shop 10)","PEP Cell White River Kabokweni Plaza (Shop 205A)"],"Lydenburg (Mashishing)":["PEP Home Lydenburg Lt Centre (Shop 5)","PEP Lydenburg Highland Centre (Shop 6A)","PEP Lydenburg (Tamarisk Building)","PEP Cell Mashishing Shoprite Centre"],"Mbombela (Nelspruit)":["PEP Home Riverside Mall Nelspruit (Shop G241)","PEP Home Nelspruit Promenade (Shop 41 & 42)","PEP Home Nelspruit Ilanga Mall (Shop LG36)","PEP Home Nelspruit The Square (Shop 7)","PEP Nelspruit The Grove (Shop 18)","PEP Cell Nelspruit Plaza (Shop 28)","PEP Nelspruit Plaza (Shop 17-20)","PEP Cell Nelspruit Ekukhanyeni (Shop 5)","PEP Nelspruit Brown & Henshall Street","PEP Cell Nelspruit Promenade (Shop 49)","PEP Nelspruit Brown Street (Prorom Building)","PEP Nelspruit (Bester Brown Building)","PEP Nelspruit The Square (Shop 10)","PEP Nelspruit CBD","PEP Riverside Mall (Shop U40)"],Kanyamazane:["PEP Kanyamazane (Shopping Centre Shop 11)"],Emoyeni:["PEP Emoyeni Mall (Shop 22)","PEP Cell Emoyeni Mall (Shop 8)"],"eMalahleni (Witbank)":["PEP Witbank Taxi Rank (Shop 1, 3 Escombe St)","PEP Highveld Mall (Shop U03, Highveld Mall)","PEP Witbank CBD","PEP Saveways Crescent"],Middelburg:["PEP Home Middelburg Mall (Shop 97, Middelburg Mall)","PEP Middelburg CBD (28 Cowen Ntuli Street)","PEP Midwater"],Secunda:["PEP Secunda Mall (Shop 160, Secunda Mall)","PEP Secunda CBD"]},"North West":{Rustenburg:["PEP Rustenburg Mall (Shop 73 Rustenburg Mall)","PEP Waterfall Mall (Shop 12, Waterfall Mall)","PEP Rustenburg CBD","PEP Rustenburg Plaza","PEP Platinum Square"],Potchefstroom:["PEP Potch Walter Sisulu Lane (149 Walter Sisulu Lane)","PEP Home Mooirivier Mall (Shop 16, Mooirivier Mall)","PEP Potch CBD"],"Mahikeng (Mafikeng)":["PEP Mafikeng City Mall (Shop G10, Mafikeng City Mall)","PEP Mmabatho Crossing (Shop 25, Mmabatho Crossing)","PEP Mahikeng CBD","PEP Mega City"],Klerksdorp:["PEP Klerksdorp Terminus (Shop 19, The Terminus Centre)","PEP Klerksdorp CBD","PEP Matlosana Mall","PEP City Mall"],Brits:["PEP Brits Town Centre (Shop G2, Brits Town Centre)","PEP Brits Mall"]},"Northern Cape":{Kimberley:["PEP North Cape Mall (Shop 60, North Cape Mall)","PEP Home Diamond Pavilion Mall (Shop 93, Diamond Pavilion Mall)","PEP Kimberley CBD","PEP New Park"],Upington:["PEP Upington Mall (Shop 12, Upington Mall)","PEP Upington CBD (20 Schroder Street)","PEP Kalahari Mall"],Kuruman:["PEP Kuruman Beare Street (Shop 28B, Beare Street)","PEP Kuruman Mall","PEP The Eye"],"De Aar":["PEP De Aar Main Road (35 Main Road, De Aar)"],Springbok:["PEP Springbok (62 Main Street, Springbok)"]},"Western Cape":{"Cape Town":["PEP CPT Station (Cape Town Station Concourse)","PEP Golden Acre (Shop 10, Golden Acre Mall)","PEP Home Parow Centre (Shop G6, Parow Centre, Voortrekker Rd)","PEP Gardens","PEP V&A Waterfront","PEP Canal Walk","PEP Blue Route"],Stellenbosch:["PEP Eikestad Mall (Shop E4, Eikestad Mall, 43 Andringa Rd)","PEP Kayamandi (Shop 11, Kayamandi Shopping Centre)","PEP Stellenbosch Central"],George:["PEP George Garden Route Mall (Shop 2, Garden Route Mall)","PEP George CBD (82 Hibernia Street)","PEP York Street"],Paarl:["PEP Paarl Mall (Shop 12, Paarl Mall, Cnr Newvlei & Jones St)","PEP Lady Grey","PEP Rembrandt Mall"],Hermanus:["PEP Hermanus Whale Coast Mall (Shop 15, Whale Coast Mall)"],Knysna:["PEP Knysna Long Street (13 Long Street, Knysna)","PEP Knysna Mall","PEP Woodmill Lane"],"Somerset West":["PEP Somerset Mall","PEP Main Road","PEP Waterstone"],"Mossel Bay":["PEP Mossel Bay Mall","PEP Langeberg Mall"],Worcester:["PEP Mountain Mill","PEP Worcester CBD"]}},kR=[{name:"Extra-Small (XS)",dimensions:"60cm × 17cm × 8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm × 41cm × 8cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm × 41cm × 19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],TR={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:0}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:0}]},PR=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],jR=({cartItemCount:n,onShippingChange:e,subtotal:t})=>{var Ue,ke,je,z,we;const{user:r}=Dt(),[i,l]=I.useState("pudo"),[c,d]=I.useState(""),[p,f]=I.useState(""),[y,b]=I.useState(""),[N,E]=I.useState(""),[j,k]=I.useState(""),[P,$]=I.useState(""),[q,J]=I.useState(""),[se,he]=I.useState("economy"),[K,F]=I.useState({street:((Ue=r.shippingAddress)==null?void 0:Ue.street)||"",suburb:((ke=r.shippingAddress)==null?void 0:ke.suburb)||"",city:((je=r.shippingAddress)==null?void 0:je.city)||"",province:((z=r.shippingAddress)==null?void 0:z.province)||"",postalCode:((we=r.shippingAddress)==null?void 0:we.postalCode)||""}),[A,L]=I.useState(kR),[V,T]=I.useState(TR),[O,D]=I.useState(PR),ve=t>=500;return I.useEffect(()=>{ve&&i==="door"&&l("pudo")},[ve,i]),I.useEffect(()=>{try{const W=localStorage.getItem("spv_pudo_costs");W&&L(JSON.parse(W));const B=localStorage.getItem("spv_paxi_costs");B&&T(JSON.parse(B));const Z=localStorage.getItem("spv_door_to_door_costs");Z&&D(JSON.parse(Z))}catch(W){console.error("Failed to load shipping costs from storage",W)}},[]),I.useEffect(()=>{let W=0,B="";if(i==="pudo"){const Z=n<=20?"Extra-Small (XS)":"Small (S)",ee=A.find(Ie=>Ie.name===Z);let de="locker";ee?ee.lockerToLockerCost!==null?W=ee.boxCost+ee.lockerToLockerCost+ee.lockerHandleFee:ee.doorToLockerCost!==null?(W=ee.boxCost+ee.doorToLockerCost+ee.doorHandleFee,de="door"):W=ee.boxCost:W=60,j&&P&&q&&(B=`${j} | ${P} | ${q} | ${de}`)}else if(i==="paxi"){let Z="7-9 Days Service";t>1e3&&(Z="3-5 Days Service");const ee=V[Z],de=n<=20?"Small":"Large",Ie=ee.find(fe=>fe.bag.includes(de));Ie?W=(de==="Small"?6:15)+Ie.serviceCost+Ie.handleFee:W=60,c&&p&&y&&N&&(B=`${c} | ${p} | ${y} | ${N} | ${Z}`)}else if(i==="door"){const Z=se==="overnight"?"Overnight":"Economy",ee=O.find(de=>de.service.includes(Z));ee?W=ee.boxFee+ee.initialCharge+(ee.ratePerKg!==null?ee.ratePerKg:0)+ee.handleFee:W=120,K.street&&K.city&&K.postalCode&&(B=JSON.stringify({...K,service:se}))}e({method:i,cost:W,details:B})},[i,n,A,V,O,se,j,P,q,c,p,y,N,K,e]),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[s.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(hs,{size:18,className:"text-cyan-400"})," Shipping Method"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${i==="pudo"?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${i==="pudo"?"border-cyan-500 bg-cyan-500":"border-gray-500"}`,children:i==="pudo"&&s.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),s.jsx("span",{className:"text-sm text-gray-300",children:"PUDO Locker to Locker"})]}),s.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:i==="pudo",onChange:()=>l("pudo")})]}),s.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${i==="paxi"?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${i==="paxi"?"border-yellow-500 bg-yellow-500":"border-gray-500"}`,children:i==="paxi"&&s.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),s.jsx("span",{className:"text-sm text-gray-300",children:"PAXI (PEP Store - 7-9 Days)"})]}),s.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:i==="paxi",onChange:()=>l("paxi")})]}),s.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${i==="door"?"bg-purple-900/20 border-purple-500 cursor-pointer":ve?"bg-zinc-900 border-gray-800 opacity-50 cursor-not-allowed":"bg-black border-gray-700 hover:border-gray-600 cursor-pointer"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${i==="door"?"border-purple-500 bg-purple-500":ve?"border-gray-700":"border-gray-500"}`,children:i==="door"&&s.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),s.jsxs("div",{children:[s.jsx("span",{className:`text-sm ${ve?"text-gray-500":"text-gray-300"}`,children:"PUDO Door to Door"}),ve&&s.jsx("span",{className:"text-xs text-gray-500 block",children:"Not available for free shipping"})]})]}),s.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:i==="door",onChange:()=>l("door"),disabled:ve})]})]}),i==="pudo"&&s.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-cyan-500/20",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("label",{className:"text-[10px] text-cyan-400 uppercase font-bold",children:"Select PUDO Locker Location"}),s.jsxs("a",{href:"https://thecourierguy.co.za/locations/",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[s.jsx(yv,{size:10})," Find PUDO Locker Location Click Here"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:j,onChange:W=>k(W.target.value),children:[s.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(Iv).sort().map(W=>s.jsx("option",{value:W,children:W},W))]}),s.jsx(gv,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),j&&s.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none",placeholder:"e.g. Sandton",value:P,onChange:W=>$(W.target.value)})]}),P&&s.jsx("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Locker Name / Address"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none",placeholder:"e.g. PUDO Locker @ Sandton City",value:q,onChange:W=>J(W.target.value)})]})})]}),i==="paxi"&&s.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-yellow-500/20",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("label",{className:"text-[10px] text-yellow-400 uppercase font-bold",children:"Select PEP Store"}),s.jsxs("a",{href:"https://www.paxi.co.za/paxi-points",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[s.jsx(yv,{size:10})," Find PAXI Point"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:c,onChange:W=>d(W.target.value),children:[s.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(Iv).sort().map(W=>s.jsx("option",{value:W,children:W},W))]}),s.jsx(gv,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),c&&s.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. Acornhoek",value:p,onChange:W=>f(W.target.value)})]}),p&&s.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Store Name (or P-Code)"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. PEP Home Acornhoek Mall",value:y,onChange:W=>b(W.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Store Street Address"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. Shop 27, Acornhoek Mall, R40 Main Rd",value:N,onChange:W=>E(W.target.value)})]})]})]}),i==="door"&&s.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-purple-500/20",children:[s.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block",children:"Select Service"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${se==="economy"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[s.jsx("input",{type:"radio",name:"doorService",value:"economy",checked:se==="economy",onChange:()=>he("economy"),className:"hidden"}),"Economy Road"]}),s.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${se==="overnight"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[s.jsx("input",{type:"radio",name:"doorService",value:"overnight",checked:se==="overnight",onChange:()=>he("overnight"),className:"hidden"}),"Overnight Courier"]})]}),s.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block pt-2 border-t border-gray-700/50",children:"Delivery Address"}),s.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:K.street,onChange:W=>F({...K,street:W.target.value})}),s.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:K.suburb,onChange:W=>F({...K,suburb:W.target.value})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:K.city,onChange:W=>F({...K,city:W.target.value})}),s.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:K.postalCode,onChange:W=>F({...K,postalCode:W.target.value})})]}),s.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:K.province,onChange:W=>F({...K,province:W.target.value})})]})]})},IR=()=>{const{cart:n,removeFromCart:e,updateCartQuantity:t,getCartTotal:r,user:i,appliedVoucher:l,setAppliedVoucher:c,applyExternalVoucher:d,updateUserAddress:p,setIsStickyProgressBarVisible:f,checkout:y,clearCart:b,register:N,login:E}=Dt(),j=fs(),[k,P]=I.useState({method:"pudo",cost:60,details:""}),[$,q]=I.useState(""),[J,se]=I.useState(""),he=I.useRef(null),[K,F]=I.useState(null),[A,L]=I.useState(!1),[V,T]=I.useState("register"),[O,D]=I.useState(!1),[ve,Ue]=I.useState(!1),[ke,je]=I.useState(""),[z,we]=I.useState(""),[W,B]=I.useState(""),[Z,ee]=I.useState(""),[de,Ie]=I.useState(""),[H,fe]=I.useState("");I.useEffect(()=>{f(!1)},[f]),I.useEffect(()=>{ve&&i.email&&(Vt(),Ue(!1))},[ve,i.email]),I.useEffect(()=>{K&&he.current&&(he.current.submit(),b())},[K,b]);const Ze=()=>{f(!0),j("/")},Ye=r(),et=n.reduce((Ce,Jt)=>Ce+Jt.quantity,0),Tt=Ye>=500&&(k.method==="pudo"||k.method==="paxi"),Ct=Tt?0:k.cost;let ct=0;l&&(l.minSpend&&Ye<l.minSpend||(l.discountType==="percentage"?ct=Ye*l.value/100:ct=l.value)),ct>Ye&&(ct=Ye);const Te=Ye+Ct-ct,ut=()=>{if(se(""),!$.trim())return;d($.trim())?q(""):se("Invalid or expired voucher code.")},Lt=async()=>{if(!k.details){alert("Please complete all shipping details.");return}if(!i.email){L(!0);return}await Vt()},Vt=async()=>{k.method==="door"&&await p(JSON.parse(k.details));try{const Ce=await y({items:n,total:Te,shippingMethod:k.method,shippingDetails:k.details,shippingCost:Ct});F(Ce)}catch(Ce){console.error("Order creation failed",Ce),alert("Could not create your order. Please try again.")}},_n=async Ce=>{if(Ce.preventDefault(),je(""),de!==H){je("Passwords do not match!");return}await N({name:z,email:W,birthday:Z,password:de})?(L(!1),Ue(!0)):je("Registration failed. Please try again.")},qt=async Ce=>{Ce.preventDefault(),je(""),await E(W,de)?(L(!1),Ue(!0)):je("Invalid credentials.")};return n.length===0?s.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[s.jsx("div",{className:"w-20 h-20 bg-zinc-900 rounded-full flex items-center justify-center text-gray-600",children:s.jsx(xc,{size:40})}),s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Cart is Empty"}),s.jsx("p",{className:"text-gray-400",children:"Looks like you haven't added any treasures yet."}),s.jsx(Me,{to:"/",className:"px-6 py-3 bg-pink-600 text-white font-bold rounded-full hover:bg-pink-500 transition-colors",children:"Start Shopping"})]}):s.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[s.jsx(DN,{subtotal:Ye,onContinueShopping:Ze}),A&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>L(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-white",children:V==="register"?"Create an Account":"Sign In"}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"An account is required to track your order history and status."})]}),V==="register"?s.jsxs("form",{onSubmit:_n,className:"space-y-4",children:[s.jsx("input",{type:"text",required:!0,value:z,onChange:Ce=>we(Ce.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Full Name"}),s.jsx("input",{type:"email",required:!0,value:W,onChange:Ce=>B(Ce.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),s.jsx("input",{type:"date",required:!0,value:Z,onChange:Ce=>ee(Ce.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"}),s.jsx("input",{type:O?"text":"password",required:!0,value:de,onChange:Ce=>Ie(Ce.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Create Password"}),s.jsx("input",{type:O?"text":"password",required:!0,value:H,onChange:Ce=>fe(Ce.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Confirm Password"}),ke&&s.jsx("p",{className:"text-xs text-red-400 text-center",children:ke}),s.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500",children:"Create Account & Continue"}),s.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",s.jsx("button",{type:"button",onClick:()=>T("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):s.jsxs("form",{onSubmit:qt,className:"space-y-4",children:[s.jsx("input",{type:"email",required:!0,value:W,onChange:Ce=>B(Ce.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),s.jsx("input",{type:O?"text":"password",required:!0,value:de,onChange:Ce=>Ie(Ce.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Password"}),ke&&s.jsx("p",{className:"text-xs text-red-400 text-center",children:ke}),s.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500",children:"Sign In & Continue"}),s.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",s.jsx("button",{type:"button",onClick:()=>T("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx(vg,{ref:he,amount:(K==null?void 0:K.total)??Te,itemName:K?`Order ${K.orderNumber}`:"Spoil Me Vintage Order",email:i.email,customStr1:(K==null?void 0:K.id)??"",customStr2:k.method,customStr3:(l==null?void 0:l.code)||""}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-white mb-4",children:["Shopping Cart (",et,")"]}),s.jsx("div",{className:"space-y-4",children:n.map((Ce,Jt)=>{let On=Ce.stock;Ce.type==="Ring"&&Ce.selectedSize&&Ce.ringStock&&(On=Ce.ringStock[Ce.selectedSize]||0);const rr=Ce.quantity>=On;return s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-4 rounded-xl flex gap-4 items-start",children:[s.jsx("div",{className:"w-20 h-20 bg-black rounded-lg overflow-hidden border border-gray-700 shrink-0",children:s.jsx("img",{src:Ce.images[0],alt:Ce.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"font-bold text-white text-sm line-clamp-2",children:Ce.name}),s.jsx("button",{onClick:()=>e(Ce.id,{selectedSize:Ce.selectedSize,selectedMaterial:Ce.selectedMaterial,selectedChainStyle:Ce.selectedChainStyle,selectedChainLength:Ce.selectedChainLength}),className:"text-gray-500 hover:text-red-400 p-1",children:s.jsx(Lo,{size:16})})]}),s.jsxs("div",{className:"text-xs text-gray-400 mt-1 space-y-0.5",children:[Ce.selectedSize&&s.jsxs("div",{children:["Size: ",s.jsx("span",{className:"text-gray-300",children:Ce.selectedSize})]}),Ce.selectedMaterial&&s.jsxs("div",{children:["Material: ",s.jsx("span",{className:"text-gray-300",children:Ce.selectedMaterial})]}),Ce.selectedChainStyle&&s.jsxs("div",{children:["Chain: ",s.jsxs("span",{className:"text-gray-300",children:[Ce.selectedChainStyle," ",Ce.selectedChainLength?`(${Ce.selectedChainLength})`:""]})]})]}),s.jsxs("div",{className:"flex justify-between items-end mt-3",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-black rounded-lg border border-gray-700 px-2 py-1",children:[s.jsx("button",{onClick:()=>t(Ce.id,Ce.quantity-1,Ce),className:"text-gray-400 hover:text-white",children:s.jsx(FA,{size:14})}),s.jsx("span",{className:"text-sm font-bold text-white w-4 text-center",children:Ce.quantity}),s.jsx("button",{onClick:()=>t(Ce.id,Ce.quantity+1,Ce),className:"text-gray-400 hover:text-white disabled:text-gray-700 disabled:cursor-not-allowed",disabled:rr,children:s.jsx(ei,{size:14})})]}),s.jsxs("div",{className:"font-bold text-white",children:["R",((Ce.price+(Ce.selectedMaterialModifier||0))*Ce.quantity).toFixed(2)]})]})]})]},`${Ce.id}_${Jt}`)})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(jR,{cartItemCount:et,onShippingChange:P,subtotal:Ye}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[s.jsx("h3",{className:"font-bold text-white mb-4",children:"Summary"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-400 mb-4 pb-4 border-b border-gray-800",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{className:"text-white",children:["R",Ye.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Shipping"}),s.jsx("span",{className:"text-white",children:Tt?s.jsx("span",{className:"text-green-400",children:"FREE"}):`R${Ct.toFixed(2)}`})]}),ct>0&&s.jsxs("div",{className:"flex justify-between text-green-400",children:[s.jsx("span",{children:"Discount"}),s.jsxs("span",{children:["-R",ct.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("span",{className:"text-gray-300 font-bold",children:"Total"}),s.jsxs("span",{className:"text-2xl font-bold text-white",children:["R",Te.toFixed(2)]})]}),l?s.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-3 rounded-lg mb-4 flex justify-between items-center text-xs",children:[s.jsxs("span",{className:"text-green-400 font-bold flex items-center gap-1",children:[s.jsx(gt,{size:12})," Code ",l.code," Applied"]}),s.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:"Remove"})]}):s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("input",{type:"text",placeholder:"Promo Code",className:"flex-1 bg-black border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-pink-500 outline-none",value:$,onChange:Ce=>q(Ce.target.value)}),s.jsx("button",{onClick:ut,className:"bg-zinc-800 hover:bg-zinc-700 text-white px-3 py-2 rounded-lg text-sm border border-gray-600",children:"Apply"})]}),J&&s.jsx("p",{className:"text-xs text-red-400 mb-4",children:J}),s.jsxs("button",{onClick:Lt,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:["Pay Now ",s.jsx(Mt,{size:20})]}),s.jsxs("div",{className:"text-center mt-3 text-xs text-gray-500 flex justify-center gap-2",children:[s.jsx(Va,{size:14})," Secure Payment via PayFast"]})]})]})]})]})},AR=()=>{const{user:n,products:e,logout:t,submitReview:r}=Dt(),i=fs(),[l,c]=I.useState(null),[d,p]=I.useState(!1),[f,y]=I.useState(5),[b,N]=I.useState(""),E=e.filter(K=>n.wishlist.includes(K.id)),j=n.notifications.filter(K=>K.type==="review_request"&&!K.isRead),k=n.notifications.filter(K=>K.type==="gift_ready"),P=n.notifications.filter(K=>K.type==="gift_received"),$=n.notifications.filter(K=>(K.type==="system"||K.type==="affiliate_msg")&&!K.isRead),q=()=>{t(),i("/")},J=async()=>{!l||!l.productId||(await r(l.productId,f,b,l.id),N(""),y(5),c(null),alert("Review submitted! You earned 100 Loyalty Points."))},se=K=>{if(!K.voucherData)return;const{code:F,amount:A,meta:L}=K.voucherData,V=`${window.location.origin}/#/?voucher=${F}`,T=`Hey ${L.recipientName}! 🎁

${L.senderName} sent you a Spoil Me Vintage Gift Voucher worth R${A}!

"${L.message}"

Redeem it here:
${V}`,O=L.whatsappNumber?L.whatsappNumber.replace(/[^0-9]/g,""):"",D=O?`https://wa.me/${O}?text=${encodeURIComponent(T)}`:`https://wa.me/?text=${encodeURIComponent(T)}`;window.open(D,"_blank")},he=K=>{window.location.href=`/#/?voucher=${K}`};return n.email?s.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[d&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>p(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[s.jsx("button",{onClick:()=>p(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:s.jsx(wn,{size:20})}),s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:s.jsx($r,{size:24})}),s.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),s.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"1 Point for every R10"})," spent on products."]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"100 Points"})," for every verified review."]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing products on social media."]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",s.jsx("span",{className:"text-white font-bold",children:"R1.00 Discount"}),"."]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum redemption is 1000 Points (R10)."})]})]}),s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[s.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[s.jsx($r,{size:14})," Membership Rule"]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",s.jsx("strong",{children:"R100 (10,000 pts)"})," per order. To redeem more than R100 at once, you must be a ",s.jsx(Me,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),s.jsx("button",{onClick:()=>p(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),l&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>c(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsx("button",{onClick:()=>c(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:s.jsx(wn,{size:20})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Write a Review"}),s.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["For: ",s.jsx("span",{className:"text-cyan-400 font-semibold",children:l.productName})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rating"}),s.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(K=>s.jsx("button",{onClick:()=>y(K),className:"text-yellow-400 hover:scale-110 transition-transform",children:s.jsx(ci,{size:28,fill:K<=f?"currentColor":"none"})},K))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Your Review"}),s.jsx("textarea",{rows:4,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:ring-1 focus:ring-pink-500 focus:border-pink-500",placeholder:"What did you think of the product?",value:b,onChange:K=>N(K.target.value)})]}),s.jsx("button",{onClick:J,disabled:!b.trim(),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:"Submit & Earn 100 Points"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-zinc-800 flex items-center justify-center text-[22px] font-bold text-cyan-400 border border-gray-700 shadow-[0_0_10px_rgba(34,211,238,0.3)]",children:n.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:n.name}),s.jsx("p",{className:"text-gray-400 text-sm",children:n.email}),n.isAdmin&&s.jsx("span",{className:"text-xs text-pink-500 font-bold bg-pink-900/20 px-2 py-1 rounded mt-1 inline-block",children:"ADMIN ACCESS"})]})]}),s.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-4 py-2 bg-zinc-900 hover:bg-zinc-800 text-gray-300 rounded-lg border border-gray-700 transition-colors text-sm",children:[s.jsx(LA,{size:16})," Sign Out"]})]}),$.length>0&&s.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-2xl p-6 animate-in slide-in-from-bottom-4 mb-8",children:[s.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(TN,{size:20,className:"text-yellow-400"})," Updates (",$.length,")"]}),s.jsx("div",{className:"space-y-4",children:$.map(K=>s.jsx("div",{className:"bg-black p-4 rounded-xl border border-gray-800 shadow-sm",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-bold text-sm",children:K.title}),s.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:K.message}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-2",children:new Date(K.date).toLocaleDateString()})]}),K.type==="affiliate_msg"&&s.jsxs(Me,{to:"/affiliate-program",className:"shrink-0 px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded-lg transition-colors whitespace-nowrap flex items-center gap-2",children:["Open Dashboard ",s.jsx(Mt,{size:12})]})]})},K.id))})]}),P.length>0&&s.jsxs("div",{className:"bg-gradient-to-r from-zinc-900 to-black border border-cyan-500/30 rounded-2xl p-6 animate-in slide-in-from-bottom-4 mb-8",children:[s.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(Xt,{size:20,className:"text-cyan-400"})," My Gift Collection (",P.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:P.map(K=>{var F,A,L,V;return s.jsxs("div",{className:"bg-zinc-900/80 p-4 rounded-xl border border-gray-800 space-y-4 shadow-lg",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-white font-bold",children:["Gift from ",(F=K.voucherData)==null?void 0:F.meta.senderName]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Received: ",new Date(K.date).toLocaleDateString()]})]}),s.jsx("div",{className:"px-2 py-1 bg-cyan-900/20 border border-cyan-500/30 text-cyan-400 text-[10px] font-bold rounded uppercase",children:"Ready to Use"})]}),s.jsxs("div",{className:"relative aspect-[1.586/1] rounded-lg overflow-hidden text-white border border-gray-700 bg-black",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-zinc-900 to-black"}),s.jsxs("div",{className:"relative h-full p-4 flex flex-col justify-between z-10",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:"font-cherry text-sm text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400",children:"SV"}),s.jsxs("span",{className:"text-lg font-bold text-white font-architects",children:["R",(A=K.voucherData)==null?void 0:A.amount]})]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"font-architects text-sm text-gray-200 italic line-clamp-2",children:['"',(L=K.voucherData)==null?void 0:L.meta.message,'"']})}),s.jsxs("div",{className:"flex justify-between text-[8px] text-gray-500 uppercase",children:[s.jsx("span",{children:"To You"}),s.jsx("span",{className:"font-mono text-cyan-400 text-[10px]",children:(V=K.voucherData)==null?void 0:V.code})]})]})]}),s.jsxs("button",{onClick:()=>K.voucherData&&he(K.voucherData.code),className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center justify-center gap-2 shadow-lg group",children:[s.jsx(gc,{size:16})," Redeem Now ",s.jsx(Mt,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})]},K.id)})})]}),k.length>0&&s.jsxs("div",{className:"bg-zinc-900/50 border border-pink-500/30 rounded-2xl p-6 animate-in slide-in-from-bottom-4 mb-8",children:[s.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(zd,{size:20,className:"text-pink-500"})," Ready to Send (",k.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:k.map(K=>{var F,A,L,V,T;return s.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-white font-bold",children:["Gift Voucher for ",(F=K.voucherData)==null?void 0:F.meta.recipientName]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(K.date).toLocaleDateString()]})]}),s.jsx("div",{className:"px-2 py-1 bg-green-900/20 border border-green-500/30 text-green-400 text-[10px] font-bold rounded uppercase",children:"Paid & Active"})]}),s.jsxs("div",{className:"relative aspect-[1.586/1] rounded-lg overflow-hidden text-white border border-gray-700 bg-zinc-900",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),s.jsxs("div",{className:"relative h-full p-4 flex flex-col justify-between z-10",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:"font-cherry text-sm text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400",children:"SV"}),s.jsxs("span",{className:"text-lg font-bold text-white font-architects",children:["R",(A=K.voucherData)==null?void 0:A.amount]})]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"font-architects text-sm text-gray-200 italic line-clamp-2",children:['"',(L=K.voucherData)==null?void 0:L.meta.message,'"']})}),s.jsxs("div",{className:"flex justify-between text-[8px] text-gray-500 uppercase",children:[s.jsxs("span",{children:["For: ",(V=K.voucherData)==null?void 0:V.meta.recipientName]}),s.jsxs("span",{children:["By: ",(T=K.voucherData)==null?void 0:T.meta.senderName]})]})]})]}),s.jsx("div",{className:"flex items-center gap-2 pt-2",children:s.jsxs("button",{onClick:()=>se(K),className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center justify-center gap-2 shadow-lg",children:[s.jsx(zd,{size:16})," Send on WhatsApp"]})}),s.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"Clicking will open WhatsApp with the voucher image/link pre-filled."})]},K.id)})})]}),j.length>0&&s.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-2xl p-6 animate-in slide-in-from-bottom-4",children:[s.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(OA,{size:20,className:"text-cyan-400"})," Pending Reviews (",j.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(K=>s.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 flex gap-4 items-center",children:[K.productImage&&s.jsx("img",{src:K.productImage,alt:"",className:"w-16 h-16 rounded-lg object-cover border border-gray-700",onError:F=>{console.warn("Image failed to load in Profile notification:",F.currentTarget.src),F.currentTarget.src="https://via.placeholder.com/64"}}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-white font-medium text-sm line-clamp-1",children:K.productName}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Share your thoughts honestly!"}),s.jsx("p",{className:"text-xs text-purple-400 font-bold mt-1",children:"+100 Points Reward"})]}),s.jsx("button",{onClick:()=>c(K),className:"px-4 py-2 bg-zinc-800 hover:bg-pink-600 text-white text-xs font-bold rounded-lg transition-colors whitespace-nowrap border border-gray-700 hover:border-pink-500",children:"Review Now"})]},K.id))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 border border-purple-700 rounded-2xl p-6 text-white shadow-[0_0_20px_rgba(168,85,247,0.2)] relative overflow-hidden",children:[s.jsx("button",{onClick:()=>p(!0),className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors text-white/80 hover:text-white z-10",children:s.jsx(vh,{size:18})}),s.jsxs("div",{className:"flex justify-between items-start mb-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold opacity-90 text-purple-200",children:"Loyalty Balance"}),s.jsxs("p",{className:"text-xs opacity-75 flex items-center gap-1 mt-1",children:[s.jsx(gg,{size:10})," 1 pt per R10 spent"]}),s.jsxs("p",{className:"text-xs opacity-75 flex items-center gap-1",children:[s.jsx(vc,{size:10})," 100 pts per review"]}),s.jsxs("p",{className:"text-xs opacity-75 flex items-center gap-1",children:[s.jsx(Ho,{size:10})," 50 pts per share"]})]}),s.jsx($r,{size:28,className:"text-pink-300 drop-shadow-[0_0_5px_rgba(236,72,153,0.8)] mr-8"})]}),s.jsxs("div",{className:"text-[22px] font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-white to-pink-200",children:[n.loyaltyPoints," ",s.jsx("span",{className:"text-lg font-normal opacity-80 text-white",children:"Points"})]}),s.jsx("div",{className:"mt-4 text-xs bg-black/30 p-3 rounded-lg border border-white/10",children:n.loyaltyPoints>=1e3?`You have R${(Math.floor(n.loyaltyPoints/1e3)*10).toFixed(2)} off available for your next order!`:`${1e3-n.loyaltyPoints} more points needed for a R10 voucher.`})]}),s.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Partnership Program"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Earn 20% commission on referrals"})]}),s.jsx(As,{size:28,className:"text-green-400 drop-shadow-[0_0_5px_rgba(74,222,128,0.6)]"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-black p-3 rounded-lg flex justify-between items-center border border-gray-700",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Your Referral Code"}),s.jsx("span",{className:"font-mono font-bold text-base text-cyan-400 tracking-wider",children:n.affiliateCode||"N/A"})]}),s.jsx("button",{className:"p-2 text-gray-500 hover:text-cyan-400 transition-colors",children:s.jsx(fg,{size:18})})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Total Earnings"}),s.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",n.affiliateEarnings.toFixed(2)]})]}),s.jsx(Me,{to:"/affiliate-program",className:"block w-full py-2 border border-cyan-500/50 text-cyan-400 rounded-lg font-semibold hover:bg-cyan-900/30 transition-colors text-sm text-center",children:"View Dashboard"})]})]})]}),s.jsxs("div",{className:"pt-8 border-t border-gray-800",children:[s.jsxs("h2",{className:"text-[20px] font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(no,{size:20,className:"text-pink-500"})," Wishlist (",E.length,")"]}),E.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:E.map(K=>s.jsx(pr,{product:K},K.id))}):s.jsx("p",{className:"text-gray-500 text-sm",children:"Your wishlist is empty."})]})]}):(i("/login"),null)},RR=()=>{const[n,e]=I.useState(""),[t,r]=I.useState(""),[i,l]=I.useState(""),{login:c}=Dt(),d=fs(),p=async f=>{f.preventDefault(),l(""),await c(n,t)?d("/admin"):l("Invalid credentials. Please check your email and password.")};return s.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:s.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-zinc-900 rounded-2xl border border-gray-800 shadow-xl",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-handwriting font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Welcome Back"}),s.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Sign in to access your account"})]}),s.jsxs("form",{className:"space-y-6",onSubmit:p,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Od,{size:18,className:"text-gray-500"})}),s.jsx("input",{type:"email",name:"email",autoComplete:"email",required:!0,value:n,onChange:f=>e(f.target.value),className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:"name@example.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(yc,{size:18,className:"text-gray-500"})}),s.jsx("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,value:t,onChange:f=>r(f.target.value),className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:"••••••••"})]})]})]}),i&&s.jsx("div",{className:"p-3 bg-red-900/20 border border-red-900/50 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-400 text-center",children:i})}),s.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-pink-600 hover:bg-pink-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition-all hover:shadow-[0_0_15px_rgba(236,72,153,0.4)]",children:["Sign In ",s.jsx(Mt,{size:16})]})]}),s.jsx("div",{className:"text-center pt-4 border-t border-gray-800",children:s.jsxs("p",{className:"text-xs text-gray-500",children:["Don't have an account? ",s.jsx("span",{className:"text-gray-400",children:"Registration is currently invite only."})]})})]})})},MR=()=>{const{addSystemNotification:n,user:e,memberCount:t}=Dt(),r=fs(),i=I.useRef(null),[l,c]=I.useState(null),d=new Date,p=d.getMonth(),f=d.getFullYear(),b=23+(p+f*12)%3,N=d.getDate(),E=new Date(f,p+1,0).getDate(),j=(N-1)/(E-1),k=b-j*(b-2),P=Math.max(2,Math.floor(k)),$=(b-P)/b*100,q=(J,se)=>{if(!e.email){alert("Please create an account or log in to subscribe."),r("/login");return}c({name:J,amount:se}),setTimeout(()=>{i.current&&i.current.submit()},100)};return s.jsxs("div",{className:"py-8 space-y-12",children:[l&&s.jsx(vg,{ref:i,amount:l.amount,itemName:`${l.name} Membership`,email:e.email,isSubscription:!0,frequency:3,cycles:0,customStr1:e.id,customStr2:"MEMBERSHIP_SIGNUP"}),s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("h1",{className:"font-cherry text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Membership Perks"}),s.jsx("p",{className:"font-architects text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto",children:"Join the Spoil Me Vintage family and unlock a world of exclusive benefits, discounts, and special gifts!"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-8",children:[s.jsxs(Me,{to:"/weekly-winners",className:"block relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[s.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-cyan-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Starter"}),s.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"Spoil Me Package"}),s.jsxs("div",{className:"text-center mb-2",children:[s.jsx("span",{className:"text-4xl font-bold text-white",children:"R19"}),s.jsx("span",{className:"text-gray-400",children:"/month"})]}),s.jsx("p",{className:"text-[10px] text-cyan-300 text-center mb-6 font-semibold uppercase tracking-wide border border-cyan-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[s.jsxs("span",{children:[Math.floor(b-P)," / ",b," members"]}),s.jsxs("span",{className:`${P<=5?"text-red-500 animate-pulse":"text-white"}`,children:[P," spot",P!==1?"s":""," left"]})]}),s.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:s.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${P<=5?"bg-red-500":"bg-cyan-500"}`,style:{width:`${$}%`,transition:"width 1s ease-in-out"}})}),s.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Progress updates daily"}),P<=5&&s.jsx("div",{className:"absolute top-0 right-0 bg-red-600 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg shadow-md animate-pulse",children:"HURRY!"})]}),s.jsx("ul",{className:"space-y-3 mb-8 flex-1",children:s.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[s.jsx(as,{className:"text-cyan-400 shrink-0 mt-0.5",size:16}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-white",children:"300 lucky winners"})," of this package get a gift each week between R50 - R500 voucher to spend in this store"]})]})}),s.jsxs("div",{className:"mt-auto",children:[s.jsx("button",{onClick:J=>{J.preventDefault(),J.stopPropagation(),q("Spoil Me",19)},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[s.jsx(Va,{size:12})," PayFast Secure Subscription"]})]})]}),s.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[s.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-purple-800 text-white font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Popular"}),s.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"Basic"}),s.jsxs("div",{className:"text-center mb-2",children:[s.jsx("span",{className:"text-4xl font-bold text-white",children:"R49"}),s.jsx("span",{className:"text-gray-400",children:"/month"})]}),s.jsx("p",{className:"text-[10px] text-purple-300 text-center mb-6 font-semibold uppercase tracking-wide border border-purple-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),s.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(Xt,{className:"text-purple-500 shrink-0",size:16}),s.jsxs("span",{children:["Receive a ",s.jsx("strong",{className:"text-white",children:"R50 Birthday Voucher"})]})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(gt,{className:"text-purple-500 shrink-0",size:16}),s.jsx("span",{children:"Get 20% discount on non-discount products"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(Ir,{className:"text-purple-500 shrink-0",size:16}),s.jsx("span",{children:"Get a chance to win a giveaway"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(gt,{className:"text-purple-500 shrink-0",size:16}),s.jsx("span",{children:"Receive 25% Discount on Public Holidays"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(Xt,{className:"text-purple-500 shrink-0",size:16}),s.jsx("span",{children:"Receive a free gift every 6th month"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(as,{className:"text-purple-500 shrink-0",size:16}),s.jsx("span",{children:"Receive R200 gift voucher each month to spend in store"})]})]}),s.jsxs("div",{className:"mt-auto",children:[s.jsx("button",{onClick:()=>q("Basic",49),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[s.jsx(Va,{size:12})," PayFast Secure Subscription"]})]})]}),s.jsxs("div",{className:"relative bg-zinc-900 border-4 border-pink-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(236, 72, 153, 0.4)"},children:[s.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-pink-500 text-white font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Recommended"}),s.jsx("h2",{className:"text-2xl font-bold text-pink-500 text-center mt-4 mb-2",children:"Premium"}),s.jsxs("div",{className:"text-center mb-2",children:[s.jsx("span",{className:"text-4xl font-bold text-white",children:"R99"}),s.jsx("span",{className:"text-gray-400",children:"/month"})]}),s.jsx("p",{className:"text-[10px] text-pink-300 text-center mb-6 font-semibold uppercase tracking-wide border border-pink-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),s.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(Xt,{className:"text-pink-500 shrink-0",size:16}),s.jsxs("span",{children:["Receive ",s.jsx("strong",{className:"text-white",children:"R100 Birthday Voucher"})]})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(gt,{className:"text-pink-500 shrink-0",size:16}),s.jsx("span",{children:"Save 20% on all non-discount products"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(as,{className:"text-pink-500 shrink-0",size:16}),s.jsx("span",{children:"Get a chance to win a giveaway each month"})]}),s.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[s.jsx(Xt,{className:"text-pink-500 shrink-0 mt-0.5",size:16}),s.jsx("span",{children:"Received a free gift on Valentine's, Mother's, Father's Day & Festive Season"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(gt,{className:"text-pink-500 shrink-0",size:16}),s.jsx("span",{children:"Received 25% discount on Public Holidays"})]}),s.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[s.jsx(Xt,{className:"text-pink-500 shrink-0 mt-0.5",size:16}),s.jsx("span",{children:"Received a free gift on your first month and then every 3rd month"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(as,{className:"text-pink-500 shrink-0",size:16}),s.jsx("span",{children:"Receive R200 voucher to spend in store!"})]})]}),s.jsxs("div",{className:"mt-auto",children:[s.jsx("button",{onClick:()=>q("Premium",99),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[s.jsx(Va,{size:12})," PayFast Secure Subscription"]})]})]}),s.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[s.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[s.jsx(Pr,{size:14})," The Ultimate"]}),s.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:"Deluxe"}),s.jsxs("div",{className:"text-center mb-2",children:[s.jsx("span",{className:"text-4xl font-bold text-white",children:"R199"}),s.jsx("span",{className:"text-gray-400",children:"/month"})]}),s.jsx("p",{className:"text-[10px] text-lime-300 text-center mb-6 font-semibold uppercase tracking-wide border border-lime-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6",children:[s.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[s.jsx("span",{children:"490 / 500 members"}),s.jsx("span",{className:"text-red-400 animate-pulse",children:"10 spots left"})]}),s.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:s.jsx("div",{className:"bg-lime-500 h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)]",style:{width:"98%"}})}),s.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Progress updates monthly"})]}),s.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(Xt,{className:"text-lime-400 shrink-0",size:16}),s.jsxs("span",{children:["Receive a ",s.jsx("strong",{className:"text-white",children:"R200 Birthday Voucher"})]})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(gt,{className:"text-lime-400 shrink-0",size:16}),s.jsx("span",{children:"Save 20% on all non-discount products"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(as,{className:"text-lime-400 shrink-0",size:16}),s.jsx("span",{children:"Get a chance to win a giveaway each month"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(Ir,{className:"text-lime-400 shrink-0",size:16}),s.jsx("span",{className:"text-white font-bold",children:"Receive 50% - 70% discount on the 16th of each month"})]}),s.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[s.jsx(Xt,{className:"text-lime-400 shrink-0 mt-0.5",size:16}),s.jsx("span",{children:"Received a free gift on Valentine's, Mother's, Father's Day & Festive Season"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(gt,{className:"text-lime-400 shrink-0",size:16}),s.jsx("span",{children:"Received 30% discount on Public Holidays"})]}),s.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[s.jsx(Xt,{className:"text-lime-400 shrink-0 mt-0.5",size:16}),s.jsx("span",{children:"Receive a free gift 1st month and then every 2nd month"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(as,{className:"text-lime-400 shrink-0",size:16}),s.jsx("span",{children:"A free gift voucher to spend in store!"})]}),s.jsxs("li",{className:"flex items-start gap-3 text-sm text-lime-200 bg-lime-900/20 p-2 rounded border border-lime-500/20",children:[s.jsx(Pr,{className:"text-lime-400 shrink-0 mt-0.5",size:16}),s.jsxs("span",{children:["For loyal members, buy products at cheapest price, pay as little as ",s.jsx("strong",{className:"text-white text-lg underline",children:"R8 per item"})]})]})]}),s.jsxs("div",{className:"mt-auto",children:[s.jsx("button",{onClick:()=>q("Deluxe",199),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[s.jsx(Va,{size:12})," PayFast Secure Subscription"]})]})]})]}),s.jsxs("div",{className:"mt-16 border-t border-gray-800 pt-12 text-center",children:[s.jsxs("h2",{className:"font-cherry text-3xl text-white flex items-center justify-center gap-3 mb-4",children:[s.jsx(Xt,{className:"text-yellow-400",size:32})," Want to Earn Rewards for Free?"]}),s.jsx("p",{className:"text-gray-400 max-w-lg mx-auto mb-8",children:"You don't have to be a member to start earning. Join our social channels, leave reviews, and shop to earn points."}),s.jsxs(Me,{to:"/earn-rewards",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105",children:["Go to Rewards Hub ",s.jsx(Mt,{size:20})]})]})]})},DR=()=>{var y,b,N,E;const{user:n,claimSocialReward:e}=Dt(),[t,r]=I.useState(!1),[i,l]=I.useState(null),[c,d]=I.useState(""),p=(j,k)=>{l({platform:j,name:k}),d("")},f=()=>{if(i){if(i.platform!=="whatsapp"&&!c.trim()){alert(`Please enter your ${i.name} username to verify.`);return}e(i.platform,c),l(null)}};return s.jsxs("div",{className:"max-w-5xl mx-auto py-8 space-y-12 relative",children:[i&&s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>l(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"One Last Step!"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"To prevent fraud and secure your points, please enter your username. This allows us to verify your follow."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:["Your ",i.name," Username"]}),s.jsxs("div",{className:"relative",children:[s.jsx(wc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:"text",value:c,onChange:j=>d(j.target.value),className:"w-full pl-10 p-3 bg-black border border-gray-700 rounded-xl text-white text-sm focus:border-pink-500 outline-none",placeholder:"@username"})]})]}),s.jsx("button",{onClick:f,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all",children:"Verify & Claim Points"})]}),s.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:s.jsx(wn,{size:20})})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 border-b border-gray-800 pb-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h1",{className:"font-cherry text-4xl text-white",children:"Loyalty Rewards"}),s.jsx("button",{onClick:()=>r(!0),className:"text-gray-500 hover:text-cyan-400 transition-colors",title:"How it works",children:s.jsx(vh,{size:24})})]}),s.jsx("p",{className:"text-gray-400 text-lg max-w-xl",children:"Complete simple tasks to earn points and unlock discounts on your next vintage treasure."})]}),s.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-purple-500/30 min-w-[250px] text-center shadow-[0_0_20px_rgba(168,85,247,0.15)] relative group",children:[s.jsx("div",{className:"absolute inset-0 bg-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-sm text-gray-400 uppercase tracking-wider mb-1 font-semibold",children:"Your Balance"}),s.jsx("div",{className:"text-5xl font-bold text-white mb-2 font-mono tracking-tight",children:n.loyaltyPoints}),s.jsx("div",{className:"text-xs text-purple-400 font-bold bg-purple-900/20 py-1 px-3 rounded-full w-fit mx-auto",children:"Points Available"})]})]})]}),t&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>r(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[s.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:s.jsx(wn,{size:20})}),s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:s.jsx($r,{size:24})}),s.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),s.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"1 Point for every R10"})," spent."]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"100 Points"})," for verified reviews."]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing."]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",s.jsx("span",{className:"text-white font-bold",children:"R1.00 Discount"}),"."]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum redemption is 1000 Points (R10)."})]})]}),s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[s.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[s.jsx($r,{size:14})," Membership Rule"]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",s.jsx("strong",{children:"R100 (10,000 pts)"})," per order. To redeem more, you must be a ",s.jsx(Me,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),s.jsx("button",{onClick:()=>r(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(Xt,{className:"text-yellow-400"})," Quick Earn: Social Media"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-pink-500 transition-all",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-pink-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"w-16 h-16 bg-black border border-pink-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(236,72,153,0.4)] relative z-10",children:s.jsx(li,{size:32,className:"text-pink-500"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"TikTok"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Get exclusive clips & flash sales."}),(y=n.socialRewards)!=null&&y.tiktok?s.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[s.jsx(gt,{size:18})," 100 Pts Claimed"]}):s.jsxs("button",{onClick:()=>p("tiktok","TikTok"),className:"mt-auto w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[s.jsx(Mo,{size:16})," Join & Earn 100"]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-blue-500 transition-all",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"w-16 h-16 bg-black border border-blue-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(59,130,246,0.4)] relative z-10",children:s.jsx(tc,{size:32,className:"text-blue-500"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Facebook"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Join our community group."}),(b=n.socialRewards)!=null&&b.facebook?s.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[s.jsx(gt,{size:18})," 100 Pts Claimed"]}):s.jsxs("button",{onClick:()=>p("facebook","Facebook"),className:"mt-auto w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(59,130,246,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[s.jsx(Mo,{size:16})," Join & Earn 100"]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-white/20 transition-all",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:s.jsx(yd,{size:32,className:"text-white"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Twitter"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"News and polls."}),(N=n.socialRewards)!=null&&N.twitter?s.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[s.jsx(gt,{size:18})," 100 Pts Claimed"]}):s.jsxs("button",{onClick:()=>p("twitter","Twitter"),className:"mt-auto w-full py-3 bg-gray-700 hover:bg-gray-600 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(255,255,255,0.2)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[s.jsx(Mo,{size:16})," Join & Earn 100"]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-green-500/30 transition-all",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-green-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:s.jsx(vc,{size:32,className:"text-green-500"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"WhatsApp"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Instant drop notifications."}),(E=n.socialRewards)!=null&&E.whatsapp?s.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[s.jsx(gt,{size:18})," 100 Pts Claimed"]}):s.jsxs("button",{onClick:()=>e("whatsapp"),className:"mt-auto w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(34,197,94,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[s.jsx(Mo,{size:16})," Join & Earn 100"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8 border-t border-gray-800",children:[s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[s.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:s.jsx(gg,{className:"text-cyan-400",size:24})}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Shop & Earn"}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 1 point for every R10 you spend on any purchase automatically."}),s.jsx(Me,{to:"/",className:"text-cyan-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Start Shopping"})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-yellow-500/30 transition-colors",children:[s.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:s.jsx(ci,{className:"text-yellow-400",size:24})}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Review Products"}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 100 points for every verified review you leave on items you've bought."}),s.jsx(Me,{to:"/profile",className:"text-yellow-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Check Pending Reviews"})]})]})]})},LR=()=>{const{user:n,affiliateLeaderboard:e,applyForAffiliate:t,buyAffiliateContent:r,joinAffiliateElite:i,register:l,login:c,getAllUsers:d}=Dt(),[p,f]=I.useState(!1),[y,b]=I.useState(1),[N,E]=I.useState(!1),[j,k]=I.useState(!1),[P,$]=I.useState({name:n.name!=="Guest"?n.name.split(" ")[0]:"",surname:n.name!=="Guest"?n.name.split(" ").slice(1).join(" "):"",email:n.email||"",dob:n.birthday||"",gender:"",reason:"",socials:"",password:""}),[q,J]=I.useState(!1),[se,he]=I.useState(!1),[K,F]=I.useState(!1),[A,L]=I.useState(!1),[V,T]=I.useState(""),[O,D]=I.useState(""),[ve,Ue]=I.useState({}),[ke,je]=I.useState(!1),[z,we]=I.useState([]);I.useEffect(()=>{var Te,ut;((Te=n.affiliateStats)==null?void 0:Te.status)==="pending"&&k(!0),((ut=n.affiliateStats)==null?void 0:ut.status)==="approved"&&d().then(Lt=>{const Vt=Lt.filter(_n=>{var qt;return((qt=_n.affiliateStats)==null?void 0:qt.parentId)===n.id});we(Vt)})},[n.affiliateStats,n.id,d]);const W=I.useMemo(()=>[{title:"1. Introduction",content:'These Terms and Conditions ("Agreement") govern your participation in the Spoil Me Vintage Partnership Program ("Program"). By enrolling in the Program, you agree to be bound by these terms.'},{title:"2. Definitions",content:'"Partner", "You", and "Your" refer to the individual or entity applying for or participating in the Program. "We", "Us", and "Our" refer to Spoil Me Vintage. "Commission" refers to the amount paid for a successful referral.'},{title:"3. Enrollment",content:"To begin the enrollment process, you must submit a complete Partnership Application. We will evaluate your application and notify you of your acceptance or rejection."},{title:"4. Affiliate Links",content:"You will be issued a unique Affiliate URL or code. It is your responsibility to ensure that these links are correctly formatted and used on your site."},{title:"5. Commissions",content:"You will earn commissions based on the tiered structure defined in your dashboard. Standard commissions range from 10% to 20%. Additionally, you earn a 1% override commission on sales generated by partners you directly recruit."},{title:"6. Payment Terms",content:"Commissions are paid once a month. Payments are made via EFT to a South African bank account. Minimum payout balance is R200."}],[]),B=W.length>0&&W.every((Te,ut)=>ve[ut]),Z=async Te=>{var Lt;if(Te.preventDefault(),D(""),await c(P.email,V)){L(!1),b(2);const _n=(await d()).find(qt=>qt.email.toLowerCase()===P.email.toLowerCase());((Lt=_n==null?void 0:_n.affiliateStats)==null?void 0:Lt.status)==="approved"&&(f(!1),setTimeout(()=>{var qt;return(qt=document.getElementById("affiliate-dashboard"))==null?void 0:qt.scrollIntoView({behavior:"smooth"})},500))}else D("Invalid password. Please try again.")},ee=async Te=>{if(Te.preventDefault(),!P.reason.trim()||!q)return;const ut={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},Lt={status:"pending",gender:P.gender,joinReason:`${P.reason} | Socials: ${P.socials}`,totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1};if(n.email)await t(P),F(!0);else{if(!P.email||!P.password){alert("Please provide email and password to create your account.");return}if((await d()).find(Ce=>Ce.email.toLowerCase()===P.email.toLowerCase())){L(!0),D("This email address is already associated with an account. Please Log In to continue your application.");return}if(!await l({name:`${P.name} ${P.surname}`,email:P.email,password:P.password,birthday:P.dob,notifications:[ut],affiliateStats:Lt})){alert("Failed to create account. Please try again.");return}F(!0)}},de=()=>{f(!1),F(!1),b(1),he(!1),J(!1),Ue({}),L(!1),T(""),D("")},Ie=async()=>{window.confirm("Purchase the Partner Content Pack for R250?")&&(await r(),alert("Content Unlocked!"))},H=async()=>{window.confirm("Upgrade to Elite Partner Status? A fee applies.")&&(await i(),alert("Welcome to the Elite Squad!"))},fe=()=>{J(!0),E(!1)},Ze=Te=>{Ue(ut=>({...ut,[Te]:!ut[Te]}))},Ye=()=>{const Te=`${window.location.origin}/#/?ref=${n.affiliateCode}`;navigator.clipboard.writeText(Te),je(!0),setTimeout(()=>je(!1),2e3)},et=n.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,isElite:!1},Tt=et.status==="approved";let Ct=50,ct=0;return et.totalSalesCount<50?(Ct=50,ct=0):et.totalSalesCount<100?(Ct=100,ct=50):(et.totalSalesCount<500,Ct=500,ct=100),et.totalSalesCount>=500||(et.totalSalesCount-ct)/(Ct-ct)*100,s.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-16",children:[s.jsxs("div",{className:"relative rounded-3xl overflow-hidden bg-zinc-900 border border-pink-500/30 min-h-[400px] flex items-center",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-zinc-900/90 to-transparent z-10"}),s.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2 bg-[url('https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80')] bg-cover bg-center opacity-40 grayscale mix-blend-luminosity"}),s.jsxs("div",{className:"relative z-20 p-8 md:p-16 max-w-2xl space-y-6",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-1.5 rounded-full text-sm font-bold uppercase tracking-wider",children:[s.jsx(YA,{size:16})," Join the Team"]}),s.jsxs("h1",{className:"font-cherry text-5xl md:text-7xl text-white leading-none drop-shadow-[0_0_15px_rgba(236,72,153,0.6)]",children:["Partner & ",s.jsx("br",{}),s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Earn Cash"})]}),s.jsxs("p",{className:"text-gray-300 text-lg leading-relaxed",children:["Turn your passion for vintage into profit. Join our exclusive Partnership Program and earn up to ",s.jsx("strong",{children:"20% Lifetime Commission"})," on every sale you generate."]}),!Tt&&et.status!=="pending"&&s.jsxs("button",{onClick:()=>f(!0),className:"px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.4)] flex items-center gap-2",children:["Join the Program ",s.jsx(Mt,{size:20})]}),et.status==="pending"&&s.jsxs("button",{onClick:()=>k(!0),className:"inline-flex items-center gap-2 bg-yellow-900/20 border border-yellow-500/30 text-yellow-400 px-6 py-3 rounded-lg font-bold hover:bg-yellow-900/40 transition-colors",children:[s.jsx(pi,{size:18})," Check Application Status"]}),Tt&&s.jsxs("button",{onClick:()=>{var Te;return(Te=document.getElementById("affiliate-dashboard"))==null?void 0:Te.scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 bg-green-600 text-white font-bold rounded-full hover:bg-green-500 transition-all shadow-[0_0_20px_rgba(34,197,94,0.4)] flex items-center gap-2",children:["Go to Dashboard ",s.jsx(Mt,{size:20})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[s.jsx("div",{className:"w-16 h-16 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto mb-4 text-green-500 font-bold text-xl shadow-[0_0_15px_rgba(34,197,94,0.3)]",children:"1"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sign Up & Share"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Apply to become a partner. Once approved, share your unique code to start earning."})]}),s.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[s.jsx("div",{className:"w-16 h-16 bg-black border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 text-pink-500 font-bold text-xl shadow-[0_0_15px_rgba(236,72,153,0.3)]",children:"2"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Recruit & Earn"}),s.jsxs("p",{className:"text-gray-400 text-sm",children:["Invite others to join your team. You earn a ",s.jsx("strong",{children:"1% commission"})," on their sales forever!"]})]}),s.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[s.jsx("div",{className:"w-16 h-16 bg-black border-2 border-purple-500 rounded-full flex items-center justify-center mx-auto mb-4 text-purple-500 font-bold text-xl shadow-[0_0_15px_rgba(168,85,247,0.3)]",children:"3"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Get Paid"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"We payout commissions monthly via EFT to your South African bank account."})]})]}),Tt&&s.jsxs("div",{id:"affiliate-dashboard",className:"space-y-8 animate-in slide-in-from-bottom-10 duration-700 pt-8 border-t border-gray-800",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Your Partnership Dashboard"}),s.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",n.name.split(" ")[0],"! Manage your links and earnings."]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Ie,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg text-sm border border-gray-700 flex items-center gap-2",children:[s.jsx(IA,{size:16})," Content Assets"]}),!et.isElite&&s.jsxs("button",{onClick:H,className:"px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:brightness-110",children:[s.jsx(Pr,{size:16})," Go Elite"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:s.jsx(As,{size:24})}),s.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Total Earnings"})]}),s.jsxs("div",{className:"text-3xl font-bold text-white",children:["R",et.balance.toFixed(2)]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Next payout date: 1st of month"})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:s.jsx(mi,{size:24})}),s.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Direct Sales"})]}),s.jsx("div",{className:"text-3xl font-bold text-white",children:et.totalSalesCount}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Value: R",et.totalSalesValue.toFixed(0)]})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:s.jsx(ci,{size:24})}),s.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Current Rate"})]}),s.jsxs("div",{className:"text-3xl font-bold text-white",children:[et.commissionRate,"%"]}),s.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:["Tier: ",et.commissionRate>=20?"Gold Elite":et.commissionRate>=15?"Silver":et.commissionRate>=11?"Bronze":"Starter"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(Ho,{size:20,className:"text-pink-500"})," Your Referral Link"]}),s.jsx("div",{className:"bg-black p-4 rounded-xl border border-gray-700 flex flex-col gap-3",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("code",{className:"flex-1 text-cyan-400 text-sm break-all font-mono bg-zinc-900/50 p-3 rounded border border-gray-800 w-full",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),s.jsxs("button",{onClick:Ye,className:"w-full md:w-auto px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg transition-colors flex items-center justify-center gap-2 border border-gray-600",children:[ke?s.jsx(gt,{size:14}):s.jsx(fg,{size:14}),ke?"Copied!":"Copy Link"]})]})}),s.jsx("div",{className:"mt-4 bg-pink-900/20 p-3 rounded-lg border border-pink-500/20",children:s.jsxs("p",{className:"text-xs text-pink-300",children:[s.jsx("strong",{children:"Tip:"})," Customers get ",s.jsx("strong",{children:"5% OFF"})," when using your code ",s.jsx("code",{children:n.affiliateCode})," at checkout!"]})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-cyan-500/30 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:s.jsx(RN,{size:80,className:"text-cyan-500"})}),s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 relative z-10",children:[s.jsx(mi,{size:20,className:"text-cyan-400"})," Recruitment Center"]}),s.jsx("div",{className:"bg-cyan-900/20 border border-cyan-500/30 p-4 rounded-xl mb-6 relative z-10",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-full text-cyan-400 shrink-0",children:s.jsx(As,{size:16})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-white",children:"Earn 1% Override Commission"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Recruit new affiliates and earn 1% of their sales volume forever. No impact on their earnings!"})]})]})}),s.jsxs("div",{className:"space-y-3 relative z-10",children:[s.jsxs("h4",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:["My Recruits (",z.length,")"]}),z.length>0?s.jsx("div",{className:"max-h-[150px] overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:z.map(Te=>{var ut;return s.jsxs("div",{className:"flex justify-between items-center p-2 bg-black/40 rounded border border-gray-800",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded-full flex items-center justify-center text-[10px] text-gray-400 border border-gray-700",children:Te.name.charAt(0)}),s.jsx("span",{className:"text-xs text-gray-300",children:Te.name})]}),s.jsxs("span",{className:"text-xs text-green-400 font-mono",children:["Sales: R",(ut=Te.affiliateStats)==null?void 0:ut.totalSalesValue.toFixed(0)]})]},Te.id)})}):s.jsx("div",{className:"text-center py-4 border border-dashed border-gray-800 rounded-lg",children:s.jsx("p",{className:"text-xs text-gray-500",children:"No recruits yet. Start building your team!"})})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 relative z-10",children:[s.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"Share your recruitment link:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("code",{className:"flex-1 bg-black p-2 rounded text-[10px] text-gray-400 truncate border border-gray-800",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),s.jsx("button",{onClick:Ye,className:"text-xs text-cyan-400 hover:text-cyan-300 font-bold",children:"Copy"})]})]})]})]})]}),N&&s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-xl",onClick:()=>!B&&E(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-3xl w-full relative z-20 shadow-2xl h-[90vh] flex flex-col animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-800",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(pv,{size:20,className:"text-pink-500"})," Terms & Conditions"]}),s.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-white",children:s.jsx(wn,{size:20})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-8 pr-4",children:[s.jsx("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-4 rounded-lg mb-6 text-yellow-200 text-sm",children:"Please read each section carefully. You must acknowledge each section to proceed."}),W.map((Te,ut)=>s.jsxs("div",{className:"bg-black/30 rounded-xl p-5 border border-gray-800 hover:border-gray-700 transition-colors",children:[s.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:Te.title}),s.jsx("div",{className:"text-sm text-gray-400 leading-relaxed whitespace-pre-wrap font-sans mb-4 pl-2 border-l-2 border-gray-700",children:Te.content}),s.jsxs("label",{className:`flex items-center gap-3 cursor-pointer p-3 rounded-lg transition-all ${ve[ut]?"bg-green-900/20 border border-green-500/30":"bg-zinc-800/50 border border-gray-700 hover:bg-zinc-800"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${ve[ut]?"bg-green-500 border-green-500 text-black":"bg-black border-gray-600 text-transparent"}`,children:s.jsx(gt,{size:14,strokeWidth:4})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:!!ve[ut],onChange:()=>Ze(ut)}),s.jsxs("span",{className:`text-sm font-bold ${ve[ut]?"text-green-400":"text-gray-400"}`,children:["I have read and agree to the ",Te.title]})]})]},ut))]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 flex justify-between items-center",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:[Object.values(ve).filter(Boolean).length," of ",W.length," sections agreed"]}),s.jsxs("button",{onClick:fe,disabled:!B,className:"px-8 py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[B?s.jsx(gt,{size:18}):s.jsx(yc,{size:18}),B?"Confirm Agreement":"Agree to All Sections to Continue"]})]})]})]}),j&&s.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>k(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-yellow-500/50 rounded-2xl p-8 max-w-md w-full relative z-20 shadow-[0_0_50px_rgba(234,179,8,0.2)] animate-in zoom-in-95 duration-200 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-yellow-900/20 border-2 border-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:s.jsx(pi,{size:40,className:"text-yellow-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Under Review"}),s.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed mb-6",children:["Thank you for applying to the Spoil Me Vintage Partnership Program. ",s.jsx("br",{}),s.jsx("br",{}),"Our team is currently reviewing your application details. This process typically takes ",s.jsx("strong",{children:"24-48 hours"}),"."]}),s.jsx("button",{onClick:()=>k(!1),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded-xl transition-colors",children:"Understood"})]})]}),p&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:de}),s.jsx("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-xl w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200 max-h-[95vh] overflow-y-auto",children:K?s.jsx("div",{className:"text-center py-8 px-4",children:s.jsxs("div",{className:"bg-zinc-800 border border-green-500/30 rounded-2xl p-8 shadow-[0_0_40px_rgba(34,197,94,0.1)] relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-cyan-500"}),s.jsx("div",{className:"w-20 h-20 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto shadow-[0_0_20px_rgba(34,197,94,0.4)] mb-6",children:s.jsx(gt,{size:40,className:"text-green-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Received!"}),s.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Thank you, ",s.jsx("strong",{children:P.name}),". Your application has been sent to our admin team for review."]}),s.jsx("button",{onClick:de,className:"mt-8 w-full py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg",children:"Done"})]})}):A?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center border-b border-gray-800 pb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Welcome Back"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Please log in to continue your application."})]}),O&&s.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/50 rounded-lg flex gap-2 items-center text-red-400 text-sm",children:[s.jsx(hg,{size:16})," ",O]}),s.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Email Address"}),s.jsx("input",{type:"email",value:P.email,readOnly:!0,className:"w-full bg-zinc-800 border border-gray-700 rounded-lg p-3 text-gray-400 text-sm cursor-not-allowed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Password"}),s.jsx("input",{type:"password",value:V,onChange:Te=>T(Te.target.value),required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"••••••"})]}),s.jsxs("button",{type:"submit",className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:[s.jsx(AN,{size:18})," Login & Continue Application"]})]}),s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:()=>L(!1),className:"text-xs text-gray-500 hover:text-white underline",children:"Go Back"})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Apply to Partner"}),s.jsx("button",{onClick:de,className:"text-gray-500 hover:text-white",children:s.jsx(wn,{size:24})})]}),y===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl",children:[s.jsxs("h3",{className:"text-purple-400 font-bold mb-2 flex items-center gap-2",children:[s.jsx(yc,{size:18})," Reality Check"]}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"This is a business partnership. Inactive accounts (0 sales in 3 months) may be deactivated."})]}),s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsx("div",{className:`mt-1 w-5 h-5 rounded border flex items-center justify-center ${se?"bg-pink-500 border-pink-500":"border-gray-600"}`,children:se&&s.jsx(gt,{size:14,className:"text-white"})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:se,onChange:Te=>he(Te.target.checked)}),s.jsx("span",{className:"text-sm text-gray-400 group-hover:text-white transition-colors",children:"I understand that this program requires active participation."})]}),s.jsx("button",{disabled:!se,onClick:()=>b(2),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all",children:"Continue"})]}),y===2&&s.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[!n.email&&s.jsxs("div",{className:"p-3 bg-zinc-800 rounded-lg border border-gray-700 mb-4",children:[s.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Create your account to get started:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s.jsx("input",{type:"text",placeholder:"First Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:P.name,onChange:Te=>$({...P,name:Te.target.value})}),s.jsx("input",{type:"text",placeholder:"Surname",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:P.surname,onChange:Te=>$({...P,surname:Te.target.value})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"email",placeholder:"Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:P.email,onChange:Te=>$({...P,email:Te.target.value})}),s.jsx("input",{type:"password",placeholder:"Create Password",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:P.password,onChange:Te=>$({...P,password:Te.target.value})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("input",{type:"date",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:P.dob,onChange:Te=>$({...P,dob:Te.target.value})}),s.jsxs("select",{className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",required:!0,value:P.gender,onChange:Te=>$({...P,gender:Te.target.value}),children:[s.jsx("option",{value:"",children:"Gender"}),s.jsx("option",{value:"Male",children:"Male"}),s.jsx("option",{value:"Female",children:"Female"}),s.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Why do you want to join?"}),s.jsx("textarea",{required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none h-24",placeholder:"Tell us about your audience or marketing plan...",value:P.reason,onChange:Te=>$({...P,reason:Te.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Social Media Links"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Instagram, TikTok, Blog URL...",value:P.socials,onChange:Te=>$({...P,socials:Te.target.value})})]}),s.jsxs("div",{className:"pt-2",children:[s.jsxs("button",{type:"button",onClick:()=>E(!0),className:`w-full flex items-center justify-between p-4 rounded-xl border transition-all ${q?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:[s.jsxs("span",{className:"text-sm font-bold flex items-center gap-2",children:[s.jsx(pv,{size:16})," ",q?"Terms Accepted":"Read Terms & Conditions"]}),q?s.jsx(gc,{size:18}):s.jsx(Mt,{size:16})]}),!q&&s.jsx("p",{className:"text-xs text-red-400 mt-1 text-center",children:"You must accept terms to proceed."})]}),s.jsx("button",{type:"submit",disabled:!q,className:"w-full py-4 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all mt-4",children:"Submit Application"})]})]})})]})]})},VR=()=>{const{user:n,register:e,login:t,processGiftVoucherPurchase:r}=Dt();fs();const[i,l]=I.useState(250),[c,d]=I.useState(""),[p,f]=I.useState(""),[y,b]=I.useState(""),[N,E]=I.useState(""),[j,k]=I.useState("self"),[P,$]=I.useState(0),[q,J]=I.useState(!1),[se,he]=I.useState("register"),[K,F]=I.useState(!1),[A,L]=I.useState(""),[V,T]=I.useState(""),[O,D]=I.useState(""),[ve,Ue]=I.useState(""),[ke,je]=I.useState(""),z=I.useRef(null);I.useEffect(()=>{i>=250&&i<=500?$(100):$(0)},[i]);const we=i+P,W=async()=>{await r(we,{recipientName:c,senderName:p,message:y,whatsappNumber:N,deliveryMethod:j}),z.current&&z.current.submit()},B=()=>{if(!c||!p){alert("Please fill in the 'To' and 'From' fields.");return}n.email?W():J(!0)},Z=async de=>{if(de.preventDefault(),ve!==ke){alert("Passwords do not match!");return}await e({name:A,email:V,birthday:O})&&(J(!1),setTimeout(()=>{W()},500))},ee=async de=>{de.preventDefault(),await t(V,ve)?(J(!1),setTimeout(()=>{W()},500)):alert("Invalid Credentials")};return s.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 space-y-12 relative",children:[s.jsx(vg,{ref:z,amount:i,itemName:`Gift Voucher for ${c}`,email:n.email||V,customStr1:c,customStr2:p,customStr3:y,returnUrl:`${window.location.origin}/#/profile`,cancelUrl:`${window.location.origin}/#/gift-cards`}),q&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>J(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-white",children:se==="register"?"Create Account to Pay":"Sign In to Pay"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["To secure your voucher and ensure delivery, please ",se==="register"?"create a profile":"sign in","."]})]}),se==="register"?s.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(wc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:"text",required:!0,value:A,onChange:de=>L(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Jane Doe"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Od,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:"email",required:!0,value:V,onChange:de=>T(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Birthday (For Birthday Vouchers)"}),s.jsxs("div",{className:"relative",children:[s.jsx(jN,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:"date",required:!0,value:O,onChange:de=>D(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(yc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:K?"text":"password",required:!0,value:ve,onChange:de=>Ue(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"••••••"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Confirm"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:K?"text":"password",required:!0,value:ke,onChange:de=>je(de.target.value),className:"w-full p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"••••••"}),s.jsx("button",{type:"button",onClick:()=>F(!K),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:K?s.jsx(xv,{size:16}):s.jsx(Jp,{size:16})})]})]})]}),s.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500 transition-colors",children:"Create Account & Pay"}),s.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",s.jsx("button",{type:"button",onClick:()=>he("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):s.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(Od,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:"email",required:!0,value:V,onChange:de=>T(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(yc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:K?"text":"password",required:!0,value:ve,onChange:de=>Ue(de.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"••••••"}),s.jsx("button",{type:"button",onClick:()=>F(!K),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:K?s.jsx(xv,{size:16}):s.jsx(Jp,{size:16})})]})]}),s.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500 transition-colors",children:"Sign In & Pay"}),s.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",s.jsx("button",{type:"button",onClick:()=>he("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-white drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Give the Gift of Vintage"}),s.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Create a personalized digital wish card."})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl shadow-xl space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-800",children:[s.jsx("div",{className:"p-2 bg-pink-900/30 text-pink-500 rounded-lg",children:s.jsx(Xt,{size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Customize Voucher"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter details below"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Amount (R)"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"R"}),s.jsx("input",{type:"number",value:i,onChange:de=>l(parseFloat(de.target.value)),className:"w-full bg-black border border-gray-700 rounded-xl py-4 pl-10 pr-4 text-white text-xl font-bold focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all",placeholder:"250",min:"50"})]}),i>=250&&i<=500?s.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs font-bold bg-green-900/20 p-2 rounded border border-green-500/30 animate-in fade-in slide-in-from-top-2",children:[s.jsx(Ir,{size:14}),"Bonus R100 added to voucher value automatically!"]}):s.jsxs("p",{className:"text-xs text-gray-500",children:["Tip: Spend between ",s.jsx("strong",{children:"R250 - R500"})," to get a ",s.jsx("span",{className:"text-pink-500 font-bold",children:"FREE R100"})," bonus!"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"To (Recipient Name)"}),s.jsx("input",{type:"text",value:c,onChange:de=>d(de.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. Sarah"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 flex items-center gap-2",children:[s.jsx(vv,{size:14})," From (Your Name)"]}),s.jsx("input",{type:"text",value:p,onChange:de=>f(de.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. John"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Personal Message"}),s.jsx("textarea",{rows:4,value:y,onChange:de=>b(de.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none resize-none",placeholder:"Write a sweet note...",maxLength:150}),s.jsxs("div",{className:"text-right text-[10px] text-gray-600",children:[y.length,"/150"]})]}),s.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-800",children:[s.jsx("label",{className:"block text-sm font-bold text-gray-300",children:"How should we deliver this?"}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs("div",{onClick:()=>k("self"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${j==="self"?"bg-purple-900/20 border-purple-500 ring-1 ring-purple-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[s.jsx("div",{className:`mt-1 p-1 rounded-full ${j==="self"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400"}`,children:s.jsx(wc,{size:16})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:`text-sm font-bold ${j==="self"?"text-purple-400":"text-gray-300"}`,children:"Send to Me (Higher Success Rate)"}),s.jsx("div",{className:"flex items-center gap-2 mt-1",children:s.jsxs("span",{className:"text-[10px] bg-green-900/40 text-green-400 border border-green-500/30 px-1.5 py-0.5 rounded font-bold flex items-center gap-1",children:[s.jsx(gt,{size:10})," Best Option"]})}),s.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We send the voucher code and link to YOU via notification. You can then forward it via WhatsApp personally."}),j==="self"&&s.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:de=>de.stopPropagation(),children:[s.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[s.jsx(li,{size:12})," Your WhatsApp Number"]}),s.jsx("input",{type:"text",value:N,onChange:de=>E(de.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]}),s.jsxs("div",{onClick:()=>k("recipient"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${j==="recipient"?"bg-pink-900/20 border-pink-500 ring-1 ring-pink-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[s.jsx("div",{className:`mt-1 p-1 rounded-full ${j==="recipient"?"bg-pink-500 text-white":"bg-gray-800 text-gray-400"}`,children:s.jsx(zd,{size:16})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:`text-sm font-bold ${j==="recipient"?"text-pink-400":"text-gray-300"}`,children:"Send directly to Recipient"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We will email or WhatsApp the recipient directly on your behalf."}),j==="recipient"&&s.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:de=>de.stopPropagation(),children:[s.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[s.jsx(vc,{size:12})," Recipient WhatsApp (Optional)"]}),s.jsx("input",{type:"text",value:N,onChange:de=>E(de.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]})]})]}),s.jsxs("button",{onClick:B,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 text-lg",children:[s.jsx(xc,{size:20})," Buy Now & Pay - R",i.toFixed(2)]}),s.jsxs("p",{className:"text-center text-xs text-gray-500 mt-2 flex items-center justify-center gap-1",children:[s.jsx(gt,{size:12,className:"text-green-500"})," Secure Payment via PayFast"]})]}),s.jsxs("div",{className:"sticky top-24",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[s.jsx(xc,{size:16})," Example"]}),s.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),s.jsx("div",{className:"absolute top-0 left-0 p-4 opacity-10 pointer-events-none",children:s.jsx("span",{className:"font-cherry text-8xl text-white leading-none",children:"SV"})}),s.jsxs("div",{className:"relative h-full p-6 md:p-8 flex flex-col justify-between z-20",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-cherry text-xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.3)]",children:"Spoil Me Vintage"}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx(Ir,{size:10,className:"text-cyan-400"}),s.jsx("p",{className:"text-[10px] text-gray-300 tracking-[0.2em] uppercase",children:"Exclusive Voucher"})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"text-2xl md:text-5xl font-bold text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.5)] font-architects",children:["R",we]})})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-center py-2 md:py-4 relative",children:[s.jsxs("p",{className:"font-architects text-lg md:text-2xl text-gray-200 leading-relaxed text-center break-words relative drop-shadow-sm line-clamp-3",children:['"',y||"Treat yourself to something timeless...",'"']}),s.jsx("div",{className:"mx-auto mt-4 md:mt-6 cursor-pointer group w-full md:w-auto flex justify-center",children:s.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-full px-6 py-3 md:px-6 md:py-2 flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(34,211,238,0.2)] hover:bg-cyan-900/30 hover:border-cyan-400 transition-all w-full md:w-auto",children:[s.jsx("span",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs md:text-xs font-bold text-white uppercase tracking-widest group-hover:text-cyan-300 transition-colors",children:"Redeem Now"}),s.jsx(Mt,{size:12,className:"text-cyan-400 group-hover:translate-x-1 transition-transform"})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-800 pt-3 md:pt-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"To"}),s.jsx("p",{className:"text-sm font-bold text-white truncate",children:c||"Recipient Name"})]}),s.jsxs("div",{className:"space-y-1 text-right",children:[s.jsxs("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center justify-end gap-1",children:["From ",s.jsx(vv,{size:10})]}),s.jsx("p",{className:"text-lg font-architects text-cyan-400 truncate",children:p||"Your Name"})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-zinc-900/50 border border-gray-800 rounded-xl p-5 shadow-lg",children:[s.jsxs("h4",{className:"font-bold text-white text-sm mb-3 flex items-center gap-2 border-b border-gray-800 pb-2",children:[s.jsx(gt,{size:14,className:"text-green-400"})," Verified Voucher Features"]}),s.jsxs("ul",{className:"text-xs text-gray-400 space-y-2.5",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Ir,{size:12,className:"text-purple-400 mt-0.5"})," Valid for 3 years from date of purchase."]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(li,{size:12,className:"text-cyan-400 mt-0.5"})," ",s.jsx("span",{className:"text-white font-bold",children:"Smart Link:"}),' Recipient taps "Redeem Now" to auto-apply discount in App.']}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(vc,{size:12,className:"text-green-400 mt-0.5"})," ",s.jsx("span",{className:"text-white font-bold",children:"Instant Delivery"})," via Notification & WhatsApp."]})]})]})]})]})]})},OR=()=>{const{categoryName:n}=um(),{products:e,categories:t}=Dt(),r=decodeURIComponent(n||""),i=t.find(c=>c.name===r),l=e.filter(c=>c.category===r);return I.useEffect(()=>{window.scrollTo(0,0)},[n]),i?s.jsxs("div",{className:"space-y-8 pb-12",children:[s.jsxs("div",{className:"relative h-64 md:h-80 rounded-2xl overflow-hidden bg-zinc-900 border border-gray-800 shadow-2xl group",children:[s.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),s.jsxs("div",{className:"absolute bottom-0 left-0 p-8 w-full",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(Me,{to:"/",className:"text-xs text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[s.jsx(mc,{size:12})," Home"]}),s.jsx("span",{className:"text-gray-600",children:"/"}),s.jsx("span",{className:"text-xs text-pink-500 font-bold tracking-wider uppercase",children:"Collection"})]}),s.jsx("h1",{className:"font-cherry text-4xl md:text-6xl text-white drop-shadow-lg mb-2",children:i.name}),i.description&&s.jsx("p",{className:"text-gray-300 max-w-2xl text-sm md:text-base font-light border-l-4 border-pink-500 pl-4",children:i.description})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(Ir,{size:20,className:"text-cyan-400"}),"Available Treasures (",l.length,")"]})}),l.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:l.map(c=>s.jsx(pr,{product:c},c.id))}):s.jsxs("div",{className:"py-20 text-center border border-dashed border-gray-800 rounded-2xl",children:[s.jsx("p",{className:"text-gray-500",children:"No products found in this collection yet."}),s.jsx(Me,{to:"/",className:"text-pink-500 text-sm mt-4 inline-block hover:underline",children:"Browse other collections"})]})]})]}):s.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Collection Not Found"}),s.jsxs(Me,{to:"/",className:"text-pink-500 hover:text-pink-400 flex items-center gap-2",children:[s.jsx(mc,{size:20})," Back to Home"]})]})},FR=()=>{const{type:n}=um(),{products:e,categories:t}=Dt(),[r,i]=I.useState("newest"),[l,c]=I.useState(!1),[d,p]=I.useState(""),[f,y]=I.useState(""),[b,N]=I.useState(!1);I.useEffect(()=>{window.scrollTo(0,0),c(!1),p(""),y(""),i("newest")},[n]);const{title:E,baseProducts:j}=I.useMemo(()=>{let $="",q=[];switch(n){case"stud":$="Stud Earrings",q=e.filter(J=>J.type==="Stud"||J.isFeaturedStud);break;case"dangle":$="Dangle Earrings",q=e.filter(J=>J.type==="Dangle"||J.isFeaturedDangle);break;case"ring":$="Rings",q=e.filter(J=>J.type==="Ring");break;case"unique":$="Unique Pendants",q=e.filter(J=>J.isUniquePendant);break;case"bracelet":$="Bracelets",q=e.filter(J=>J.type==="Bracelet"||J.isFeaturedBracelet);break;case"watch":$="Watches",q=e.filter(J=>J.isFeaturedWatch);break;case"best":$="Best Sellers",q=e.filter(J=>J.isBestSeller);break;case"sets":$="Jewelry Sets",q=e.filter(J=>J.isJewelrySet);break;default:$="Catalog",q=e}return{title:$,baseProducts:q}},[n,e]),k=I.useMemo(()=>{const $=new Set;return j.forEach(q=>{var J;(J=q.colors)==null||J.forEach(se=>$.add(se))}),Array.from($).sort()},[j]),P=I.useMemo(()=>{let $=[...j];if(l){const q=new Date;$=$.filter(J=>{const se=J.promoStartsAt?new Date(J.promoStartsAt):null,he=J.promoExpiresAt?new Date(J.promoExpiresAt):null;return(J.promoPrice||0)>0&&(!se||se<=q)&&(!he||he>q)})}return d&&($=$.filter(q=>{var J;return(J=q.colors)==null?void 0:J.includes(d)})),f&&($=$.filter(q=>q.category===f)),$.sort((q,J)=>r==="price_asc"?q.price-J.price:r==="price_desc"?J.price-q.price:new Date(J.createdAt).getTime()-new Date(q.createdAt).getTime()),$},[j,l,d,f,r]);return s.jsxs("div",{className:"space-y-8 pb-12 min-h-screen",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 pt-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-gray-500",children:[s.jsxs(Me,{to:"/",className:"hover:text-white flex items-center gap-1",children:[s.jsx(mc,{size:12})," Home"]}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-pink-500 font-bold",children:E})]}),s.jsx("h1",{className:"font-cherry text-3xl md:text-4xl text-white",children:E}),s.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[P.length," Items Found"]})]}),s.jsxs("button",{className:"md:hidden flex items-center gap-2 bg-zinc-800 px-4 py-2 rounded text-white text-sm w-fit",onClick:()=>N(!b),children:[s.jsx(WA,{size:16})," Filters & Sort"]}),s.jsxs("div",{className:`flex-col md:flex-row gap-4 items-start md:items-center bg-zinc-900/80 p-4 rounded-xl border border-gray-800 ${b?"flex":"hidden md:flex"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Sort:"}),s.jsxs("select",{value:r,onChange:$=>i($.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none",children:[s.jsx("option",{value:"newest",children:"Newest"}),s.jsx("option",{value:"price_asc",children:"Price Low-High"}),s.jsx("option",{value:"price_desc",children:"Price High-Low"})]})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none bg-black border border-gray-700 px-3 py-1 rounded hover:border-pink-500 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:l,onChange:$=>c($.target.checked),className:"hidden"}),s.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${l?"bg-pink-600 border-pink-600":"border-gray-500"}`,children:l&&s.jsx(gt,{size:10,className:"text-white"})}),s.jsx("span",{className:`text-sm ${l?"text-pink-400 font-bold":"text-gray-300"}`,children:"Promotions"})]}),s.jsxs("select",{value:f,onChange:$=>y($.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[s.jsx("option",{value:"",children:"All Collections"}),t.map($=>s.jsx("option",{value:$.name,children:$.name},$.id))]}),k.length>0&&s.jsxs("select",{value:d,onChange:$=>p($.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[s.jsx("option",{value:"",children:"All Colors"}),k.map($=>s.jsx("option",{value:$,children:$},$))]}),(l||d||f)&&s.jsx("button",{onClick:()=>{c(!1),p(""),y("")},className:"text-xs text-red-400 hover:text-red-300 underline",children:"Clear"})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:P.map($=>s.jsx(pr,{product:$},$.id))}),P.length===0&&s.jsxs("div",{className:"py-20 text-center bg-zinc-900/30 rounded-xl border border-dashed border-gray-800",children:[s.jsx("p",{className:"text-gray-400",children:"No products found matching your filters."}),s.jsx("button",{onClick:()=>{c(!1),p(""),y("")},className:"mt-4 text-pink-500 font-bold hover:underline",children:"Clear Filters"})]})]})},zR=()=>{const{products:n,isDemoMode:e,resetStore:t,dbConnectionError:r,seedTestUsers:i,runDataDiagnostics:l,simulateAffiliateSale:c,getAllUsers:d,adminAdjustPoints:p}=Dt(),[f,y]=I.useState(null),[b,N]=I.useState(""),[E,j]=I.useState(100),[k,P]=I.useState(null),[$,q]=I.useState([]),[J,se]=I.useState(""),[he,K]=I.useState(null);I.useEffect(()=>{(async()=>{const D=await d();q(D),D.length>0&&se(D[0].id)})()},[d]);const F=[{title:"Total Revenue",value:"R12,450",change:"+12%",icon:As,color:"bg-green-900/30 text-green-400 border-green-500/20"},{title:"Total Orders",value:"154",change:"+8%",icon:no,color:"bg-cyan-900/30 text-cyan-400 border-cyan-500/20"},{title:"Active Users",value:"1,203",change:"+24%",icon:mi,color:"bg-purple-900/30 text-purple-400 border-purple-500/20"},{title:"Products",value:n.length,change:"0%",icon:kN,color:"bg-pink-900/30 text-pink-400 border-pink-500/20"}],A=()=>{const O=l();y(O)},L=async()=>{if(!b)return;P("Processing...");const O=await c(b,E);P(O.message)},V=async()=>{J&&(await p(J,1e3),K(`Added 1000 Points to user ID: ${J}`),setTimeout(()=>K(null),3e3))},T=async()=>{if(!J){alert("Please select a user");return}await p(J,100),K(`Simulated Review: Awarded 100 Points to ${J}`),setTimeout(()=>K(null),3e3)};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Dashboard Overview"}),s.jsxs("div",{className:"flex gap-2",children:[!e&&s.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-3 py-2 rounded hover:bg-purple-900/50 transition-colors",children:[s.jsx(eR,{size:14})," Seed Test Users to DB"]}),e&&s.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-3 py-2 rounded hover:bg-red-900/50 transition-colors",children:[s.jsx(bc,{size:14})," Reset Demo Data"]})]})]}),s.jsxs("div",{className:"bg-zinc-900/50 border-2 border-amber-500/30 p-6 rounded-xl relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 bg-amber-500/20 text-amber-400 px-3 py-1 text-xs font-bold rounded-bl-lg border-l border-b border-amber-500/30",children:"TESTING LAB"}),s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 bg-amber-900/30 text-amber-400 rounded-lg border border-amber-500/30",children:s.jsx(XA,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:"Feature Verification Lab"}),s.jsx("p",{className:"text-gray-400 text-xs",children:"Manually trigger logic to verify Affiliate & Loyalty systems."})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[s.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2 text-sm",children:[s.jsx(As,{size:14,className:"text-green-400"})," Affiliate Sale Simulator"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Affiliate Code"}),s.jsx("input",{type:"text",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:b,onChange:O=>N(O.target.value),placeholder:"e.g. Spoilme-FAY003"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Sale Amount (R)"}),s.jsx("input",{type:"number",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:E,onChange:O=>j(parseFloat(O.target.value))})]}),s.jsx("button",{onClick:L,className:"w-full py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors",children:"Simulate Sale & Commission"}),k&&s.jsx("div",{className:"p-2 bg-zinc-800 rounded text-xs text-green-300 border border-green-500/30 mt-2",children:k})]})]}),s.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[s.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2 text-sm",children:[s.jsx($r,{size:14,className:"text-purple-400"})," Loyalty System Tester"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Select User"}),s.jsxs("select",{className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:J,onChange:O=>se(O.target.value),children:[s.jsx("option",{value:"",children:"-- Select User --"}),$.map(O=>s.jsxs("option",{value:O.id,children:[O.name," (",O.email,")"]},O.id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{onClick:V,className:"py-2 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors",children:"+1000 Points"}),s.jsx("button",{onClick:T,className:"py-2 bg-zinc-700 hover:bg-zinc-600 text-white text-xs font-bold rounded transition-colors",children:"Simulate Review"})]}),he&&s.jsx("div",{className:"p-2 bg-zinc-800 rounded text-xs text-purple-300 border border-purple-500/30 mt-2 animate-pulse",children:he})]})]})]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[s.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[s.jsx(hs,{size:20,className:"text-cyan-400"}),"Shipping & Logistics"]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-black/40 p-4 rounded-lg border border-gray-800",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-bold text-white",children:"PUDO Locker Management"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Access your PUDO dashboard to manage locker shipments, track parcels, and view your account details."})]}),s.jsxs("a",{href:"https://customer.pudo.co.za/dashboard",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Open PUDO Dashboard ",s.jsx(Mo,{size:16})]})]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg relative overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-900/30 text-blue-400 rounded-lg border border-blue-500/30",children:s.jsx(KA,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:"System Doctor"}),s.jsx("p",{className:"text-gray-400 text-xs",children:"Verify database integrity and save functionality."})]})]}),s.jsxs("button",{onClick:A,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded-lg flex items-center gap-2 transition-colors",children:[s.jsx(CN,{size:14})," Run Integrity Check"]})]}),f&&s.jsxs("div",{className:`p-4 rounded-lg border flex items-start gap-3 animate-in slide-in-from-top-2 ${f.status==="success"?"bg-green-900/20 border-green-500/30 text-green-300":"bg-red-900/20 border-red-500/30 text-red-300"}`,children:[f.status==="success"?s.jsx(gt,{size:18,className:"shrink-0 mt-0.5"}):s.jsx(wn,{size:18,className:"shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-sm",children:f.status==="success"?"System Healthy":"Issue Detected"}),s.jsx("p",{className:"text-xs opacity-80",children:f.details})]})]})]}),r&&s.jsxs("div",{className:"bg-red-900/20 border border-red-600/30 p-4 rounded-xl flex items-start gap-4",children:[s.jsx("div",{className:"p-2 bg-red-900/50 text-red-500 rounded-lg",children:s.jsx(MN,{size:20})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-red-500",children:"Firestore Connection Failed"}),s.jsxs("p",{className:"text-xs text-red-200/70 mt-1",children:["Error: ",r,".",s.jsx("br",{}),"Please ensure you have created the ",s.jsx("strong",{children:"Firestore Database"})," in your Firebase Console. Until then, the app is running in ",s.jsx("strong",{children:"Demo Mode"}),"."]})]})]}),e&&!r&&s.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-600/30 p-4 rounded-xl flex items-start gap-4",children:[s.jsx("div",{className:"p-2 bg-yellow-900/50 text-yellow-500 rounded-lg",children:s.jsx(PA,{size:20})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-yellow-500",children:"Running in Demo Mode"}),s.jsx("p",{className:"text-xs text-yellow-200/70 mt-1",children:"Firebase is not configured or unavailable. All changes (Products, Categories) are saved to your browser's Local Storage. Uploading large images might fill your storage limit."})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:F.map((O,D)=>s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg border ${O.color}`,children:s.jsx(O.icon,{size:20})}),s.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${O.change.startsWith("+")?"bg-green-900/30 text-green-400":"bg-gray-800 text-gray-400"}`,children:O.change})]}),s.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:O.title}),s.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:O.value})]},D))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[s.jsx("h3",{className:"font-bold text-white mb-4 text-lg",children:"Recent Activity"}),s.jsx("div",{className:"space-y-4",children:[1,2,3].map((O,D)=>s.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-800 last:border-0",children:[s.jsx("div",{className:"w-10 h-10 bg-black border border-gray-800 rounded-full flex items-center justify-center text-xs font-bold text-gray-500",children:"OR"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-200",children:["Order #492",D," placed"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"2 minutes ago"})]}),s.jsx("div",{className:"ml-auto font-bold text-green-400 text-sm",children:"R129.00"})]},D))})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[s.jsx("h3",{className:"font-bold text-white mb-4 text-lg",children:"Inventory Status"}),s.jsx("div",{className:"space-y-4",children:n.slice(0,4).map(O=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:O.images[0],className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:""}),s.jsx("span",{className:"text-sm text-gray-300 truncate w-40",children:O.name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-24 h-2 bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-pink-500",style:{width:`${Math.min(O.stock,100)}%`}})}),s.jsxs("span",{className:"text-xs font-mono text-gray-500",children:[O.stock," left"]})]})]},O.id))})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let UR,BR;function qR(){return{geminiUrl:UR,vertexUrl:BR}}function $R(n,e,t){var r,i,l;if(!(!((r=n.httpOptions)===null||r===void 0)&&r.baseUrl)){const c=qR();return n.vertexai?(i=c.vertexUrl)!==null&&i!==void 0?i:e:(l=c.geminiUrl)!==null&&l!==void 0?l:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mc{}function rt(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const l=e[i];return l!=null?String(l):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function x(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let f=0;f<p.length;f++){const y=p[f];x(y,e.slice(l+1),t[f])}else for(const f of p)x(f,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];x(p[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else n[r]=t}function g(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const r=e[t];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in n){const l=n[i];return Array.isArray(l)?l.map(c=>g(c,e.slice(t+1))):void 0}else return}else n=n[r]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tn(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ON(n,e){const t=tn(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function FN(n,e){return Array.isArray(e)?e.map(t=>qd(n,t)):[qd(n,e)]}function qd(n,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function HR(n,e){const t=qd(n,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function GR(n,e){const t=qd(n,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Av(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function zN(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>Av(n,t)):[Av(n,e)]}function Xp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Rv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Mv(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function gr(n,e){if(e==null)throw new Error("ContentUnion is required");return Xp(e)?e:{role:"user",parts:zN(n,e)}}function UN(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=gr(n,t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=gr(n,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>gr(n,t)):[gr(n,e)]}function lo(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(Rv(e)||Mv(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[gr(n,e)]}const t=[],r=[],i=Xp(e[0]);for(const l of e){const c=Xp(l);if(c!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)t.push(l);else{if(Rv(l)||Mv(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(l)}}return i||t.push({role:"user",parts:zN(n,r)}),t}function BN(n,e){return e}function qN(n,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function wh(n,e){return e}function _h(n,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function WR(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function co(n,e){if(typeof e!="string")throw new Error("name must be a string");return WR(n,e,"cachedContents")}function $N(n,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function uo(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function HN(n,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KR(n,e){const t={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(t,["codeExecutionResult"],i);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const p=g(e,["functionResponse"]);p!=null&&x(t,["functionResponse"],p);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const y=g(e,["text"]);return y!=null&&x(t,["text"],y),t}function Dv(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>KR(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function JR(){return{}}function YR(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function QR(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],YR(n,r)),t}function XR(n,e){const t={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(t,["googleSearch"],JR());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(t,["googleSearchRetrieval"],QR(n,i));const l=g(e,["codeExecution"]);l!=null&&x(t,["codeExecution"],l);const c=g(e,["functionDeclarations"]);return c!=null&&x(t,["functionDeclarations"],c),t}function ZR(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(t,["allowedFunctionNames"],i),t}function e4(n,e){const t={},r=g(e,["functionCallingConfig"]);return r!=null&&x(t,["functionCallingConfig"],ZR(n,r)),t}function t4(n,e,t){const r={},i=g(e,["ttl"]);t!==void 0&&i!=null&&x(t,["ttl"],i);const l=g(e,["expireTime"]);t!==void 0&&l!=null&&x(t,["expireTime"],l);const c=g(e,["displayName"]);t!==void 0&&c!=null&&x(t,["displayName"],c);const d=g(e,["contents"]);if(t!==void 0&&d!=null){let b=lo(n,d);Array.isArray(b)&&(b=b.map(N=>Dv(n,N))),x(t,["contents"],b)}const p=g(e,["systemInstruction"]);t!==void 0&&p!=null&&x(t,["systemInstruction"],Dv(n,gr(n,p)));const f=g(e,["tools"]);if(t!==void 0&&f!=null){let b=f;Array.isArray(b)&&(b=b.map(N=>XR(n,N))),x(t,["tools"],b)}const y=g(e,["toolConfig"]);return t!==void 0&&y!=null&&x(t,["toolConfig"],e4(n,y)),r}function n4(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["model"],ON(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],t4(n,i,t)),t}function r4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],co(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function s4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],co(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function i4(n,e,t){const r={},i=g(e,["ttl"]);t!==void 0&&i!=null&&x(t,["ttl"],i);const l=g(e,["expireTime"]);return t!==void 0&&l!=null&&x(t,["expireTime"],l),r}function o4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],co(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i4(n,i,t)),t}function a4(n,e,t){const r={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const l=g(e,["pageToken"]);return t!==void 0&&l!=null&&x(t,["_query","pageToken"],l),r}function l4(n,e){const t={},r=g(e,["config"]);return r!=null&&x(t,["config"],a4(n,r,t)),t}function c4(n,e){const t={},r=g(e,["videoMetadata"]);r!=null&&x(t,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(t,["thought"],i);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const p=g(e,["functionCall"]);p!=null&&x(t,["functionCall"],p);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const y=g(e,["inlineData"]);y!=null&&x(t,["inlineData"],y);const b=g(e,["text"]);return b!=null&&x(t,["text"],b),t}function Lv(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c4(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function u4(){return{}}function d4(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function h4(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],d4(n,r)),t}function f4(n,e){const t={},r=g(e,["retrieval"]);r!=null&&x(t,["retrieval"],r),g(e,["googleSearch"])!=null&&x(t,["googleSearch"],u4());const l=g(e,["googleSearchRetrieval"]);l!=null&&x(t,["googleSearchRetrieval"],h4(n,l));const c=g(e,["codeExecution"]);c!=null&&x(t,["codeExecution"],c);const d=g(e,["functionDeclarations"]);return d!=null&&x(t,["functionDeclarations"],d),t}function p4(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(t,["allowedFunctionNames"],i),t}function m4(n,e){const t={},r=g(e,["functionCallingConfig"]);return r!=null&&x(t,["functionCallingConfig"],p4(n,r)),t}function g4(n,e,t){const r={},i=g(e,["ttl"]);t!==void 0&&i!=null&&x(t,["ttl"],i);const l=g(e,["expireTime"]);t!==void 0&&l!=null&&x(t,["expireTime"],l);const c=g(e,["displayName"]);t!==void 0&&c!=null&&x(t,["displayName"],c);const d=g(e,["contents"]);if(t!==void 0&&d!=null){let b=lo(n,d);Array.isArray(b)&&(b=b.map(N=>Lv(n,N))),x(t,["contents"],b)}const p=g(e,["systemInstruction"]);t!==void 0&&p!=null&&x(t,["systemInstruction"],Lv(n,gr(n,p)));const f=g(e,["tools"]);if(t!==void 0&&f!=null){let b=f;Array.isArray(b)&&(b=b.map(N=>f4(n,N))),x(t,["tools"],b)}const y=g(e,["toolConfig"]);return t!==void 0&&y!=null&&x(t,["toolConfig"],m4(n,y)),r}function x4(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["model"],ON(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],g4(n,i,t)),t}function y4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],co(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function v4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],co(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function b4(n,e,t){const r={},i=g(e,["ttl"]);t!==void 0&&i!=null&&x(t,["ttl"],i);const l=g(e,["expireTime"]);return t!==void 0&&l!=null&&x(t,["expireTime"],l),r}function w4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],co(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],b4(n,i,t)),t}function _4(n,e,t){const r={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const l=g(e,["pageToken"]);return t!==void 0&&l!=null&&x(t,["_query","pageToken"],l),r}function N4(n,e){const t={},r=g(e,["config"]);return r!=null&&x(t,["config"],_4(n,r,t)),t}function vd(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["model"]);l!=null&&x(t,["model"],l);const c=g(e,["createTime"]);c!=null&&x(t,["createTime"],c);const d=g(e,["updateTime"]);d!=null&&x(t,["updateTime"],d);const p=g(e,["expireTime"]);p!=null&&x(t,["expireTime"],p);const f=g(e,["usageMetadata"]);return f!=null&&x(t,["usageMetadata"],f),t}function S4(){return{}}function E4(n,e){const t={},r=g(e,["nextPageToken"]);r!=null&&x(t,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>vd(n,c))),x(t,["cachedContents"],l)}return t}function bd(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["model"]);l!=null&&x(t,["model"],l);const c=g(e,["createTime"]);c!=null&&x(t,["createTime"],c);const d=g(e,["updateTime"]);d!=null&&x(t,["updateTime"],d);const p=g(e,["expireTime"]);p!=null&&x(t,["expireTime"],p);const f=g(e,["usageMetadata"]);return f!=null&&x(t,["usageMetadata"],f),t}function C4(){return{}}function k4(n,e){const t={},r=g(e,["nextPageToken"]);r!=null&&x(t,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>bd(n,c))),x(t,["cachedContents"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _c;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(_c||(_c={}));class bg{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};r?typeof r=="object"?c=Object.assign({},r):c=r:c={config:{}},c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(i=c.config)===null||i===void 0?void 0:i.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vv;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Vv||(Vv={}));var Ov;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Ov||(Ov={}));var Fv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Fv||(Fv={}));var zv;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(zv||(zv={}));var Uv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Uv||(Uv={}));var Bv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Bv||(Bv={}));var qv;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(qv||(qv={}));var $v;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})($v||($v={}));var Hv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Hv||(Hv={}));var Gv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Gv||(Gv={}));var Wv;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Wv||(Wv={}));var Kv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Kv||(Kv={}));var $d;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})($d||($d={}));var Jv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Jv||(Jv={}));var Zp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Zp||(Zp={}));var Yv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Yv||(Yv={}));var Qv;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Qv||(Qv={}));var Xv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Xv||(Xv={}));var Zv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Zv||(Zv={}));var eb;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(eb||(eb={}));var tb;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(tb||(tb={}));var nb;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(nb||(nb={}));var rb;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(rb||(rb={}));var sb;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(sb||(sb={}));var ib;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ib||(ib={}));var ob;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ob||(ob={}));var ab;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ab||(ab={}));var lb;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(lb||(lb={}));var cb;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(cb||(cb={}));var ub;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ub||(ub={}));var db;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(db||(db={}));var hb;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(hb||(hb={}));class rd{get text(){var e,t,r,i,l,c,d,p;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",y=!1;const b=[];for(const N of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[E,j]of Object.entries(N))E!=="text"&&E!=="thought"&&(j!==null||j!==void 0)&&b.push(E);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;y=!0,f+=N.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?f:void 0}get data(){var e,t,r,i,l,c,d,p;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const y=[];for(const b of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[N,E]of Object.entries(b))N!=="inlineData"&&(E!==null||E!==void 0)&&y.push(N);b.inlineData&&typeof b.inlineData.data=="string"&&(f+=atob(b.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,r,i,l,c,d,p;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,r,i,l,c,d,p,f;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,r,i,l,c,d,p,f;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.output}}class fb{}class pb{}class mb{}class gb{}class T4{}class xb{}class yb{}class vb{}class P4{}class em{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class j4{}class I4{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A4 extends Mc{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new bg(_c.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=x4(this.apiClient,e);return d=rt("cachedContents",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>bd(this.apiClient,y))}else{const f=n4(this.apiClient,e);return d=rt("cachedContents",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>vd(this.apiClient,y))}}async get(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=y4(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>bd(this.apiClient,y))}else{const f=r4(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>vd(this.apiClient,y))}}async delete(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=v4(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(()=>{const y=C4(),b=new yb;return Object.assign(b,y),b})}else{const f=s4(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(()=>{const y=S4(),b=new yb;return Object.assign(b,y),b})}}async update(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=w4(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>bd(this.apiClient,y))}else{const f=o4(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>vd(this.apiClient,y))}}async listInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=N4(this.apiClient,e);return d=rt("cachedContents",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=k4(this.apiClient,y),N=new vb;return Object.assign(N,b),N})}else{const f=l4(this.apiClient,e);return d=rt("cachedContents",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=E4(this.apiClient,y),N=new vb;return Object.assign(N,b),N})}}}function bb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gn(n){return this instanceof Gn?(this.v=n,this):new Gn(n)}function Hd(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,l=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(E){return function(j){return Promise.resolve(j).then(E,b)}}function d(E,j){r[E]&&(i[E]=function(k){return new Promise(function(P,$){l.push([E,k,P,$])>1||p(E,k)})},j&&(i[E]=j(i[E])))}function p(E,j){try{f(r[E](j))}catch(k){N(l[0][3],k)}}function f(E){E.value instanceof Gn?Promise.resolve(E.value.v).then(y,b):N(l[0][2],E)}function y(E){p("next",E)}function b(E){p("throw",E)}function N(E,j){E(j),l.shift(),l.length&&p(l[0][0],l[0][1])}}function tm(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof bb=="function"?bb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=n[l]&&function(c){return new Promise(function(d,p){c=n[l](c),i(d,p,c.done,c.value)})}}function i(l,c,d,p){Promise.resolve(p).then(function(f){l({value:f,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R4(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:GN(t)}function GN(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function M4(n){if(n.length!==0){if(n[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function D4(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0,i=n[0];for(;r<t;)if(n[r].role==="user")i=n[r],r++;else{const l=[];let c=!0;for(;r<t&&n[r].role==="model";)l.push(n[r]),c&&!GN(n[r])&&(c=!1),r++;c&&(e.push(i),e.push(...l))}return e}class L4{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new V4(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class V4{constructor(e,t,r,i={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=l,this.sendPromise=Promise.resolve(),M4(l)}async sendMessage(e){var t;await this.sendPromise;const r=gr(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c;const p=(c=(l=(await i).candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,f=p?[p]:[];this.recordHistory(r,f)})(),await this.sendPromise,i}async sendMessageStream(e){var t;await this.sendPromise;const r=gr(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const l=await i;return this.processStreamResponse(l,r)}getHistory(e=!1){return e?D4(this.history):this.history}processStreamResponse(e,t){var r,i;return Hd(this,arguments,function*(){var c,d,p,f;const y=[];try{for(var b=!0,N=tm(e),E;E=yield Gn(N.next()),c=E.done,!c;b=!0){f=E.value,b=!1;const j=f;if(R4(j)){const k=(i=(r=j.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;k!==void 0&&y.push(k)}yield yield Gn(j)}}catch(j){d={error:j}}finally{try{!b&&!c&&(p=N.return)&&(yield Gn(p.call(N)))}finally{if(d)throw d.error}}this.recordHistory(t,y)})}recordHistory(e,t){let r=[];t.length>0&&t.every(i=>i.role==="model")?r=t:r.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O4(n,e,t){const r={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const l=g(e,["pageToken"]);return t!==void 0&&l!=null&&x(t,["_query","pageToken"],l),r}function F4(n,e){const t={},r=g(e,["config"]);return r!=null&&x(t,["config"],O4(n,r,t)),t}function z4(n,e){const t={},r=g(e,["details"]);r!=null&&x(t,["details"],r);const i=g(e,["message"]);i!=null&&x(t,["message"],i);const l=g(e,["code"]);return l!=null&&x(t,["code"],l),t}function U4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["mimeType"]);l!=null&&x(t,["mimeType"],l);const c=g(e,["sizeBytes"]);c!=null&&x(t,["sizeBytes"],c);const d=g(e,["createTime"]);d!=null&&x(t,["createTime"],d);const p=g(e,["expirationTime"]);p!=null&&x(t,["expirationTime"],p);const f=g(e,["updateTime"]);f!=null&&x(t,["updateTime"],f);const y=g(e,["sha256Hash"]);y!=null&&x(t,["sha256Hash"],y);const b=g(e,["uri"]);b!=null&&x(t,["uri"],b);const N=g(e,["downloadUri"]);N!=null&&x(t,["downloadUri"],N);const E=g(e,["state"]);E!=null&&x(t,["state"],E);const j=g(e,["source"]);j!=null&&x(t,["source"],j);const k=g(e,["videoMetadata"]);k!=null&&x(t,["videoMetadata"],k);const P=g(e,["error"]);return P!=null&&x(t,["error"],z4(n,P)),t}function B4(n,e){const t={},r=g(e,["file"]);r!=null&&x(t,["file"],U4(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function q4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","file"],HN(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function $4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","file"],HN(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function H4(n,e){const t={},r=g(e,["details"]);r!=null&&x(t,["details"],r);const i=g(e,["message"]);i!=null&&x(t,["message"],i);const l=g(e,["code"]);return l!=null&&x(t,["code"],l),t}function nm(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["mimeType"]);l!=null&&x(t,["mimeType"],l);const c=g(e,["sizeBytes"]);c!=null&&x(t,["sizeBytes"],c);const d=g(e,["createTime"]);d!=null&&x(t,["createTime"],d);const p=g(e,["expirationTime"]);p!=null&&x(t,["expirationTime"],p);const f=g(e,["updateTime"]);f!=null&&x(t,["updateTime"],f);const y=g(e,["sha256Hash"]);y!=null&&x(t,["sha256Hash"],y);const b=g(e,["uri"]);b!=null&&x(t,["uri"],b);const N=g(e,["downloadUri"]);N!=null&&x(t,["downloadUri"],N);const E=g(e,["state"]);E!=null&&x(t,["state"],E);const j=g(e,["source"]);j!=null&&x(t,["source"],j);const k=g(e,["videoMetadata"]);k!=null&&x(t,["videoMetadata"],k);const P=g(e,["error"]);return P!=null&&x(t,["error"],H4(n,P)),t}function G4(n,e){const t={},r=g(e,["nextPageToken"]);r!=null&&x(t,["nextPageToken"],r);const i=g(e,["files"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>nm(n,c))),x(t,["files"],l)}return t}function W4(){return{}}function K4(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J4 extends Mc{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new bg(_c.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>nm(this.apiClient,t))}async listInternal(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=F4(this.apiClient,e);return l=rt("files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const f=G4(this.apiClient,p),y=new P4;return Object.assign(y,f),y})}}async createInternal(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=B4(this.apiClient,e);return l=rt("upload/v1beta/files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(()=>{const p=W4(),f=new j4;return Object.assign(f,p),f})}}async get(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=q4(this.apiClient,e);return l=rt("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>nm(this.apiClient,p))}}async delete(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$4(this.apiClient,e);return l=rt("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(()=>{const p=K4(),f=new I4;return Object.assign(f,p),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y4(n,e){const t={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(t,["codeExecutionResult"],i);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const p=g(e,["functionResponse"]);p!=null&&x(t,["functionResponse"],p);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const y=g(e,["text"]);return y!=null&&x(t,["text"],y),t}function Q4(n,e){const t={},r=g(e,["videoMetadata"]);r!=null&&x(t,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(t,["thought"],i);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const p=g(e,["functionCall"]);p!=null&&x(t,["functionCall"],p);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const y=g(e,["inlineData"]);y!=null&&x(t,["inlineData"],y);const b=g(e,["text"]);return b!=null&&x(t,["text"],b),t}function X4(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Y4(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function Z4(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Q4(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function eM(){return{}}function tM(){return{}}function nM(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function rM(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function sM(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],nM(n,r)),t}function iM(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],rM(n,r)),t}function oM(n,e){const t={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(t,["googleSearch"],eM());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(t,["googleSearchRetrieval"],sM(n,i));const l=g(e,["codeExecution"]);l!=null&&x(t,["codeExecution"],l);const c=g(e,["functionDeclarations"]);return c!=null&&x(t,["functionDeclarations"],c),t}function aM(n,e){const t={},r=g(e,["retrieval"]);r!=null&&x(t,["retrieval"],r),g(e,["googleSearch"])!=null&&x(t,["googleSearch"],tM());const l=g(e,["googleSearchRetrieval"]);l!=null&&x(t,["googleSearchRetrieval"],iM(n,l));const c=g(e,["codeExecution"]);c!=null&&x(t,["codeExecution"],c);const d=g(e,["functionDeclarations"]);return d!=null&&x(t,["functionDeclarations"],d),t}function lM(n,e){const t={},r=g(e,["handle"]);if(r!=null&&x(t,["handle"],r),g(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function cM(n,e){const t={},r=g(e,["handle"]);r!=null&&x(t,["handle"],r);const i=g(e,["transparent"]);return i!=null&&x(t,["transparent"],i),t}function uM(){return{}}function wb(){return{}}function dM(n,e){const t={},r=g(e,["disabled"]);r!=null&&x(t,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&x(t,["startOfSpeechSensitivity"],i);const l=g(e,["endOfSpeechSensitivity"]);l!=null&&x(t,["endOfSpeechSensitivity"],l);const c=g(e,["prefixPaddingMs"]);c!=null&&x(t,["prefixPaddingMs"],c);const d=g(e,["silenceDurationMs"]);return d!=null&&x(t,["silenceDurationMs"],d),t}function hM(n,e){const t={},r=g(e,["disabled"]);r!=null&&x(t,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&x(t,["startOfSpeechSensitivity"],i);const l=g(e,["endOfSpeechSensitivity"]);l!=null&&x(t,["endOfSpeechSensitivity"],l);const c=g(e,["prefixPaddingMs"]);c!=null&&x(t,["prefixPaddingMs"],c);const d=g(e,["silenceDurationMs"]);return d!=null&&x(t,["silenceDurationMs"],d),t}function fM(n,e){const t={},r=g(e,["automaticActivityDetection"]);r!=null&&x(t,["automaticActivityDetection"],dM(n,r));const i=g(e,["activityHandling"]);i!=null&&x(t,["activityHandling"],i);const l=g(e,["turnCoverage"]);return l!=null&&x(t,["turnCoverage"],l),t}function pM(n,e){const t={},r=g(e,["automaticActivityDetection"]);r!=null&&x(t,["automaticActivityDetection"],hM(n,r));const i=g(e,["activityHandling"]);i!=null&&x(t,["activityHandling"],i);const l=g(e,["turnCoverage"]);return l!=null&&x(t,["turnCoverage"],l),t}function mM(n,e){const t={},r=g(e,["targetTokens"]);return r!=null&&x(t,["targetTokens"],r),t}function gM(n,e){const t={},r=g(e,["targetTokens"]);return r!=null&&x(t,["targetTokens"],r),t}function xM(n,e){const t={},r=g(e,["triggerTokens"]);r!=null&&x(t,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&x(t,["slidingWindow"],mM(n,i)),t}function yM(n,e){const t={},r=g(e,["triggerTokens"]);r!=null&&x(t,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&x(t,["slidingWindow"],gM(n,i)),t}function vM(n,e,t){const r={},i=g(e,["generationConfig"]);t!==void 0&&i!=null&&x(t,["setup","generationConfig"],i);const l=g(e,["responseModalities"]);t!==void 0&&l!=null&&x(t,["setup","generationConfig","responseModalities"],l);const c=g(e,["temperature"]);t!==void 0&&c!=null&&x(t,["setup","generationConfig","temperature"],c);const d=g(e,["topP"]);t!==void 0&&d!=null&&x(t,["setup","generationConfig","topP"],d);const p=g(e,["topK"]);t!==void 0&&p!=null&&x(t,["setup","generationConfig","topK"],p);const f=g(e,["maxOutputTokens"]);t!==void 0&&f!=null&&x(t,["setup","generationConfig","maxOutputTokens"],f);const y=g(e,["mediaResolution"]);t!==void 0&&y!=null&&x(t,["setup","generationConfig","mediaResolution"],y);const b=g(e,["seed"]);t!==void 0&&b!=null&&x(t,["setup","generationConfig","seed"],b);const N=g(e,["speechConfig"]);t!==void 0&&N!=null&&x(t,["setup","generationConfig","speechConfig"],N);const E=g(e,["systemInstruction"]);t!==void 0&&E!=null&&x(t,["setup","systemInstruction"],X4(n,gr(n,E)));const j=g(e,["tools"]);if(t!==void 0&&j!=null){let J=_h(n,j);Array.isArray(J)&&(J=J.map(se=>oM(n,wh(n,se)))),x(t,["setup","tools"],J)}const k=g(e,["sessionResumption"]);if(t!==void 0&&k!=null&&x(t,["setup","sessionResumption"],lM(n,k)),g(e,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const P=g(e,["outputAudioTranscription"]);t!==void 0&&P!=null&&x(t,["setup","outputAudioTranscription"],uM());const $=g(e,["realtimeInputConfig"]);t!==void 0&&$!=null&&x(t,["setup","realtimeInputConfig"],fM(n,$));const q=g(e,["contextWindowCompression"]);return t!==void 0&&q!=null&&x(t,["setup","contextWindowCompression"],xM(n,q)),r}function bM(n,e,t){const r={},i=g(e,["generationConfig"]);t!==void 0&&i!=null&&x(t,["setup","generationConfig"],i);const l=g(e,["responseModalities"]);t!==void 0&&l!=null&&x(t,["setup","generationConfig","responseModalities"],l);const c=g(e,["temperature"]);t!==void 0&&c!=null&&x(t,["setup","generationConfig","temperature"],c);const d=g(e,["topP"]);t!==void 0&&d!=null&&x(t,["setup","generationConfig","topP"],d);const p=g(e,["topK"]);t!==void 0&&p!=null&&x(t,["setup","generationConfig","topK"],p);const f=g(e,["maxOutputTokens"]);t!==void 0&&f!=null&&x(t,["setup","generationConfig","maxOutputTokens"],f);const y=g(e,["mediaResolution"]);t!==void 0&&y!=null&&x(t,["setup","generationConfig","mediaResolution"],y);const b=g(e,["seed"]);t!==void 0&&b!=null&&x(t,["setup","generationConfig","seed"],b);const N=g(e,["speechConfig"]);t!==void 0&&N!=null&&x(t,["setup","generationConfig","speechConfig"],N);const E=g(e,["systemInstruction"]);t!==void 0&&E!=null&&x(t,["setup","systemInstruction"],Z4(n,gr(n,E)));const j=g(e,["tools"]);if(t!==void 0&&j!=null){let se=_h(n,j);Array.isArray(se)&&(se=se.map(he=>aM(n,wh(n,he)))),x(t,["setup","tools"],se)}const k=g(e,["sessionResumption"]);t!==void 0&&k!=null&&x(t,["setup","sessionResumption"],cM(n,k));const P=g(e,["inputAudioTranscription"]);t!==void 0&&P!=null&&x(t,["setup","inputAudioTranscription"],wb());const $=g(e,["outputAudioTranscription"]);t!==void 0&&$!=null&&x(t,["setup","outputAudioTranscription"],wb());const q=g(e,["realtimeInputConfig"]);t!==void 0&&q!=null&&x(t,["setup","realtimeInputConfig"],pM(n,q));const J=g(e,["contextWindowCompression"]);return t!==void 0&&J!=null&&x(t,["setup","contextWindowCompression"],yM(n,J)),r}function wM(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["setup","model"],tn(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],vM(n,i,t)),t}function _M(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["setup","model"],tn(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],bM(n,i,t)),t}function NM(){return{}}function SM(){return{}}function EM(){return{}}function CM(){return{}}function kM(n,e){const t={},r=g(e,["media"]);r!=null&&x(t,["mediaChunks"],FN(n,r));const i=g(e,["audio"]);i!=null&&x(t,["audio"],GR(n,i));const l=g(e,["audioStreamEnd"]);l!=null&&x(t,["audioStreamEnd"],l);const c=g(e,["video"]);c!=null&&x(t,["video"],HR(n,c));const d=g(e,["text"]);return d!=null&&x(t,["text"],d),g(e,["activityStart"])!=null&&x(t,["activityStart"],NM()),g(e,["activityEnd"])!=null&&x(t,["activityEnd"],EM()),t}function TM(n,e){const t={},r=g(e,["media"]);if(r!=null&&x(t,["mediaChunks"],FN(n,r)),g(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=g(e,["audioStreamEnd"]);if(i!=null&&x(t,["audioStreamEnd"],i),g(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(g(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return g(e,["activityStart"])!=null&&x(t,["activityStart"],SM()),g(e,["activityEnd"])!=null&&x(t,["activityEnd"],CM()),t}function PM(){return{}}function jM(){return{}}function IM(n,e){const t={},r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(t,["codeExecutionResult"],i);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const p=g(e,["functionResponse"]);p!=null&&x(t,["functionResponse"],p);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const y=g(e,["text"]);return y!=null&&x(t,["text"],y),t}function AM(n,e){const t={},r=g(e,["videoMetadata"]);r!=null&&x(t,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(t,["thought"],i);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const p=g(e,["functionCall"]);p!=null&&x(t,["functionCall"],p);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const y=g(e,["inlineData"]);y!=null&&x(t,["inlineData"],y);const b=g(e,["text"]);return b!=null&&x(t,["text"],b),t}function RM(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>IM(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function MM(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>AM(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function _b(n,e){const t={},r=g(e,["text"]);r!=null&&x(t,["text"],r);const i=g(e,["finished"]);return i!=null&&x(t,["finished"],i),t}function Nb(n,e){const t={},r=g(e,["text"]);r!=null&&x(t,["text"],r);const i=g(e,["finished"]);return i!=null&&x(t,["finished"],i),t}function DM(n,e){const t={},r=g(e,["modelTurn"]);r!=null&&x(t,["modelTurn"],RM(n,r));const i=g(e,["turnComplete"]);i!=null&&x(t,["turnComplete"],i);const l=g(e,["interrupted"]);l!=null&&x(t,["interrupted"],l);const c=g(e,["groundingMetadata"]);c!=null&&x(t,["groundingMetadata"],c);const d=g(e,["generationComplete"]);d!=null&&x(t,["generationComplete"],d);const p=g(e,["inputTranscription"]);p!=null&&x(t,["inputTranscription"],_b(n,p));const f=g(e,["outputTranscription"]);return f!=null&&x(t,["outputTranscription"],_b(n,f)),t}function LM(n,e){const t={},r=g(e,["modelTurn"]);r!=null&&x(t,["modelTurn"],MM(n,r));const i=g(e,["turnComplete"]);i!=null&&x(t,["turnComplete"],i);const l=g(e,["interrupted"]);l!=null&&x(t,["interrupted"],l);const c=g(e,["groundingMetadata"]);c!=null&&x(t,["groundingMetadata"],c);const d=g(e,["generationComplete"]);d!=null&&x(t,["generationComplete"],d);const p=g(e,["inputTranscription"]);p!=null&&x(t,["inputTranscription"],Nb(n,p));const f=g(e,["outputTranscription"]);return f!=null&&x(t,["outputTranscription"],Nb(n,f)),t}function VM(n,e){const t={},r=g(e,["id"]);r!=null&&x(t,["id"],r);const i=g(e,["args"]);i!=null&&x(t,["args"],i);const l=g(e,["name"]);return l!=null&&x(t,["name"],l),t}function OM(n,e){const t={},r=g(e,["args"]);r!=null&&x(t,["args"],r);const i=g(e,["name"]);return i!=null&&x(t,["name"],i),t}function FM(n,e){const t={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>VM(n,l))),x(t,["functionCalls"],i)}return t}function zM(n,e){const t={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>OM(n,l))),x(t,["functionCalls"],i)}return t}function UM(n,e){const t={},r=g(e,["ids"]);return r!=null&&x(t,["ids"],r),t}function BM(n,e){const t={},r=g(e,["ids"]);return r!=null&&x(t,["ids"],r),t}function sd(n,e){const t={},r=g(e,["modality"]);r!=null&&x(t,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&x(t,["tokenCount"],i),t}function id(n,e){const t={},r=g(e,["modality"]);r!=null&&x(t,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&x(t,["tokenCount"],i),t}function qM(n,e){const t={},r=g(e,["promptTokenCount"]);r!=null&&x(t,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&x(t,["cachedContentTokenCount"],i);const l=g(e,["responseTokenCount"]);l!=null&&x(t,["responseTokenCount"],l);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(t,["toolUsePromptTokenCount"],c);const d=g(e,["thoughtsTokenCount"]);d!=null&&x(t,["thoughtsTokenCount"],d);const p=g(e,["totalTokenCount"]);p!=null&&x(t,["totalTokenCount"],p);const f=g(e,["promptTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(j=>sd(n,j))),x(t,["promptTokensDetails"],E)}const y=g(e,["cacheTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(j=>sd(n,j))),x(t,["cacheTokensDetails"],E)}const b=g(e,["responseTokensDetails"]);if(b!=null){let E=b;Array.isArray(E)&&(E=E.map(j=>sd(n,j))),x(t,["responseTokensDetails"],E)}const N=g(e,["toolUsePromptTokensDetails"]);if(N!=null){let E=N;Array.isArray(E)&&(E=E.map(j=>sd(n,j))),x(t,["toolUsePromptTokensDetails"],E)}return t}function $M(n,e){const t={},r=g(e,["promptTokenCount"]);r!=null&&x(t,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&x(t,["cachedContentTokenCount"],i);const l=g(e,["candidatesTokenCount"]);l!=null&&x(t,["responseTokenCount"],l);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(t,["toolUsePromptTokenCount"],c);const d=g(e,["thoughtsTokenCount"]);d!=null&&x(t,["thoughtsTokenCount"],d);const p=g(e,["totalTokenCount"]);p!=null&&x(t,["totalTokenCount"],p);const f=g(e,["promptTokensDetails"]);if(f!=null){let j=f;Array.isArray(j)&&(j=j.map(k=>id(n,k))),x(t,["promptTokensDetails"],j)}const y=g(e,["cacheTokensDetails"]);if(y!=null){let j=y;Array.isArray(j)&&(j=j.map(k=>id(n,k))),x(t,["cacheTokensDetails"],j)}const b=g(e,["candidatesTokensDetails"]);if(b!=null){let j=b;Array.isArray(j)&&(j=j.map(k=>id(n,k))),x(t,["responseTokensDetails"],j)}const N=g(e,["toolUsePromptTokensDetails"]);if(N!=null){let j=N;Array.isArray(j)&&(j=j.map(k=>id(n,k))),x(t,["toolUsePromptTokensDetails"],j)}const E=g(e,["trafficType"]);return E!=null&&x(t,["trafficType"],E),t}function HM(n,e){const t={},r=g(e,["timeLeft"]);return r!=null&&x(t,["timeLeft"],r),t}function GM(n,e){const t={},r=g(e,["timeLeft"]);return r!=null&&x(t,["timeLeft"],r),t}function WM(n,e){const t={},r=g(e,["newHandle"]);r!=null&&x(t,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&x(t,["resumable"],i);const l=g(e,["lastConsumedClientMessageIndex"]);return l!=null&&x(t,["lastConsumedClientMessageIndex"],l),t}function KM(n,e){const t={},r=g(e,["newHandle"]);r!=null&&x(t,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&x(t,["resumable"],i);const l=g(e,["lastConsumedClientMessageIndex"]);return l!=null&&x(t,["lastConsumedClientMessageIndex"],l),t}function JM(n,e){const t={};g(e,["setupComplete"])!=null&&x(t,["setupComplete"],PM());const i=g(e,["serverContent"]);i!=null&&x(t,["serverContent"],DM(n,i));const l=g(e,["toolCall"]);l!=null&&x(t,["toolCall"],FM(n,l));const c=g(e,["toolCallCancellation"]);c!=null&&x(t,["toolCallCancellation"],UM(n,c));const d=g(e,["usageMetadata"]);d!=null&&x(t,["usageMetadata"],qM(n,d));const p=g(e,["goAway"]);p!=null&&x(t,["goAway"],HM(n,p));const f=g(e,["sessionResumptionUpdate"]);return f!=null&&x(t,["sessionResumptionUpdate"],WM(n,f)),t}function YM(n,e){const t={};g(e,["setupComplete"])!=null&&x(t,["setupComplete"],jM());const i=g(e,["serverContent"]);i!=null&&x(t,["serverContent"],LM(n,i));const l=g(e,["toolCall"]);l!=null&&x(t,["toolCall"],zM(n,l));const c=g(e,["toolCallCancellation"]);c!=null&&x(t,["toolCallCancellation"],BM(n,c));const d=g(e,["usageMetadata"]);d!=null&&x(t,["usageMetadata"],$M(n,d));const p=g(e,["goAway"]);p!=null&&x(t,["goAway"],GM(n,p));const f=g(e,["sessionResumptionUpdate"]);return f!=null&&x(t,["sessionResumptionUpdate"],KM(n,f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QM(n,e){const t={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(t,["codeExecutionResult"],i);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const p=g(e,["functionResponse"]);p!=null&&x(t,["functionResponse"],p);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const y=g(e,["text"]);return y!=null&&x(t,["text"],y),t}function Nh(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>QM(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function XM(n,e){const t={};if(g(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=g(e,["category"]);r!=null&&x(t,["category"],r);const i=g(e,["threshold"]);return i!=null&&x(t,["threshold"],i),t}function ZM(){return{}}function eD(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function tD(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],eD(n,r)),t}function nD(n,e){const t={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(t,["googleSearch"],ZM());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(t,["googleSearchRetrieval"],tD(n,i));const l=g(e,["codeExecution"]);l!=null&&x(t,["codeExecution"],l);const c=g(e,["functionDeclarations"]);return c!=null&&x(t,["functionDeclarations"],c),t}function rD(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(t,["allowedFunctionNames"],i),t}function sD(n,e){const t={},r=g(e,["functionCallingConfig"]);return r!=null&&x(t,["functionCallingConfig"],rD(n,r)),t}function iD(n,e){const t={},r=g(e,["voiceName"]);return r!=null&&x(t,["voiceName"],r),t}function oD(n,e){const t={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&x(t,["prebuiltVoiceConfig"],iD(n,r)),t}function aD(n,e){const t={},r=g(e,["voiceConfig"]);r!=null&&x(t,["voiceConfig"],oD(n,r));const i=g(e,["languageCode"]);return i!=null&&x(t,["languageCode"],i),t}function lD(n,e){const t={},r=g(e,["includeThoughts"]);r!=null&&x(t,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&x(t,["thinkingBudget"],i),t}function cD(n,e,t){const r={},i=g(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],Nh(n,gr(n,i)));const l=g(e,["temperature"]);l!=null&&x(r,["temperature"],l);const c=g(e,["topP"]);c!=null&&x(r,["topP"],c);const d=g(e,["topK"]);d!=null&&x(r,["topK"],d);const p=g(e,["candidateCount"]);p!=null&&x(r,["candidateCount"],p);const f=g(e,["maxOutputTokens"]);f!=null&&x(r,["maxOutputTokens"],f);const y=g(e,["stopSequences"]);y!=null&&x(r,["stopSequences"],y);const b=g(e,["responseLogprobs"]);b!=null&&x(r,["responseLogprobs"],b);const N=g(e,["logprobs"]);N!=null&&x(r,["logprobs"],N);const E=g(e,["presencePenalty"]);E!=null&&x(r,["presencePenalty"],E);const j=g(e,["frequencyPenalty"]);j!=null&&x(r,["frequencyPenalty"],j);const k=g(e,["seed"]);k!=null&&x(r,["seed"],k);const P=g(e,["responseMimeType"]);P!=null&&x(r,["responseMimeType"],P);const $=g(e,["responseSchema"]);if($!=null&&x(r,["responseSchema"],BN(n,$)),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const q=g(e,["safetySettings"]);if(t!==void 0&&q!=null){let V=q;Array.isArray(V)&&(V=V.map(T=>XM(n,T))),x(t,["safetySettings"],V)}const J=g(e,["tools"]);if(t!==void 0&&J!=null){let V=_h(n,J);Array.isArray(V)&&(V=V.map(T=>nD(n,wh(n,T)))),x(t,["tools"],V)}const se=g(e,["toolConfig"]);if(t!==void 0&&se!=null&&x(t,["toolConfig"],sD(n,se)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const he=g(e,["cachedContent"]);t!==void 0&&he!=null&&x(t,["cachedContent"],co(n,he));const K=g(e,["responseModalities"]);K!=null&&x(r,["responseModalities"],K);const F=g(e,["mediaResolution"]);F!=null&&x(r,["mediaResolution"],F);const A=g(e,["speechConfig"]);if(A!=null&&x(r,["speechConfig"],aD(n,qN(n,A))),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=g(e,["thinkingConfig"]);return L!=null&&x(r,["thinkingConfig"],lD(n,L)),r}function Sb(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["contents"]);if(i!=null){let c=lo(n,i);Array.isArray(c)&&(c=c.map(d=>Nh(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["generationConfig"],cD(n,l,t)),t}function uD(n,e,t){const r={},i=g(e,["taskType"]);t!==void 0&&i!=null&&x(t,["requests[]","taskType"],i);const l=g(e,["title"]);t!==void 0&&l!=null&&x(t,["requests[]","title"],l);const c=g(e,["outputDimensionality"]);if(t!==void 0&&c!=null&&x(t,["requests[]","outputDimensionality"],c),g(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function dD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["contents"]);i!=null&&x(t,["requests[]","content"],UN(n,i));const l=g(e,["config"]);l!=null&&x(t,["config"],uD(n,l,t));const c=g(e,["model"]);return c!==void 0&&x(t,["requests[]","model"],tn(n,c)),t}function hD(n,e,t){const r={};if(g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=g(e,["numberOfImages"]);t!==void 0&&i!=null&&x(t,["parameters","sampleCount"],i);const l=g(e,["aspectRatio"]);t!==void 0&&l!=null&&x(t,["parameters","aspectRatio"],l);const c=g(e,["guidanceScale"]);if(t!==void 0&&c!=null&&x(t,["parameters","guidanceScale"],c),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=g(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&x(t,["parameters","safetySetting"],d);const p=g(e,["personGeneration"]);t!==void 0&&p!=null&&x(t,["parameters","personGeneration"],p);const f=g(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&x(t,["parameters","includeSafetyAttributes"],f);const y=g(e,["includeRaiReason"]);t!==void 0&&y!=null&&x(t,["parameters","includeRaiReason"],y);const b=g(e,["language"]);t!==void 0&&b!=null&&x(t,["parameters","language"],b);const N=g(e,["outputMimeType"]);t!==void 0&&N!=null&&x(t,["parameters","outputOptions","mimeType"],N);const E=g(e,["outputCompressionQuality"]);if(t!==void 0&&E!=null&&x(t,["parameters","outputOptions","compressionQuality"],E),g(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function fD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const l=g(e,["config"]);return l!=null&&x(t,["config"],hD(n,l,t)),t}function pD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","name"],tn(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function mD(n,e,t){const r={},i=g(e,["displayName"]);t!==void 0&&i!=null&&x(t,["displayName"],i);const l=g(e,["description"]);return t!==void 0&&l!=null&&x(t,["description"],l),r}function gD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","name"],tn(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],mD(n,i,t)),t}function xD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","name"],tn(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function yD(n,e){const t={};if(g(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function vD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["contents"]);if(i!=null){let c=lo(n,i);Array.isArray(c)&&(c=c.map(d=>Nh(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["config"],yD(n,l)),t}function bD(n,e){const t={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["imageBytes"]);r!=null&&x(t,["bytesBase64Encoded"],uo(n,r));const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function wD(n,e,t){const r={},i=g(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&x(t,["parameters","sampleCount"],i),g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=g(e,["durationSeconds"]);if(t!==void 0&&l!=null&&x(t,["parameters","durationSeconds"],l),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=g(e,["aspectRatio"]);if(t!==void 0&&c!=null&&x(t,["parameters","aspectRatio"],c),g(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=g(e,["personGeneration"]);if(t!==void 0&&d!=null&&x(t,["parameters","personGeneration"],d),g(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=g(e,["negativePrompt"]);if(t!==void 0&&p!=null&&x(t,["parameters","negativePrompt"],p),g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function _D(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const l=g(e,["image"]);l!=null&&x(t,["instances[0]","image"],bD(n,l));const c=g(e,["config"]);return c!=null&&x(t,["config"],wD(n,c,t)),t}function ND(n,e){const t={},r=g(e,["videoMetadata"]);r!=null&&x(t,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(t,["thought"],i);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const p=g(e,["functionCall"]);p!=null&&x(t,["functionCall"],p);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const y=g(e,["inlineData"]);y!=null&&x(t,["inlineData"],y);const b=g(e,["text"]);return b!=null&&x(t,["text"],b),t}function ol(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>ND(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function SD(n,e){const t={},r=g(e,["featureSelectionPreference"]);return r!=null&&x(t,["featureSelectionPreference"],r),t}function ED(n,e){const t={},r=g(e,["method"]);r!=null&&x(t,["method"],r);const i=g(e,["category"]);i!=null&&x(t,["category"],i);const l=g(e,["threshold"]);return l!=null&&x(t,["threshold"],l),t}function CD(){return{}}function kD(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function TD(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],kD(n,r)),t}function WN(n,e){const t={},r=g(e,["retrieval"]);r!=null&&x(t,["retrieval"],r),g(e,["googleSearch"])!=null&&x(t,["googleSearch"],CD());const l=g(e,["googleSearchRetrieval"]);l!=null&&x(t,["googleSearchRetrieval"],TD(n,l));const c=g(e,["codeExecution"]);c!=null&&x(t,["codeExecution"],c);const d=g(e,["functionDeclarations"]);return d!=null&&x(t,["functionDeclarations"],d),t}function PD(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(t,["allowedFunctionNames"],i),t}function jD(n,e){const t={},r=g(e,["functionCallingConfig"]);return r!=null&&x(t,["functionCallingConfig"],PD(n,r)),t}function ID(n,e){const t={},r=g(e,["voiceName"]);return r!=null&&x(t,["voiceName"],r),t}function AD(n,e){const t={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&x(t,["prebuiltVoiceConfig"],ID(n,r)),t}function RD(n,e){const t={},r=g(e,["voiceConfig"]);r!=null&&x(t,["voiceConfig"],AD(n,r));const i=g(e,["languageCode"]);return i!=null&&x(t,["languageCode"],i),t}function MD(n,e){const t={},r=g(e,["includeThoughts"]);r!=null&&x(t,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&x(t,["thinkingBudget"],i),t}function DD(n,e,t){const r={},i=g(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],ol(n,gr(n,i)));const l=g(e,["temperature"]);l!=null&&x(r,["temperature"],l);const c=g(e,["topP"]);c!=null&&x(r,["topP"],c);const d=g(e,["topK"]);d!=null&&x(r,["topK"],d);const p=g(e,["candidateCount"]);p!=null&&x(r,["candidateCount"],p);const f=g(e,["maxOutputTokens"]);f!=null&&x(r,["maxOutputTokens"],f);const y=g(e,["stopSequences"]);y!=null&&x(r,["stopSequences"],y);const b=g(e,["responseLogprobs"]);b!=null&&x(r,["responseLogprobs"],b);const N=g(e,["logprobs"]);N!=null&&x(r,["logprobs"],N);const E=g(e,["presencePenalty"]);E!=null&&x(r,["presencePenalty"],E);const j=g(e,["frequencyPenalty"]);j!=null&&x(r,["frequencyPenalty"],j);const k=g(e,["seed"]);k!=null&&x(r,["seed"],k);const P=g(e,["responseMimeType"]);P!=null&&x(r,["responseMimeType"],P);const $=g(e,["responseSchema"]);$!=null&&x(r,["responseSchema"],BN(n,$));const q=g(e,["routingConfig"]);q!=null&&x(r,["routingConfig"],q);const J=g(e,["modelSelectionConfig"]);J!=null&&x(r,["modelConfig"],SD(n,J));const se=g(e,["safetySettings"]);if(t!==void 0&&se!=null){let ve=se;Array.isArray(ve)&&(ve=ve.map(Ue=>ED(n,Ue))),x(t,["safetySettings"],ve)}const he=g(e,["tools"]);if(t!==void 0&&he!=null){let ve=_h(n,he);Array.isArray(ve)&&(ve=ve.map(Ue=>WN(n,wh(n,Ue)))),x(t,["tools"],ve)}const K=g(e,["toolConfig"]);t!==void 0&&K!=null&&x(t,["toolConfig"],jD(n,K));const F=g(e,["labels"]);t!==void 0&&F!=null&&x(t,["labels"],F);const A=g(e,["cachedContent"]);t!==void 0&&A!=null&&x(t,["cachedContent"],co(n,A));const L=g(e,["responseModalities"]);L!=null&&x(r,["responseModalities"],L);const V=g(e,["mediaResolution"]);V!=null&&x(r,["mediaResolution"],V);const T=g(e,["speechConfig"]);T!=null&&x(r,["speechConfig"],RD(n,qN(n,T)));const O=g(e,["audioTimestamp"]);O!=null&&x(r,["audioTimestamp"],O);const D=g(e,["thinkingConfig"]);return D!=null&&x(r,["thinkingConfig"],MD(n,D)),r}function Eb(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["contents"]);if(i!=null){let c=lo(n,i);Array.isArray(c)&&(c=c.map(d=>ol(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["generationConfig"],DD(n,l,t)),t}function LD(n,e,t){const r={},i=g(e,["taskType"]);t!==void 0&&i!=null&&x(t,["instances[]","task_type"],i);const l=g(e,["title"]);t!==void 0&&l!=null&&x(t,["instances[]","title"],l);const c=g(e,["outputDimensionality"]);t!==void 0&&c!=null&&x(t,["parameters","outputDimensionality"],c);const d=g(e,["mimeType"]);t!==void 0&&d!=null&&x(t,["instances[]","mimeType"],d);const p=g(e,["autoTruncate"]);return t!==void 0&&p!=null&&x(t,["parameters","autoTruncate"],p),r}function VD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["contents"]);i!=null&&x(t,["instances[]","content"],UN(n,i));const l=g(e,["config"]);return l!=null&&x(t,["config"],LD(n,l,t)),t}function OD(n,e,t){const r={},i=g(e,["outputGcsUri"]);t!==void 0&&i!=null&&x(t,["parameters","storageUri"],i);const l=g(e,["negativePrompt"]);t!==void 0&&l!=null&&x(t,["parameters","negativePrompt"],l);const c=g(e,["numberOfImages"]);t!==void 0&&c!=null&&x(t,["parameters","sampleCount"],c);const d=g(e,["aspectRatio"]);t!==void 0&&d!=null&&x(t,["parameters","aspectRatio"],d);const p=g(e,["guidanceScale"]);t!==void 0&&p!=null&&x(t,["parameters","guidanceScale"],p);const f=g(e,["seed"]);t!==void 0&&f!=null&&x(t,["parameters","seed"],f);const y=g(e,["safetyFilterLevel"]);t!==void 0&&y!=null&&x(t,["parameters","safetySetting"],y);const b=g(e,["personGeneration"]);t!==void 0&&b!=null&&x(t,["parameters","personGeneration"],b);const N=g(e,["includeSafetyAttributes"]);t!==void 0&&N!=null&&x(t,["parameters","includeSafetyAttributes"],N);const E=g(e,["includeRaiReason"]);t!==void 0&&E!=null&&x(t,["parameters","includeRaiReason"],E);const j=g(e,["language"]);t!==void 0&&j!=null&&x(t,["parameters","language"],j);const k=g(e,["outputMimeType"]);t!==void 0&&k!=null&&x(t,["parameters","outputOptions","mimeType"],k);const P=g(e,["outputCompressionQuality"]);t!==void 0&&P!=null&&x(t,["parameters","outputOptions","compressionQuality"],P);const $=g(e,["addWatermark"]);t!==void 0&&$!=null&&x(t,["parameters","addWatermark"],$);const q=g(e,["enhancePrompt"]);return t!==void 0&&q!=null&&x(t,["parameters","enhancePrompt"],q),r}function FD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const l=g(e,["config"]);return l!=null&&x(t,["config"],OD(n,l,t)),t}function zD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","name"],tn(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function UD(n,e,t){const r={},i=g(e,["displayName"]);t!==void 0&&i!=null&&x(t,["displayName"],i);const l=g(e,["description"]);return t!==void 0&&l!=null&&x(t,["description"],l),r}function BD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],UD(n,i,t)),t}function qD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","name"],tn(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function $D(n,e,t){const r={},i=g(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],ol(n,gr(n,i)));const l=g(e,["tools"]);if(t!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>WN(n,p))),x(t,["tools"],d)}const c=g(e,["generationConfig"]);return t!==void 0&&c!=null&&x(t,["generationConfig"],c),r}function HD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["contents"]);if(i!=null){let c=lo(n,i);Array.isArray(c)&&(c=c.map(d=>ol(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["config"],$D(n,l,t)),t}function GD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["contents"]);if(i!=null){let c=lo(n,i);Array.isArray(c)&&(c=c.map(d=>ol(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["config"],l),t}function WD(n,e){const t={},r=g(e,["gcsUri"]);r!=null&&x(t,["gcsUri"],r);const i=g(e,["imageBytes"]);i!=null&&x(t,["bytesBase64Encoded"],uo(n,i));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function KD(n,e,t){const r={},i=g(e,["numberOfVideos"]);t!==void 0&&i!=null&&x(t,["parameters","sampleCount"],i);const l=g(e,["outputGcsUri"]);t!==void 0&&l!=null&&x(t,["parameters","storageUri"],l);const c=g(e,["fps"]);t!==void 0&&c!=null&&x(t,["parameters","fps"],c);const d=g(e,["durationSeconds"]);t!==void 0&&d!=null&&x(t,["parameters","durationSeconds"],d);const p=g(e,["seed"]);t!==void 0&&p!=null&&x(t,["parameters","seed"],p);const f=g(e,["aspectRatio"]);t!==void 0&&f!=null&&x(t,["parameters","aspectRatio"],f);const y=g(e,["resolution"]);t!==void 0&&y!=null&&x(t,["parameters","resolution"],y);const b=g(e,["personGeneration"]);t!==void 0&&b!=null&&x(t,["parameters","personGeneration"],b);const N=g(e,["pubsubTopic"]);t!==void 0&&N!=null&&x(t,["parameters","pubsubTopic"],N);const E=g(e,["negativePrompt"]);t!==void 0&&E!=null&&x(t,["parameters","negativePrompt"],E);const j=g(e,["enhancePrompt"]);return t!==void 0&&j!=null&&x(t,["parameters","enhancePrompt"],j),r}function JD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],tn(n,r));const i=g(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const l=g(e,["image"]);l!=null&&x(t,["instances[0]","image"],WD(n,l));const c=g(e,["config"]);return c!=null&&x(t,["config"],KD(n,c,t)),t}function YD(n,e){const t={},r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(t,["codeExecutionResult"],i);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const p=g(e,["functionResponse"]);p!=null&&x(t,["functionResponse"],p);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const y=g(e,["text"]);return y!=null&&x(t,["text"],y),t}function QD(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>YD(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function XD(n,e){const t={},r=g(e,["citationSources"]);return r!=null&&x(t,["citations"],r),t}function ZD(n,e){const t={},r=g(e,["content"]);r!=null&&x(t,["content"],QD(n,r));const i=g(e,["citationMetadata"]);i!=null&&x(t,["citationMetadata"],XD(n,i));const l=g(e,["tokenCount"]);l!=null&&x(t,["tokenCount"],l);const c=g(e,["finishReason"]);c!=null&&x(t,["finishReason"],c);const d=g(e,["avgLogprobs"]);d!=null&&x(t,["avgLogprobs"],d);const p=g(e,["groundingMetadata"]);p!=null&&x(t,["groundingMetadata"],p);const f=g(e,["index"]);f!=null&&x(t,["index"],f);const y=g(e,["logprobsResult"]);y!=null&&x(t,["logprobsResult"],y);const b=g(e,["safetyRatings"]);return b!=null&&x(t,["safetyRatings"],b),t}function Cb(n,e){const t={},r=g(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>ZD(n,p))),x(t,["candidates"],d)}const i=g(e,["modelVersion"]);i!=null&&x(t,["modelVersion"],i);const l=g(e,["promptFeedback"]);l!=null&&x(t,["promptFeedback"],l);const c=g(e,["usageMetadata"]);return c!=null&&x(t,["usageMetadata"],c),t}function e5(n,e){const t={},r=g(e,["values"]);return r!=null&&x(t,["values"],r),t}function t5(){return{}}function n5(n,e){const t={},r=g(e,["embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>e5(n,c))),x(t,["embeddings"],l)}return g(e,["metadata"])!=null&&x(t,["metadata"],t5()),t}function r5(n,e){const t={},r=g(e,["bytesBase64Encoded"]);r!=null&&x(t,["imageBytes"],uo(n,r));const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function KN(n,e){const t={},r=g(e,["safetyAttributes","categories"]);r!=null&&x(t,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&x(t,["scores"],i);const l=g(e,["contentType"]);return l!=null&&x(t,["contentType"],l),t}function s5(n,e){const t={},r=g(e,["_self"]);r!=null&&x(t,["image"],r5(n,r));const i=g(e,["raiFilteredReason"]);i!=null&&x(t,["raiFilteredReason"],i);const l=g(e,["_self"]);return l!=null&&x(t,["safetyAttributes"],KN(n,l)),t}function i5(n,e){const t={},r=g(e,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>s5(n,c))),x(t,["generatedImages"],l)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&x(t,["positivePromptSafetyAttributes"],KN(n,i)),t}function o5(n,e){const t={},r=g(e,["baseModel"]);r!=null&&x(t,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&x(t,["createTime"],i);const l=g(e,["updateTime"]);return l!=null&&x(t,["updateTime"],l),t}function kb(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["description"]);l!=null&&x(t,["description"],l);const c=g(e,["version"]);c!=null&&x(t,["version"],c);const d=g(e,["_self"]);d!=null&&x(t,["tunedModelInfo"],o5(n,d));const p=g(e,["inputTokenLimit"]);p!=null&&x(t,["inputTokenLimit"],p);const f=g(e,["outputTokenLimit"]);f!=null&&x(t,["outputTokenLimit"],f);const y=g(e,["supportedGenerationMethods"]);return y!=null&&x(t,["supportedActions"],y),t}function a5(){return{}}function l5(n,e){const t={},r=g(e,["totalTokens"]);r!=null&&x(t,["totalTokens"],r);const i=g(e,["cachedContentTokenCount"]);return i!=null&&x(t,["cachedContentTokenCount"],i),t}function c5(n,e){const t={},r=g(e,["video","uri"]);r!=null&&x(t,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&x(t,["videoBytes"],uo(n,i));const l=g(e,["encoding"]);return l!=null&&x(t,["mimeType"],l),t}function u5(n,e){const t={},r=g(e,["_self"]);return r!=null&&x(t,["video"],c5(n,r)),t}function d5(n,e){const t={},r=g(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>u5(n,d))),x(t,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(t,["raiMediaFilteredCount"],i);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function h5(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["metadata"]);i!=null&&x(t,["metadata"],i);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response","generateVideoResponse"]);return d!=null&&x(t,["response"],d5(n,d)),t}function f5(n,e){const t={},r=g(e,["videoMetadata"]);r!=null&&x(t,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(t,["thought"],i);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const p=g(e,["functionCall"]);p!=null&&x(t,["functionCall"],p);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const y=g(e,["inlineData"]);y!=null&&x(t,["inlineData"],y);const b=g(e,["text"]);return b!=null&&x(t,["text"],b),t}function p5(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>f5(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function m5(n,e){const t={},r=g(e,["citations"]);return r!=null&&x(t,["citations"],r),t}function g5(n,e){const t={},r=g(e,["content"]);r!=null&&x(t,["content"],p5(n,r));const i=g(e,["citationMetadata"]);i!=null&&x(t,["citationMetadata"],m5(n,i));const l=g(e,["finishMessage"]);l!=null&&x(t,["finishMessage"],l);const c=g(e,["finishReason"]);c!=null&&x(t,["finishReason"],c);const d=g(e,["avgLogprobs"]);d!=null&&x(t,["avgLogprobs"],d);const p=g(e,["groundingMetadata"]);p!=null&&x(t,["groundingMetadata"],p);const f=g(e,["index"]);f!=null&&x(t,["index"],f);const y=g(e,["logprobsResult"]);y!=null&&x(t,["logprobsResult"],y);const b=g(e,["safetyRatings"]);return b!=null&&x(t,["safetyRatings"],b),t}function Tb(n,e){const t={},r=g(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(y=>g5(n,y))),x(t,["candidates"],f)}const i=g(e,["createTime"]);i!=null&&x(t,["createTime"],i);const l=g(e,["responseId"]);l!=null&&x(t,["responseId"],l);const c=g(e,["modelVersion"]);c!=null&&x(t,["modelVersion"],c);const d=g(e,["promptFeedback"]);d!=null&&x(t,["promptFeedback"],d);const p=g(e,["usageMetadata"]);return p!=null&&x(t,["usageMetadata"],p),t}function x5(n,e){const t={},r=g(e,["truncated"]);r!=null&&x(t,["truncated"],r);const i=g(e,["token_count"]);return i!=null&&x(t,["tokenCount"],i),t}function y5(n,e){const t={},r=g(e,["values"]);r!=null&&x(t,["values"],r);const i=g(e,["statistics"]);return i!=null&&x(t,["statistics"],x5(n,i)),t}function v5(n,e){const t={},r=g(e,["billableCharacterCount"]);return r!=null&&x(t,["billableCharacterCount"],r),t}function b5(n,e){const t={},r=g(e,["predictions[]","embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>y5(n,c))),x(t,["embeddings"],l)}const i=g(e,["metadata"]);return i!=null&&x(t,["metadata"],v5(n,i)),t}function w5(n,e){const t={},r=g(e,["gcsUri"]);r!=null&&x(t,["gcsUri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(t,["imageBytes"],uo(n,i));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function JN(n,e){const t={},r=g(e,["safetyAttributes","categories"]);r!=null&&x(t,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&x(t,["scores"],i);const l=g(e,["contentType"]);return l!=null&&x(t,["contentType"],l),t}function _5(n,e){const t={},r=g(e,["_self"]);r!=null&&x(t,["image"],w5(n,r));const i=g(e,["raiFilteredReason"]);i!=null&&x(t,["raiFilteredReason"],i);const l=g(e,["_self"]);l!=null&&x(t,["safetyAttributes"],JN(n,l));const c=g(e,["prompt"]);return c!=null&&x(t,["enhancedPrompt"],c),t}function N5(n,e){const t={},r=g(e,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>_5(n,c))),x(t,["generatedImages"],l)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&x(t,["positivePromptSafetyAttributes"],JN(n,i)),t}function S5(n,e){const t={},r=g(e,["endpoint"]);r!=null&&x(t,["name"],r);const i=g(e,["deployedModelId"]);return i!=null&&x(t,["deployedModelId"],i),t}function E5(n,e){const t={},r=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&x(t,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&x(t,["createTime"],i);const l=g(e,["updateTime"]);return l!=null&&x(t,["updateTime"],l),t}function Pb(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["description"]);l!=null&&x(t,["description"],l);const c=g(e,["versionId"]);c!=null&&x(t,["version"],c);const d=g(e,["deployedModels"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(b=>S5(n,b))),x(t,["endpoints"],y)}const p=g(e,["labels"]);p!=null&&x(t,["labels"],p);const f=g(e,["_self"]);return f!=null&&x(t,["tunedModelInfo"],E5(n,f)),t}function C5(){return{}}function k5(n,e){const t={},r=g(e,["totalTokens"]);return r!=null&&x(t,["totalTokens"],r),t}function T5(n,e){const t={},r=g(e,["tokensInfo"]);return r!=null&&x(t,["tokensInfo"],r),t}function P5(n,e){const t={},r=g(e,["gcsUri"]);r!=null&&x(t,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(t,["videoBytes"],uo(n,i));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function j5(n,e){const t={},r=g(e,["_self"]);return r!=null&&x(t,["video"],P5(n,r)),t}function I5(n,e){const t={},r=g(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>j5(n,d))),x(t,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(t,["raiMediaFilteredCount"],i);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function A5(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["metadata"]);i!=null&&x(t,["metadata"],i);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],I5(n,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function M5(n,e,t){let r,i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),n.isVertexAI()?r=YM(n,i):r=JM(n,i),e(r)}class D5{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r,i,l;const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const f=F5(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())p=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(f);else{const se=this.apiClient.getApiKey();p=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateContent?key=${se}`}let y=()=>{};const b=new Promise(se=>{y=se}),N=e.callbacks,E=function(){var se;(se=N==null?void 0:N.onopen)===null||se===void 0||se.call(N),y({})},j=this.apiClient,k={onopen:E,onmessage:se=>{M5(j,N.onmessage,se)},onerror:(t=N==null?void 0:N.onerror)!==null&&t!==void 0?t:function(se){},onclose:(r=N==null?void 0:N.onclose)!==null&&r!==void 0?r:function(se){}},P=this.webSocketFactory.create(p,O5(f),k);P.connect(),await b;let $=tn(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const se=this.apiClient.getProject(),he=this.apiClient.getLocation();$=`projects/${se}/locations/${he}/`+$}let q={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[$d.AUDIO]}:e.config.responseModalities=[$d.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?q=_M(this.apiClient,J):q=wM(this.apiClient,J),delete q.config,P.send(JSON.stringify(q)),new V5(P,this.apiClient)}}const L5={turnComplete:!0};class V5{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=lo(e,t.turns),e.isVertexAI()?r=r.map(i=>ol(e,i)):r=r.map(i=>Nh(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const l of r){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(R5)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},L5),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:TM(this.apiClient,e)}:t={realtimeInput:kM(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function O5(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function F5(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z5 extends Mc{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>await this.generateContentInternal(t),this.generateContentStream=async t=>await this.generateContentStreamInternal(t),this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let l;const c=[];if(r!=null&&r.generatedImages)for(const p of r.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((i=p==null?void 0:p.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l}:d={generatedImages:c},d})}async generateContentInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=Eb(this.apiClient,e);return d=rt("{model}:generateContent",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=Tb(this.apiClient,y),N=new rd;return Object.assign(N,b),N})}else{const f=Sb(this.apiClient,e);return d=rt("{model}:generateContent",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=Cb(this.apiClient,y),N=new rd;return Object.assign(N,b),N})}}async generateContentStreamInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=Eb(this.apiClient,e);d=rt("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f.config,delete f._url,delete f._query;const y=this.apiClient;return c=y.requestStream({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),c.then(function(b){return Hd(this,arguments,function*(){var N,E,j,k;try{for(var P=!0,$=tm(b),q;q=yield Gn($.next()),N=q.done,!N;P=!0){k=q.value,P=!1;const se=Tb(y,yield Gn(k.json())),he=new rd;Object.assign(he,se),yield yield Gn(he)}}catch(J){E={error:J}}finally{try{!P&&!N&&(j=$.return)&&(yield Gn(j.call($)))}finally{if(E)throw E.error}}})})}else{const f=Sb(this.apiClient,e);d=rt("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f.config,delete f._url,delete f._query;const y=this.apiClient;return c=y.requestStream({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(b){return Hd(this,arguments,function*(){var N,E,j,k;try{for(var P=!0,$=tm(b),q;q=yield Gn($.next()),N=q.done,!N;P=!0){k=q.value,P=!1;const se=Cb(y,yield Gn(k.json())),he=new rd;Object.assign(he,se),yield yield Gn(he)}}catch(J){E={error:J}}finally{try{!P&&!N&&(j=$.return)&&(yield Gn(j.call($)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=VD(this.apiClient,e);return d=rt("{model}:predict",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=b5(this.apiClient,y),N=new fb;return Object.assign(N,b),N})}else{const f=dD(this.apiClient,e);return d=rt("{model}:batchEmbedContents",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=n5(this.apiClient,y),N=new fb;return Object.assign(N,b),N})}}async generateImagesInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=FD(this.apiClient,e);return d=rt("{model}:predict",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=N5(this.apiClient,y),N=new pb;return Object.assign(N,b),N})}else{const f=fD(this.apiClient,e);return d=rt("{model}:predict",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=i5(this.apiClient,y),N=new pb;return Object.assign(N,b),N})}}async get(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=zD(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>Pb(this.apiClient,y))}else{const f=pD(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>kb(this.apiClient,y))}}async update(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=BD(this.apiClient,e);return d=rt("{model}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>Pb(this.apiClient,y))}else{const f=gD(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>kb(this.apiClient,y))}}async delete(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=qD(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(()=>{const y=C5(),b=new mb;return Object.assign(b,y),b})}else{const f=xD(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(()=>{const y=a5(),b=new mb;return Object.assign(b,y),b})}}async countTokens(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=HD(this.apiClient,e);return d=rt("{model}:countTokens",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=k5(this.apiClient,y),N=new gb;return Object.assign(N,b),N})}else{const f=vD(this.apiClient,e);return d=rt("{model}:countTokens",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=l5(this.apiClient,y),N=new gb;return Object.assign(N,b),N})}}async computeTokens(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI()){const d=GD(this.apiClient,e);return l=rt("{model}:computeTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const f=T5(this.apiClient,p),y=new T4;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=JD(this.apiClient,e);return d=rt("{model}:predictLongRunning",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>A5(this.apiClient,y))}else{const f=_D(this.apiClient,e);return d=rt("{model}:predictLongRunning",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>h5(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U5(n,e){const t={},r=g(e,["operationName"]);r!=null&&x(t,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function B5(n,e){const t={},r=g(e,["operationName"]);r!=null&&x(t,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function q5(n,e){const t={},r=g(e,["operationName"]);r!=null&&x(t,["operationName"],r);const i=g(e,["resourceName"]);i!=null&&x(t,["_url","resourceName"],i);const l=g(e,["config"]);return l!=null&&x(t,["config"],l),t}function $5(n,e){const t={},r=g(e,["video","uri"]);r!=null&&x(t,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&x(t,["videoBytes"],uo(n,i));const l=g(e,["encoding"]);return l!=null&&x(t,["mimeType"],l),t}function H5(n,e){const t={},r=g(e,["_self"]);return r!=null&&x(t,["video"],$5(n,r)),t}function G5(n,e){const t={},r=g(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>H5(n,d))),x(t,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(t,["raiMediaFilteredCount"],i);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function W5(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["metadata"]);i!=null&&x(t,["metadata"],i);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response","generateVideoResponse"]);return d!=null&&x(t,["response"],G5(n,d)),t}function K5(n,e){const t={},r=g(e,["gcsUri"]);r!=null&&x(t,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(t,["videoBytes"],uo(n,i));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function J5(n,e){const t={},r=g(e,["_self"]);return r!=null&&x(t,["video"],K5(n,r)),t}function Y5(n,e){const t={},r=g(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>J5(n,d))),x(t,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(t,["raiMediaFilteredCount"],i);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function jb(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["metadata"]);i!=null&&x(t,["metadata"],i);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],Y5(n,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q5 extends Mc{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let l;return r&&"httpOptions"in r&&(l=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:t.name,config:r})}async getVideosOperationInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=B5(this.apiClient,e);return d=rt("{operationName}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>jb(this.apiClient,y))}else{const f=U5(this.apiClient,e);return d=rt("{operationName}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>W5(this.apiClient,y))}}async fetchPredictVideosOperationInternal(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI()){const d=q5(this.apiClient,e);return l=rt("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>jb(this.apiClient,p))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const X5="Content-Type",Z5="X-Server-Timeout",e3="User-Agent",t3="x-goog-api-client",n3="0.12.0",r3=`google-genai-sdk/${n3}`,s3="v1beta1",i3="v1beta",Ib=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class YN extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class rm extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class o3{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:s3,this.getProject()||this.getLocation()?(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(i.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:i3,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))i.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(i,l,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,l]of Object.entries(t))typeof l=="object"?r[i]=Object.assign(Object.assign({},r[i]),l):l!==void 0&&(r[i]=l);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(i,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r){if(t&&t.timeout||r){const i=new AbortController,l=i.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>i.abort(),t.timeout),r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=l}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await Ab(i),new em(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await Ab(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return Hd(this,arguments,function*(){const i=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield Gn(i.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=l.decode(p);try{const b=JSON.parse(f);if("error"in b){const N=JSON.parse(JSON.stringify(b.error)),E=N.status,j=N.code,k=`got status: ${E}. ${JSON.stringify(b)}`;if(j>=400&&j<500)throw new YN(k);if(j>=500&&j<600)throw new rm(k)}}catch(b){const N=b;if(N.name==="ClientError"||N.name==="ServerError")throw b}c+=f;let y=c.match(Ib);for(;y;){const b=y[1];try{const N=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Gn(new em(N)),c=c.slice(y[0].length),y=c.match(Ib)}catch(N){throw new Error(`exception parsing stream chunk ${b}. ${N}`)}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=r3+" "+this.clientOptions.userAgentExtra;return e[e3]=t,e[t3]=t,e[X5]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))t.append(r,i);e.timeout&&e.timeout>0&&t.append(Z5,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);i.sizeBytes=String(c.size);const d=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=d;const p=await this.fetchUploadUrl(i,t);return l.upload(e,p,this)}async fetchUploadUrl(e,t){var r;let i={};t!=null&&t.httpOptions?i=t.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:rt("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:i});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(r=c==null?void 0:c.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function Ab(n){var e;if(n===void 0)throw new rm("response is undefined");if(!n.ok){const t=n.status,r=n.statusText;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const l=`got status: ${t} ${r}. ${JSON.stringify(i)}`;throw t>=400&&t<500?new YN(l):t>=500&&t<600?new rm(l):new Error(l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a3(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],r);const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function l3(n,e,t){const r={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const l=g(e,["pageToken"]);t!==void 0&&l!=null&&x(t,["_query","pageToken"],l);const c=g(e,["filter"]);return t!==void 0&&c!=null&&x(t,["_query","filter"],c),r}function c3(n,e){const t={},r=g(e,["config"]);return r!=null&&x(t,["config"],l3(n,r,t)),t}function u3(n,e){const t={},r=g(e,["textInput"]);r!=null&&x(t,["textInput"],r);const i=g(e,["output"]);return i!=null&&x(t,["output"],i),t}function d3(n,e){const t={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>u3(n,l))),x(t,["examples","examples"],i)}return t}function h3(n,e,t){const r={};if(g(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=g(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&x(t,["displayName"],i),g(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=g(e,["epochCount"]);t!==void 0&&l!=null&&x(t,["tuningTask","hyperparameters","epochCount"],l);const c=g(e,["learningRateMultiplier"]);if(c!=null&&x(r,["tuningTask","hyperparameters","learningRateMultiplier"],c),g(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=g(e,["batchSize"]);t!==void 0&&d!=null&&x(t,["tuningTask","hyperparameters","batchSize"],d);const p=g(e,["learningRate"]);return t!==void 0&&p!=null&&x(t,["tuningTask","hyperparameters","learningRate"],p),r}function f3(n,e){const t={},r=g(e,["baseModel"]);r!=null&&x(t,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&x(t,["tuningTask","trainingData"],d3(n,i));const l=g(e,["config"]);return l!=null&&x(t,["config"],h3(n,l,t)),t}function p3(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],r);const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function m3(n,e,t){const r={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const l=g(e,["pageToken"]);t!==void 0&&l!=null&&x(t,["_query","pageToken"],l);const c=g(e,["filter"]);return t!==void 0&&c!=null&&x(t,["_query","filter"],c),r}function g3(n,e){const t={},r=g(e,["config"]);return r!=null&&x(t,["config"],m3(n,r,t)),t}function x3(n,e,t){const r={},i=g(e,["gcsUri"]);if(t!==void 0&&i!=null&&x(t,["supervisedTuningSpec","trainingDatasetUri"],i),g(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function y3(n,e){const t={},r=g(e,["gcsUri"]);return r!=null&&x(t,["validationDatasetUri"],r),t}function v3(n,e,t){const r={},i=g(e,["validationDataset"]);t!==void 0&&i!=null&&x(t,["supervisedTuningSpec"],y3(n,i));const l=g(e,["tunedModelDisplayName"]);t!==void 0&&l!=null&&x(t,["tunedModelDisplayName"],l);const c=g(e,["description"]);t!==void 0&&c!=null&&x(t,["description"],c);const d=g(e,["epochCount"]);t!==void 0&&d!=null&&x(t,["supervisedTuningSpec","hyperParameters","epochCount"],d);const p=g(e,["learningRateMultiplier"]);t!==void 0&&p!=null&&x(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],p);const f=g(e,["adapterSize"]);if(t!==void 0&&f!=null&&x(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),g(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function b3(n,e){const t={},r=g(e,["baseModel"]);r!=null&&x(t,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&x(t,["supervisedTuningSpec","trainingDatasetUri"],x3(n,i,t));const l=g(e,["config"]);return l!=null&&x(t,["config"],v3(n,l,t)),t}function w3(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["model"],r);const i=g(e,["name"]);return i!=null&&x(t,["endpoint"],i),t}function QN(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["state"]);i!=null&&x(t,["state"],$N(n,i));const l=g(e,["createTime"]);l!=null&&x(t,["createTime"],l);const c=g(e,["tuningTask","startTime"]);c!=null&&x(t,["startTime"],c);const d=g(e,["tuningTask","completeTime"]);d!=null&&x(t,["endTime"],d);const p=g(e,["updateTime"]);p!=null&&x(t,["updateTime"],p);const f=g(e,["description"]);f!=null&&x(t,["description"],f);const y=g(e,["baseModel"]);y!=null&&x(t,["baseModel"],y);const b=g(e,["_self"]);b!=null&&x(t,["tunedModel"],w3(n,b));const N=g(e,["distillationSpec"]);N!=null&&x(t,["distillationSpec"],N);const E=g(e,["experiment"]);E!=null&&x(t,["experiment"],E);const j=g(e,["labels"]);j!=null&&x(t,["labels"],j);const k=g(e,["pipelineJob"]);k!=null&&x(t,["pipelineJob"],k);const P=g(e,["tunedModelDisplayName"]);return P!=null&&x(t,["tunedModelDisplayName"],P),t}function _3(n,e){const t={},r=g(e,["nextPageToken"]);r!=null&&x(t,["nextPageToken"],r);const i=g(e,["tunedModels"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>QN(n,c))),x(t,["tuningJobs"],l)}return t}function N3(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["metadata"]);i!=null&&x(t,["metadata"],i);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);return c!=null&&x(t,["error"],c),t}function S3(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["model"],r);const i=g(e,["endpoint"]);return i!=null&&x(t,["endpoint"],i),t}function sm(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["state"]);i!=null&&x(t,["state"],$N(n,i));const l=g(e,["createTime"]);l!=null&&x(t,["createTime"],l);const c=g(e,["startTime"]);c!=null&&x(t,["startTime"],c);const d=g(e,["endTime"]);d!=null&&x(t,["endTime"],d);const p=g(e,["updateTime"]);p!=null&&x(t,["updateTime"],p);const f=g(e,["error"]);f!=null&&x(t,["error"],f);const y=g(e,["description"]);y!=null&&x(t,["description"],y);const b=g(e,["baseModel"]);b!=null&&x(t,["baseModel"],b);const N=g(e,["tunedModel"]);N!=null&&x(t,["tunedModel"],S3(n,N));const E=g(e,["supervisedTuningSpec"]);E!=null&&x(t,["supervisedTuningSpec"],E);const j=g(e,["tuningDataStats"]);j!=null&&x(t,["tuningDataStats"],j);const k=g(e,["encryptionSpec"]);k!=null&&x(t,["encryptionSpec"],k);const P=g(e,["partnerModelTuningSpec"]);P!=null&&x(t,["partnerModelTuningSpec"],P);const $=g(e,["distillationSpec"]);$!=null&&x(t,["distillationSpec"],$);const q=g(e,["experiment"]);q!=null&&x(t,["experiment"],q);const J=g(e,["labels"]);J!=null&&x(t,["labels"],J);const se=g(e,["pipelineJob"]);se!=null&&x(t,["pipelineJob"],se);const he=g(e,["tunedModelDisplayName"]);return he!=null&&x(t,["tunedModelDisplayName"],he),t}function E3(n,e){const t={},r=g(e,["nextPageToken"]);r!=null&&x(t,["nextPageToken"],r);const i=g(e,["tuningJobs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>sm(n,c))),x(t,["tuningJobs"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C3 extends Mc{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new bg(_c.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const r=await this.tuneMldevInternal(t);let i="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?i=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(i=r.name.split("/operations/")[0]),{name:i,state:Zp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=p3(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>sm(this.apiClient,y))}else{const f=a3(this.apiClient,e);return d=rt("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>QN(this.apiClient,y))}}async listInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=g3(this.apiClient,e);return d=rt("tuningJobs",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=E3(this.apiClient,y),N=new xb;return Object.assign(N,b),N})}else{const f=c3(this.apiClient,e);return d=rt("tunedModels",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=_3(this.apiClient,y),N=new xb;return Object.assign(N,b),N})}}async tuneInternal(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI()){const d=b3(this.apiClient,e);return l=rt("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>sm(this.apiClient,p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=f3(this.apiClient,e);return l=rt("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>N3(this.apiClient,p))}}}const k3=1024*1024*8;async function T3(n,e,t){var r,i;let l=0,c=0,d=new em(new Response),p="upload";for(l=n.size;c<l;){const y=Math.min(k3,l-c),b=n.slice(c,c+y);if(c+y>=l&&(p+=", finalize"),d=await t.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(y)}}}),c+=y,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((i=d==null?void 0:d.headers)===null||i===void 0?void 0:i["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function P3(n){return{size:n.size,type:n.type}}class j3{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await T3(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await P3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class I3{create(e,t,r){return new A3(e,t,r)}}class A3{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rb="x-goog-api-key";class R3{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(Rb)===null&&e.append(Rb,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M3="gl-node/";class D3{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=$R(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new R3(this.apiKey);this.apiClient=new o3({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:M3+"web",uploader:new j3}),this.models=new z5(this.apiClient),this.live=new D5(this.apiClient,i,new I3),this.chats=new L4(this.models,this.apiClient),this.caches=new A4(this.apiClient),this.files=new J4(this.apiClient),this.operations=new Q5(this.apiClient),this.tunings=new C3(this.apiClient)}}const L3="PLACEHOLDER_API_KEY",Dc=()=>new D3({apiKey:L3}),V3=async(n,e,t)=>{const r=Dc();if(!r)return"AI Generation unavailable (Missing API Key).";try{return(await r.models.generateContent({model:"gemini-2.5-flash",contents:`Write a compelling, SEO-friendly product description for an e-commerce product.
      
      Product Name: ${n}
      Category: ${e}
      Keywords/Features: ${t}
      
      Tone: Professional, persuasive, and enthusiastic. 
      Keep it under 150 words.`})).text||"Could not generate description."}catch(i){return console.error("Gemini API Error:",i),"Error generating description. Please try again."}},O3=async(n,e)=>{const t=Dc();if(!t)return null;const r=n.replace(/^data:image\/\w+;base64,/,"");try{const l=(await t.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:r}},{text:`You are a fashion merchandising expert for a specialized jewelry store. Analyze this image of a ${e||"jewelry product"}.
            
            Generate the following JSON object:
            {
              "name": "A short, catchy, premium product name",
              "description": "A short, powerful, attractive description (max 3 sentences) that sells the product emotionally.",
              "whenAndHowToWear": "Short, powerful advice on when and how to wear this item (max 2 sentences).",
              "tags": ["Array", "of", "5", "jewelry-specific", "tags"],
              "seoKeywords": ["Array", "of", "5", "strong", "SEO", "keywords"],
              "colors": ["List", "of", "dominant", "product", "colors"]
            }
            
            CRITICAL INSTRUCTIONS:
            1. **Tags**: STRICTLY JEWELRY ONLY. Allowed: Materials (Gold, Resin, Silver, Gemstone), Types (Ring, Stud, Choker, Pendant), Styles (Art Deco, Vintage, Boho, Minimalist), Techniques (Filigree, Wire Wrap). 
               FORBIDDEN: "Fashion", "Style", "Woman", "Girl", "Cute", "Gift", "Love", "Trend", "Beautiful", "Accessory".
            2. **Colors**: STRICTLY PRODUCT ONLY. Ignore background, skin, or prop colors. If the ring is silver and the stone is red, output ["Silver", "Red"]. Do not output "White" if the background is white.
            
            Return ONLY raw JSON.`}]},config:{responseMimeType:"application/json"}})).text;return l?JSON.parse(l):null}catch(i){return console.error("Gemini Image Analysis Error:",i),null}},F3=async(n,e)=>{const t=Dc();if(!t)return[];try{const i=(await t.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${e} unique South African product reviews for a jewelry item named "${n}".
      
      CRITICAL INSTRUCTIONS:
      1. **Persona**: Use ONLY Female names.
      2. **Diversity**: Mix names from Zulu, Xhosa, Afrikaans, English, and Coloured backgrounds.
      3. **Locations**: Use specific South African towns (e.g., Paarl, Benoni, Mthatha, Umlazi, George, Soweto, Ballito, Bloemfontein), NOT just "Cape Town" or "JHB".
      4. **Language Mixing**: 
         - Some reviews must mix English with Afrikaans (e.g., "Baie nice", "Lekker", "Te oulik").
         - Some reviews must mix English with Xhosa/Zulu slang (e.g., "Yho", "Shame", "Stunning shem", "Haikona").
         - Keep it natural.
      5. **Realism**: Include occasional spelling mistakes (e.g., "realy", "awsome") and casual grammar.
      6. **Rating**: Randomly between 3.5 and 5.0 stars.
      7. **Content**: Short, punchy comments about quality, delivery, or how it looks.
      8. **Dates**: Random dates strictly between January 1st, 2025 and today (Format: YYYY-MM-DD). Do NOT generate 2024 dates.

      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return i?JSON.parse(i).map(c=>({...c,id:`rev_ai_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(r){return console.error("Gemini Review Generation Error:",r),[]}},z3=async n=>{const e=Dc();if(!e)return[];try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${n} unique South African reviews specifically for "One of a Kind" handmade wire-wrapped pendants.
      
      CRITICAL INSTRUCTIONS:
      1. **Context**: These are unique, single items. The reviews should NOT mention specific colors or stones (like "love the blue stone") because every piece is different.
      2. **Focus**: Focus on the "surprise" element, the uniqueness, the wire-wrapping craftsmanship, the packaging, and the fact that nobody else has this exact piece.
      3. **Persona**: Female names, South African diversity (Zulu, Xhosa, Afrikaans, English).
      4. **Locations**: Specific SA towns.
      5. **Language**: Mix in SA slang (Lekker, Mooi, Pragtig, Yho, Stunning).
      6. **Rating**: 4.0 to 5.0 stars.
      7. **Dates**: Random dates between Jan 2025 and now.
      
      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return r?JSON.parse(r).map(l=>({...l,id:`rev_unique_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(t){return console.error("Gemini Unique Review Generation Error:",t),[]}},U3=async(n,e,t)=>{const r=Dc();if(!r)return"Check out this amazing product at Spoil Me Vintage! #vintage #jewelry";try{let i=`Write a single social media post for a jewelry product named "${n}". Price: R${t}.`;return e==="Instagram"||e==="TikTok"?i+=' Style: High energy, visually descriptive, lots of emojis, include 10 relevant hashtags. Focus on "Unique", "Handmade", "South Africa". Keep it under 200 characters + hashtags.':e==="Facebook"?i+=' Style: Friendly, community-focused, engaging question at the end. Mention "Spoil Me Vintage". Include link placeholder [Link].':e==="Twitter"||e==="X"?i+=" Style: Short, punchy, urgent. Max 280 characters. Include 3 hashtags.":i+=" Style: Professional yet inviting.",(await r.models.generateContent({model:"gemini-2.5-flash",contents:i})).text||""}catch(i){return console.error("Gemini Social Post Error:",i),`New arrival: ${n} for only R${t}! Get it before it's gone. #SpoilMeVintage`}},B3={"Choker – 35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar – 40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess – 45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee – 50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long – 60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},q3=[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Black",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Silver",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Hypo-Allergic Plastic",modifier:0,description:"Plastic state bends easily"}],$3=()=>{var Ke,ht,ze,Be,st,it,Nt,rn,Rr,vr;const{products:n,addProduct:e,updateProduct:t,deleteProduct:r,categories:i,packagingPresets:l,materialPresets:c,savePackagingPreset:d,saveMaterialPreset:p,deleteMaterialPreset:f,dbConnectionError:y,login:b}=Dt(),[N,E]=I.useState(!1),[j,k]=I.useState(!1),[P,$]=I.useState(!1),[q,J]=I.useState(!1),[se,he]=I.useState(!1),[K,F]=I.useState("general"),[A,L]=I.useState(null),[V,T]=I.useState(null),[O,D]=I.useState(""),[ve,Ue]=I.useState(""),[ke,je]=I.useState(""),[z,we]=I.useState(!1),[W,B]=I.useState(""),Z=I.useRef(null),ee=I.useRef(null),de=I.useRef(null),Ie={id:"",code:"",name:"",slug:"",description:"",whenAndHowToWear:"",price:0,compareAtPrice:0,memberPrice:0,costPrice:0,shippingCost:0,packaging:[],backOfficeLink:"",madeBy:"Spoil Me Vintage",category:((Ke=i[0])==null?void 0:Ke.name)||"",type:"Stud",status:"draft",images:[""],stock:0,soldCount:0,tags:[],seoKeywords:[],colors:[],isNewArrival:!1,isBestSeller:!1,isFeaturedRing:!1,isFeaturedBracelet:!1,isFeaturedWatch:!1,isUniquePendant:!1,isFeaturedStud:!1,isFeaturedDangle:!1,isFeaturedJewelryBox:!1,isFeaturedPerfumeHolder:!1,isJewelrySet:!1,createdAt:new Date().toISOString(),ringStock:{5:0,6:0,7:0,8:0,9:0,10:0,11:0},earringMaterials:[],showEarringOptions:!1,pendantChainLengths:{},pendantWireWrapped:!1,chainStyles:[],material:"",reviews:[],giftProductId:"",giftValue:0,promoPrice:0,promoStartsAt:"",promoExpiresAt:"",promoBasicMemberPrice:0,promoPremiumMemberPrice:0,promoDeluxeMemberPrice:0,isSoldOut:!1},[H,fe]=I.useState(Ie),[Ze,Ye]=I.useState(""),[et,Tt]=I.useState(""),[Ct,ct]=I.useState(""),[Te,ut]=I.useState(0),[Lt,Vt]=I.useState(""),[_n,qt]=I.useState(""),[Ce,Jt]=I.useState(5),On=[...q3,...c],rr=()=>{var M;fe({...Ie,id:`SPV-${Date.now()}`,createdAt:new Date().toISOString(),category:((M=i[0])==null?void 0:M.name)||""}),E(!0),F("general"),qt("")},xr=M=>{fe({...Ie,...M,compareAtPrice:M.compareAtPrice||0,memberPrice:M.memberPrice||0,costPrice:M.costPrice||0,shippingCost:M.shippingCost||0,soldCount:M.soldCount||0,packaging:M.packaging||[],ringStock:M.ringStock||Ie.ringStock,pendantChainLengths:M.pendantChainLengths||{},showEarringOptions:M.showEarringOptions??!1,chainStyles:M.chainStyles||[],reviews:M.reviews||[],giftProductId:M.giftProductId||"",giftValue:M.giftValue||0,promoPrice:M.promoPrice||0,promoStartsAt:M.promoStartsAt||"",promoExpiresAt:M.promoExpiresAt||"",promoBasicMemberPrice:M.promoBasicMemberPrice||0,promoPremiumMemberPrice:M.promoPremiumMemberPrice||0,promoDeluxeMemberPrice:M.promoDeluxeMemberPrice||0,tags:M.tags||[],seoKeywords:M.seoKeywords||[],colors:M.colors||[],isFeaturedJewelryBox:M.isFeaturedJewelryBox||!1,isFeaturedPerfumeHolder:M.isFeaturedPerfumeHolder||!1}),E(!0),F("general"),qt("")},Nn=async()=>{if(!H.name||!H.price){alert("Name and Price are required");return}k(!0);try{let M=[];if(vn){const Oe=H.images.map(async(at,ot)=>{if(at.startsWith("data:"))try{const It=Date.now(),mn=ri(vn,`products/${H.id}/img_${It}_${ot}`);return await ij(mn,at,"data_url"),await ni(mn)}catch(It){return console.error("Failed to upload image:",It),""}return at}),ft=await Promise.all(Oe);console.log("AdminProducts: upload raw results:",ft),M=ft.filter(at=>at&&at.trim()!==""),console.log("AdminProducts: processedImages:",M)}else M=H.images.filter(Oe=>Oe.trim()!=="");const le={...H,images:M,price:Number(H.price),stock:Number(H.stock),soldCount:Number(H.soldCount),compareAtPrice:Number(H.compareAtPrice||0),memberPrice:Number(H.memberPrice||0),costPrice:Number(H.costPrice||0),shippingCost:Number(H.shippingCost||0),giftValue:Number(H.giftValue||0),promoPrice:Number(H.promoPrice||0),promoBasicMemberPrice:Number(H.promoBasicMemberPrice||0),promoPremiumMemberPrice:Number(H.promoPremiumMemberPrice||0),promoDeluxeMemberPrice:Number(H.promoDeluxeMemberPrice||0)};le.type==="Ring"&&le.ringStock&&(le.stock=Object.values(le.ringStock).reduce((Oe,ft)=>Oe+ft,0)),n.some(Oe=>Oe.id===le.id)?await t(le):await e(le),E(!1)}catch(M){console.error("Failed to save product:",M),alert("Failed to save product. Please check console.")}finally{k(!1)}},Pt=async M=>{if(window.confirm("Are you sure?"))try{await r(M)}catch{alert("Failed to delete product.")}},Ot=async()=>{if(!H.name||!H.category){alert("Please enter a name and category first.");return}$(!0);const M=await V3(H.name,H.category,"Handmade, Unique, Vintage");fe(le=>({...le,description:M})),$(!1)},fn=async M=>{var ft;const le=(ft=M.target.files)==null?void 0:ft[0];if(!le)return;J(!0);const Oe=new FileReader;Oe.onloadend=async()=>{const at=Oe.result,ot=[at,...H.images.filter(mn=>mn!=="")];fe(mn=>({...mn,images:ot})),console.log("AdminProducts: Added base64 image for analysis (preview length):",at.slice(0,80));const It=await O3(at,H.category);It&&fe(mn=>({...mn,name:It.name,description:It.description,whenAndHowToWear:It.whenAndHowToWear,tags:[...new Set([...mn.tags,...It.tags])],seoKeywords:[...new Set([...mn.seoKeywords||[],...It.seoKeywords])],colors:[...new Set([...mn.colors||[],...It.colors])],slug:It.name.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-")})),J(!1)},Oe.readAsDataURL(le)},sr=async M=>{const le=M.target.files;if(!le||le.length===0)return;const Oe=Array.from(le).map(at=>new Promise(ot=>{const It=new FileReader;It.onloadend=()=>ot(It.result),It.readAsDataURL(at)})),ft=await Promise.all(Oe);fe(at=>({...at,images:[...at.images.filter(ot=>ot.trim()!==""),...ft]})),M.target.value=""},Yn=async()=>{if(!H.name){alert("Please enter a product name first.");return}he(!0);const M=await F3(H.name,Ce);M.length>0&&fe(le=>({...le,reviews:[...le.reviews||[],...M]})),he(!1)},me=async()=>{he(!0);const M=await z3(25);M.length>0&&fe(le=>({...le,reviews:[...le.reviews||[],...M]})),he(!1)},Ge=()=>{const M=Math.floor(1e5+Math.random()*9e5);fe(le=>({...le,code:`SPV-${M}`}))},jt=()=>{if(!H.name)return;const M=H.name.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");fe(le=>({...le,slug:M}))},pn=M=>{fe(le=>{var Oe;return{...le,reviews:(Oe=le.reviews)==null?void 0:Oe.filter(ft=>ft.id!==M)}})},Pn=(M,le,Oe)=>{if(!le.trim())return;const ft=le.split(",").map(at=>at.trim()).filter(at=>at.length>0);fe(at=>({...at,[M]:Array.from(new Set([...at[M]||[],...ft]))})),Oe("")},Ds=(M,le)=>{fe(Oe=>{var ft;return{...Oe,[M]:(ft=Oe[M])==null?void 0:ft.filter((at,ot)=>ot!==le)}})},Ls=M=>{const le=H.images.filter((Oe,ft)=>ft!==M);le.length===0&&le.push(""),fe({...H,images:le})},Ar=M=>{L(M.id),T({userName:M.userName,location:M.location,content:M.content,rating:M.rating,date:M.date||new Date().toLocaleDateString()})},ps=()=>{!A||!V||(fe(M=>{var le;return{...M,reviews:(le=M.reviews)==null?void 0:le.map(Oe=>Oe.id===A?{...Oe,...V}:Oe)}}),L(null),T(null))},Hr=(M,le,Oe)=>{var ft;(ft=H.earringMaterials)!=null&&ft.some(at=>at.name===M)||fe(at=>({...at,earringMaterials:[...at.earringMaterials||[],{name:M,modifier:le,description:Oe}]}))},Fn=M=>{const le=[...H.earringMaterials||[]];le.splice(M,1),fe({...H,earringMaterials:le})},Qn=M=>{Ct&&(Hr(Ct,Te,Lt),M&&(p({name:Ct,modifier:Te,description:Lt}),alert("Material saved to presets!")),ct(""),ut(0),Vt(""))},ms=(M,le)=>{M.stopPropagation(),window.confirm(`Remove "${le}" from presets?`)&&f(le)},ir=()=>{(H.packaging||[]).length>=3||fe({...H,packaging:[...H.packaging||[],{id:`pack_${Date.now()}`,name:"",bulkCost:0,bulkQuantity:1,unitCost:0}]})},Vs=M=>{if(!M)return;const le=l.find(Oe=>Oe.name===M);le&&(H.packaging||[]).length<3&&fe({...H,packaging:[...H.packaging||[],{...le,id:`pack_${Date.now()}`}]})},Gr=M=>{var Oe;const le=(Oe=H.packaging)==null?void 0:Oe[M];le&&le.name&&(d(le),alert(`Saved "${le.name}" to packaging presets!`))},Wr=(M,le,Oe)=>{const ft=[...H.packaging||[]],at={...ft[M],[le]:Oe};if(le==="bulkCost"||le==="bulkQuantity"){const ot=le==="bulkCost"?parseFloat(Oe):at.bulkCost,It=le==="bulkQuantity"?parseFloat(Oe):at.bulkQuantity;at.unitCost=It>0?ot/It:0}ft[M]=at,fe({...H,packaging:ft})},yr=M=>{const le=[...H.packaging||[]];le.splice(M,1),fe({...H,packaging:le})},Os=M=>{fe(le=>({...le,price:M,memberPrice:parseFloat((M*.8).toFixed(2))}))},X=((ht=H.packaging)==null?void 0:ht.reduce((M,le)=>M+le.unitCost,0))||0,Y=(H.costPrice||0)+(H.shippingCost||0)+X,re=H.price-Y,ce=(H.memberPrice||0)-Y,Ne=Array.from(new Set(n.map(M=>M.category).filter(Boolean))),We=n.filter(M=>{const le=O.toLowerCase();return(M.name.toLowerCase().includes(le)||M.code.toLowerCase().includes(le))&&(ve?M.type===ve:!0)&&(ke?M.category===ke:!0)&&(z?M.promoPrice&&M.promoPrice>0:!0)&&(W?M.status===W:!0)});return s.jsxs("div",{className:"space-y-6 text-[22px]",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Product Management"}),!N&&s.jsxs("button",{onClick:rr,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors text-sm",children:[s.jsx(ei,{size:18})," Add Product"]})]}),y&&s.jsx("div",{className:"bg-yellow-900/20 border-l-4 border-yellow-500 text-yellow-300 p-3 rounded mb-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-bold",children:"Firestore Warning"}),s.jsx("div",{className:"text-xs mt-1",children:y}),s.jsx("div",{className:"text-xs mt-1",children:"Changes may be saved locally only. Fix authentication or Firestore rules to persist remotely."})]}),s.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[s.jsxs("div",{className:"text-xs text-gray-200 mb-1",children:["Auth: ",((ze=Qt==null?void 0:Qt.currentUser)==null?void 0:ze.email)||"not signed in"]}),s.jsx("button",{onClick:async()=>{try{await b("spoilmevintagediy@gmail.com","admin@spoilme"),alert("Attempted admin sign-in — check console for result.")}catch(M){console.error("Admin sign-in attempt failed:",M),alert("Sign-in failed — check console.")}},className:"px-3 py-1 bg-yellow-600 text-black rounded font-semibold text-sm",children:"Sign in as admin"}),s.jsx("button",{onClick:async()=>{try{N?(n.some(M=>M.id===H.id)?await t(H):await e(H),alert("Retry attempted — check console for Firestore response.")):alert("No active product being edited to retry.")}catch(M){console.error("Retry push failed:",M),alert("Retry failed — check console.")}},className:"px-3 py-1 bg-yellow-600 text-black rounded font-semibold text-sm",children:"Retry push"}),s.jsx("button",{onClick:()=>{var M;(M=navigator.clipboard)==null||M.writeText(JSON.stringify(localStorage.getItem("spv_products"))),alert("Local products JSON copied to clipboard")},className:"px-3 py-1 bg-zinc-800 text-white rounded text-sm",children:"Copy local backup"})]})]})}),!N&&s.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[s.jsx(bh,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),s.jsx("input",{type:"text",placeholder:"Search by Name or SKU...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:O,onChange:M=>D(M.target.value)})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Yp,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),s.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:ve,onChange:M=>Ue(M.target.value),children:[s.jsx("option",{value:"",children:"All Types"}),s.jsx("option",{value:"Stud",children:"Stud Earrings"}),s.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),s.jsx("option",{value:"Ring",children:"Rings"}),s.jsx("option",{value:"Pendant",children:"Pendants"}),s.jsx("option",{value:"Bracelet",children:"Bracelets"}),s.jsx("option",{value:"Watch",children:"Watches"}),s.jsx("option",{value:"Jewelry Box",children:"Jewelry Boxes"}),s.jsx("option",{value:"Perfume Holder",children:"Perfume Holders"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(DA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),s.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:ke,onChange:M=>je(M.target.value),children:[s.jsx("option",{value:"",children:"All Collections"}),Ne.map(M=>s.jsx("option",{value:M,children:M},M))]})]}),s.jsxs("button",{onClick:()=>we(!z),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center gap-2 ${z?"bg-green-900/30 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-400 hover:bg-zinc-800"}`,children:[s.jsx(nc,{size:16})," ",z?"Promotions Active":"Show Promotions"]}),s.jsxs("div",{className:"relative",children:[s.jsx(Yp,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),s.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:W,onChange:M=>B(M.target.value),children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"published",children:"Published"})]})]}),(O||ve||ke||z||W)&&s.jsx("button",{onClick:()=>{D(""),Ue(""),je(""),we(!1),B("")},className:"px-3 py-2 text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Reset Filters"})]}),N?s.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:[s.jsx("div",{className:"flex border-b border-gray-800 bg-zinc-950/50 overflow-x-auto no-scrollbar",children:["general","pricing","media","inventory","marketing","reviews","promotions","gifts"].map(M=>s.jsx("button",{onClick:()=>F(M),className:`px-6 py-4 text-sm font-medium capitalize whitespace-nowrap transition-colors ${K===M?"text-pink-500 border-b-2 border-pink-500 bg-pink-500/5":"text-gray-400 hover:text-white"}`,children:M},M))}),s.jsxs("div",{className:"p-6",children:[K==="general"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Name *"}),s.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm focus:border-pink-500",value:H.name,onChange:M=>fe({...H,name:M.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"URL Slug"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:H.slug,onChange:M=>fe({...H,slug:M.target.value}),placeholder:"product-name-url"}),s.jsx("button",{onClick:jt,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:s.jsx(bc,{size:16})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"SKU / Code"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:H.code,onChange:M=>fe({...H,code:M.target.value}),placeholder:"SPV-001"}),s.jsx("button",{onClick:Ge,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:s.jsx(bc,{size:16})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),s.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:H.status,onChange:M=>fe({...H,status:M.target.value}),children:[s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"published",children:"Published"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),s.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:H.category,onChange:M=>fe({...H,category:M.target.value}),children:[s.jsx("option",{value:"",children:"Select Category"}),i.map(M=>s.jsx("option",{value:M.name,children:M.name},M.id))]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Type"}),s.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:H.type,onChange:M=>fe({...H,type:M.target.value}),children:[s.jsx("option",{value:"Stud",children:"Stud Earrings"}),s.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),s.jsx("option",{value:"Ring",children:"Ring"}),s.jsx("option",{value:"Pendant",children:"Pendant / Necklace"}),s.jsx("option",{value:"Bracelet",children:"Bracelet"}),s.jsx("option",{value:"Watch",children:"Watch"}),s.jsx("option",{value:"Jewelry Box",children:"Jewelry Box"}),s.jsx("option",{value:"Perfume Holder",children:"Perfume Holder"}),s.jsx("option",{value:"Other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Made By"}),s.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:H.madeBy,onChange:M=>fe({...H,madeBy:M.target.value}),children:[s.jsx("option",{value:"Spoil Me Vintage",children:"Spoil Me Vintage (Handmade)"}),s.jsx("option",{value:"Outsourced",children:"Outsourced"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Base Material"}),s.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:H.material,onChange:M=>fe({...H,material:M.target.value}),placeholder:"e.g. Epoxy Resin, Copper"})]})]})]}),K==="pricing"&&s.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[s.jsx(As,{size:18,className:"text-green-400"})," Sales Prices"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (R) *"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-green-400",value:H.price,onChange:M=>Os(parseFloat(M.target.value)||0)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (Comparison)"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:H.compareAtPrice||"",onChange:M=>fe({...H,compareAtPrice:parseFloat(M.target.value)||0})})]})]}),s.jsxs("div",{className:"p-4 bg-purple-900/10 border border-purple-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("label",{className:"block text-sm font-bold text-purple-400 flex items-center gap-2",children:[s.jsx(Pr,{size:16})," Member Price"]}),s.jsx("span",{className:"text-[10px] bg-purple-600/20 text-purple-300 border border-purple-500/50 px-2 py-1 rounded font-bold",children:"20% OFF"})]}),s.jsx("input",{type:"number",className:"w-full p-2 bg-zinc-900/50 border border-purple-500/30 rounded-md text-gray-400 text-sm font-bold cursor-not-allowed",value:H.memberPrice||"",readOnly:!0,disabled:!0})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[s.jsx(hs,{size:18,className:"text-red-400"})," Cost & Shipping"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-red-400/80 mb-1",children:"Product Cost (R)"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-red-900/30 rounded-md text-white text-sm",value:H.costPrice||0,onChange:M=>fe({...H,costPrice:parseFloat(M.target.value)||0})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-red-400/80 mb-1",children:"Shipping In (R)"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-red-900/30 rounded-md text-white text-sm",value:H.shippingCost||0,onChange:M=>fe({...H,shippingCost:parseFloat(M.target.value)||0})})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1 flex items-center gap-2",children:[s.jsx(mg,{size:14})," Back Office / Supplier Link"]}),s.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:H.backOfficeLink,onChange:M=>fe({...H,backOfficeLink:M.target.value})})]})]})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 shadow-lg",children:[s.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 mb-4",children:[s.jsx(kA,{size:18,className:"text-cyan-400"})," Profit & Margins"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[s.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-red-900/30",children:[s.jsx("span",{className:"text-gray-400 block mb-1",children:"Total Unit Cost"}),s.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["R",Y.toFixed(2)]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-2 space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Product:"})," ",s.jsxs("span",{children:["R",(H.costPrice||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Shipping:"})," ",s.jsxs("span",{children:["R",(H.shippingCost||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Packaging:"})," ",s.jsxs("span",{children:["R",X.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-green-900/30",children:[s.jsx("span",{className:"text-gray-400 block mb-1",children:"Retail Profit"}),s.jsxs("div",{className:`text-2xl font-bold ${re>0?"text-green-400":"text-red-500"}`,children:["R",re.toFixed(2)]})]}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-purple-900/30",children:[s.jsx("span",{className:"text-gray-400 block mb-1",children:"Member Profit"}),s.jsxs("div",{className:`text-2xl font-bold ${ce>0?"text-purple-400":"text-red-500"}`,children:["R",ce.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[s.jsx(Fd,{size:16,className:"text-pink-500"})," Packaging Breakdown"]}),s.jsxs("select",{className:"bg-zinc-800 text-xs text-gray-300 border border-gray-700 rounded px-2 py-1",onChange:M=>Vs(M.target.value),value:"",children:[s.jsx("option",{value:"",children:"Load Preset..."}),l.map((M,le)=>s.jsxs("option",{value:M.name,children:[M.name," (R",M.unitCost.toFixed(2),")"]},le))]})]}),(((Be=H.packaging)==null?void 0:Be.length)||0)<3&&s.jsxs("button",{onClick:ir,className:"text-xs flex items-center gap-1 text-cyan-400 hover:text-cyan-300",children:[s.jsx(ei,{size:12})," Add Item"]})]}),s.jsx("div",{className:"space-y-3",children:(st=H.packaging)==null?void 0:st.map((M,le)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end bg-zinc-900 p-3 rounded border border-gray-800",children:[s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Item Name"}),s.jsx("input",{type:"text",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:M.name,onChange:Oe=>Wr(le,"name",Oe.target.value)})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Cost (R)"}),s.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:M.bulkCost,onChange:Oe=>Wr(le,"bulkCost",parseFloat(Oe.target.value)||0)})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Qty"}),s.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:M.bulkQuantity,onChange:Oe=>Wr(le,"bulkQuantity",parseFloat(Oe.target.value)||0)})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Unit Cost"}),s.jsxs("div",{className:"w-full p-1.5 bg-zinc-800 border border-gray-700 rounded text-xs text-red-300 font-mono",children:["R",M.unitCost.toFixed(2)]})]}),s.jsxs("div",{className:"md:col-span-3 flex justify-end pb-1 gap-2",children:[s.jsx("button",{onClick:()=>Gr(le),className:"text-blue-400 hover:text-blue-300 bg-blue-900/20 p-1 rounded hover:bg-blue-900/40 transition-colors",title:"Save as Preset",children:s.jsx(xd,{size:16})}),s.jsx("button",{onClick:()=>yr(le),className:"text-gray-600 hover:text-red-400 p-1",children:s.jsx(Lo,{size:16})})]})]},le))})]})]}),K==="inventory"&&s.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Current Stock"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:H.stock,onChange:M=>fe({...H,stock:parseInt(M.target.value)||0})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sold Count"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:H.soldCount,onChange:M=>fe({...H,soldCount:parseInt(M.target.value)||0})})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsxs("label",{className:"inline-flex items-center gap-2 mt-2",children:[s.jsx("input",{type:"checkbox",checked:!!H.isSoldOut,onChange:M=>{const le=M.target.checked;fe(Oe=>({...Oe,isSoldOut:le,stock:le?0:Oe.stock}))},className:"form-checkbox h-4 w-4 text-red-600 bg-black border-gray-600"}),s.jsx("span",{className:"text-sm text-white font-bold",children:'Mark as "Sorry Just SOLD out!" (Persistent)'})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'When checked, this product will display a "Sorry Just SOLD out!" badge to customers regardless of stock. Only uncheck to make it available again.'})]})]}),H.type==="Ring"&&s.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[s.jsx("h3",{className:"text-sm font-bold text-white mb-3",children:"Ring Sizes"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.keys(Ie.ringStock||{}).map(M=>{var le;return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:["Size ",M]}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded text-white text-sm",value:((le=H.ringStock)==null?void 0:le[M])||0,onChange:Oe=>fe({...H,ringStock:{...H.ringStock,[M]:parseInt(Oe.target.value)||0}})})]},M)})})]}),(H.type==="Stud"||H.type==="Dangle")&&s.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("input",{type:"checkbox",id:"showEarringOptions",checked:H.showEarringOptions,onChange:M=>fe({...H,showEarringOptions:M.target.checked}),className:"rounded bg-black border-gray-600 text-pink-600 focus:ring-pink-500"}),s.jsx("label",{htmlFor:"showEarringOptions",className:"text-sm font-bold text-white",children:"Enable Material Customization"})]}),H.showEarringOptions&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:On.map(M=>s.jsxs("div",{className:"group relative inline-flex",children:[s.jsxs("button",{onClick:()=>Hr(M.name,M.modifier,M.description),className:"text-xs bg-gray-800 hover:bg-gray-700 text-gray-300 px-2 py-1 rounded border border-gray-600",children:["+ ",M.name]}),c.some(le=>le.name===M.name)&&s.jsx("button",{onClick:le=>ms(le,M.name),className:"absolute -top-1.5 -right-1.5 bg-red-600 text-white rounded-full p-0.5 w-3 h-3 flex items-center justify-center text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:"X"})]},M.name))}),s.jsx("div",{className:"space-y-2",children:(it=H.earringMaterials)==null?void 0:it.map((M,le)=>s.jsxs("div",{className:"flex items-center gap-2 bg-black p-2 rounded border border-gray-800",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-white",children:M.name}),s.jsxs("span",{className:"text-xs text-pink-400",children:["+R",M.modifier]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:M.description})]}),s.jsx("button",{onClick:()=>Fn(le),className:"text-gray-600 hover:text-red-400",children:s.jsx(Lo,{size:14})})]},le))}),s.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end pt-2 border-t border-gray-700",children:[s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"text",placeholder:"Custom Material",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Ct,onChange:M=>ct(M.target.value)})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"number",placeholder:"Price Mod",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Te,onChange:M=>ut(parseFloat(M.target.value)||0)})}),s.jsx("div",{className:"col-span-4",children:s.jsx("input",{type:"text",placeholder:"Description",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Lt,onChange:M=>Vt(M.target.value)})}),s.jsxs("div",{className:"col-span-3 flex gap-1",children:[s.jsx("button",{onClick:()=>Qn(!1),className:"flex-1 p-1.5 bg-pink-600 text-white rounded text-xs flex items-center justify-center",title:"Add to Product",children:s.jsx(ei,{size:14})}),s.jsx("button",{onClick:()=>Qn(!0),className:"flex-1 p-1.5 bg-cyan-600 text-white rounded text-xs flex items-center justify-center",title:"Add & Save Preset",children:s.jsx(xd,{size:14})})]})]})]})]}),H.type==="Pendant"&&s.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Chain Styles"}),s.jsx("div",{className:"flex gap-2",children:["Metal Chain","Leather Cord","Ribbon"].map(M=>{var le;return s.jsx("button",{onClick:()=>{var at,ot;const ft=((at=H.chainStyles)==null?void 0:at.includes(M))?(ot=H.chainStyles)==null?void 0:ot.filter(It=>It!==M):[...H.chainStyles||[],M];fe({...H,chainStyles:ft})},className:`px-3 py-1 rounded text-xs border ${(le=H.chainStyles)!=null&&le.includes(M)?"bg-cyan-900/50 border-cyan-500 text-cyan-400":"bg-black border-gray-700 text-gray-400"}`,children:M},M)})})]}),((Nt=H.chainStyles)==null?void 0:Nt.includes("Metal Chain"))&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Available Lengths"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(B3).map(M=>{var le,Oe;return s.jsxs("div",{onClick:()=>{const ft=H.pendantChainLengths||{};fe({...H,pendantChainLengths:{...ft,[M]:!ft[M]}})},className:`p-2 rounded border cursor-pointer text-xs flex items-center justify-between ${(le=H.pendantChainLengths)!=null&&le[M]?"bg-green-900/20 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-500"}`,children:[s.jsx("span",{children:M}),((Oe=H.pendantChainLengths)==null?void 0:Oe[M])&&s.jsx(gt,{size:12})]},M)})})]})]})]}),K==="marketing"&&s.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[s.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[s.jsx(nc,{size:18,className:"text-cyan-400"})," Product Visibility & Features"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${H.isNewArrival?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${H.isNewArrival?"bg-cyan-500 border-cyan-500":"border-gray-600"}`,children:H.isNewArrival&&s.jsx(gt,{size:14,className:"text-black"})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:H.isNewArrival,onChange:M=>fe({...H,isNewArrival:M.target.checked})}),s.jsx("span",{className:"text-sm font-bold text-white",children:"New Arrival"})]}),s.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${H.isBestSeller?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${H.isBestSeller?"bg-yellow-500 border-yellow-500":"border-gray-600"}`,children:H.isBestSeller&&s.jsx(gt,{size:14,className:"text-black"})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:H.isBestSeller,onChange:M=>fe({...H,isBestSeller:M.target.checked})}),s.jsx("span",{className:"text-sm font-bold text-white",children:"Best Seller"})]}),s.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${H.isJewelrySet?"bg-purple-900/20 border-purple-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${H.isJewelrySet?"bg-purple-500 border-purple-500":"border-gray-600"}`,children:H.isJewelrySet&&s.jsx(gt,{size:14,className:"text-white"})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:H.isJewelrySet,onChange:M=>fe({...H,isJewelrySet:M.target.checked})}),s.jsx("span",{className:"text-sm font-bold text-white",children:"Jewelry Set"})]})]}),s.jsx("h4",{className:"text-sm text-gray-400 font-bold mt-6 mb-3 uppercase tracking-wider",children:"Category Features"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:H.isFeaturedRing,onChange:M=>fe({...H,isFeaturedRing:M.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Ring"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:H.isFeaturedBracelet,onChange:M=>fe({...H,isFeaturedBracelet:M.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Bracelet"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:H.isUniquePendant,onChange:M=>fe({...H,isUniquePendant:M.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Unique Pendant"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:H.isFeaturedStud,onChange:M=>fe({...H,isFeaturedStud:M.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Studs"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:H.isFeaturedDangle,onChange:M=>fe({...H,isFeaturedDangle:M.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Dangles"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:H.isFeaturedWatch,onChange:M=>fe({...H,isFeaturedWatch:M.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Watch"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:H.isFeaturedJewelryBox,onChange:M=>fe({...H,isFeaturedJewelryBox:M.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Jewelry Box"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:H.isFeaturedPerfumeHolder,onChange:M=>fe({...H,isFeaturedPerfumeHolder:M.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Perfume Holder"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Tags & SEO"}),s.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:H.tags.map((M,le)=>s.jsxs("span",{className:"bg-gray-800 text-gray-300 text-xs px-2 py-1 rounded flex items-center gap-1",children:[M,s.jsx(wn,{size:12,className:"cursor-pointer",onClick:()=>Ds("tags",le)})]},le))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:Ze,onChange:M=>Ye(M.target.value),onKeyDown:M=>M.key==="Enter"&&Pn("tags",Ze,Ye),placeholder:"Add tag..."}),s.jsx("button",{onClick:()=>Pn("tags",Ze,Ye),className:"bg-gray-800 p-2 rounded text-white",children:s.jsx(ei,{size:18})})]})]})]}),K==="reviews"&&s.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[s.jsxs("div",{className:"flex gap-4 flex-wrap",children:[s.jsxs("div",{className:"flex-1 bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-500/30 p-5 rounded-xl shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-cyan-400 font-bold text-lg",children:[s.jsx(mv,{size:24}),s.jsx("h3",{children:"AI South African Reviewer"})]}),s.jsxs("button",{onClick:Yn,disabled:se,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[se?s.jsx(Do,{className:"animate-spin",size:18}):s.jsx(Ir,{size:18})," Generate Standard Reviews"]})]}),(H.isUniquePendant||H.type==="Pendant")&&s.jsxs("div",{className:"flex-1 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 p-5 rounded-xl shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-400 font-bold text-lg",children:[s.jsx(AA,{size:24}),s.jsx("h3",{children:"Unique Piece Reviewer"})]}),s.jsxs("button",{onClick:me,disabled:se,className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[se?s.jsx(Do,{className:"animate-spin",size:18}):s.jsx(Ir,{size:18})," Generate Unique Reviews"]})]})]}),s.jsx("div",{className:"space-y-3",children:(rn=H.reviews)==null?void 0:rn.map(M=>s.jsx("div",{className:"bg-black p-3 rounded border border-gray-800",children:A===M.id&&V?s.jsxs("div",{className:"space-y-3 animate-in fade-in",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:V.userName,onChange:le=>T({...V,userName:le.target.value}),placeholder:"Name"}),s.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:V.location,onChange:le=>T({...V,location:le.target.value}),placeholder:"Location"}),s.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white col-span-2",value:V.date,onChange:le=>T({...V,date:le.target.value}),placeholder:"Date (YYYY-MM-DD or Text)"})]}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(le=>s.jsx(ci,{size:16,className:"cursor-pointer",fill:le<=V.rating?"orange":"none",stroke:le<=V.rating?"orange":"gray",onClick:()=>T({...V,rating:le})},le))}),s.jsx("textarea",{className:"w-full bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",rows:3,value:V.content,onChange:le=>T({...V,content:le.target.value})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>L(null),className:"px-3 py-1 bg-zinc-800 text-white text-xs rounded hover:bg-zinc-700",children:"Cancel"}),s.jsx("button",{onClick:ps,className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-500",children:"Save"})]})]}):s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-300",children:[M.userName," ",s.jsxs("span",{className:"text-gray-600 font-normal",children:["from ",M.location]}),s.jsx("span",{className:"text-gray-500 font-normal ml-2",children:M.date})]}),s.jsx("div",{className:"flex text-yellow-400 gap-0.5 my-1",children:[1,2,3,4,5].map(le=>s.jsx(ci,{size:10,fill:le<=M.rating?"currentColor":"none"},le))}),s.jsxs("p",{className:"text-xs text-gray-400 italic",children:['"',M.content,'"']})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>Ar(M),className:"text-gray-500 hover:text-cyan-400",children:s.jsx(bv,{size:14})}),s.jsx("button",{onClick:()=>pn(M.id),className:"text-gray-600 hover:text-red-400",children:s.jsx(Lo,{size:14})})]})]})},M.id))})]}),K==="promotions"&&s.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[s.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(hs,{className:"text-green-400"}),s.jsx("div",{children:s.jsx("h3",{className:"text-lg font-bold text-white",children:"Retail Base Price"})})]}),s.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["R",H.price.toFixed(2)]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:s.jsx("div",{className:"space-y-8",children:s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[s.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-4",children:[s.jsx(nc,{size:18,className:"text-cyan-400"})," Non-Member Promo"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Promotional Price (R)"}),s.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white font-bold",value:H.promoPrice||"",onChange:M=>fe({...H,promoPrice:parseFloat(M.target.value)||0})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Discount (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white",value:((H.price-(H.promoPrice||0))/H.price*100).toFixed(0),readOnly:!0}),s.jsx(UA,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[s.jsx(pi,{size:12})," Start"]}),s.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((Rr=H.promoStartsAt)==null?void 0:Rr.slice(0,16))||"",onChange:M=>fe({...H,promoStartsAt:M.target.value})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[s.jsx(pi,{size:12})," End"]}),s.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((vr=H.promoExpiresAt)==null?void 0:vr.slice(0,16))||"",onChange:M=>fe({...H,promoExpiresAt:M.target.value})})]})]})]})})})]}),K==="gifts"&&s.jsx("div",{className:"space-y-6 animate-in fade-in",children:s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[s.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(Xt,{size:18,className:"text-pink-500"})," Promotional Gift"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Select Gift Product"}),s.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm",value:H.giftProductId||"",onChange:M=>fe({...H,giftProductId:M.target.value}),children:[s.jsx("option",{value:"",children:"-- No Gift --"}),n.filter(M=>M.id!==H.id).map(M=>s.jsx("option",{value:M.id,children:M.name},M.id))]})]}),H.giftProductId&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Gift Value (R)"}),s.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:H.giftValue||"",onChange:M=>fe({...H,giftValue:parseFloat(M.target.value)||0})})]})]})]})}),K==="media"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 border border-pink-500/30 p-5 rounded-xl shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-pink-400 font-bold text-lg",children:[s.jsx(Ir,{size:20}),s.jsx("h3",{children:"AI Product Analyst"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("input",{type:"file",accept:"image/*",ref:Z,className:"hidden",onChange:fn}),s.jsxs("button",{onClick:()=>{var M;return(M=Z.current)==null?void 0:M.click()},disabled:q,className:"flex-1 py-3 bg-zinc-800 hover:bg-pink-600 text-white rounded-lg border border-gray-600 hover:border-pink-400 transition-all flex items-center justify-center gap-2 text-sm font-semibold disabled:opacity-50 shadow-lg",children:[q?s.jsx(Do,{className:"animate-spin",size:18}):s.jsx(TA,{size:18}),q?"Analyzing Image...":"Upload & Analyze with AI"]})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Description"}),s.jsxs("button",{onClick:Ot,disabled:P,className:"text-xs text-cyan-400 flex items-center gap-1 hover:text-cyan-300",children:[s.jsx(mv,{size:12})," ",P?"Writing...":"Generate from Text"]})]}),s.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-32 text-white text-sm",value:H.description,onChange:M=>fe({...H,description:M.target.value})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"When & How to Wear"}),s.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-24 text-white text-sm",value:H.whenAndHowToWear,onChange:M=>fe({...H,whenAndHowToWear:M.target.value}),placeholder:"Styling advice..."})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Images"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-2",children:[H.images.filter(M=>M!=="").map((M,le)=>s.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden border border-gray-800 bg-black",children:[s.jsx("img",{src:M,alt:"",className:"w-full h-full object-cover",onError:Oe=>{console.warn("Image failed to load in AdminProducts gallery:",Oe.currentTarget.src)}}),s.jsx("button",{onClick:()=>Ls(le),className:"absolute top-1 right-1 bg-black/60 hover:bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-all",children:s.jsx(wn,{size:12})})]},le)),s.jsxs("div",{onClick:()=>{var M;return(M=ee.current)==null?void 0:M.click()},className:"aspect-square rounded-lg border border-dashed border-gray-700 bg-zinc-900/30 flex flex-col items-center justify-center text-gray-500 cursor-pointer hover:bg-zinc-800 hover:border-gray-500 transition-all",children:[s.jsx(ei,{size:24}),s.jsx("span",{className:"text-[10px] mt-1",children:"Add Image"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:ee,className:"hidden",onChange:sr}),s.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:de,className:"hidden",onChange:sr}),s.jsxs("button",{onClick:()=>{var M;return(M=ee.current)==null?void 0:M.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[s.jsx(RA,{size:16,className:"text-cyan-400"})," Upload"]}),s.jsxs("button",{onClick:()=>{var M;return(M=de.current)==null?void 0:M.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[s.jsx(li,{size:16,className:"text-pink-500"})," Camera"]})]})]})]})]}),s.jsxs("div",{className:"p-4 border-t border-gray-800 bg-zinc-950 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Cancel"}),s.jsxs("button",{onClick:Nn,disabled:j,className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2 shadow transition-colors text-sm font-semibold disabled:opacity-50",children:[j?s.jsx(Do,{className:"animate-spin",size:18}):s.jsx(xd,{size:18})," ",j?"Saving...":"Save Product"]})]})]}):s.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Product"}),s.jsx("th",{className:"p-4",children:"Type"}),s.jsx("th",{className:"p-4",children:"SKU"}),s.jsx("th",{className:"p-4",children:"Price"}),s.jsx("th",{className:"p-4",children:"Stock"}),s.jsx("th",{className:"p-4",children:"Status"}),s.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800",children:We.map(M=>s.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[s.jsxs("td",{className:"p-4 flex items-center gap-3",children:[s.jsx("img",{src:M.images[0]||"https://via.placeholder.com/40",className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:"",onError:le=>{console.warn("Image failed to load in AdminProducts list:",le.currentTarget.src)}}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-200 block",children:M.name}),s.jsx("span",{className:"text-xs text-gray-500",children:M.category})]})]}),s.jsx("td",{className:"p-4 text-gray-400",children:M.type}),s.jsx("td",{className:"p-4 text-gray-500 font-mono text-xs",children:M.code}),s.jsxs("td",{className:"p-4 font-medium text-green-400",children:["R",M.price.toFixed(2)]}),s.jsx("td",{className:"p-4 text-gray-300",children:M.stock}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${M.status==="published"?"bg-green-500/20 text-green-400":"bg-orange-500/20 text-orange-400"}`,children:M.status})}),s.jsx("td",{className:"p-4 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>xr(M),className:"p-2 text-gray-400 hover:text-cyan-400",children:s.jsx(bv,{size:16})}),s.jsx("button",{onClick:()=>Pt(M.id),className:"p-2 text-gray-400 hover:text-red-400",children:s.jsx(Lo,{size:16})})]})})]},M.id))})]})})]})},H3=()=>{const{categories:n,addCategory:e,updateCategory:t,deleteCategory:r,replaceCategories:i}=Dt(),l=I.useRef({}),[c,d]=I.useState(null),p=(b,N)=>{const E=[...n],j=N==="up"?b-1:b+1;j>=0&&j<E.length&&([E[b],E[j]]=[E[j],E[b]],i(E))},f=async(b,N)=>{if(!N)return;if(vn)try{d(b);const j=Date.now(),k=ri(vn,`categories/${b}/${j}_${N.name}`),P=await sj(k,N),$=await ni(P.ref),q=n.find(J=>J.id===b);q&&t({...q,image:$}),d(null);return}catch(j){console.error("Firebase Storage Upload failed:",j)}const E=new FileReader;E.onloadend=()=>{const j=n.find(k=>k.id===b);j&&typeof E.result=="string"&&t({...j,image:E.result}),d(null)},E.readAsDataURL(N)},y=()=>{e({id:`cat_${Date.now()}`,name:"New Collection",image:"https://picsum.photos/400/400?grayscale",description:""})};return s.jsxs("div",{className:"space-y-6 max-w-4xl",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Category Management"}),s.jsxs("button",{onClick:y,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 transition-colors text-sm",children:[s.jsx(ei,{size:18})," Add Category"]})]}),s.jsxs("div",{className:"space-y-4",children:[n.map((b,N)=>s.jsxs("div",{className:"flex items-center gap-4 bg-zinc-900 p-4 rounded-xl border border-gray-800 shadow-sm animate-in fade-in",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("button",{onClick:()=>p(N,"up"),disabled:N===0,className:`p-1 rounded hover:bg-gray-800 ${N===0?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:s.jsx(CA,{size:18})}),s.jsx("button",{onClick:()=>p(N,"down"),disabled:N===n.length-1,className:`p-1 rounded hover:bg-gray-800 ${N===n.length-1?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:s.jsx(EA,{size:18})})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Collection Name"}),s.jsx("input",{type:"text",value:b.name,onChange:E=>t({...b,name:E.target.value}),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm focus:border-cyan-400 focus:outline-none"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative w-12 h-12",children:[s.jsx("img",{src:b.image,alt:b.name,className:`w-12 h-12 rounded object-cover bg-zinc-800 border border-gray-700 ${c===b.id?"opacity-50":""}`}),c===b.id&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(Do,{size:16,className:"animate-spin text-pink-500"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Cover Image"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{var E;return(E=l.current[b.id])==null?void 0:E.click()},disabled:c===b.id,className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-gray-200 text-xs rounded border border-gray-600 transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:c===b.id?"Uploading...":"Change Image"}),s.jsx("input",{type:"file",ref:E=>{l.current[b.id]=E},className:"hidden",accept:"image/*",onChange:E=>E.target.files&&f(b.id,E.target.files[0])})]})]})]})]}),s.jsx("div",{className:"ml-2",children:s.jsx("button",{onClick:()=>{window.confirm("Delete this category?")&&r(b.id)},className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-900/20 rounded-full transition-all",children:s.jsx(wn,{size:20})})})]},b.id)),n.length===0&&s.jsx("div",{className:"text-center py-12 text-gray-500",children:'No categories found. Click "Add Category" to start.'})]})]})},G3=()=>{const{vouchers:n,addVoucher:e,deleteVoucher:t,cart:r}=Dt(),[i,l]=I.useState(250),[c,d]=I.useState(""),[p,f]=I.useState(""),[y,b]=I.useState(""),[N,E]=I.useState(""),[j,k]=I.useState(null),[P,$]=I.useState(!1),q=r.filter(K=>K.code==="GV-DIGITAL"),J=()=>{const K="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let F="";for(let A=0;A<12;A++)A>0&&A%4===0&&(F+="-"),F+=K.charAt(Math.floor(Math.random()*K.length));E(F)},se=async()=>{if(!i||!N)return;$(!0);const K={code:N,discountType:"fixed",value:i,minSpend:i,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};if(e(K),p&&Ee)try{const F=Es(Ee,"users"),A=Zs(F,Ma("email","==",p)),L=await Da(A);if(L.empty)alert(`Voucher created, but user with email ${p} was not found. Please send the code manually.`);else{const V=L.docs[0],T={id:`gift_recv_${Date.now()}`,type:"gift_received",title:"You received a Gift Voucher!",message:`Spoil Me Vintage sent you a voucher worth R${i}.`,date:new Date().toISOString(),isRead:!1,voucherData:{code:N,amount:i,meta:{recipientName:c||V.data().name||"Valued Customer",senderName:"Spoil Me Vintage Team",message:y||"Enjoy a little something special from us!",deliveryMethod:"recipient"}}};await un(V.ref,{notifications:$p(T)}),alert(`Voucher created AND sent to ${p}!`)}}catch(F){console.error("Error sending voucher:",F),alert("Voucher created, but failed to send to user due to an error.")}else p&&!Ee&&alert("Voucher created, but cannot send to user (Database not connected / Demo Mode).");E(""),d(""),f(""),b(""),$(!1)},he=K=>{navigator.clipboard.writeText(K),k(K),setTimeout(()=>k(null),2e3)};return s.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Gift Card Management"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Generate valid codes and manage active vouchers."})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[q.length>0&&s.jsxs("div",{className:"bg-pink-900/10 border border-pink-500/30 p-4 rounded-xl mb-6",children:[s.jsxs("h3",{className:"text-pink-400 font-bold flex items-center gap-2 mb-3",children:[s.jsx(no,{size:18})," Pending Requests (",q.length,")"]}),s.jsx("div",{className:"space-y-2",children:q.map((K,F)=>s.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg border border-pink-500/20 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white text-sm font-medium",children:K.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Value: R",K.price]})]}),s.jsx("button",{onClick:()=>{l(K.price),d("Customer"),J()},className:"px-3 py-1.5 bg-pink-600 text-white text-xs rounded hover:bg-pink-500",children:"Process"})]},F))})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl shadow-sm",children:[s.jsxs("h2",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(ei,{size:20,className:"text-cyan-400"})," Issue New Voucher"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Voucher Value (R)"}),s.jsx("input",{type:"number",value:i,onChange:K=>l(parseFloat(K.target.value)),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white font-bold focus:border-cyan-400 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Recipient Name"}),s.jsx("input",{type:"text",value:c,onChange:K=>d(K.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white focus:border-cyan-400 outline-none",placeholder:"e.g. Sarah"})]})]}),s.jsxs("div",{className:"bg-black/30 border border-gray-700 rounded-xl p-4 mb-6",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[s.jsx(zd,{size:14})," Send Directly to User (Optional)"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"User Email Address"}),s.jsx("input",{type:"email",value:p,onChange:K=>f(K.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"user@example.com (Must be registered)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Custom Message"}),s.jsx("textarea",{rows:2,value:y,onChange:K=>b(K.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Enjoy your gift!"})]})]})]}),s.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 mb-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 w-full",children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Unique Voucher Code"}),s.jsx("div",{className:"font-mono text-2xl text-cyan-400 tracking-widest break-all",children:N||"XXXX-XXXX-XXXX"})]}),s.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors whitespace-nowrap",children:[s.jsx(bc,{size:16})," Generate Number"]})]}),s.jsx("button",{onClick:se,disabled:!N||P,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2",children:P?"Processing...":p?"Create & Send to User":"Activate Voucher Only"})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[s.jsx("h2",{className:"font-bold text-white mb-4",children:"Active Vouchers"}),n.length===0?s.jsx("p",{className:"text-gray-500 text-sm",children:"No active vouchers."}):s.jsx("div",{className:"space-y-3",children:n.map((K,F)=>s.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-gray-600 transition-colors",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-mono text-cyan-400 font-bold",children:K.code}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Value: R",K.value," • Expires: ",new Date(K.expiresAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>he(K.code),className:"p-2 text-gray-500 hover:text-white",children:j===K.code?s.jsx(gt,{size:16,className:"text-green-400"}):s.jsx(fg,{size:16})}),s.jsx("button",{onClick:()=>t(K.code),className:"p-2 text-gray-500 hover:text-red-400",children:s.jsx(Lo,{size:16})})]})]},F))})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"sticky top-6",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[s.jsx(xc,{size:16})," Card Preview"]}),s.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),s.jsxs("div",{className:"relative h-full p-6 flex flex-col justify-between z-10",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("div",{className:"font-cherry text-xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400",children:"Spoil Me Vintage"}),s.jsxs("div",{className:"text-3xl font-bold text-white font-architects",children:["R",i]})]}),s.jsxs("div",{className:"text-center my-auto",children:[s.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-[0.3em] mb-2",children:"VOUCHER CODE"}),s.jsx("div",{className:"bg-white/5 border border-white/10 rounded px-4 py-2 inline-block backdrop-blur-sm",children:s.jsx("span",{className:"font-mono text-xl md:text-2xl font-bold text-cyan-400 tracking-wider",children:N||"••••-••••-••••"})})]}),s.jsxs("div",{className:"flex justify-between items-end text-[10px] text-gray-500 uppercase tracking-wider",children:[s.jsxs("div",{children:["To: ",c||"Valued Customer",s.jsx("div",{className:"font-handwriting text-lg text-gray-300 normal-case mt-1",children:"Admin Team"})]}),s.jsxs("div",{className:"text-right",children:["Valid for 3 Years",s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date().toLocaleDateString()})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-zinc-900/50 p-4 rounded-xl border border-gray-800 text-sm text-gray-400",children:[s.jsx("p",{className:"mb-2 font-bold text-white",children:"Sending Instructions:"}),s.jsxs("ul",{className:"list-disc pl-4 space-y-2 text-xs",children:[s.jsx("li",{children:"Set the Value and generate a unique code."}),s.jsxs("li",{children:[s.jsx("strong",{children:"Option A (Manual):"}),' Click "Activate Voucher Only", then send the code via WhatsApp/Email manually.']}),s.jsxs("li",{children:[s.jsx("strong",{children:"Option B (Direct):"}),` Enter the user's Registered Email. The voucher will appear in their App Profile under "My Gifts".`]})]})]})]})})]})]})},W3=[{id:"fb",name:"Facebook",icon:"facebook",isConnected:!1,accountName:"",urlTemplate:"https://www.facebook.com/sharer/sharer.php?u={url}&quote={text}"},{id:"ig",name:"Instagram",icon:"instagram",isConnected:!1,accountName:"",urlTemplate:""},{id:"tk",name:"TikTok",icon:"video",isConnected:!1,accountName:"",urlTemplate:""},{id:"x",name:"X (Twitter)",icon:"twitter",isConnected:!1,accountName:"",urlTemplate:"https://twitter.com/intent/tweet?text={text}&url={url}"}],K3={fb:["Log in to your Facebook Brand Page in your browser or app.","Enter your Page Name below for the AI context.","When you click 'Post Now', we will open the Facebook Sharer tool.","Paste the caption we generate for you."],ig:["Ensure the Instagram App is installed on this device.","Enter your Instagram Handle (@name) below.","When you click 'Post Now', we will copy the caption to your clipboard.","We will then open Instagram. Create a new post and select the downloaded photo.","Long press in the caption box and select 'Paste'."],tk:["Ensure the TikTok App is installed.","Enter your Handle below.","We will copy the text and hashtags to your clipboard.","When TikTok opens, upload the video/photo and paste the caption."],x:["Log in to X (Twitter).","Enter your handle below.","We will automatically open a 'Compose Tweet' window with your text and link pre-filled."]},J3=()=>{var V;const{products:n}=Dt(),[e,t]=I.useState(W3),[r,i]=I.useState(!1),[l,c]=I.useState(null),[d,p]=I.useState(""),[f,y]=I.useState(null),[b,N]=I.useState({}),[E,j]=I.useState(null),[k,P]=I.useState(!1),[$,q]=I.useState([]),[J,se]=I.useState({posts:0,errors:0});I.useEffect(()=>{const T=localStorage.getItem("spv_social_config");T&&t(JSON.parse(T))},[]),I.useEffect(()=>{let T;return k&&(T=setInterval(()=>{if(n.length===0)return;const O=n[Math.floor(Math.random()*n.length)],D=e.filter(ke=>ke.isConnected),ve=D.length>0?D[Math.floor(Math.random()*D.length)]:e[Math.floor(Math.random()*e.length)],Ue=new Date().toLocaleTimeString();q(ke=>[{time:Ue,msg:`AI Worker: Analyzing "${O.name}" trends & hashtags...`,type:"process"},...ke].slice(0,6)),setTimeout(()=>{const ke=new Date().toLocaleTimeString();q(je=>[{time:ke,msg:`Server: Successfully scheduled post to ${ve.name} (Simulated)`,type:"success"},...je].slice(0,6)),se(je=>({...je,posts:je.posts+1}))},2e3)},5e3)),()=>clearInterval(T)},[k,n,e]);const he=T=>{c(T),p(T.accountName||"")},K=()=>{if(!l)return;const T=e.map(O=>O.id===l.id?{...O,isConnected:!0,accountName:d}:O);t(T),localStorage.setItem("spv_social_config",JSON.stringify(T)),c(null)},F=T=>{const O=e.map(D=>D.id===T?{...D,isConnected:!1,accountName:""}:D);t(O),localStorage.setItem("spv_social_config",JSON.stringify(O))},A=async()=>{if(n.length===0)return;i(!0);const T=n[Math.floor(Math.random()*n.length)];y(T);const O={},D=e.filter(ve=>ve.isConnected);if(D.length===0){alert("Please connect at least one platform first."),i(!1);return}for(const ve of D){const Ue=ve.accountName?`(Account: @${ve.accountName})`:"";O[ve.id]=await U3(T.name,`${ve.name} ${Ue}`,T.price)}N(O),i(!1)},L=T=>{const O=b[T.id];if(!O||!f)return;const D=`${window.location.origin}/#/product/${f.id}`;if(navigator.clipboard.writeText(`${O} ${D}`).then(()=>{j(T.id),setTimeout(()=>j(null),2e3)}),T.id==="fb"||T.id==="x"){const ve=T.urlTemplate.replace("{url}",encodeURIComponent(D)).replace("{text}",encodeURIComponent(O));window.open(ve,"_blank","width=600,height=400")}else alert("Caption copied! Opening platform..."),T.id==="ig"&&window.open("https://instagram.com","_blank"),T.id==="tk"&&window.open("https://tiktok.com","_blank")};return s.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[l&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>c(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.id==="fb"&&s.jsx(tc,{size:24,className:"text-blue-500"}),l.id==="ig"&&s.jsx(xp,{size:24,className:"text-pink-500"}),l.id==="x"&&s.jsx(yd,{size:24,className:"text-white"}),l.id==="tk"&&s.jsx(li,{size:24,className:"text-cyan-400"}),"Connect ",l.name]}),s.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:s.jsx(wn,{size:20})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 uppercase mb-1",children:"Account Handle / Name"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"@"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 pl-8 text-white focus:border-pink-500 outline-none",value:d,onChange:T=>p(T.target.value),placeholder:"spoilmevintage"})]})]}),s.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-gray-800",children:[s.jsxs("h4",{className:"text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[s.jsx(mg,{size:14})," How to connect:"]}),s.jsx("ul",{className:"space-y-2",children:(V=K3[l.id])==null?void 0:V.map((T,O)=>s.jsxs("li",{className:"text-xs text-gray-400 flex gap-2",children:[s.jsx("span",{className:"bg-gray-800 w-4 h-4 rounded-full flex items-center justify-center text-[10px] shrink-0 mt-0.5",children:O+1}),T]},O))})]}),s.jsxs("button",{onClick:K,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 transition-colors",children:[s.jsx(xd,{size:18})," Save & Connect"]})]})]})]}),s.jsx("div",{className:"flex justify-between items-start",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Social Media Studio"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Manage accounts and automate daily content sharing."})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:e.map(T=>s.jsxs("div",{className:`p-4 rounded-xl border transition-all relative group ${T.isConnected?"bg-zinc-900 border-green-500/50 shadow-[0_0_10px_rgba(34,197,94,0.1)]":"bg-black border-gray-800 opacity-75"}`,children:[s.jsx("button",{onClick:()=>he(T),className:"absolute top-2 right-2 p-2 text-gray-500 hover:text-white hover:bg-gray-800 rounded-full transition-colors",children:s.jsx($A,{size:16})}),s.jsxs("div",{className:"flex flex-col items-center text-center pt-4 pb-2 cursor-pointer",onClick:()=>he(T),children:[s.jsxs("div",{className:`p-3 rounded-full mb-3 transition-colors ${T.isConnected?"bg-white text-black":"bg-gray-800 text-gray-500"}`,children:[T.id==="fb"&&s.jsx(tc,{size:24}),T.id==="ig"&&s.jsx(xp,{size:24}),T.id==="x"&&s.jsx(yd,{size:24}),T.id==="tk"&&s.jsx(li,{size:24})]}),s.jsx("h3",{className:"font-bold text-white text-sm",children:T.name}),T.isConnected?s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsxs("p",{className:"text-xs text-green-400 font-medium",children:["@",T.accountName]})]}):s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Not Connected"})]}),T.isConnected&&s.jsx("button",{onClick:O=>{O.stopPropagation(),F(T.id)},className:"w-full mt-3 py-1 text-[10px] text-red-400 hover:text-red-300 border border-red-900/30 hover:bg-red-900/20 rounded",children:"Disconnect"}),!T.isConnected&&s.jsx("button",{onClick:()=>he(T),className:"w-full mt-3 py-1 text-[10px] text-cyan-400 hover:text-cyan-300 border border-cyan-900/30 hover:bg-cyan-900/20 rounded",children:"Configure"})]},T.id))}),s.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-500/30 rounded-2xl p-6 md:p-8 shadow-xl relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:s.jsx(tR,{size:120,className:"text-purple-500"})}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 relative z-10",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:`p-2 rounded-lg ${k?"bg-green-500/20 text-green-400":"bg-gray-800 text-gray-500"}`,children:s.jsx(qA,{size:24})}),s.jsx("h2",{className:"text-xl font-bold text-white",children:"Background Auto-Pilot (Demo)"})]}),s.jsx("p",{className:"text-sm text-gray-400 max-w-lg",children:"Enable this to simulate the server-side process that automatically picks products, writes captions, and schedules them to your connected accounts while you sleep."}),k&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 text-xs text-green-400 font-mono bg-green-900/20 border border-green-500/30 px-3 py-1.5 rounded-lg w-fit animate-pulse",children:[s.jsx(CN,{size:14})," Service Running..."]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right hidden md:block",children:[s.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:J.posts}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Posts Queued"})]}),s.jsxs("button",{onClick:()=>P(!k),className:`px-6 py-4 rounded-xl font-bold flex items-center gap-2 transition-all shadow-lg ${k?"bg-red-600 hover:bg-red-500 text-white shadow-red-900/20":"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/20"}`,children:[k?s.jsx(zA,{size:20,fill:"currentColor"}):s.jsx(BA,{size:20,fill:"currentColor"}),k?"Stop Simulation":"Start Auto-Pilot"]})]})]}),s.jsxs("div",{className:"mt-8 bg-black rounded-xl border border-gray-800 font-mono text-xs p-4 h-48 overflow-y-auto shadow-inner relative",children:[s.jsxs("div",{className:"absolute top-2 right-2 text-gray-700 flex items-center gap-1 pointer-events-none",children:[s.jsx(QA,{size:14})," Console"]}),$.length===0?s.jsx("div",{className:"h-full flex items-center justify-center text-gray-600 italic",children:"System Idle. Press Start to begin simulation."}):s.jsx("div",{className:"space-y-2",children:$.map((T,O)=>s.jsxs("div",{className:"flex gap-3 animate-in slide-in-from-left-2 fade-in duration-300",children:[s.jsxs("span",{className:"text-gray-600 shrink-0",children:["[",T.time,"]"]}),s.jsxs("span",{className:`break-all ${T.type==="success"?"text-green-400":T.type==="process"?"text-yellow-400":"text-gray-300"}`,children:[T.type==="success"&&s.jsx(gt,{size:12,className:"inline mr-1"}),T.type==="process"&&s.jsx(Do,{size:12,className:"inline mr-1 animate-spin"}),T.msg]})]},O))})]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 md:p-8 shadow-xl",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-8",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(Ir,{className:"text-pink-500"})," Manual Content Generator"]}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"One click to pick a product and write tailored captions for all your active platforms."})]}),s.jsxs("button",{onClick:A,disabled:r,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg flex items-center gap-2 disabled:opacity-50 transition-all",children:[r?s.jsx(Do,{className:"animate-spin"}):s.jsx(bc,{}),r?"Creating Strategy...":"Generate Today's Posts"]})]}),f&&s.jsxs("div",{className:"animate-in slide-in-from-bottom-4 fade-in",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6 bg-black p-4 rounded-xl border border-gray-800",children:[s.jsx("img",{src:f.images[0],alt:"",className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-pink-500 uppercase font-bold",children:"Today's Pick"}),s.jsx("h3",{className:"text-white font-bold",children:f.name}),s.jsxs("p",{className:"text-gray-400 text-xs",children:["R",f.price]})]}),s.jsx("div",{className:"ml-auto hidden md:block",children:s.jsxs("a",{href:f.images[0],download:!0,target:"_blank",rel:"noreferrer",className:"text-xs text-cyan-400 flex items-center gap-1 hover:underline",children:[s.jsx(MA,{size:14})," Download High-Res"]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.filter(T=>T.isConnected).map(T=>s.jsxs("div",{className:"bg-black border border-gray-800 p-4 rounded-xl space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800 pb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-300",children:[T.id==="fb"&&s.jsx(tc,{size:16,className:"text-blue-500"}),T.id==="ig"&&s.jsx(xp,{size:16,className:"text-pink-500"}),T.id==="x"&&s.jsx(yd,{size:16,className:"text-white"}),T.id==="tk"&&s.jsx(li,{size:16,className:"text-cyan-400"}),T.name," Draft"]}),s.jsxs("button",{onClick:()=>L(T),className:"text-xs bg-zinc-800 hover:bg-pink-600 text-white px-3 py-1.5 rounded-full transition-colors flex items-center gap-1",children:[E===T.id?s.jsx(gt,{size:12}):s.jsx(Ho,{size:12}),E===T.id?"Copied!":"Post Now"]})]}),s.jsx("textarea",{className:"w-full h-32 bg-transparent text-sm text-gray-300 resize-none focus:outline-none",value:b[T.id]||"Generating...",readOnly:!0})]},T.id))})]}),!f&&!r&&s.jsx("div",{className:"text-center py-12 border border-dashed border-gray-800 rounded-xl",children:s.jsx("p",{className:"text-gray-500",children:'Click "Generate" to start your daily social media workflow.'})})]}),s.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-blue-400 font-bold flex items-center gap-2 mb-3",children:[s.jsx(hg,{size:20})," System Capabilities Explained"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-gray-300",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white mb-2",children:"What this system CAN do:"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[s.jsx("li",{children:"Use AI to generate unique, platform-specific captions for your products instantly."}),s.jsx("li",{children:"Organize your daily posting workflow into a single dashboard."}),s.jsx("li",{children:'Use "Web Intents" to open your social apps with text pre-filled (semi-automated).'}),s.jsxs("li",{children:[s.jsx("strong",{children:"Demo Simulation:"})," As seen above, we can simulate how a server-side bot would process your queue."]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white mb-2",children:"What requires Server Upgrades:"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Fully Automated Background Posting:"}),' To enable the "Auto-Pilot" feature for real (posting while you sleep), a dedicated backend server (e.g., Firebase Cloud Functions) is required to run timers (Cron jobs).']}),s.jsxs("li",{children:[s.jsx("strong",{children:"Direct API Integration:"})," Posting directly without opening the app requires expensive API approvals and secure server-side token storage which cannot run safely in a browser-only admin panel."]})]})]})]})]})]})},Y3=()=>{var je,z,we;const{getAllUsers:n,approveAffiliate:e,rejectAffiliate:t,updateAffiliateTier:r,assignAffiliateParent:i}=Dt(),[l,c]=I.useState([]),[d,p]=I.useState(!0),[f,y]=I.useState("applicants"),[b,N]=I.useState(null),[E,j]=I.useState(10),[k,P]=I.useState(""),[$,q]=I.useState(null),[J,se]=I.useState("");I.useEffect(()=>{he()},[]);const he=async()=>{p(!0);const W=await n();c(W),p(!1)},K=l.filter(W=>{var B;return((B=W.affiliateStats)==null?void 0:B.status)==="pending"}),F=l.filter(W=>{var B;return((B=W.affiliateStats)==null?void 0:B.status)==="approved"}),A=(W,B)=>{q({userId:W.id,name:W.name,action:B}),se("")},L=async()=>{$&&($.action==="approve"?await e($.userId,J):await t($.userId,J),q(null),se(""),he())},V=W=>{var B;N(W),j(((B=W.affiliateStats)==null?void 0:B.commissionRate)||10),P("")},T=async()=>{if(!b)return;await r(b.id,E);const W={...b,affiliateStats:{...b.affiliateStats,commissionRate:E}};N(W),c(B=>B.map(Z=>Z.id===b.id?W:Z)),alert("Commission Tier Updated!")},O=async()=>{if(!b||!k)return;await i(k,b.id),alert("Recruit Added! This affiliate will now earn 1% commission from their sales.");const W=await n();c(W);const B=W.find(Z=>Z.id===b.id);B&&N(B),P("")},D=b?l.filter(W=>{var B;return((B=W.affiliateStats)==null?void 0:B.parentId)===b.id}):[],ve=(je=b==null?void 0:b.affiliateStats)!=null&&je.parentId?l.find(W=>{var B;return W.id===((B=b.affiliateStats)==null?void 0:B.parentId)}):null,ke=D.reduce((W,B)=>{var Z;return W+(((Z=B.affiliateStats)==null?void 0:Z.totalSalesValue)||0)},0)*.01;return s.jsxs("div",{className:"space-y-8 relative",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Affiliate Management"}),s.jsxs("button",{onClick:he,className:"text-xs text-gray-400 hover:text-white flex items-center gap-1",children:[s.jsx(bh,{size:14})," Refresh Data"]})]}),s.jsxs("div",{className:"flex gap-4 border-b border-gray-800 pb-1",children:[s.jsxs("button",{onClick:()=>y("applicants"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors ${f==="applicants"?"border-pink-500 text-pink-500":"border-transparent text-gray-400 hover:text-white"}`,children:["Applicants (",K.length,")"]}),s.jsxs("button",{onClick:()=>y("active"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors ${f==="active"?"border-cyan-500 text-cyan-500":"border-transparent text-gray-400 hover:text-white"}`,children:["Active Partners (",F.length,")"]})]}),d?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading data..."}):s.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden min-h-[400px]",children:[f==="applicants"&&s.jsx("div",{className:"divide-y divide-gray-800",children:K.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No pending applications."}):K.map(W=>{var B,Z;return s.jsxs("div",{className:"p-6 flex flex-col md:flex-row md:items-center justify-between hover:bg-black/20 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold",children:W.name}),s.jsx("p",{className:"text-sm text-gray-400",children:W.email}),s.jsxs("div",{className:"mt-3 p-3 bg-black/50 border border-gray-700 rounded-lg max-w-xl",children:[s.jsxs("p",{className:"text-xs text-gray-300 italic",children:['"',(B=W.affiliateStats)==null?void 0:B.joinReason,'"']}),((Z=W.affiliateStats)==null?void 0:Z.gender)&&s.jsxs("span",{className:"text-[10px] text-gray-500 mt-1 block",children:["Gender: ",W.affiliateStats.gender]})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsxs("button",{onClick:()=>A(W,"approve"),className:"px-4 py-2 bg-green-900/30 text-green-400 rounded hover:bg-green-900/50 border border-green-500/30 flex items-center gap-2 text-sm font-bold",children:[s.jsx(gt,{size:16})," Approve"]}),s.jsxs("button",{onClick:()=>A(W,"reject"),className:"px-4 py-2 bg-red-900/30 text-red-400 rounded hover:bg-red-900/50 border border-red-500/30 flex items-center gap-2 text-sm font-bold",children:[s.jsx(wn,{size:16})," Reject"]})]})]},W.id)})}),f==="active"&&s.jsx("div",{className:"divide-y divide-gray-800",children:F.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No active affiliates yet."}):F.map(W=>{var B,Z;return s.jsxs("div",{onClick:()=>V(W),className:"p-6 flex items-center justify-between hover:bg-zinc-800 cursor-pointer transition-colors group",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-800 flex items-center justify-center text-cyan-400 font-bold border border-gray-700",children:W.name.charAt(0)}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 group-hover:text-cyan-400 transition-colors",children:[W.name," ",s.jsx(qr,{size:16,className:"opacity-0 group-hover:opacity-100 transition-opacity"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:W.affiliateCode})]})]}),s.jsxs("div",{className:"text-right flex items-center gap-8",children:[s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Recruits"}),s.jsx("p",{className:"text-white font-bold text-center",children:l.filter(ee=>{var de;return((de=ee.affiliateStats)==null?void 0:de.parentId)===W.id}).length})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Sales"}),s.jsxs("p",{className:"text-white font-bold",children:["R",(B=W.affiliateStats)==null?void 0:B.totalSalesValue.toFixed(0)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Rate"}),s.jsxs("p",{className:"text-pink-400 font-bold",children:[(Z=W.affiliateStats)==null?void 0:Z.commissionRate,"%"]})]})]})]},W.id)})})]}),$&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>q(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-6 max-w-sm w-full relative z-10 shadow-2xl",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-2 capitalize",children:[$.action," Application"]}),s.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["For ",$.name]}),s.jsx("textarea",{className:"w-full bg-black border border-gray-700 rounded p-3 text-white text-sm mb-4",placeholder:"Add a note (optional)...",rows:3,value:J,onChange:W=>se(W.target.value)}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>q(null),className:"flex-1 py-2 bg-zinc-800 text-gray-300 rounded hover:bg-zinc-700",children:"Cancel"}),s.jsx("button",{onClick:L,className:`flex-1 py-2 text-white font-bold rounded ${$.action==="approve"?"bg-green-600 hover:bg-green-500":"bg-red-600 hover:bg-red-500"}`,children:"Confirm"})]})]})]}),b&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>N(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-4xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg border-2 border-white/10",children:b.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:b.name}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-gray-400",children:b.email}),s.jsx("span",{className:"text-gray-600",children:"•"}),s.jsx("span",{className:"font-mono text-cyan-400 bg-cyan-900/20 px-2 py-0.5 rounded text-xs border border-cyan-500/30",children:b.affiliateCode})]})]})]}),s.jsx("button",{onClick:()=>N(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white transition-colors",children:s.jsx(wn,{size:20})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[s.jsx(As,{size:16,className:"text-green-500"}),s.jsx("span",{className:"text-xs uppercase",children:"Direct Sales"})]}),s.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",(z=b.affiliateStats)==null?void 0:z.totalSalesValue.toFixed(2)]})]}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[s.jsx(xg,{size:16,className:"text-purple-500"}),s.jsx("span",{className:"text-xs uppercase",children:"Total Earned"})]}),s.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["R",(we=b.affiliateStats)==null?void 0:we.balance.toFixed(2)]})]}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[s.jsx(mi,{size:16,className:"text-cyan-500"}),s.jsx("span",{className:"text-xs uppercase",children:"Network"})]}),s.jsxs("p",{className:"text-2xl font-bold text-white",children:[D.length," ",s.jsx("span",{className:"text-sm font-normal text-gray-500",children:"Recruits"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(GA,{size:18,className:"text-yellow-400"})," Commission Settings"]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Direct Commission Tier (%)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{type:"number",value:E,onChange:W=>j(parseFloat(W.target.value)),className:"w-full bg-black border border-gray-600 rounded-lg p-3 text-white text-sm font-bold focus:border-pink-500 outline-none"}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),s.jsx("button",{onClick:T,className:"bg-pink-600 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 shadow-lg",children:"Update"})]}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:["Standard Tiers: ",s.jsx("span",{className:"text-gray-300",children:"10%, 11%, 15%, 20%"}),". This setting overrides automatic tier progression."]})]})})]}),ve&&s.jsxs("div",{className:"bg-blue-900/10 p-4 rounded-xl border border-blue-500/30 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-500/20 rounded-full text-blue-400",children:s.jsx(mg,{size:20})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-blue-300 uppercase font-bold mb-1",children:"Recruited By (Upline)"}),s.jsx("p",{className:"text-white font-bold text-sm",children:ve.name}),s.jsx("p",{className:"text-[10px] text-gray-400",children:ve.affiliateCode})]})]})]}),s.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700 h-full flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(RN,{size:18,className:"text-cyan-400"})," Network & Downline"]}),s.jsxs("div",{className:"mb-4 p-4 bg-black/40 rounded-xl border border-gray-700",children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Add Recruit to Downline"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{className:"flex-1 bg-zinc-900 border border-gray-600 rounded-lg p-2 text-xs text-white focus:border-cyan-500 outline-none",value:k,onChange:W=>P(W.target.value),children:[s.jsx("option",{value:"",children:"Select User to Link..."}),l.filter(W=>{var B,Z;return W.id!==b.id&&((B=W.affiliateStats)==null?void 0:B.parentId)!==b.id&&((Z=W.affiliateStats)==null?void 0:Z.status)==="approved"}).sort((W,B)=>W.name.localeCompare(B.name)).map(W=>s.jsxs("option",{value:W.id,children:[W.name," (",W.affiliateCode,")"]},W.id))]}),s.jsxs("button",{onClick:O,disabled:!k,className:"bg-cyan-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center gap-1",children:[s.jsx(ei,{size:14})," Add"]})]}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:[b.name," will earn ",s.jsx("strong",{children:"1%"})," from sales made by users added here."]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 max-h-[300px] custom-scrollbar",children:D.length===0?s.jsx("div",{className:"text-center py-8 border border-dashed border-gray-800 rounded-xl",children:s.jsx("p",{className:"text-gray-500 text-xs",children:"No recruits in downline yet."})}):D.map(W=>{var B,Z;return s.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-zinc-900 rounded-full flex items-center justify-center text-xs font-bold text-gray-400 border border-gray-700",children:W.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-white font-bold",children:W.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:W.affiliateCode})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-[10px] text-gray-500",children:["Sales: R",(B=W.affiliateStats)==null?void 0:B.totalSalesValue.toFixed(0)]}),s.jsxs("p",{className:"text-xs text-green-400 font-bold",children:["+R",(((Z=W.affiliateStats)==null?void 0:Z.totalSalesValue)||0*.01).toFixed(2)]})]})]},W.id)})}),D.length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold",children:"Passive Income Generated"}),s.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",ke.toFixed(2)]})]})]})]})]})]})]})]})},Q3=()=>{const[n,e]=I.useState(null),[t,r]=I.useState(!1),[i,l]=I.useState(!1);I.useEffect(()=>{const d=window.navigator.userAgent.toLowerCase(),p=/iphone|ipad|ipod/.test(d);if(l(p),window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)return;const y=N=>{N.preventDefault(),e(N),setTimeout(()=>r(!0),3e3)},b=()=>{r(!0)};return window.addEventListener("beforeinstallprompt",y),window.addEventListener("open-install-prompt",b),p&&setTimeout(()=>r(!0),5e3),()=>{window.removeEventListener("beforeinstallprompt",y),window.removeEventListener("open-install-prompt",b)}},[]);const c=async()=>{if(!n)return;n.prompt();const{outcome:d}=await n.userChoice;d==="accepted"&&(e(null),r(!1))};return t?s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>r(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 shadow-[0_0_50px_rgba(236,72,153,0.4)] relative max-w-sm w-full animate-in zoom-in-95 duration-300 text-center",children:[s.jsx("button",{onClick:()=>r(!1),className:"absolute top-3 right-3 p-2 text-gray-400 hover:text-white rounded-full hover:bg-white/10 transition-colors",children:s.jsx(wn,{size:20})}),s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-pink-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-xl mx-auto mb-6 rotate-3 border-2 border-white/10",children:s.jsx("span",{className:"font-cherry text-white text-3xl drop-shadow-md",children:"SV"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Install App"}),s.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-6",children:"Get the best experience! Install Spoil Me Vintage for faster access, exclusive notifications, and offline browsing."}),i?s.jsxs("div",{className:"text-xs text-left text-gray-400 bg-black/40 p-4 rounded-xl border border-gray-700",children:[s.jsxs("p",{className:"mb-3 font-bold text-white flex items-center gap-2",children:[s.jsx(li,{size:14})," iOS Installation:"]}),s.jsxs("ol",{className:"list-decimal pl-4 space-y-2",children:[s.jsxs("li",{children:["Tap the ",s.jsx("strong",{className:"text-cyan-400",children:"Share"})," button ",s.jsx(HA,{size:12,className:"inline align-middle"})," in your browser bar."]}),s.jsxs("li",{children:["Scroll down and select ",s.jsx("strong",{className:"text-white",children:"Add to Home Screen"}),"."]})]})]}):s.jsxs("button",{onClick:c,className:"w-full py-3.5 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl transition-all flex items-center justify-center gap-2 text-sm shadow-lg hover:shadow-pink-500/25 hover:scale-[1.02]",children:[s.jsx(IN,{size:18})," Install Now"]})]})]}):null},X3=()=>{const{weeklyWinners:n}=Dt(),[e,t]=I.useState(new Date),[r,i]=I.useState("");return I.useEffect(()=>{const l=()=>{const d=new Date,p=new Date(d);p.setUTCDate(d.getUTCDate()+(7-d.getUTCDay())),p.setUTCHours(8,0,0,0),p<d&&p.setUTCDate(p.getUTCDate()+7),t(p)};l();const c=setInterval(l,6e4);return()=>clearInterval(c)},[]),I.useEffect(()=>{const l=setInterval(()=>{const c=new Date,d=e.getTime()-c.getTime();if(d>0){const p=Math.floor(d/864e5),f=Math.floor(d/(1e3*60*60)%24),y=Math.floor(d/1e3/60%60);i(`${p}d ${f}h ${y}m`)}else i("Drawing new winners...")},1e3);return()=>clearInterval(l)},[e]),s.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-12",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"inline-block bg-gradient-to-br from-yellow-500 to-orange-500 p-5 rounded-full shadow-[0_0_30px_rgba(250,204,21,0.5)]",children:s.jsx(as,{size:48,className:"text-white"})}),s.jsx("h1",{className:"font-cherry text-5xl text-white",children:"This Week's Winners!"}),s.jsx("p",{className:"text-gray-300 text-lg",children:"Congratulations to the lucky members of our R19 Spoil Me Package!"})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{className:"text-center md:text-left",children:[s.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:[s.jsx(pi,{size:20,className:"text-cyan-400"}),"Next Draw"]}),s.jsx("p",{className:"text-gray-400 text-sm",children:"A new set of winners is drawn every Sunday at 08:00 AM."})]}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:r}),s.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Time Remaining"})]})]}),s.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/20 p-5 rounded-xl flex items-start gap-4",children:[s.jsx(Xt,{size:24,className:"text-purple-400 shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-purple-300",children:"How to Claim Your Prize"}),s.jsx("p",{className:"text-sm text-gray-300/80 mt-1",children:"If you're a winner, a notification has been sent to your profile's inbox containing your unique voucher code. Simply apply it at checkout to claim your winnings!"})]})]}),s.jsx("div",{className:"bg-zinc-900 rounded-2xl border border-gray-800 overflow-hidden",children:s.jsx("div",{className:"divide-y divide-gray-800",children:n.map(l=>s.jsxs("div",{className:`p-4 flex items-center justify-between gap-4 transition-colors ${l.rank<=3?"bg-yellow-900/10":""}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm border-2 ${l.rank===1?"bg-yellow-500 border-yellow-300 text-black shadow-[0_0_10px_rgba(250,204,21,0.5)]":l.rank===2?"bg-gray-400 border-gray-200 text-black":l.rank===3?"bg-orange-600 border-orange-400 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:["#",l.rank]}),s.jsx("span",{className:"font-medium text-white",children:l.name})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"font-bold text-lg text-green-400",children:["R",l.prize.toFixed(2)]}),s.jsx("span",{className:"text-xs text-gray-500 block",children:"Voucher"})]})]},l.rank))})}),s.jsxs("div",{className:"mt-12 bg-gradient-to-r from-pink-600 to-purple-600 p-8 rounded-2xl text-center shadow-2xl",children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Want to be on this list?"}),s.jsx("p",{className:"text-pink-100 mb-6 max-w-lg mx-auto",children:"Join the Spoil Me Package for just R19/month for your chance to win weekly vouchers and get exclusive member perks!"}),s.jsxs(Me,{to:"/membership",className:"inline-flex items-center gap-2 px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-lg text-lg",children:["Join Now ",s.jsx(Mt,{size:20})]})]})]})},Z3=()=>{const{weeklyWinners:n}=Dt();return s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[s.jsx(as,{size:24,className:"text-yellow-400"}),' Weekly "Spoil Me" Winners']}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Review and manage the simulated weekly prize draw."})]})}),s.jsxs("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-5 rounded-xl flex items-start gap-4",children:[s.jsx(MN,{size:24,className:"text-yellow-500 shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-yellow-400",children:"Simulation Mode Active"}),s.jsxs("p",{className:"text-sm text-yellow-200/80 mt-1",children:["This panel displays a ",s.jsx("strong",{className:"text-white",children:"simulated list of winners"})," for demonstration. In a live production environment, this page would be connected to your database to:"]}),s.jsxs("ul",{className:"list-disc pl-5 mt-3 text-xs text-yellow-200/70 space-y-1",children:[s.jsx("li",{children:'Show a list of all users subscribed to the "Spoil Me Package".'}),s.jsxs("li",{children:["Allow you to run the draw, which would randomly select ",s.jsx("strong",{children:"real users"})," from that list."]}),s.jsx("li",{children:"Automatically generate unique voucher codes and assign them to the winning user accounts."}),s.jsx("li",{children:"Send a notification to the winners' in-app inbox."})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsx("div",{className:"p-3 rounded-lg bg-cyan-900/30 text-cyan-400 border border-cyan-500/20",children:s.jsx(mi,{size:20})})}),s.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Winners This Week"}),s.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:n.length})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsx("div",{className:"p-3 rounded-lg bg-green-900/30 text-green-400 border border-green-500/20",children:s.jsx(kN,{size:20})})}),s.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Prize Value"}),s.jsxs("p",{className:"text-[22px] font-bold text-white mt-1",children:["R",n.reduce((e,t)=>e+t.prize,0).toFixed(2)]})]})]}),s.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 w-20",children:"Rank"}),s.jsx("th",{className:"p-4",children:"Winner Name"}),s.jsx("th",{className:"p-4 text-right",children:"Prize Value"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800",children:n.map(e=>s.jsxs("tr",{className:`group transition-colors ${e.rank<=3?"bg-yellow-900/10":"hover:bg-zinc-800/50"}`,children:[s.jsx("td",{className:"p-4",children:s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold border ${e.rank===1?"bg-yellow-500 border-yellow-400 text-black":e.rank===2?"bg-gray-400 border-gray-300 text-black":e.rank===3?"bg-orange-600 border-orange-500 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:e.rank})}),s.jsx("td",{className:"p-4 font-medium text-gray-200",children:e.name}),s.jsxs("td",{className:"p-4 text-right font-bold text-lg text-green-400",children:["R",e.prize.toFixed(2)]})]},e.rank))})]})})]})},eL=[{name:"Extra-Small (XS)",dimensions:"60cm × 17cm × 8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm × 41cm × 8cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm × 41cm × 19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],tL={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:0}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:0}]},nL=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],rL=()=>{const[n,e]=I.useState(()=>{const N=localStorage.getItem("spv_pudo_costs");return N?JSON.parse(N):eL}),[t,r]=I.useState(()=>{const N=localStorage.getItem("spv_paxi_costs");return N?JSON.parse(N):tL}),[i,l]=I.useState(()=>{const N=localStorage.getItem("spv_door_to_door_costs");return N?JSON.parse(N):nL}),[c,d]=I.useState({}),p=N=>{d(E=>({...E,[N]:"Saved!"})),setTimeout(()=>{d(E=>({...E,[N]:""}))},2e3)};I.useEffect(()=>{},[]),I.useEffect(()=>{try{localStorage.setItem("spv_paxi_costs",JSON.stringify(t))}catch(N){console.error("Failed to save PAXI costs to storage",N)}},[t]),I.useEffect(()=>{},[]),I.useEffect(()=>{try{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(i))}catch(N){console.error("Failed to save Door to Door costs to storage",N)}},[i]);const f=(N,E,j)=>{const k=[...n],P=parseFloat(j)||0;k[N][E]=P,e(k)},y=(N,E,j,k)=>{const P={...t},$=parseFloat(k)||0;P[N][E][j]=$,r(P)},b=(N,E,j)=>{l(k=>k.map(($,q)=>{if(q!==N)return $;let J={...$};if(E==="initialCharge"||E==="ratePerKg"||E==="handleFee"||E==="boxFee"){const se=parseFloat(j);E==="ratePerKg"&&(isNaN(se)||j==="")?J[E]=null:J[E]=isNaN(se)?0:se}else J[E]=j;return J}))};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[s.jsx(As,{size:24,className:"text-green-400"})," Shipping Expenses & Supplies"]}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Reference for PUDO & PAXI costs and supplies."})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[s.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[s.jsx(PN,{size:20,className:"text-cyan-400"})," PUDO Box & Service Pricing"]}),s.jsxs("a",{href:"https://stationery.thecourierguy.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Order Stationery ",s.jsx(Mo,{size:16})]})]}),s.jsx("div",{className:"space-y-4 md:hidden",children:n.map((N,E)=>(N.boxCost+(N.lockerToLockerCost||0)+N.lockerHandleFee,N.boxCost+(N.doorToLockerCost||0)+N.doorHandleFee,s.jsx("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-800"},E)))}),s.jsxs("div",{className:"hidden md:block mt-8",children:[s.jsx("h4",{className:"font-bold text-cyan-400 mb-2 mt-6",children:"Locker to Locker"}),s.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[s.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Box"}),s.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),s.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),s.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),s.jsx("th",{className:"px-4 py-2",children:"Locker to Locker"}),s.jsx("th",{className:"px-4 py-2",children:"Locker Handle Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Total"}),s.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),s.jsx("tbody",{children:n.map((N,E)=>{if(N.lockerToLockerCost===null)return null;const j=N.boxCost+(N.lockerToLockerCost||0)+N.lockerHandleFee;return s.jsxs("tr",{className:"border-b border-gray-700",children:[s.jsx("td",{className:"px-4 py-2 font-bold text-white",children:N.name}),s.jsx("td",{className:"px-4 py-2",children:N.dimensions}),s.jsx("td",{className:"px-4 py-2",children:N.maxWeight}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.boxCost,onChange:k=>f(E,"boxCost",k.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.lockerToLockerCost||0,onChange:k=>f(E,"lockerToLockerCost",k.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.lockerHandleFee,onChange:k=>f(E,"lockerHandleFee",k.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsxs("td",{className:"px-4 py-2 font-bold text-cyan-400",children:["R",j.toFixed(2)]}),s.jsxs("td",{className:"px-4 py-2",children:[s.jsx("button",{className:"px-2 py-1 bg-cyan-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(n)),p(`pudo-lockerToLockerCost-${E}`)},children:"💾"}),s.jsx("span",{className:"text-green-400 text-xs",children:c[`pudo-lockerToLockerCost-${E}`]})]})]},E)})})]}),s.jsx("h4",{className:"font-bold text-purple-400 mb-2 mt-6",children:"Door to Locker"}),s.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400",children:[s.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Box"}),s.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),s.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),s.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),s.jsx("th",{className:"px-4 py-2",children:"Door to Locker"}),s.jsx("th",{className:"px-4 py-2",children:"Door Handle Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Total"}),s.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),s.jsx("tbody",{children:n.map((N,E)=>{if(N.doorToLockerCost===null)return null;const j=N.boxCost+(N.doorToLockerCost||0)+N.doorHandleFee;return s.jsxs("tr",{className:"border-b border-gray-700",children:[s.jsx("td",{className:"px-4 py-2 font-bold text-white",children:N.name}),s.jsx("td",{className:"px-4 py-2",children:N.dimensions}),s.jsx("td",{className:"px-4 py-2",children:N.maxWeight}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.boxCost,onChange:k=>f(E,"boxCost",k.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.doorToLockerCost||0,onChange:k=>f(E,"doorToLockerCost",k.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.doorHandleFee,onChange:k=>f(E,"doorHandleFee",k.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsxs("td",{className:"px-4 py-2 font-bold text-purple-400",children:["R",j.toFixed(2)]}),s.jsxs("td",{className:"px-4 py-2",children:[s.jsx("button",{className:"px-2 py-1 bg-purple-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(n)),p(`pudo-doorToLockerCost-${E}`)},children:"💾"}),s.jsx("span",{className:"text-green-400 text-xs",children:c[`pudo-doorToLockerCost-${E}`]})]})]},E)})})]})]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[s.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[s.jsx(Fd,{size:20,className:"text-pink-400"})," PAXI Bag & Service Pricing"]}),s.jsxs("a",{href:"https://www.paxi.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["PAXI Website ",s.jsx(Mo,{size:16})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:Object.entries(t).map(([N,E])=>s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-pink-400 mb-2",children:N}),s.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[s.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Bag"}),s.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Service Cost"}),s.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Total"}),s.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),s.jsx("tbody",{children:E.map((j,k)=>{let P=j.bag.includes("Small")?6:15;const $=P+j.serviceCost+j.handleFee;return s.jsxs("tr",{className:"border-b border-gray-700",children:[s.jsx("td",{className:"px-4 py-2 font-bold text-white",children:j.bag}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:P,onChange:q=>{},className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right",disabled:!0})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:j.serviceCost,onChange:q=>y(N,k,"serviceCost",q.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:j.handleFee,onChange:q=>y(N,k,"handleFee",q.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsxs("td",{className:"px-4 py-2 font-bold text-pink-400",children:["R",$.toFixed(2)]}),s.jsxs("td",{className:"px-4 py-2",children:[s.jsx("button",{className:"px-2 py-1 bg-pink-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_paxi_costs",JSON.stringify(t)),p(`paxi-${N}-${k}`)},children:"💾"}),s.jsx("span",{className:"text-green-400 text-xs",children:c[`paxi-${N}-${k}`]})]})]},k)})})]})]},N))})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:s.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[s.jsx(hs,{size:20,className:"text-yellow-400"})," Door-to-Door Courier Pricing"]})}),s.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[s.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Service"}),s.jsx("th",{className:"px-4 py-2",children:"Initial Weight"}),s.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Initial Charge"}),s.jsx("th",{className:"px-4 py-2",children:"Rate per Kg"}),s.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Total"}),s.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),s.jsx("tbody",{children:i.map((N,E)=>{const j=N.boxFee+N.initialCharge+(N.ratePerKg!==null?N.ratePerKg:0)+N.handleFee;return s.jsxs("tr",{className:"border-b border-gray-700",children:[s.jsx("td",{className:"px-4 py-2 font-bold text-white",children:N.service}),s.jsx("td",{className:"px-4 py-2",children:N.initialWeight}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.boxFee,onChange:k=>b(E,"boxFee",k.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.initialCharge,onChange:k=>b(E,"initialCharge",k.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:N.ratePerKg!==null?s.jsx("input",{type:"number",value:N.ratePerKg,onChange:k=>b(E,"ratePerKg",k.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"}):"-"}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.handleFee,onChange:k=>b(E,"handleFee",k.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsxs("td",{className:"px-4 py-2 font-bold text-yellow-400",children:["R",j.toFixed(2)]}),s.jsxs("td",{className:"px-4 py-2",children:[s.jsx("button",{className:"px-2 py-1 bg-yellow-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(i)),p(`doorToDoor-${E}`)},children:"💾"}),s.jsx("span",{className:"text-green-400 text-xs",children:c[`doorToDoor-${E}`]})]})]},E)})})]})]})]})},Mb=n=>{switch(n){case"Pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-500/30";case"Processing":return"bg-blue-900/30 text-blue-400 border-blue-500/30";case"Shipped":return"bg-cyan-900/30 text-cyan-400 border-cyan-500/30";case"Delivered":return"bg-green-900/30 text-green-400 border-green-500/30";case"Cancelled":return"bg-red-900/30 text-red-400 border-red-500/30";default:return"bg-gray-800 text-gray-400"}},sL=()=>{const{orders:n,updateOrder:e,deleteOrder:t}=Dt(),[r,i]=I.useState(""),[l,c]=I.useState(""),[d,p]=I.useState(null),[f,y]=I.useState(""),b=I.useMemo(()=>n.filter(k=>{const P=r.toLowerCase();return k.orderNumber.toLowerCase().includes(P)||k.customerName.toLowerCase().includes(P)||k.customerEmail.toLowerCase().includes(P)}).filter(k=>l?k.status===l:!0),[n,r,l]),N=k=>{p(k),y(k.status)},E=async()=>{d&&f&&(await e({...d,status:f}),p(null),y(""))},j=async k=>{window.confirm("Are you sure you want to delete this order? This action cannot be undone.")&&(await t(k),p(null))};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Order Management"}),s.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[s.jsx(bh,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),s.jsx("input",{type:"text",placeholder:"Search by Order #, Name, or Email...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:r,onChange:k=>i(k.target.value)})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Yp,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),s.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none appearance-none",value:l,onChange:k=>c(k.target.value),children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"Pending",children:"Pending"}),s.jsx("option",{value:"Processing",children:"Processing"}),s.jsx("option",{value:"Shipped",children:"Shipped"}),s.jsx("option",{value:"Delivered",children:"Delivered"}),s.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),s.jsxs("div",{className:"hidden md:block bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Order #"}),s.jsx("th",{className:"p-4",children:"Date"}),s.jsx("th",{className:"p-4",children:"Customer"}),s.jsx("th",{className:"p-4 text-right",children:"Total"}),s.jsx("th",{className:"p-4",children:"Status"}),s.jsx("th",{className:"p-4"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800",children:b.map(k=>s.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[s.jsx("td",{className:"p-4 font-mono text-cyan-400",children:k.orderNumber}),s.jsx("td",{className:"p-4 text-gray-400",children:new Date(k.date).toLocaleDateString()}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-medium text-gray-200",children:k.customerName}),s.jsx("div",{className:"text-xs text-gray-500",children:k.customerEmail})]}),s.jsxs("td",{className:"p-4 text-right font-bold text-green-400",children:["R",k.total.toFixed(2)]}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${Mb(k.status)}`,children:k.status})}),s.jsx("td",{className:"p-4 text-right",children:s.jsx("button",{onClick:()=>N(k),className:"text-xs text-gray-400 hover:text-white underline opacity-0 group-hover:opacity-100 transition-opacity",children:"View Details"})})]},k.id))})]}),b.length===0&&s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),s.jsxs("div",{className:"md:hidden space-y-4",children:[b.map(k=>s.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-mono text-cyan-400 text-sm",children:k.orderNumber}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(k.date).toLocaleString()})]}),s.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${Mb(k.status)}`,children:k.status})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-200 text-sm",children:k.customerName}),s.jsx("div",{className:"text-xs text-gray-500",children:k.customerEmail})]}),s.jsxs("div",{className:"flex justify-between items-end pt-2 border-t border-gray-800",children:[s.jsx("button",{onClick:()=>N(k),className:"text-xs text-gray-400 hover:text-white underline",children:"View Details"}),s.jsxs("div",{className:"font-bold text-green-400 text-lg",children:["R",k.total.toFixed(2)]})]})]},k.id)),b.length===0&&s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),d&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>p(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-2xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Order Details"}),s.jsx("p",{className:"font-mono text-cyan-400",children:d.orderNumber})]}),s.jsx("button",{onClick:()=>p(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white",children:s.jsx(wn,{size:20})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[s.jsx(wc,{size:16,className:"text-gray-500"}),s.jsx("span",{className:"text-gray-300",children:d.customerName})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[s.jsx(Od,{size:16,className:"text-gray-500"}),s.jsx("span",{className:"text-gray-300",children:d.customerEmail})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[s.jsx(jN,{size:16,className:"text-gray-500"}),s.jsx("span",{className:"text-gray-300",children:new Date(d.date).toLocaleString()})]})]}),s.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800",children:[s.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[s.jsx(hs,{size:18,className:"text-cyan-400"}),"Shipping Information"]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-gray-400",children:"Method:"})," ",s.jsx("span",{className:"text-gray-200",children:d.shippingMethod})]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-gray-400",children:"Details:"})," ",s.jsx("span",{className:"text-gray-200",children:d.shippingDetails})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[s.jsx(no,{size:18,className:"text-pink-400"}),"Items (",d.items.reduce((k,P)=>k+P.quantity,0),")"]}),d.items.map((k,P)=>s.jsxs("div",{className:"flex items-center gap-4 bg-black/40 p-3 rounded-lg border border-gray-800",children:[s.jsx("img",{src:k.images[0],alt:k.name,className:"w-12 h-12 rounded object-cover border border-gray-700"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-bold text-white",children:k.name}),s.jsxs("p",{className:"text-xs text-gray-400",children:[k.selectedSize&&`Size: ${k.selectedSize}`,k.selectedMaterial&&`Material: ${k.selectedMaterial}`]})]}),s.jsxs("div",{className:"text-sm text-gray-400",children:["x",k.quantity]}),s.jsxs("div",{className:"text-sm font-bold text-white",children:["R",(k.price*k.quantity).toFixed(2)]})]},P))]}),s.jsxs("div",{className:"pt-4 border-t border-gray-800 text-sm text-right space-y-2",children:[s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("span",{className:"text-gray-400",children:"Subtotal:"})," ",s.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",(d.total-d.shippingCost).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("span",{className:"text-gray-400",children:"Shipping:"})," ",s.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",d.shippingCost.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-end gap-4 font-bold text-lg",children:[s.jsx("span",{className:"text-white",children:"Total:"})," ",s.jsxs("span",{className:"text-green-400 w-24 text-left",children:["R",d.total.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-800 bg-zinc-950/50 flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[s.jsx("label",{className:"text-sm font-bold text-white",children:"Status:"}),s.jsxs("select",{value:f,onChange:k=>y(k.target.value),className:"flex-1 bg-black border border-gray-700 rounded-lg p-2 text-white text-sm focus:border-pink-500 outline-none",children:[s.jsx("option",{value:"Pending",children:"Pending"}),s.jsx("option",{value:"Processing",children:"Processing"}),s.jsx("option",{value:"Shipped",children:"Shipped"}),s.jsx("option",{value:"Delivered",children:"Delivered"}),s.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),s.jsx("button",{onClick:E,className:"px-4 py-2 bg-pink-600 text-white font-bold rounded-lg text-sm hover:bg-pink-500",children:"Save"})]}),s.jsxs("button",{onClick:()=>j(d.id),className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 text-red-400 text-sm font-bold hover:bg-red-900/20 rounded-lg border border-red-900/0 hover:border-red-900/30 transition-colors",children:[s.jsx(Lo,{size:16})," Delete Order"]})]})]})]})]})},iL="modulepreload",oL=function(n){return"/"+n},Db={},od=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let c=function(f){return Promise.all(f.map(y=>Promise.resolve(y).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=c(t.map(f=>{if(f=oL(f),f in Db)return;Db[f]=!0;const y=f.endsWith(".css"),b=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${b}`))return;const N=document.createElement("link");if(N.rel=y?"stylesheet":iL,y||(N.as="script"),N.crossOrigin="",N.href=f,p&&N.setAttribute("nonce",p),document.head.appendChild(N),y)return new Promise((E,j)=>{N.addEventListener("load",E),N.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},aL=()=>{I.useEffect(()=>{(async()=>{try{if(Ud.isNativePlatform()){const{CapacitorUpdater:e}=await od(async()=>{const{CapacitorUpdater:y}=await import("./index-Cu2adS1b.js");return{CapacitorUpdater:y}},[]),{Filesystem:t,Directory:r}=await od(async()=>{const{Filesystem:y,Directory:b}=await import("./index-CYCUzo0b.js");return{Filesystem:y,Directory:b}},[]),{FileOpener:i}=await od(async()=>{const{FileOpener:y}=await import("./index-CW9y0vdJ.js");return{FileOpener:y}},[]),c=(await od(()=>import("./index-GxEgDMm2.js"),[])).App;try{if(e.notifyAppReady(),(await e.checkForUpdate()).available){console.log("Updater plugin found update — downloading via plugin..."),await e.downloadUpdate(),await e.setUpdate();return}}catch(y){console.warn("CapacitorUpdater plugin check failed:",y)}const d=await fetch("https://spoilme-edee0.web.app/version.json",{cache:"no-store"});if(!d.ok)throw new Error("Failed to fetch version.json");const p=await d.json();let f=localStorage.getItem("appVersion")||"0.0.0";try{const y=await c.getInfo();y&&y.version&&(f=y.version)}catch{}if(p.version&&p.version!==f){localStorage.setItem("appVersion",p.version);const y=await fetch(p.apkUrl);if(!y.ok)throw new Error("Failed to download APK");const b=await y.arrayBuffer(),N=new Uint8Array(b);let E="";const j=32768;for(let q=0;q<N.length;q+=j)E+=String.fromCharCode.apply(null,Array.from(N.subarray(q,q+j)));const k=btoa(E),P=`Spoil-Me-Vintage-${p.version}.apk`;await t.writeFile({path:P,data:k,directory:r.External});const $=await t.getUri({directory:r.External,path:P});await i.open({filePath:$.uri,contentType:"application/vnd.android/package-archive"})}}else{const e=await fetch("/version.json",{cache:"no-store"});if(e.ok){const t=await e.json(),r=localStorage.getItem("webVersion")||"0.0.0";t.version&&t.version!==r&&(localStorage.setItem("webVersion",t.version),window.location.reload())}}}catch(e){console.error("Auto-update flow failed:",e)}})()},[])},lL=({onClose:n})=>s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:n}),s.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-sm w-full shadow-[0_0_50px_rgba(236,72,153,0.4)] animate-in zoom-in-95 duration-300 text-center",children:[s.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:s.jsx(wn,{size:20})}),s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600 to-purple-600 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg transform rotate-3",children:s.jsx(ZA,{size:32,className:"text-white"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Voucher Redeemed!"}),s.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"To ensure your discount applies correctly and for the best shopping experience, please use our App."}),s.jsxs("button",{className:"w-full py-3 bg-white text-black font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors mb-3 shadow-lg",onClick:()=>alert("Please use the Install button at the bottom of the screen."),children:[s.jsx(IN,{size:20})," Install App"]}),s.jsx("button",{onClick:n,className:"text-xs text-gray-500 hover:text-gray-300 underline",children:"Continue in Browser"})]})]}),cL=()=>{const n=so(),e=fs(),{applyExternalVoucher:t}=Dt(),[r,i]=I.useState(!1);return I.useEffect(()=>{const c=new URLSearchParams(n.search).get("voucher");c&&t(c)&&(i(!0),e("/cart",{replace:!0}))},[n,t,e]),r?s.jsx(lL,{onClose:()=>i(!1)}):null},uL=()=>(aL(),s.jsx(_A,{children:s.jsxs(pE,{children:[s.jsx(cL,{}),s.jsx(Q3,{}),s.jsxs(aE,{children:[s.jsxs(Ut,{path:"/",element:s.jsx(gR,{}),children:[s.jsx(Ut,{index:!0,element:s.jsx(SR,{})}),s.jsx(Ut,{path:"collections/:categoryName",element:s.jsx(OR,{})}),s.jsx(Ut,{path:"catalog/:type",element:s.jsx(FR,{})}),s.jsx(Ut,{path:"product/:id",element:s.jsx(CR,{})}),s.jsx(Ut,{path:"cart",element:s.jsx(IR,{})}),s.jsx(Ut,{path:"profile",element:s.jsx(AR,{})}),s.jsx(Ut,{path:"membership",element:s.jsx(MR,{})}),s.jsx(Ut,{path:"earn-rewards",element:s.jsx(DR,{})}),s.jsx(Ut,{path:"affiliate-program",element:s.jsx(LR,{})}),s.jsx(Ut,{path:"gift-cards",element:s.jsx(VR,{})}),s.jsx(Ut,{path:"weekly-winners",element:s.jsx(X3,{})})," ",s.jsx(Ut,{path:"login",element:s.jsx(RR,{})})]}),s.jsxs(Ut,{path:"/admin",element:s.jsx(xR,{}),children:[s.jsx(Ut,{index:!0,element:s.jsx(zR,{})}),s.jsx(Ut,{path:"products",element:s.jsx($3,{})}),s.jsx(Ut,{path:"orders",element:s.jsx(sL,{})}),s.jsx(Ut,{path:"categories",element:s.jsx(H3,{})}),s.jsx(Ut,{path:"gift-cards",element:s.jsx(G3,{})}),s.jsx(Ut,{path:"social",element:s.jsx(J3,{})}),s.jsx(Ut,{path:"affiliates",element:s.jsx(Y3,{})}),s.jsx(Ut,{path:"winners",element:s.jsx(Z3,{})}),s.jsx(Ut,{path:"expenses",element:s.jsx(rL,{})})," "]}),s.jsx(Ut,{path:"*",element:s.jsx(iE,{to:"/"})})]})]})})),XN=document.getElementById("root");if(!XN)throw new Error("Could not find root element to mount to");const dL=hS.createRoot(XN);dL.render(s.jsx(Vb.StrictMode,{children:s.jsx(uL,{})}));export{LN as W,od as _,uR as b,yg as r};

