function F1(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const l=Object.getOwnPropertyDescriptor(r,i);l&&Object.defineProperty(n,i,l.get?l:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function bb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lf={exports:{}},Al={},Vf={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gx;function U1(){if(gx)return ot;gx=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator;function N(q){return q===null||typeof q!="object"?null:(q=b&&q[b]||q["@@iterator"],typeof q=="function"?q:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,P={};function I(q,M,se){this.props=q,this.context=M,this.refs=P,this.updater=se||E}I.prototype.isReactComponent={},I.prototype.setState=function(q,M){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,M,"setState")},I.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function $(){}$.prototype=I.prototype;function W(q,M,se){this.props=q,this.context=M,this.refs=P,this.updater=se||E}var K=W.prototype=new $;K.constructor=W,A(K,I.prototype),K.isPureReactComponent=!0;var Z=Array.isArray,ce=Object.prototype.hasOwnProperty,J={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function j(q,M,se){var he,ze={},We=null,et=null;if(M!=null)for(he in M.ref!==void 0&&(et=M.ref),M.key!==void 0&&(We=""+M.key),M)ce.call(M,he)&&!F.hasOwnProperty(he)&&(ze[he]=M[he]);var Ke=arguments.length-2;if(Ke===1)ze.children=se;else if(1<Ke){for(var Je=Array(Ke),He=0;He<Ke;He++)Je[He]=arguments[He+2];ze.children=Je}if(q&&q.defaultProps)for(he in Ke=q.defaultProps,Ke)ze[he]===void 0&&(ze[he]=Ke[he]);return{$$typeof:n,type:q,key:We,ref:et,props:ze,_owner:J.current}}function z(q,M){return{$$typeof:n,type:q.type,key:M,ref:q.ref,props:q.props,_owner:q._owner}}function O(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function k(q){var M={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(se){return M[se]})}var T=/\/+/g;function L(q,M){return typeof q=="object"&&q!==null&&q.key!=null?k(""+q.key):M.toString(36)}function me(q,M,se,he,ze){var We=typeof q;(We==="undefined"||We==="boolean")&&(q=null);var et=!1;if(q===null)et=!0;else switch(We){case"string":case"number":et=!0;break;case"object":switch(q.$$typeof){case n:case e:et=!0}}if(et)return et=q,ze=ze(et),q=he===""?"."+L(et,0):he,Z(ze)?(se="",q!=null&&(se=q.replace(T,"$&/")+"/"),me(ze,M,se,"",function(He){return He})):ze!=null&&(O(ze)&&(ze=z(ze,se+(!ze.key||et&&et.key===ze.key?"":(""+ze.key).replace(T,"$&/")+"/")+q)),M.push(ze)),1;if(et=0,he=he===""?".":he+":",Z(q))for(var Ke=0;Ke<q.length;Ke++){We=q[Ke];var Je=he+L(We,Ke);et+=me(We,M,se,Je,ze)}else if(Je=N(q),typeof Je=="function")for(q=Je.call(q),Ke=0;!(We=q.next()).done;)We=We.value,Je=he+L(We,Ke++),et+=me(We,M,se,Je,ze);else if(We==="object")throw M=String(q),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return et}function Ve(q,M,se){if(q==null)return q;var he=[],ze=0;return me(q,he,"","",function(We){return M.call(se,We,ze++)}),he}function Se(q){if(q._status===-1){var M=q._result;M=M(),M.then(function(se){(q._status===0||q._status===-1)&&(q._status=1,q._result=se)},function(se){(q._status===0||q._status===-1)&&(q._status=2,q._result=se)}),q._status===-1&&(q._status=0,q._result=M)}if(q._status===1)return q._result.default;throw q._result}var Pe={current:null},B={transition:null},ve={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:B,ReactCurrentOwner:J};function G(){throw Error("act(...) is not supported in production builds of React.")}return ot.Children={map:Ve,forEach:function(q,M,se){Ve(q,function(){M.apply(this,arguments)},se)},count:function(q){var M=0;return Ve(q,function(){M++}),M},toArray:function(q){return Ve(q,function(M){return M})||[]},only:function(q){if(!O(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},ot.Component=I,ot.Fragment=t,ot.Profiler=i,ot.PureComponent=W,ot.StrictMode=r,ot.Suspense=p,ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ve,ot.act=G,ot.cloneElement=function(q,M,se){if(q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+q+".");var he=A({},q.props),ze=q.key,We=q.ref,et=q._owner;if(M!=null){if(M.ref!==void 0&&(We=M.ref,et=J.current),M.key!==void 0&&(ze=""+M.key),q.type&&q.type.defaultProps)var Ke=q.type.defaultProps;for(Je in M)ce.call(M,Je)&&!F.hasOwnProperty(Je)&&(he[Je]=M[Je]===void 0&&Ke!==void 0?Ke[Je]:M[Je])}var Je=arguments.length-2;if(Je===1)he.children=se;else if(1<Je){Ke=Array(Je);for(var He=0;He<Je;He++)Ke[He]=arguments[He+2];he.children=Ke}return{$$typeof:n,type:q.type,key:ze,ref:We,props:he,_owner:et}},ot.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},q.Provider={$$typeof:l,_context:q},q.Consumer=q},ot.createElement=j,ot.createFactory=function(q){var M=j.bind(null,q);return M.type=q,M},ot.createRef=function(){return{current:null}},ot.forwardRef=function(q){return{$$typeof:d,render:q}},ot.isValidElement=O,ot.lazy=function(q){return{$$typeof:y,_payload:{_status:-1,_result:q},_init:Se}},ot.memo=function(q,M){return{$$typeof:f,type:q,compare:M===void 0?null:M}},ot.startTransition=function(q){var M=B.transition;B.transition={};try{q()}finally{B.transition=M}},ot.unstable_act=G,ot.useCallback=function(q,M){return Pe.current.useCallback(q,M)},ot.useContext=function(q){return Pe.current.useContext(q)},ot.useDebugValue=function(){},ot.useDeferredValue=function(q){return Pe.current.useDeferredValue(q)},ot.useEffect=function(q,M){return Pe.current.useEffect(q,M)},ot.useId=function(){return Pe.current.useId()},ot.useImperativeHandle=function(q,M,se){return Pe.current.useImperativeHandle(q,M,se)},ot.useInsertionEffect=function(q,M){return Pe.current.useInsertionEffect(q,M)},ot.useLayoutEffect=function(q,M){return Pe.current.useLayoutEffect(q,M)},ot.useMemo=function(q,M){return Pe.current.useMemo(q,M)},ot.useReducer=function(q,M,se){return Pe.current.useReducer(q,M,se)},ot.useRef=function(q){return Pe.current.useRef(q)},ot.useState=function(q){return Pe.current.useState(q)},ot.useSyncExternalStore=function(q,M,se){return Pe.current.useSyncExternalStore(q,M,se)},ot.useTransition=function(){return Pe.current.useTransition()},ot.version="18.3.1",ot}var xx;function Wp(){return xx||(xx=1,Vf.exports=U1()),Vf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function B1(){if(yx)return Al;yx=1;var n=Wp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,f){var y,b={},N=null,E=null;f!==void 0&&(N=""+f),p.key!==void 0&&(N=""+p.key),p.ref!==void 0&&(E=p.ref);for(y in p)r.call(p,y)&&!l.hasOwnProperty(y)&&(b[y]=p[y]);if(d&&d.defaultProps)for(y in p=d.defaultProps,p)b[y]===void 0&&(b[y]=p[y]);return{$$typeof:e,type:d,key:N,ref:E,props:b,_owner:i.current}}return Al.Fragment=t,Al.jsx=c,Al.jsxs=c,Al}var vx;function q1(){return vx||(vx=1,Lf.exports=B1()),Lf.exports}var s=q1(),D=Wp();const wb=bb(D),$1=F1({__proto__:null,default:wb},[D]);var Vu={},zf={exports:{}},ur={},Of={exports:{}},Ff={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function H1(){return bx||(bx=1,(function(n){function e(B,ve){var G=B.length;B.push(ve);e:for(;0<G;){var q=G-1>>>1,M=B[q];if(0<i(M,ve))B[q]=ve,B[G]=M,G=q;else break e}}function t(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var ve=B[0],G=B.pop();if(G!==ve){B[0]=G;e:for(var q=0,M=B.length,se=M>>>1;q<se;){var he=2*(q+1)-1,ze=B[he],We=he+1,et=B[We];if(0>i(ze,G))We<M&&0>i(et,ze)?(B[q]=et,B[We]=G,q=We):(B[q]=ze,B[he]=G,q=he);else if(We<M&&0>i(et,G))B[q]=et,B[We]=G,q=We;else break e}}return ve}function i(B,ve){var G=B.sortIndex-ve.sortIndex;return G!==0?G:B.id-ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],f=[],y=1,b=null,N=3,E=!1,A=!1,P=!1,I=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(B){for(var ve=t(f);ve!==null;){if(ve.callback===null)r(f);else if(ve.startTime<=B)r(f),ve.sortIndex=ve.expirationTime,e(p,ve);else break;ve=t(f)}}function Z(B){if(P=!1,K(B),!A)if(t(p)!==null)A=!0,Se(ce);else{var ve=t(f);ve!==null&&Pe(Z,ve.startTime-B)}}function ce(B,ve){A=!1,P&&(P=!1,$(j),j=-1),E=!0;var G=N;try{for(K(ve),b=t(p);b!==null&&(!(b.expirationTime>ve)||B&&!k());){var q=b.callback;if(typeof q=="function"){b.callback=null,N=b.priorityLevel;var M=q(b.expirationTime<=ve);ve=n.unstable_now(),typeof M=="function"?b.callback=M:b===t(p)&&r(p),K(ve)}else r(p);b=t(p)}if(b!==null)var se=!0;else{var he=t(f);he!==null&&Pe(Z,he.startTime-ve),se=!1}return se}finally{b=null,N=G,E=!1}}var J=!1,F=null,j=-1,z=5,O=-1;function k(){return!(n.unstable_now()-O<z)}function T(){if(F!==null){var B=n.unstable_now();O=B;var ve=!0;try{ve=F(!0,B)}finally{ve?L():(J=!1,F=null)}}else J=!1}var L;if(typeof W=="function")L=function(){W(T)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ve=me.port2;me.port1.onmessage=T,L=function(){Ve.postMessage(null)}}else L=function(){I(T,0)};function Se(B){F=B,J||(J=!0,L())}function Pe(B,ve){j=I(function(){B(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){A||E||(A=!0,Se(ce))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return N},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(B){switch(N){case 1:case 2:case 3:var ve=3;break;default:ve=N}var G=N;N=ve;try{return B()}finally{N=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,ve){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=N;N=B;try{return ve()}finally{N=G}},n.unstable_scheduleCallback=function(B,ve,G){var q=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?q+G:q):G=q,B){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=G+M,B={id:y++,callback:ve,priorityLevel:B,startTime:G,expirationTime:M,sortIndex:-1},G>q?(B.sortIndex=G,e(f,B),t(p)===null&&B===t(f)&&(P?($(j),j=-1):P=!0,Pe(Z,G-q))):(B.sortIndex=M,e(p,B),A||E||(A=!0,Se(ce))),B},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(B){var ve=N;return function(){var G=N;N=ve;try{return B.apply(this,arguments)}finally{N=G}}}})(Ff)),Ff}var wx;function G1(){return wx||(wx=1,Of.exports=H1()),Of.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _x;function W1(){if(_x)return ur;_x=1;var n=Wp(),e=G1();function t(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function l(o,a){c(o,a),c(o+"Capture",a)}function c(o,a){for(i[o]=a,o=0;o<a.length;o++)r.add(a[o])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},b={};function N(o){return p.call(b,o)?!0:p.call(y,o)?!1:f.test(o)?b[o]=!0:(y[o]=!0,!1)}function E(o,a,u,m){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function A(o,a,u,m){if(a===null||typeof a>"u"||E(o,a,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function P(o,a,u,m,v,_,C){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=v,this.mustUseProperty=u,this.propertyName=o,this.type=a,this.sanitizeURL=_,this.removeEmptyString=C}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){I[o]=new P(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0];I[a]=new P(a,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){I[o]=new P(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){I[o]=new P(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){I[o]=new P(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){I[o]=new P(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){I[o]=new P(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){I[o]=new P(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){I[o]=new P(o,5,!1,o.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function W(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var a=o.replace($,W);I[a]=new P(a,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var a=o.replace($,W);I[a]=new P(a,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace($,W);I[a]=new P(a,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){I[o]=new P(o,1,!1,o.toLowerCase(),null,!1,!1)}),I.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){I[o]=new P(o,1,!1,o.toLowerCase(),null,!0,!0)});function K(o,a,u,m){var v=I.hasOwnProperty(a)?I[a]:null;(v!==null?v.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(A(a,u,v,m)&&(u=null),m||v===null?N(a)&&(u===null?o.removeAttribute(a):o.setAttribute(a,""+u)):v.mustUseProperty?o[v.propertyName]=u===null?v.type===3?!1:"":u:(a=v.attributeName,m=v.attributeNamespace,u===null?o.removeAttribute(a):(v=v.type,u=v===3||v===4&&u===!0?"":""+u,m?o.setAttributeNS(m,a,u):o.setAttribute(a,u))))}var Z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),J=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),Pe=Symbol.for("react.offscreen"),B=Symbol.iterator;function ve(o){return o===null||typeof o!="object"?null:(o=B&&o[B]||o["@@iterator"],typeof o=="function"?o:null)}var G=Object.assign,q;function M(o){if(q===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);q=a&&a[1]||""}return`
`+q+o}var se=!1;function he(o,a){if(!o||se)return"";se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ie){var m=ie}Reflect.construct(o,[],a)}else{try{a.call()}catch(ie){m=ie}o.call(a.prototype)}else{try{throw Error()}catch(ie){m=ie}o()}}catch(ie){if(ie&&m&&typeof ie.stack=="string"){for(var v=ie.stack.split(`
`),_=m.stack.split(`
`),C=v.length-1,U=_.length-1;1<=C&&0<=U&&v[C]!==_[U];)U--;for(;1<=C&&0<=U;C--,U--)if(v[C]!==_[U]){if(C!==1||U!==1)do if(C--,U--,0>U||v[C]!==_[U]){var H=`
`+v[C].replace(" at new "," at ");return o.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",o.displayName)),H}while(1<=C&&0<=U);break}}}finally{se=!1,Error.prepareStackTrace=u}return(o=o?o.displayName||o.name:"")?M(o):""}function ze(o){switch(o.tag){case 5:return M(o.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return o=he(o.type,!1),o;case 11:return o=he(o.type.render,!1),o;case 1:return o=he(o.type,!0),o;default:return""}}function We(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case F:return"Fragment";case J:return"Portal";case z:return"Profiler";case j:return"StrictMode";case L:return"Suspense";case me:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case k:return(o.displayName||"Context")+".Consumer";case O:return(o._context.displayName||"Context")+".Provider";case T:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ve:return a=o.displayName||null,a!==null?a:We(o.type)||"Memo";case Se:a=o._payload,o=o._init;try{return We(o(a))}catch{}}return null}function et(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=a.render,o=o.displayName||o.name||"",a.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return We(a);case 8:return a===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ke(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Je(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function He(o){var a=Je(o)?"checked":"value",u=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),m=""+o[a];if(!o.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var v=u.get,_=u.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return v.call(this)},set:function(C){m=""+C,_.call(this,C)}}),Object.defineProperty(o,a,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(C){m=""+C},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function _t(o){o._valueTracker||(o._valueTracker=He(o))}function Ct(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var u=a.getValue(),m="";return o&&(m=Je(o)?o.checked?"true":"false":o.value),o=m,o!==u?(a.setValue(o),!0):!1}function at(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Te(o,a){var u=a.checked;return G({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??o._wrapperState.initialChecked})}function lt(o,a){var u=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;u=Ke(a.value!=null?a.value:u),o._wrapperState={initialChecked:m,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Bt(o,a){a=a.checked,a!=null&&K(o,"checked",a,!1)}function qt(o,a){Bt(o,a);var u=Ke(a.value),m=a.type;if(u!=null)m==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+u):o.value!==""+u&&(o.value=""+u);else if(m==="submit"||m==="reset"){o.removeAttribute("value");return}a.hasOwnProperty("value")?$t(o,a.type,u):a.hasOwnProperty("defaultValue")&&$t(o,a.type,Ke(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(o.defaultChecked=!!a.defaultChecked)}function dn(o,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+o._wrapperState.initialValue,u||a===o.value||(o.value=a),o.defaultValue=a}u=o.name,u!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,u!==""&&(o.name=u)}function $t(o,a,u){(a!=="number"||at(o.ownerDocument)!==o)&&(u==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+u&&(o.defaultValue=""+u))}var _e=Array.isArray;function Ht(o,a,u,m){if(o=o.options,a){a={};for(var v=0;v<u.length;v++)a["$"+u[v]]=!0;for(u=0;u<o.length;u++)v=a.hasOwnProperty("$"+o[u].value),o[u].selected!==v&&(o[u].selected=v),v&&m&&(o[u].defaultSelected=!0)}else{for(u=""+Ke(u),a=null,v=0;v<o.length;v++){if(o[v].value===u){o[v].selected=!0,m&&(o[v].defaultSelected=!0);return}a!==null||o[v].disabled||(a=o[v])}a!==null&&(a.selected=!0)}}function Dn(o,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},a,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Zn(o,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(_e(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}o._wrapperState={initialValue:Ke(u)}}function pr(o,a){var u=Ke(a.value),m=Ke(a.defaultValue);u!=null&&(u=""+u,u!==o.value&&(o.value=u),a.defaultValue==null&&o.defaultValue!==u&&(o.defaultValue=u)),m!=null&&(o.defaultValue=""+m)}function Cn(o){var a=o.textContent;a===o._wrapperState.initialValue&&a!==""&&a!==null&&(o.value=a)}function kt(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mt(o,a){return o==null||o==="http://www.w3.org/1999/xhtml"?kt(a):o==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var hn,mr=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,m,v){MSApp.execUnsafeLocalFunction(function(){return o(a,u,m,v)})}:o})(function(o,a){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=a;else{for(hn=hn||document.createElement("div"),hn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=hn.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;a.firstChild;)o.appendChild(a.firstChild)}});function er(o,a){if(a){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=a;return}}o.textContent=a}var ue={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$e=["Webkit","ms","Moz","O"];Object.keys(ue).forEach(function(o){$e.forEach(function(a){a=a+o.charAt(0).toUpperCase()+o.substring(1),ue[a]=ue[o]})});function Tt(o,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||ue.hasOwnProperty(o)&&ue[o]?(""+a).trim():a+"px"}function fn(o,a){o=o.style;for(var u in a)if(a.hasOwnProperty(u)){var m=u.indexOf("--")===0,v=Tt(u,a[u],m);u==="float"&&(u="cssFloat"),m?o.setProperty(u,v):o[u]=v}}var Ln=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Br(o,a){if(a){if(Ln[o]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Ps(o,a){if(o.indexOf("-")===-1)return typeof a.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tr=null;function ls(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var cs=null,Vn=null,tr=null;function Pr(o){if(o=xl(o)){if(typeof cs!="function")throw Error(t(280));var a=o.stateNode;a&&(a=Xc(a),cs(o.stateNode,o.type,a))}}function nr(o){Vn?tr?tr.push(o):tr=[o]:Vn=o}function js(){if(Vn){var o=Vn,a=tr;if(tr=Vn=null,Pr(o),a)for(o=0;o<a.length;o++)Pr(a[o])}}function jr(o,a){return o(a)}function qr(){}var te=!1;function Q(o,a,u){if(te)return o(a,u);te=!0;try{return jr(o,a,u)}finally{te=!1,(Vn!==null||tr!==null)&&(qr(),js())}}function ne(o,a){var u=o.stateNode;if(u===null)return null;var m=Xc(u);if(m===null)return null;u=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var fe=!1;if(d)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){fe=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch{fe=!1}function qe(o,a,u,m,v,_,C,U,H){var ie=Array.prototype.slice.call(arguments,3);try{a.apply(u,ie)}catch(pe){this.onError(pe)}}var Ze=!1,ct=null,Re=!1,Ye=null,vt={onError:function(o){Ze=!0,ct=o}};function Pt(o,a,u,m,v,_,C,U,H){Ze=!1,ct=null,qe.apply(vt,arguments)}function V(o,a,u,m,v,_,C,U,H){if(Pt.apply(this,arguments),Ze){if(Ze){var ie=ct;Ze=!1,ct=null}else throw Error(t(198));Re||(Re=!0,Ye=ie)}}function oe(o){var a=o,u=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,(a.flags&4098)!==0&&(u=a.return),o=a.return;while(o)}return a.tag===3?u:null}function Le(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function tt(o){if(oe(o)!==o)throw Error(t(188))}function it(o){var a=o.alternate;if(!a){if(a=oe(o),a===null)throw Error(t(188));return a!==o?null:o}for(var u=o,m=a;;){var v=u.return;if(v===null)break;var _=v.alternate;if(_===null){if(m=v.return,m!==null){u=m;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===u)return tt(v),o;if(_===m)return tt(v),a;_=_.sibling}throw Error(t(188))}if(u.return!==m.return)u=v,m=_;else{for(var C=!1,U=v.child;U;){if(U===u){C=!0,u=v,m=_;break}if(U===m){C=!0,m=v,u=_;break}U=U.sibling}if(!C){for(U=_.child;U;){if(U===u){C=!0,u=_,m=v;break}if(U===m){C=!0,m=_,u=v;break}U=U.sibling}if(!C)throw Error(t(189))}}if(u.alternate!==m)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?o:a}function sn(o){return o=it(o),o!==null?Nt(o):null}function Nt(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var a=Nt(o);if(a!==null)return a;o=o.sibling}return null}var bn=e.unstable_scheduleCallback,$o=e.unstable_cancelCallback,Ec=e.unstable_shouldYield,uh=e.unstable_requestPaint,jt=e.unstable_now,Cc=e.unstable_getCurrentPriorityLevel,no=e.unstable_ImmediatePriority,ai=e.unstable_UserBlockingPriority,Ir=e.unstable_NormalPriority,el=e.unstable_LowPriority,kc=e.unstable_IdlePriority,ro=null,gr=null;function Tc(o){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(ro,o,void 0,(o.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:jc,tl=Math.log,Pc=Math.LN2;function jc(o){return o>>>=0,o===0?32:31-(tl(o)/Pc|0)|0}var Ho=64,Go=4194304;function li(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function so(o,a){var u=o.pendingLanes;if(u===0)return 0;var m=0,v=o.suspendedLanes,_=o.pingedLanes,C=u&268435455;if(C!==0){var U=C&~v;U!==0?m=li(U):(_&=C,_!==0&&(m=li(_)))}else C=u&~v,C!==0?m=li(C):_!==0&&(m=li(_));if(m===0)return 0;if(a!==0&&a!==m&&(a&v)===0&&(v=m&-m,_=a&-a,v>=_||v===16&&(_&4194240)!==0))return a;if((m&4)!==0&&(m|=u&16),a=o.entangledLanes,a!==0)for(o=o.entanglements,a&=m;0<a;)u=31-Kn(a),v=1<<u,m|=o[u],a&=~v;return m}function dh(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Is(o,a){for(var u=o.suspendedLanes,m=o.pingedLanes,v=o.expirationTimes,_=o.pendingLanes;0<_;){var C=31-Kn(_),U=1<<C,H=v[C];H===-1?((U&u)===0||(U&m)!==0)&&(v[C]=dh(U,a)):H<=a&&(o.expiredLanes|=U),_&=~U}}function xr(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function io(){var o=Ho;return Ho<<=1,(Ho&4194240)===0&&(Ho=64),o}function ci(o){for(var a=[],u=0;31>u;u++)a.push(o);return a}function ui(o,a,u){o.pendingLanes|=a,a!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,a=31-Kn(a),o[a]=u}function St(o,a){var u=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var m=o.eventTimes;for(o=o.expirationTimes;0<u;){var v=31-Kn(u),_=1<<v;a[v]=0,m[v]=-1,o[v]=-1,u&=~_}}function di(o,a){var u=o.entangledLanes|=a;for(o=o.entanglements;u;){var m=31-Kn(u),v=1<<m;v&a|o[m]&a&&(o[m]|=a),u&=~v}}var dt=0;function hi(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Ic,Wo,Ac,Rc,Mc,nl=!1,us=[],kn=null,$r=null,Hr=null,fi=new Map,Ar=new Map,ds=[],hh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dc(o,a){switch(o){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":fi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(a.pointerId)}}function rr(o,a,u,m,v,_){return o===null||o.nativeEvent!==_?(o={blockedOn:a,domEventName:u,eventSystemFlags:m,nativeEvent:_,targetContainers:[v]},a!==null&&(a=xl(a),a!==null&&Wo(a)),o):(o.eventSystemFlags|=m,a=o.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),o)}function fh(o,a,u,m,v){switch(a){case"focusin":return kn=rr(kn,o,a,u,m,v),!0;case"dragenter":return $r=rr($r,o,a,u,m,v),!0;case"mouseover":return Hr=rr(Hr,o,a,u,m,v),!0;case"pointerover":var _=v.pointerId;return fi.set(_,rr(fi.get(_)||null,o,a,u,m,v)),!0;case"gotpointercapture":return _=v.pointerId,Ar.set(_,rr(Ar.get(_)||null,o,a,u,m,v)),!0}return!1}function Lc(o){var a=uo(o.target);if(a!==null){var u=oe(a);if(u!==null){if(a=u.tag,a===13){if(a=Le(u),a!==null){o.blockedOn=a,Mc(o.priority,function(){Ac(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function As(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var u=Ko(o.domEventName,o.eventSystemFlags,a[0],o.nativeEvent);if(u===null){u=o.nativeEvent;var m=new u.constructor(u.type,u);Tr=m,u.target.dispatchEvent(m),Tr=null}else return a=xl(u),a!==null&&Wo(a),o.blockedOn=u,!1;a.shift()}return!0}function oo(o,a,u){As(o)&&u.delete(a)}function Vc(){nl=!1,kn!==null&&As(kn)&&(kn=null),$r!==null&&As($r)&&($r=null),Hr!==null&&As(Hr)&&(Hr=null),fi.forEach(oo),Ar.forEach(oo)}function Gr(o,a){o.blockedOn===a&&(o.blockedOn=null,nl||(nl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vc)))}function Wr(o){function a(v){return Gr(v,o)}if(0<us.length){Gr(us[0],o);for(var u=1;u<us.length;u++){var m=us[u];m.blockedOn===o&&(m.blockedOn=null)}}for(kn!==null&&Gr(kn,o),$r!==null&&Gr($r,o),Hr!==null&&Gr(Hr,o),fi.forEach(a),Ar.forEach(a),u=0;u<ds.length;u++)m=ds[u],m.blockedOn===o&&(m.blockedOn=null);for(;0<ds.length&&(u=ds[0],u.blockedOn===null);)Lc(u),u.blockedOn===null&&ds.shift()}var Rs=Z.ReactCurrentBatchConfig,pi=!0;function Ft(o,a,u,m){var v=dt,_=Rs.transition;Rs.transition=null;try{dt=1,rl(o,a,u,m)}finally{dt=v,Rs.transition=_}}function ph(o,a,u,m){var v=dt,_=Rs.transition;Rs.transition=null;try{dt=4,rl(o,a,u,m)}finally{dt=v,Rs.transition=_}}function rl(o,a,u,m){if(pi){var v=Ko(o,a,u,m);if(v===null)Eh(o,a,m,ao,u),Dc(o,m);else if(fh(v,o,a,u,m))m.stopPropagation();else if(Dc(o,m),a&4&&-1<hh.indexOf(o)){for(;v!==null;){var _=xl(v);if(_!==null&&Ic(_),_=Ko(o,a,u,m),_===null&&Eh(o,a,m,ao,u),_===v)break;v=_}v!==null&&m.stopPropagation()}else Eh(o,a,m,null,u)}}var ao=null;function Ko(o,a,u,m){if(ao=null,o=ls(m),o=uo(o),o!==null)if(a=oe(o),a===null)o=null;else if(u=a.tag,u===13){if(o=Le(a),o!==null)return o;o=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null);return ao=o,null}function sl(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cc()){case no:return 1;case ai:return 4;case Ir:case el:return 16;case kc:return 536870912;default:return 16}default:return 16}}var yr=null,Jo=null,sr=null;function il(){if(sr)return sr;var o,a=Jo,u=a.length,m,v="value"in yr?yr.value:yr.textContent,_=v.length;for(o=0;o<u&&a[o]===v[o];o++);var C=u-o;for(m=1;m<=C&&a[u-m]===v[_-m];m++);return sr=v.slice(o,1<m?1-m:void 0)}function Yo(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function hs(){return!0}function ol(){return!1}function Tn(o){function a(u,m,v,_,C){this._reactName=u,this._targetInst=v,this.type=m,this.nativeEvent=_,this.target=C,this.currentTarget=null;for(var U in o)o.hasOwnProperty(U)&&(u=o[U],this[U]=u?u(_):_[U]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?hs:ol,this.isPropagationStopped=ol,this}return G(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),a}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=Tn(Kr),fs=G({},Kr,{view:0,detail:0}),mh=Tn(fs),Xo,Ms,mi,lo=G({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ps,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==mi&&(mi&&o.type==="mousemove"?(Xo=o.screenX-mi.screenX,Ms=o.screenY-mi.screenY):Ms=Xo=0,mi=o),Xo)},movementY:function(o){return"movementY"in o?o.movementY:Ms}}),Zo=Tn(lo),al=G({},lo,{dataTransfer:0}),zc=Tn(al),ea=G({},fs,{relatedTarget:0}),ta=Tn(ea),Oc=G({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ds=Tn(Oc),Fc=G({},Kr,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Uc=Tn(Fc),Bc=G({},Kr,{data:0}),ll=Tn(Bc),na={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $c(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=qc[o])?!!a[o]:!1}function ps(){return $c}var h=G({},fs,{key:function(o){if(o.key){var a=na[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=Yo(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Jn[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ps,charCode:function(o){return o.type==="keypress"?Yo(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Yo(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),w=Tn(h),S=G({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R=Tn(S),X=G({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ps}),ae=Tn(X),we=G({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),bt=Tn(we),pn=G({},lo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),pt=Tn(pn),wn=[9,13,27,32],on=d&&"CompositionEvent"in window,Rr=null;d&&"documentMode"in document&&(Rr=document.documentMode);var vr=d&&"TextEvent"in window&&!Rr,co=d&&(!on||Rr&&8<Rr&&11>=Rr),ra=" ",ug=!1;function dg(o,a){switch(o){case"keyup":return wn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hg(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var sa=!1;function VN(o,a){switch(o){case"compositionend":return hg(a);case"keypress":return a.which!==32?null:(ug=!0,ra);case"textInput":return o=a.data,o===ra&&ug?null:o;default:return null}}function zN(o,a){if(sa)return o==="compositionend"||!on&&dg(o,a)?(o=il(),sr=Jo=yr=null,sa=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return co&&a.locale!=="ko"?null:a.data;default:return null}}var ON={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fg(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!ON[o.type]:a==="textarea"}function pg(o,a,u,m){nr(m),a=Jc(a,"onChange"),0<a.length&&(u=new Qo("onChange","change",null,u,m),o.push({event:u,listeners:a}))}var cl=null,ul=null;function FN(o){Ag(o,0)}function Hc(o){var a=ca(o);if(Ct(a))return o}function UN(o,a){if(o==="change")return a}var mg=!1;if(d){var gh;if(d){var xh="oninput"in document;if(!xh){var gg=document.createElement("div");gg.setAttribute("oninput","return;"),xh=typeof gg.oninput=="function"}gh=xh}else gh=!1;mg=gh&&(!document.documentMode||9<document.documentMode)}function xg(){cl&&(cl.detachEvent("onpropertychange",yg),ul=cl=null)}function yg(o){if(o.propertyName==="value"&&Hc(ul)){var a=[];pg(a,ul,o,ls(o)),Q(FN,a)}}function BN(o,a,u){o==="focusin"?(xg(),cl=a,ul=u,cl.attachEvent("onpropertychange",yg)):o==="focusout"&&xg()}function qN(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Hc(ul)}function $N(o,a){if(o==="click")return Hc(a)}function HN(o,a){if(o==="input"||o==="change")return Hc(a)}function GN(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var Jr=typeof Object.is=="function"?Object.is:GN;function dl(o,a){if(Jr(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var u=Object.keys(o),m=Object.keys(a);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var v=u[m];if(!p.call(a,v)||!Jr(o[v],a[v]))return!1}return!0}function vg(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function bg(o,a){var u=vg(o);o=0;for(var m;u;){if(u.nodeType===3){if(m=o+u.textContent.length,o<=a&&m>=a)return{node:u,offset:a-o};o=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=vg(u)}}function wg(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?wg(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function _g(){for(var o=window,a=at();a instanceof o.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)o=a.contentWindow;else break;a=at(o.document)}return a}function yh(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}function WN(o){var a=_g(),u=o.focusedElem,m=o.selectionRange;if(a!==u&&u&&u.ownerDocument&&wg(u.ownerDocument.documentElement,u)){if(m!==null&&yh(u)){if(a=m.start,o=m.end,o===void 0&&(o=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(o,u.value.length);else if(o=(a=u.ownerDocument||document)&&a.defaultView||window,o.getSelection){o=o.getSelection();var v=u.textContent.length,_=Math.min(m.start,v);m=m.end===void 0?_:Math.min(m.end,v),!o.extend&&_>m&&(v=m,m=_,_=v),v=bg(u,_);var C=bg(u,m);v&&C&&(o.rangeCount!==1||o.anchorNode!==v.node||o.anchorOffset!==v.offset||o.focusNode!==C.node||o.focusOffset!==C.offset)&&(a=a.createRange(),a.setStart(v.node,v.offset),o.removeAllRanges(),_>m?(o.addRange(a),o.extend(C.node,C.offset)):(a.setEnd(C.node,C.offset),o.addRange(a)))}}for(a=[],o=u;o=o.parentNode;)o.nodeType===1&&a.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)o=a[u],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var KN=d&&"documentMode"in document&&11>=document.documentMode,ia=null,vh=null,hl=null,bh=!1;function Ng(o,a,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;bh||ia==null||ia!==at(m)||(m=ia,"selectionStart"in m&&yh(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),hl&&dl(hl,m)||(hl=m,m=Jc(vh,"onSelect"),0<m.length&&(a=new Qo("onSelect","select",null,a,u),o.push({event:a,listeners:m}),a.target=ia)))}function Gc(o,a){var u={};return u[o.toLowerCase()]=a.toLowerCase(),u["Webkit"+o]="webkit"+a,u["Moz"+o]="moz"+a,u}var oa={animationend:Gc("Animation","AnimationEnd"),animationiteration:Gc("Animation","AnimationIteration"),animationstart:Gc("Animation","AnimationStart"),transitionend:Gc("Transition","TransitionEnd")},wh={},Sg={};d&&(Sg=document.createElement("div").style,"AnimationEvent"in window||(delete oa.animationend.animation,delete oa.animationiteration.animation,delete oa.animationstart.animation),"TransitionEvent"in window||delete oa.transitionend.transition);function Wc(o){if(wh[o])return wh[o];if(!oa[o])return o;var a=oa[o],u;for(u in a)if(a.hasOwnProperty(u)&&u in Sg)return wh[o]=a[u];return o}var Eg=Wc("animationend"),Cg=Wc("animationiteration"),kg=Wc("animationstart"),Tg=Wc("transitionend"),Pg=new Map,jg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(o,a){Pg.set(o,a),l(a,[o])}for(var _h=0;_h<jg.length;_h++){var Nh=jg[_h],JN=Nh.toLowerCase(),YN=Nh[0].toUpperCase()+Nh.slice(1);gi(JN,"on"+YN)}gi(Eg,"onAnimationEnd"),gi(Cg,"onAnimationIteration"),gi(kg,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(Tg,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QN=new Set("cancel close invalid load scroll toggle".split(" ").concat(fl));function Ig(o,a,u){var m=o.type||"unknown-event";o.currentTarget=u,V(m,a,void 0,o),o.currentTarget=null}function Ag(o,a){a=(a&4)!==0;for(var u=0;u<o.length;u++){var m=o[u],v=m.event;m=m.listeners;e:{var _=void 0;if(a)for(var C=m.length-1;0<=C;C--){var U=m[C],H=U.instance,ie=U.currentTarget;if(U=U.listener,H!==_&&v.isPropagationStopped())break e;Ig(v,U,ie),_=H}else for(C=0;C<m.length;C++){if(U=m[C],H=U.instance,ie=U.currentTarget,U=U.listener,H!==_&&v.isPropagationStopped())break e;Ig(v,U,ie),_=H}}}if(Re)throw o=Ye,Re=!1,Ye=null,o}function Dt(o,a){var u=a[Ih];u===void 0&&(u=a[Ih]=new Set);var m=o+"__bubble";u.has(m)||(Rg(a,o,2,!1),u.add(m))}function Sh(o,a,u){var m=0;a&&(m|=4),Rg(u,o,m,a)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function pl(o){if(!o[Kc]){o[Kc]=!0,r.forEach(function(u){u!=="selectionchange"&&(QN.has(u)||Sh(u,!1,o),Sh(u,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[Kc]||(a[Kc]=!0,Sh("selectionchange",!1,a))}}function Rg(o,a,u,m){switch(sl(a)){case 1:var v=Ft;break;case 4:v=ph;break;default:v=rl}u=v.bind(null,a,u,o),v=void 0,!fe||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),m?v!==void 0?o.addEventListener(a,u,{capture:!0,passive:v}):o.addEventListener(a,u,!0):v!==void 0?o.addEventListener(a,u,{passive:v}):o.addEventListener(a,u,!1)}function Eh(o,a,u,m,v){var _=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var U=m.stateNode.containerInfo;if(U===v||U.nodeType===8&&U.parentNode===v)break;if(C===4)for(C=m.return;C!==null;){var H=C.tag;if((H===3||H===4)&&(H=C.stateNode.containerInfo,H===v||H.nodeType===8&&H.parentNode===v))return;C=C.return}for(;U!==null;){if(C=uo(U),C===null)return;if(H=C.tag,H===5||H===6){m=_=C;continue e}U=U.parentNode}}m=m.return}Q(function(){var ie=_,pe=ls(u),ye=[];e:{var de=Pg.get(o);if(de!==void 0){var Ce=Qo,Ae=o;switch(o){case"keypress":if(Yo(u)===0)break e;case"keydown":case"keyup":Ce=w;break;case"focusin":Ae="focus",Ce=ta;break;case"focusout":Ae="blur",Ce=ta;break;case"beforeblur":case"afterblur":Ce=ta;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ce=Zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ce=zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ce=ae;break;case Eg:case Cg:case kg:Ce=Ds;break;case Tg:Ce=bt;break;case"scroll":Ce=mh;break;case"wheel":Ce=pt;break;case"copy":case"cut":case"paste":Ce=Uc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ce=R}var Me=(a&4)!==0,en=!Me&&o==="scroll",ee=Me?de!==null?de+"Capture":null:de;Me=[];for(var Y=ie,re;Y!==null;){re=Y;var be=re.stateNode;if(re.tag===5&&be!==null&&(re=be,ee!==null&&(be=ne(Y,ee),be!=null&&Me.push(ml(Y,be,re)))),en)break;Y=Y.return}0<Me.length&&(de=new Ce(de,Ae,null,u,pe),ye.push({event:de,listeners:Me}))}}if((a&7)===0){e:{if(de=o==="mouseover"||o==="pointerover",Ce=o==="mouseout"||o==="pointerout",de&&u!==Tr&&(Ae=u.relatedTarget||u.fromElement)&&(uo(Ae)||Ae[Ls]))break e;if((Ce||de)&&(de=pe.window===pe?pe:(de=pe.ownerDocument)?de.defaultView||de.parentWindow:window,Ce?(Ae=u.relatedTarget||u.toElement,Ce=ie,Ae=Ae?uo(Ae):null,Ae!==null&&(en=oe(Ae),Ae!==en||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(Ce=null,Ae=ie),Ce!==Ae)){if(Me=Zo,be="onMouseLeave",ee="onMouseEnter",Y="mouse",(o==="pointerout"||o==="pointerover")&&(Me=R,be="onPointerLeave",ee="onPointerEnter",Y="pointer"),en=Ce==null?de:ca(Ce),re=Ae==null?de:ca(Ae),de=new Me(be,Y+"leave",Ce,u,pe),de.target=en,de.relatedTarget=re,be=null,uo(pe)===ie&&(Me=new Me(ee,Y+"enter",Ae,u,pe),Me.target=re,Me.relatedTarget=en,be=Me),en=be,Ce&&Ae)t:{for(Me=Ce,ee=Ae,Y=0,re=Me;re;re=aa(re))Y++;for(re=0,be=ee;be;be=aa(be))re++;for(;0<Y-re;)Me=aa(Me),Y--;for(;0<re-Y;)ee=aa(ee),re--;for(;Y--;){if(Me===ee||ee!==null&&Me===ee.alternate)break t;Me=aa(Me),ee=aa(ee)}Me=null}else Me=null;Ce!==null&&Mg(ye,de,Ce,Me,!1),Ae!==null&&en!==null&&Mg(ye,en,Ae,Me,!0)}}e:{if(de=ie?ca(ie):window,Ce=de.nodeName&&de.nodeName.toLowerCase(),Ce==="select"||Ce==="input"&&de.type==="file")var Oe=UN;else if(fg(de))if(mg)Oe=HN;else{Oe=qN;var Ue=BN}else(Ce=de.nodeName)&&Ce.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(Oe=$N);if(Oe&&(Oe=Oe(o,ie))){pg(ye,Oe,u,pe);break e}Ue&&Ue(o,de,ie),o==="focusout"&&(Ue=de._wrapperState)&&Ue.controlled&&de.type==="number"&&$t(de,"number",de.value)}switch(Ue=ie?ca(ie):window,o){case"focusin":(fg(Ue)||Ue.contentEditable==="true")&&(ia=Ue,vh=ie,hl=null);break;case"focusout":hl=vh=ia=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,Ng(ye,u,pe);break;case"selectionchange":if(KN)break;case"keydown":case"keyup":Ng(ye,u,pe)}var Be;if(on)e:{switch(o){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else sa?dg(o,u)&&(Ge="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(Ge="onCompositionStart");Ge&&(co&&u.locale!=="ko"&&(sa||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&sa&&(Be=il()):(yr=pe,Jo="value"in yr?yr.value:yr.textContent,sa=!0)),Ue=Jc(ie,Ge),0<Ue.length&&(Ge=new ll(Ge,o,null,u,pe),ye.push({event:Ge,listeners:Ue}),Be?Ge.data=Be:(Be=hg(u),Be!==null&&(Ge.data=Be)))),(Be=vr?VN(o,u):zN(o,u))&&(ie=Jc(ie,"onBeforeInput"),0<ie.length&&(pe=new ll("onBeforeInput","beforeinput",null,u,pe),ye.push({event:pe,listeners:ie}),pe.data=Be))}Ag(ye,a)})}function ml(o,a,u){return{instance:o,listener:a,currentTarget:u}}function Jc(o,a){for(var u=a+"Capture",m=[];o!==null;){var v=o,_=v.stateNode;v.tag===5&&_!==null&&(v=_,_=ne(o,u),_!=null&&m.unshift(ml(o,_,v)),_=ne(o,a),_!=null&&m.push(ml(o,_,v))),o=o.return}return m}function aa(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Mg(o,a,u,m,v){for(var _=a._reactName,C=[];u!==null&&u!==m;){var U=u,H=U.alternate,ie=U.stateNode;if(H!==null&&H===m)break;U.tag===5&&ie!==null&&(U=ie,v?(H=ne(u,_),H!=null&&C.unshift(ml(u,H,U))):v||(H=ne(u,_),H!=null&&C.push(ml(u,H,U)))),u=u.return}C.length!==0&&o.push({event:a,listeners:C})}var XN=/\r\n?/g,ZN=/\u0000|\uFFFD/g;function Dg(o){return(typeof o=="string"?o:""+o).replace(XN,`
`).replace(ZN,"")}function Yc(o,a,u){if(a=Dg(a),Dg(o)!==a&&u)throw Error(t(425))}function Qc(){}var Ch=null,kh=null;function Th(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ph=typeof setTimeout=="function"?setTimeout:void 0,e1=typeof clearTimeout=="function"?clearTimeout:void 0,Lg=typeof Promise=="function"?Promise:void 0,t1=typeof queueMicrotask=="function"?queueMicrotask:typeof Lg<"u"?function(o){return Lg.resolve(null).then(o).catch(n1)}:Ph;function n1(o){setTimeout(function(){throw o})}function jh(o,a){var u=a,m=0;do{var v=u.nextSibling;if(o.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(m===0){o.removeChild(v),Wr(a);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=v}while(u);Wr(a)}function xi(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return o}function Vg(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return o;a--}else u==="/$"&&a++}o=o.previousSibling}return null}var la=Math.random().toString(36).slice(2),ms="__reactFiber$"+la,gl="__reactProps$"+la,Ls="__reactContainer$"+la,Ih="__reactEvents$"+la,r1="__reactListeners$"+la,s1="__reactHandles$"+la;function uo(o){var a=o[ms];if(a)return a;for(var u=o.parentNode;u;){if(a=u[Ls]||u[ms]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(o=Vg(o);o!==null;){if(u=o[ms])return u;o=Vg(o)}return a}o=u,u=o.parentNode}return null}function xl(o){return o=o[ms]||o[Ls],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ca(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Xc(o){return o[gl]||null}var Ah=[],ua=-1;function yi(o){return{current:o}}function Lt(o){0>ua||(o.current=Ah[ua],Ah[ua]=null,ua--)}function It(o,a){ua++,Ah[ua]=o.current,o.current=a}var vi={},zn=yi(vi),ir=yi(!1),ho=vi;function da(o,a){var u=o.type.contextTypes;if(!u)return vi;var m=o.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var v={},_;for(_ in u)v[_]=a[_];return m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=v),v}function or(o){return o=o.childContextTypes,o!=null}function Zc(){Lt(ir),Lt(zn)}function zg(o,a,u){if(zn.current!==vi)throw Error(t(168));It(zn,a),It(ir,u)}function Og(o,a,u){var m=o.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var v in m)if(!(v in a))throw Error(t(108,et(o)||"Unknown",v));return G({},u,m)}function eu(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||vi,ho=zn.current,It(zn,o),It(ir,ir.current),!0}function Fg(o,a,u){var m=o.stateNode;if(!m)throw Error(t(169));u?(o=Og(o,a,ho),m.__reactInternalMemoizedMergedChildContext=o,Lt(ir),Lt(zn),It(zn,o)):Lt(ir),It(ir,u)}var Vs=null,tu=!1,Rh=!1;function Ug(o){Vs===null?Vs=[o]:Vs.push(o)}function i1(o){tu=!0,Ug(o)}function bi(){if(!Rh&&Vs!==null){Rh=!0;var o=0,a=dt;try{var u=Vs;for(dt=1;o<u.length;o++){var m=u[o];do m=m(!0);while(m!==null)}Vs=null,tu=!1}catch(v){throw Vs!==null&&(Vs=Vs.slice(o+1)),bn(no,bi),v}finally{dt=a,Rh=!1}}return null}var ha=[],fa=0,nu=null,ru=0,Mr=[],Dr=0,fo=null,zs=1,Os="";function po(o,a){ha[fa++]=ru,ha[fa++]=nu,nu=o,ru=a}function Bg(o,a,u){Mr[Dr++]=zs,Mr[Dr++]=Os,Mr[Dr++]=fo,fo=o;var m=zs;o=Os;var v=32-Kn(m)-1;m&=~(1<<v),u+=1;var _=32-Kn(a)+v;if(30<_){var C=v-v%5;_=(m&(1<<C)-1).toString(32),m>>=C,v-=C,zs=1<<32-Kn(a)+v|u<<v|m,Os=_+o}else zs=1<<_|u<<v|m,Os=o}function Mh(o){o.return!==null&&(po(o,1),Bg(o,1,0))}function Dh(o){for(;o===nu;)nu=ha[--fa],ha[fa]=null,ru=ha[--fa],ha[fa]=null;for(;o===fo;)fo=Mr[--Dr],Mr[Dr]=null,Os=Mr[--Dr],Mr[Dr]=null,zs=Mr[--Dr],Mr[Dr]=null}var br=null,wr=null,Ut=!1,Yr=null;function qg(o,a){var u=Or(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=o,a=o.deletions,a===null?(o.deletions=[u],o.flags|=16):a.push(u)}function $g(o,a){switch(o.tag){case 5:var u=o.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(o.stateNode=a,br=o,wr=xi(a.firstChild),!0):!1;case 6:return a=o.pendingProps===""||a.nodeType!==3?null:a,a!==null?(o.stateNode=a,br=o,wr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=fo!==null?{id:zs,overflow:Os}:null,o.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Or(18,null,null,0),u.stateNode=a,u.return=o,o.child=u,br=o,wr=null,!0):!1;default:return!1}}function Lh(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Vh(o){if(Ut){var a=wr;if(a){var u=a;if(!$g(o,a)){if(Lh(o))throw Error(t(418));a=xi(u.nextSibling);var m=br;a&&$g(o,a)?qg(m,u):(o.flags=o.flags&-4097|2,Ut=!1,br=o)}}else{if(Lh(o))throw Error(t(418));o.flags=o.flags&-4097|2,Ut=!1,br=o}}}function Hg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;br=o}function su(o){if(o!==br)return!1;if(!Ut)return Hg(o),Ut=!0,!1;var a;if((a=o.tag!==3)&&!(a=o.tag!==5)&&(a=o.type,a=a!=="head"&&a!=="body"&&!Th(o.type,o.memoizedProps)),a&&(a=wr)){if(Lh(o))throw Gg(),Error(t(418));for(;a;)qg(o,a),a=xi(a.nextSibling)}if(Hg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,a=0;o;){if(o.nodeType===8){var u=o.data;if(u==="/$"){if(a===0){wr=xi(o.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}o=o.nextSibling}wr=null}}else wr=br?xi(o.stateNode.nextSibling):null;return!0}function Gg(){for(var o=wr;o;)o=xi(o.nextSibling)}function pa(){wr=br=null,Ut=!1}function zh(o){Yr===null?Yr=[o]:Yr.push(o)}var o1=Z.ReactCurrentBatchConfig;function yl(o,a,u){if(o=u.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var m=u.stateNode}if(!m)throw Error(t(147,o));var v=m,_=""+o;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(C){var U=v.refs;C===null?delete U[_]:U[_]=C},a._stringRef=_,a)}if(typeof o!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,o))}return o}function iu(o,a){throw o=Object.prototype.toString.call(a),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function Wg(o){var a=o._init;return a(o._payload)}function Kg(o){function a(ee,Y){if(o){var re=ee.deletions;re===null?(ee.deletions=[Y],ee.flags|=16):re.push(Y)}}function u(ee,Y){if(!o)return null;for(;Y!==null;)a(ee,Y),Y=Y.sibling;return null}function m(ee,Y){for(ee=new Map;Y!==null;)Y.key!==null?ee.set(Y.key,Y):ee.set(Y.index,Y),Y=Y.sibling;return ee}function v(ee,Y){return ee=Ti(ee,Y),ee.index=0,ee.sibling=null,ee}function _(ee,Y,re){return ee.index=re,o?(re=ee.alternate,re!==null?(re=re.index,re<Y?(ee.flags|=2,Y):re):(ee.flags|=2,Y)):(ee.flags|=1048576,Y)}function C(ee){return o&&ee.alternate===null&&(ee.flags|=2),ee}function U(ee,Y,re,be){return Y===null||Y.tag!==6?(Y=jf(re,ee.mode,be),Y.return=ee,Y):(Y=v(Y,re),Y.return=ee,Y)}function H(ee,Y,re,be){var Oe=re.type;return Oe===F?pe(ee,Y,re.props.children,be,re.key):Y!==null&&(Y.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===Se&&Wg(Oe)===Y.type)?(be=v(Y,re.props),be.ref=yl(ee,Y,re),be.return=ee,be):(be=Pu(re.type,re.key,re.props,null,ee.mode,be),be.ref=yl(ee,Y,re),be.return=ee,be)}function ie(ee,Y,re,be){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==re.containerInfo||Y.stateNode.implementation!==re.implementation?(Y=If(re,ee.mode,be),Y.return=ee,Y):(Y=v(Y,re.children||[]),Y.return=ee,Y)}function pe(ee,Y,re,be,Oe){return Y===null||Y.tag!==7?(Y=_o(re,ee.mode,be,Oe),Y.return=ee,Y):(Y=v(Y,re),Y.return=ee,Y)}function ye(ee,Y,re){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=jf(""+Y,ee.mode,re),Y.return=ee,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case ce:return re=Pu(Y.type,Y.key,Y.props,null,ee.mode,re),re.ref=yl(ee,null,Y),re.return=ee,re;case J:return Y=If(Y,ee.mode,re),Y.return=ee,Y;case Se:var be=Y._init;return ye(ee,be(Y._payload),re)}if(_e(Y)||ve(Y))return Y=_o(Y,ee.mode,re,null),Y.return=ee,Y;iu(ee,Y)}return null}function de(ee,Y,re,be){var Oe=Y!==null?Y.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Oe!==null?null:U(ee,Y,""+re,be);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case ce:return re.key===Oe?H(ee,Y,re,be):null;case J:return re.key===Oe?ie(ee,Y,re,be):null;case Se:return Oe=re._init,de(ee,Y,Oe(re._payload),be)}if(_e(re)||ve(re))return Oe!==null?null:pe(ee,Y,re,be,null);iu(ee,re)}return null}function Ce(ee,Y,re,be,Oe){if(typeof be=="string"&&be!==""||typeof be=="number")return ee=ee.get(re)||null,U(Y,ee,""+be,Oe);if(typeof be=="object"&&be!==null){switch(be.$$typeof){case ce:return ee=ee.get(be.key===null?re:be.key)||null,H(Y,ee,be,Oe);case J:return ee=ee.get(be.key===null?re:be.key)||null,ie(Y,ee,be,Oe);case Se:var Ue=be._init;return Ce(ee,Y,re,Ue(be._payload),Oe)}if(_e(be)||ve(be))return ee=ee.get(re)||null,pe(Y,ee,be,Oe,null);iu(Y,be)}return null}function Ae(ee,Y,re,be){for(var Oe=null,Ue=null,Be=Y,Ge=Y=0,Sn=null;Be!==null&&Ge<re.length;Ge++){Be.index>Ge?(Sn=Be,Be=null):Sn=Be.sibling;var xt=de(ee,Be,re[Ge],be);if(xt===null){Be===null&&(Be=Sn);break}o&&Be&&xt.alternate===null&&a(ee,Be),Y=_(xt,Y,Ge),Ue===null?Oe=xt:Ue.sibling=xt,Ue=xt,Be=Sn}if(Ge===re.length)return u(ee,Be),Ut&&po(ee,Ge),Oe;if(Be===null){for(;Ge<re.length;Ge++)Be=ye(ee,re[Ge],be),Be!==null&&(Y=_(Be,Y,Ge),Ue===null?Oe=Be:Ue.sibling=Be,Ue=Be);return Ut&&po(ee,Ge),Oe}for(Be=m(ee,Be);Ge<re.length;Ge++)Sn=Ce(Be,ee,Ge,re[Ge],be),Sn!==null&&(o&&Sn.alternate!==null&&Be.delete(Sn.key===null?Ge:Sn.key),Y=_(Sn,Y,Ge),Ue===null?Oe=Sn:Ue.sibling=Sn,Ue=Sn);return o&&Be.forEach(function(Pi){return a(ee,Pi)}),Ut&&po(ee,Ge),Oe}function Me(ee,Y,re,be){var Oe=ve(re);if(typeof Oe!="function")throw Error(t(150));if(re=Oe.call(re),re==null)throw Error(t(151));for(var Ue=Oe=null,Be=Y,Ge=Y=0,Sn=null,xt=re.next();Be!==null&&!xt.done;Ge++,xt=re.next()){Be.index>Ge?(Sn=Be,Be=null):Sn=Be.sibling;var Pi=de(ee,Be,xt.value,be);if(Pi===null){Be===null&&(Be=Sn);break}o&&Be&&Pi.alternate===null&&a(ee,Be),Y=_(Pi,Y,Ge),Ue===null?Oe=Pi:Ue.sibling=Pi,Ue=Pi,Be=Sn}if(xt.done)return u(ee,Be),Ut&&po(ee,Ge),Oe;if(Be===null){for(;!xt.done;Ge++,xt=re.next())xt=ye(ee,xt.value,be),xt!==null&&(Y=_(xt,Y,Ge),Ue===null?Oe=xt:Ue.sibling=xt,Ue=xt);return Ut&&po(ee,Ge),Oe}for(Be=m(ee,Be);!xt.done;Ge++,xt=re.next())xt=Ce(Be,ee,Ge,xt.value,be),xt!==null&&(o&&xt.alternate!==null&&Be.delete(xt.key===null?Ge:xt.key),Y=_(xt,Y,Ge),Ue===null?Oe=xt:Ue.sibling=xt,Ue=xt);return o&&Be.forEach(function(O1){return a(ee,O1)}),Ut&&po(ee,Ge),Oe}function en(ee,Y,re,be){if(typeof re=="object"&&re!==null&&re.type===F&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case ce:e:{for(var Oe=re.key,Ue=Y;Ue!==null;){if(Ue.key===Oe){if(Oe=re.type,Oe===F){if(Ue.tag===7){u(ee,Ue.sibling),Y=v(Ue,re.props.children),Y.return=ee,ee=Y;break e}}else if(Ue.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===Se&&Wg(Oe)===Ue.type){u(ee,Ue.sibling),Y=v(Ue,re.props),Y.ref=yl(ee,Ue,re),Y.return=ee,ee=Y;break e}u(ee,Ue);break}else a(ee,Ue);Ue=Ue.sibling}re.type===F?(Y=_o(re.props.children,ee.mode,be,re.key),Y.return=ee,ee=Y):(be=Pu(re.type,re.key,re.props,null,ee.mode,be),be.ref=yl(ee,Y,re),be.return=ee,ee=be)}return C(ee);case J:e:{for(Ue=re.key;Y!==null;){if(Y.key===Ue)if(Y.tag===4&&Y.stateNode.containerInfo===re.containerInfo&&Y.stateNode.implementation===re.implementation){u(ee,Y.sibling),Y=v(Y,re.children||[]),Y.return=ee,ee=Y;break e}else{u(ee,Y);break}else a(ee,Y);Y=Y.sibling}Y=If(re,ee.mode,be),Y.return=ee,ee=Y}return C(ee);case Se:return Ue=re._init,en(ee,Y,Ue(re._payload),be)}if(_e(re))return Ae(ee,Y,re,be);if(ve(re))return Me(ee,Y,re,be);iu(ee,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,Y!==null&&Y.tag===6?(u(ee,Y.sibling),Y=v(Y,re),Y.return=ee,ee=Y):(u(ee,Y),Y=jf(re,ee.mode,be),Y.return=ee,ee=Y),C(ee)):u(ee,Y)}return en}var ma=Kg(!0),Jg=Kg(!1),ou=yi(null),au=null,ga=null,Oh=null;function Fh(){Oh=ga=au=null}function Uh(o){var a=ou.current;Lt(ou),o._currentValue=a}function Bh(o,a,u){for(;o!==null;){var m=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),o===u)break;o=o.return}}function xa(o,a){au=o,Oh=ga=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&a)!==0&&(ar=!0),o.firstContext=null)}function Lr(o){var a=o._currentValue;if(Oh!==o)if(o={context:o,memoizedValue:a,next:null},ga===null){if(au===null)throw Error(t(308));ga=o,au.dependencies={lanes:0,firstContext:o}}else ga=ga.next=o;return a}var mo=null;function qh(o){mo===null?mo=[o]:mo.push(o)}function Yg(o,a,u,m){var v=a.interleaved;return v===null?(u.next=u,qh(a)):(u.next=v.next,v.next=u),a.interleaved=u,Fs(o,m)}function Fs(o,a){o.lanes|=a;var u=o.alternate;for(u!==null&&(u.lanes|=a),u=o,o=o.return;o!==null;)o.childLanes|=a,u=o.alternate,u!==null&&(u.childLanes|=a),u=o,o=o.return;return u.tag===3?u.stateNode:null}var wi=!1;function $h(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qg(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Us(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function _i(o,a,u){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(gt&2)!==0){var v=m.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),m.pending=a,Fs(o,u)}return v=m.interleaved,v===null?(a.next=a,qh(m)):(a.next=v.next,v.next=a),m.interleaved=a,Fs(o,u)}function lu(o,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var m=a.lanes;m&=o.pendingLanes,u|=m,a.lanes=u,di(o,u)}}function Xg(o,a){var u=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var v=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var C={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?v=_=C:_=_.next=C,u=u.next}while(u!==null);_===null?v=_=a:_=_.next=a}else v=_=a;u={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:m.shared,effects:m.effects},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=a:o.next=a,u.lastBaseUpdate=a}function cu(o,a,u,m){var v=o.updateQueue;wi=!1;var _=v.firstBaseUpdate,C=v.lastBaseUpdate,U=v.shared.pending;if(U!==null){v.shared.pending=null;var H=U,ie=H.next;H.next=null,C===null?_=ie:C.next=ie,C=H;var pe=o.alternate;pe!==null&&(pe=pe.updateQueue,U=pe.lastBaseUpdate,U!==C&&(U===null?pe.firstBaseUpdate=ie:U.next=ie,pe.lastBaseUpdate=H))}if(_!==null){var ye=v.baseState;C=0,pe=ie=H=null,U=_;do{var de=U.lane,Ce=U.eventTime;if((m&de)===de){pe!==null&&(pe=pe.next={eventTime:Ce,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var Ae=o,Me=U;switch(de=a,Ce=u,Me.tag){case 1:if(Ae=Me.payload,typeof Ae=="function"){ye=Ae.call(Ce,ye,de);break e}ye=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Me.payload,de=typeof Ae=="function"?Ae.call(Ce,ye,de):Ae,de==null)break e;ye=G({},ye,de);break e;case 2:wi=!0}}U.callback!==null&&U.lane!==0&&(o.flags|=64,de=v.effects,de===null?v.effects=[U]:de.push(U))}else Ce={eventTime:Ce,lane:de,tag:U.tag,payload:U.payload,callback:U.callback,next:null},pe===null?(ie=pe=Ce,H=ye):pe=pe.next=Ce,C|=de;if(U=U.next,U===null){if(U=v.shared.pending,U===null)break;de=U,U=de.next,de.next=null,v.lastBaseUpdate=de,v.shared.pending=null}}while(!0);if(pe===null&&(H=ye),v.baseState=H,v.firstBaseUpdate=ie,v.lastBaseUpdate=pe,a=v.shared.interleaved,a!==null){v=a;do C|=v.lane,v=v.next;while(v!==a)}else _===null&&(v.shared.lanes=0);yo|=C,o.lanes=C,o.memoizedState=ye}}function Zg(o,a,u){if(o=a.effects,a.effects=null,o!==null)for(a=0;a<o.length;a++){var m=o[a],v=m.callback;if(v!==null){if(m.callback=null,m=u,typeof v!="function")throw Error(t(191,v));v.call(m)}}}var vl={},gs=yi(vl),bl=yi(vl),wl=yi(vl);function go(o){if(o===vl)throw Error(t(174));return o}function Hh(o,a){switch(It(wl,a),It(bl,o),It(gs,vl),o=a.nodeType,o){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Mt(null,"");break;default:o=o===8?a.parentNode:a,a=o.namespaceURI||null,o=o.tagName,a=Mt(a,o)}Lt(gs),It(gs,a)}function ya(){Lt(gs),Lt(bl),Lt(wl)}function e0(o){go(wl.current);var a=go(gs.current),u=Mt(a,o.type);a!==u&&(It(bl,o),It(gs,u))}function Gh(o){bl.current===o&&(Lt(gs),Lt(bl))}var Gt=yi(0);function uu(o){for(var a=o;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Wh=[];function Kh(){for(var o=0;o<Wh.length;o++)Wh[o]._workInProgressVersionPrimary=null;Wh.length=0}var du=Z.ReactCurrentDispatcher,Jh=Z.ReactCurrentBatchConfig,xo=0,Wt=null,mn=null,_n=null,hu=!1,_l=!1,Nl=0,a1=0;function On(){throw Error(t(321))}function Yh(o,a){if(a===null)return!1;for(var u=0;u<a.length&&u<o.length;u++)if(!Jr(o[u],a[u]))return!1;return!0}function Qh(o,a,u,m,v,_){if(xo=_,Wt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,du.current=o===null||o.memoizedState===null?d1:h1,o=u(m,v),_l){_=0;do{if(_l=!1,Nl=0,25<=_)throw Error(t(301));_+=1,_n=mn=null,a.updateQueue=null,du.current=f1,o=u(m,v)}while(_l)}if(du.current=mu,a=mn!==null&&mn.next!==null,xo=0,_n=mn=Wt=null,hu=!1,a)throw Error(t(300));return o}function Xh(){var o=Nl!==0;return Nl=0,o}function xs(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?Wt.memoizedState=_n=o:_n=_n.next=o,_n}function Vr(){if(mn===null){var o=Wt.alternate;o=o!==null?o.memoizedState:null}else o=mn.next;var a=_n===null?Wt.memoizedState:_n.next;if(a!==null)_n=a,mn=o;else{if(o===null)throw Error(t(310));mn=o,o={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},_n===null?Wt.memoizedState=_n=o:_n=_n.next=o}return _n}function Sl(o,a){return typeof a=="function"?a(o):a}function Zh(o){var a=Vr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var m=mn,v=m.baseQueue,_=u.pending;if(_!==null){if(v!==null){var C=v.next;v.next=_.next,_.next=C}m.baseQueue=v=_,u.pending=null}if(v!==null){_=v.next,m=m.baseState;var U=C=null,H=null,ie=_;do{var pe=ie.lane;if((xo&pe)===pe)H!==null&&(H=H.next={lane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),m=ie.hasEagerState?ie.eagerState:o(m,ie.action);else{var ye={lane:pe,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null};H===null?(U=H=ye,C=m):H=H.next=ye,Wt.lanes|=pe,yo|=pe}ie=ie.next}while(ie!==null&&ie!==_);H===null?C=m:H.next=U,Jr(m,a.memoizedState)||(ar=!0),a.memoizedState=m,a.baseState=C,a.baseQueue=H,u.lastRenderedState=m}if(o=u.interleaved,o!==null){v=o;do _=v.lane,Wt.lanes|=_,yo|=_,v=v.next;while(v!==o)}else v===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function ef(o){var a=Vr(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=o;var m=u.dispatch,v=u.pending,_=a.memoizedState;if(v!==null){u.pending=null;var C=v=v.next;do _=o(_,C.action),C=C.next;while(C!==v);Jr(_,a.memoizedState)||(ar=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),u.lastRenderedState=_}return[_,m]}function t0(){}function n0(o,a){var u=Wt,m=Vr(),v=a(),_=!Jr(m.memoizedState,v);if(_&&(m.memoizedState=v,ar=!0),m=m.queue,tf(i0.bind(null,u,m,o),[o]),m.getSnapshot!==a||_||_n!==null&&_n.memoizedState.tag&1){if(u.flags|=2048,El(9,s0.bind(null,u,m,v,a),void 0,null),Nn===null)throw Error(t(349));(xo&30)!==0||r0(u,a,v)}return v}function r0(o,a,u){o.flags|=16384,o={getSnapshot:a,value:u},a=Wt.updateQueue,a===null?(a={lastEffect:null,stores:null},Wt.updateQueue=a,a.stores=[o]):(u=a.stores,u===null?a.stores=[o]:u.push(o))}function s0(o,a,u,m){a.value=u,a.getSnapshot=m,o0(a)&&a0(o)}function i0(o,a,u){return u(function(){o0(a)&&a0(o)})}function o0(o){var a=o.getSnapshot;o=o.value;try{var u=a();return!Jr(o,u)}catch{return!0}}function a0(o){var a=Fs(o,1);a!==null&&es(a,o,1,-1)}function l0(o){var a=xs();return typeof o=="function"&&(o=o()),a.memoizedState=a.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sl,lastRenderedState:o},a.queue=o,o=o.dispatch=u1.bind(null,Wt,o),[a.memoizedState,o]}function El(o,a,u,m){return o={tag:o,create:a,destroy:u,deps:m,next:null},a=Wt.updateQueue,a===null?(a={lastEffect:null,stores:null},Wt.updateQueue=a,a.lastEffect=o.next=o):(u=a.lastEffect,u===null?a.lastEffect=o.next=o:(m=u.next,u.next=o,o.next=m,a.lastEffect=o)),o}function c0(){return Vr().memoizedState}function fu(o,a,u,m){var v=xs();Wt.flags|=o,v.memoizedState=El(1|a,u,void 0,m===void 0?null:m)}function pu(o,a,u,m){var v=Vr();m=m===void 0?null:m;var _=void 0;if(mn!==null){var C=mn.memoizedState;if(_=C.destroy,m!==null&&Yh(m,C.deps)){v.memoizedState=El(a,u,_,m);return}}Wt.flags|=o,v.memoizedState=El(1|a,u,_,m)}function u0(o,a){return fu(8390656,8,o,a)}function tf(o,a){return pu(2048,8,o,a)}function d0(o,a){return pu(4,2,o,a)}function h0(o,a){return pu(4,4,o,a)}function f0(o,a){if(typeof a=="function")return o=o(),a(o),function(){a(null)};if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function p0(o,a,u){return u=u!=null?u.concat([o]):null,pu(4,4,f0.bind(null,a,o),u)}function nf(){}function m0(o,a){var u=Vr();a=a===void 0?null:a;var m=u.memoizedState;return m!==null&&a!==null&&Yh(a,m[1])?m[0]:(u.memoizedState=[o,a],o)}function g0(o,a){var u=Vr();a=a===void 0?null:a;var m=u.memoizedState;return m!==null&&a!==null&&Yh(a,m[1])?m[0]:(o=o(),u.memoizedState=[o,a],o)}function x0(o,a,u){return(xo&21)===0?(o.baseState&&(o.baseState=!1,ar=!0),o.memoizedState=u):(Jr(u,a)||(u=io(),Wt.lanes|=u,yo|=u,o.baseState=!0),a)}function l1(o,a){var u=dt;dt=u!==0&&4>u?u:4,o(!0);var m=Jh.transition;Jh.transition={};try{o(!1),a()}finally{dt=u,Jh.transition=m}}function y0(){return Vr().memoizedState}function c1(o,a,u){var m=Ci(o);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},v0(o))b0(a,u);else if(u=Yg(o,a,u,m),u!==null){var v=Qn();es(u,o,m,v),w0(u,a,m)}}function u1(o,a,u){var m=Ci(o),v={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(v0(o))b0(a,v);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var C=a.lastRenderedState,U=_(C,u);if(v.hasEagerState=!0,v.eagerState=U,Jr(U,C)){var H=a.interleaved;H===null?(v.next=v,qh(a)):(v.next=H.next,H.next=v),a.interleaved=v;return}}catch{}finally{}u=Yg(o,a,v,m),u!==null&&(v=Qn(),es(u,o,m,v),w0(u,a,m))}}function v0(o){var a=o.alternate;return o===Wt||a!==null&&a===Wt}function b0(o,a){_l=hu=!0;var u=o.pending;u===null?a.next=a:(a.next=u.next,u.next=a),o.pending=a}function w0(o,a,u){if((u&4194240)!==0){var m=a.lanes;m&=o.pendingLanes,u|=m,a.lanes=u,di(o,u)}}var mu={readContext:Lr,useCallback:On,useContext:On,useEffect:On,useImperativeHandle:On,useInsertionEffect:On,useLayoutEffect:On,useMemo:On,useReducer:On,useRef:On,useState:On,useDebugValue:On,useDeferredValue:On,useTransition:On,useMutableSource:On,useSyncExternalStore:On,useId:On,unstable_isNewReconciler:!1},d1={readContext:Lr,useCallback:function(o,a){return xs().memoizedState=[o,a===void 0?null:a],o},useContext:Lr,useEffect:u0,useImperativeHandle:function(o,a,u){return u=u!=null?u.concat([o]):null,fu(4194308,4,f0.bind(null,a,o),u)},useLayoutEffect:function(o,a){return fu(4194308,4,o,a)},useInsertionEffect:function(o,a){return fu(4,2,o,a)},useMemo:function(o,a){var u=xs();return a=a===void 0?null:a,o=o(),u.memoizedState=[o,a],o},useReducer:function(o,a,u){var m=xs();return a=u!==void 0?u(a):a,m.memoizedState=m.baseState=a,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},m.queue=o,o=o.dispatch=c1.bind(null,Wt,o),[m.memoizedState,o]},useRef:function(o){var a=xs();return o={current:o},a.memoizedState=o},useState:l0,useDebugValue:nf,useDeferredValue:function(o){return xs().memoizedState=o},useTransition:function(){var o=l0(!1),a=o[0];return o=l1.bind(null,o[1]),xs().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,u){var m=Wt,v=xs();if(Ut){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Nn===null)throw Error(t(349));(xo&30)!==0||r0(m,a,u)}v.memoizedState=u;var _={value:u,getSnapshot:a};return v.queue=_,u0(i0.bind(null,m,_,o),[o]),m.flags|=2048,El(9,s0.bind(null,m,_,u,a),void 0,null),u},useId:function(){var o=xs(),a=Nn.identifierPrefix;if(Ut){var u=Os,m=zs;u=(m&~(1<<32-Kn(m)-1)).toString(32)+u,a=":"+a+"R"+u,u=Nl++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=a1++,a=":"+a+"r"+u.toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},h1={readContext:Lr,useCallback:m0,useContext:Lr,useEffect:tf,useImperativeHandle:p0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:g0,useReducer:Zh,useRef:c0,useState:function(){return Zh(Sl)},useDebugValue:nf,useDeferredValue:function(o){var a=Vr();return x0(a,mn.memoizedState,o)},useTransition:function(){var o=Zh(Sl)[0],a=Vr().memoizedState;return[o,a]},useMutableSource:t0,useSyncExternalStore:n0,useId:y0,unstable_isNewReconciler:!1},f1={readContext:Lr,useCallback:m0,useContext:Lr,useEffect:tf,useImperativeHandle:p0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:g0,useReducer:ef,useRef:c0,useState:function(){return ef(Sl)},useDebugValue:nf,useDeferredValue:function(o){var a=Vr();return mn===null?a.memoizedState=o:x0(a,mn.memoizedState,o)},useTransition:function(){var o=ef(Sl)[0],a=Vr().memoizedState;return[o,a]},useMutableSource:t0,useSyncExternalStore:n0,useId:y0,unstable_isNewReconciler:!1};function Qr(o,a){if(o&&o.defaultProps){a=G({},a),o=o.defaultProps;for(var u in o)a[u]===void 0&&(a[u]=o[u]);return a}return a}function rf(o,a,u,m){a=o.memoizedState,u=u(m,a),u=u==null?a:G({},a,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var gu={isMounted:function(o){return(o=o._reactInternals)?oe(o)===o:!1},enqueueSetState:function(o,a,u){o=o._reactInternals;var m=Qn(),v=Ci(o),_=Us(m,v);_.payload=a,u!=null&&(_.callback=u),a=_i(o,_,v),a!==null&&(es(a,o,v,m),lu(a,o,v))},enqueueReplaceState:function(o,a,u){o=o._reactInternals;var m=Qn(),v=Ci(o),_=Us(m,v);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=_i(o,_,v),a!==null&&(es(a,o,v,m),lu(a,o,v))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var u=Qn(),m=Ci(o),v=Us(u,m);v.tag=2,a!=null&&(v.callback=a),a=_i(o,v,m),a!==null&&(es(a,o,m,u),lu(a,o,m))}};function _0(o,a,u,m,v,_,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,_,C):a.prototype&&a.prototype.isPureReactComponent?!dl(u,m)||!dl(v,_):!0}function N0(o,a,u){var m=!1,v=vi,_=a.contextType;return typeof _=="object"&&_!==null?_=Lr(_):(v=or(a)?ho:zn.current,m=a.contextTypes,_=(m=m!=null)?da(o,v):vi),a=new a(u,_),o.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=gu,o.stateNode=a,a._reactInternals=o,m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=v,o.__reactInternalMemoizedMaskedChildContext=_),a}function S0(o,a,u,m){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,m),a.state!==o&&gu.enqueueReplaceState(a,a.state,null)}function sf(o,a,u,m){var v=o.stateNode;v.props=u,v.state=o.memoizedState,v.refs={},$h(o);var _=a.contextType;typeof _=="object"&&_!==null?v.context=Lr(_):(_=or(a)?ho:zn.current,v.context=da(o,_)),v.state=o.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(rf(o,a,_,u),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(a=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),a!==v.state&&gu.enqueueReplaceState(v,v.state,null),cu(o,u,v,m),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308)}function va(o,a){try{var u="",m=a;do u+=ze(m),m=m.return;while(m);var v=u}catch(_){v=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:a,stack:v,digest:null}}function of(o,a,u){return{value:o,source:null,stack:u??null,digest:a??null}}function af(o,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var p1=typeof WeakMap=="function"?WeakMap:Map;function E0(o,a,u){u=Us(-1,u),u.tag=3,u.payload={element:null};var m=a.value;return u.callback=function(){Nu||(Nu=!0,_f=m),af(o,a)},u}function C0(o,a,u){u=Us(-1,u),u.tag=3;var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var v=a.value;u.payload=function(){return m(v)},u.callback=function(){af(o,a)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){af(o,a),typeof m!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var C=a.stack;this.componentDidCatch(a.value,{componentStack:C!==null?C:""})}),u}function k0(o,a,u){var m=o.pingCache;if(m===null){m=o.pingCache=new p1;var v=new Set;m.set(a,v)}else v=m.get(a),v===void 0&&(v=new Set,m.set(a,v));v.has(u)||(v.add(u),o=T1.bind(null,o,a,u),a.then(o,o))}function T0(o){do{var a;if((a=o.tag===13)&&(a=o.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return o;o=o.return}while(o!==null);return null}function P0(o,a,u,m,v){return(o.mode&1)===0?(o===a?o.flags|=65536:(o.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Us(-1,1),a.tag=2,_i(u,a,1))),u.lanes|=1),o):(o.flags|=65536,o.lanes=v,o)}var m1=Z.ReactCurrentOwner,ar=!1;function Yn(o,a,u,m){a.child=o===null?Jg(a,null,u,m):ma(a,o.child,u,m)}function j0(o,a,u,m,v){u=u.render;var _=a.ref;return xa(a,v),m=Qh(o,a,u,m,_,v),u=Xh(),o!==null&&!ar?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~v,Bs(o,a,v)):(Ut&&u&&Mh(a),a.flags|=1,Yn(o,a,m,v),a.child)}function I0(o,a,u,m,v){if(o===null){var _=u.type;return typeof _=="function"&&!Pf(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=_,A0(o,a,_,m,v)):(o=Pu(u.type,null,m,a,a.mode,v),o.ref=a.ref,o.return=a,a.child=o)}if(_=o.child,(o.lanes&v)===0){var C=_.memoizedProps;if(u=u.compare,u=u!==null?u:dl,u(C,m)&&o.ref===a.ref)return Bs(o,a,v)}return a.flags|=1,o=Ti(_,m),o.ref=a.ref,o.return=a,a.child=o}function A0(o,a,u,m,v){if(o!==null){var _=o.memoizedProps;if(dl(_,m)&&o.ref===a.ref)if(ar=!1,a.pendingProps=m=_,(o.lanes&v)!==0)(o.flags&131072)!==0&&(ar=!0);else return a.lanes=o.lanes,Bs(o,a,v)}return lf(o,a,u,m,v)}function R0(o,a,u){var m=a.pendingProps,v=m.children,_=o!==null?o.memoizedState:null;if(m.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(wa,_r),_r|=u;else{if((u&1073741824)===0)return o=_!==null?_.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,It(wa,_r),_r|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=_!==null?_.baseLanes:u,It(wa,_r),_r|=m}else _!==null?(m=_.baseLanes|u,a.memoizedState=null):m=u,It(wa,_r),_r|=m;return Yn(o,a,v,u),a.child}function M0(o,a){var u=a.ref;(o===null&&u!==null||o!==null&&o.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function lf(o,a,u,m,v){var _=or(u)?ho:zn.current;return _=da(a,_),xa(a,v),u=Qh(o,a,u,m,_,v),m=Xh(),o!==null&&!ar?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~v,Bs(o,a,v)):(Ut&&m&&Mh(a),a.flags|=1,Yn(o,a,u,v),a.child)}function D0(o,a,u,m,v){if(or(u)){var _=!0;eu(a)}else _=!1;if(xa(a,v),a.stateNode===null)yu(o,a),N0(a,u,m),sf(a,u,m,v),m=!0;else if(o===null){var C=a.stateNode,U=a.memoizedProps;C.props=U;var H=C.context,ie=u.contextType;typeof ie=="object"&&ie!==null?ie=Lr(ie):(ie=or(u)?ho:zn.current,ie=da(a,ie));var pe=u.getDerivedStateFromProps,ye=typeof pe=="function"||typeof C.getSnapshotBeforeUpdate=="function";ye||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(U!==m||H!==ie)&&S0(a,C,m,ie),wi=!1;var de=a.memoizedState;C.state=de,cu(a,m,C,v),H=a.memoizedState,U!==m||de!==H||ir.current||wi?(typeof pe=="function"&&(rf(a,u,pe,m),H=a.memoizedState),(U=wi||_0(a,u,U,m,de,H,ie))?(ye||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(a.flags|=4194308)):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=H),C.props=m,C.state=H,C.context=ie,m=U):(typeof C.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{C=a.stateNode,Qg(o,a),U=a.memoizedProps,ie=a.type===a.elementType?U:Qr(a.type,U),C.props=ie,ye=a.pendingProps,de=C.context,H=u.contextType,typeof H=="object"&&H!==null?H=Lr(H):(H=or(u)?ho:zn.current,H=da(a,H));var Ce=u.getDerivedStateFromProps;(pe=typeof Ce=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(U!==ye||de!==H)&&S0(a,C,m,H),wi=!1,de=a.memoizedState,C.state=de,cu(a,m,C,v);var Ae=a.memoizedState;U!==ye||de!==Ae||ir.current||wi?(typeof Ce=="function"&&(rf(a,u,Ce,m),Ae=a.memoizedState),(ie=wi||_0(a,u,ie,m,de,Ae,H)||!1)?(pe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(m,Ae,H),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(m,Ae,H)),typeof C.componentDidUpdate=="function"&&(a.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof C.componentDidUpdate!="function"||U===o.memoizedProps&&de===o.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&de===o.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=Ae),C.props=m,C.state=Ae,C.context=H,m=ie):(typeof C.componentDidUpdate!="function"||U===o.memoizedProps&&de===o.memoizedState||(a.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&de===o.memoizedState||(a.flags|=1024),m=!1)}return cf(o,a,u,m,_,v)}function cf(o,a,u,m,v,_){M0(o,a);var C=(a.flags&128)!==0;if(!m&&!C)return v&&Fg(a,u,!1),Bs(o,a,_);m=a.stateNode,m1.current=a;var U=C&&typeof u.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,o!==null&&C?(a.child=ma(a,o.child,null,_),a.child=ma(a,null,U,_)):Yn(o,a,U,_),a.memoizedState=m.state,v&&Fg(a,u,!0),a.child}function L0(o){var a=o.stateNode;a.pendingContext?zg(o,a.pendingContext,a.pendingContext!==a.context):a.context&&zg(o,a.context,!1),Hh(o,a.containerInfo)}function V0(o,a,u,m,v){return pa(),zh(v),a.flags|=256,Yn(o,a,u,m),a.child}var uf={dehydrated:null,treeContext:null,retryLane:0};function df(o){return{baseLanes:o,cachePool:null,transitions:null}}function z0(o,a,u){var m=a.pendingProps,v=Gt.current,_=!1,C=(a.flags&128)!==0,U;if((U=C)||(U=o!==null&&o.memoizedState===null?!1:(v&2)!==0),U?(_=!0,a.flags&=-129):(o===null||o.memoizedState!==null)&&(v|=1),It(Gt,v&1),o===null)return Vh(a),o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((a.mode&1)===0?a.lanes=1:o.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(C=m.children,o=m.fallback,_?(m=a.mode,_=a.child,C={mode:"hidden",children:C},(m&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=C):_=ju(C,m,0,null),o=_o(o,m,u,null),_.return=a,o.return=a,_.sibling=o,a.child=_,a.child.memoizedState=df(u),a.memoizedState=uf,o):hf(a,C));if(v=o.memoizedState,v!==null&&(U=v.dehydrated,U!==null))return g1(o,a,C,m,U,v,u);if(_){_=m.fallback,C=a.mode,v=o.child,U=v.sibling;var H={mode:"hidden",children:m.children};return(C&1)===0&&a.child!==v?(m=a.child,m.childLanes=0,m.pendingProps=H,a.deletions=null):(m=Ti(v,H),m.subtreeFlags=v.subtreeFlags&14680064),U!==null?_=Ti(U,_):(_=_o(_,C,u,null),_.flags|=2),_.return=a,m.return=a,m.sibling=_,a.child=m,m=_,_=a.child,C=o.child.memoizedState,C=C===null?df(u):{baseLanes:C.baseLanes|u,cachePool:null,transitions:C.transitions},_.memoizedState=C,_.childLanes=o.childLanes&~u,a.memoizedState=uf,m}return _=o.child,o=_.sibling,m=Ti(_,{mode:"visible",children:m.children}),(a.mode&1)===0&&(m.lanes=u),m.return=a,m.sibling=null,o!==null&&(u=a.deletions,u===null?(a.deletions=[o],a.flags|=16):u.push(o)),a.child=m,a.memoizedState=null,m}function hf(o,a){return a=ju({mode:"visible",children:a},o.mode,0,null),a.return=o,o.child=a}function xu(o,a,u,m){return m!==null&&zh(m),ma(a,o.child,null,u),o=hf(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function g1(o,a,u,m,v,_,C){if(u)return a.flags&256?(a.flags&=-257,m=of(Error(t(422))),xu(o,a,C,m)):a.memoizedState!==null?(a.child=o.child,a.flags|=128,null):(_=m.fallback,v=a.mode,m=ju({mode:"visible",children:m.children},v,0,null),_=_o(_,v,C,null),_.flags|=2,m.return=a,_.return=a,m.sibling=_,a.child=m,(a.mode&1)!==0&&ma(a,o.child,null,C),a.child.memoizedState=df(C),a.memoizedState=uf,_);if((a.mode&1)===0)return xu(o,a,C,null);if(v.data==="$!"){if(m=v.nextSibling&&v.nextSibling.dataset,m)var U=m.dgst;return m=U,_=Error(t(419)),m=of(_,m,void 0),xu(o,a,C,m)}if(U=(C&o.childLanes)!==0,ar||U){if(m=Nn,m!==null){switch(C&-C){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(m.suspendedLanes|C))!==0?0:v,v!==0&&v!==_.retryLane&&(_.retryLane=v,Fs(o,v),es(m,o,v,-1))}return Tf(),m=of(Error(t(421))),xu(o,a,C,m)}return v.data==="$?"?(a.flags|=128,a.child=o.child,a=P1.bind(null,o),v._reactRetry=a,null):(o=_.treeContext,wr=xi(v.nextSibling),br=a,Ut=!0,Yr=null,o!==null&&(Mr[Dr++]=zs,Mr[Dr++]=Os,Mr[Dr++]=fo,zs=o.id,Os=o.overflow,fo=a),a=hf(a,m.children),a.flags|=4096,a)}function O0(o,a,u){o.lanes|=a;var m=o.alternate;m!==null&&(m.lanes|=a),Bh(o.return,a,u)}function ff(o,a,u,m,v){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:v}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=m,_.tail=u,_.tailMode=v)}function F0(o,a,u){var m=a.pendingProps,v=m.revealOrder,_=m.tail;if(Yn(o,a,m.children,u),m=Gt.current,(m&2)!==0)m=m&1|2,a.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&O0(o,u,a);else if(o.tag===19)O0(o,u,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}if(It(Gt,m),(a.mode&1)===0)a.memoizedState=null;else switch(v){case"forwards":for(u=a.child,v=null;u!==null;)o=u.alternate,o!==null&&uu(o)===null&&(v=u),u=u.sibling;u=v,u===null?(v=a.child,a.child=null):(v=u.sibling,u.sibling=null),ff(a,!1,v,u,_);break;case"backwards":for(u=null,v=a.child,a.child=null;v!==null;){if(o=v.alternate,o!==null&&uu(o)===null){a.child=v;break}o=v.sibling,v.sibling=u,u=v,v=o}ff(a,!0,u,null,_);break;case"together":ff(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function yu(o,a){(a.mode&1)===0&&o!==null&&(o.alternate=null,a.alternate=null,a.flags|=2)}function Bs(o,a,u){if(o!==null&&(a.dependencies=o.dependencies),yo|=a.lanes,(u&a.childLanes)===0)return null;if(o!==null&&a.child!==o.child)throw Error(t(153));if(a.child!==null){for(o=a.child,u=Ti(o,o.pendingProps),a.child=u,u.return=a;o.sibling!==null;)o=o.sibling,u=u.sibling=Ti(o,o.pendingProps),u.return=a;u.sibling=null}return a.child}function x1(o,a,u){switch(a.tag){case 3:L0(a),pa();break;case 5:e0(a);break;case 1:or(a.type)&&eu(a);break;case 4:Hh(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,v=a.memoizedProps.value;It(ou,m._currentValue),m._currentValue=v;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(It(Gt,Gt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?z0(o,a,u):(It(Gt,Gt.current&1),o=Bs(o,a,u),o!==null?o.sibling:null);It(Gt,Gt.current&1);break;case 19:if(m=(u&a.childLanes)!==0,(o.flags&128)!==0){if(m)return F0(o,a,u);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),It(Gt,Gt.current),m)break;return null;case 22:case 23:return a.lanes=0,R0(o,a,u)}return Bs(o,a,u)}var U0,pf,B0,q0;U0=function(o,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)o.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},pf=function(){},B0=function(o,a,u,m){var v=o.memoizedProps;if(v!==m){o=a.stateNode,go(gs.current);var _=null;switch(u){case"input":v=Te(o,v),m=Te(o,m),_=[];break;case"select":v=G({},v,{value:void 0}),m=G({},m,{value:void 0}),_=[];break;case"textarea":v=Dn(o,v),m=Dn(o,m),_=[];break;default:typeof v.onClick!="function"&&typeof m.onClick=="function"&&(o.onclick=Qc)}Br(u,m);var C;u=null;for(ie in v)if(!m.hasOwnProperty(ie)&&v.hasOwnProperty(ie)&&v[ie]!=null)if(ie==="style"){var U=v[ie];for(C in U)U.hasOwnProperty(C)&&(u||(u={}),u[C]="")}else ie!=="dangerouslySetInnerHTML"&&ie!=="children"&&ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&ie!=="autoFocus"&&(i.hasOwnProperty(ie)?_||(_=[]):(_=_||[]).push(ie,null));for(ie in m){var H=m[ie];if(U=v!=null?v[ie]:void 0,m.hasOwnProperty(ie)&&H!==U&&(H!=null||U!=null))if(ie==="style")if(U){for(C in U)!U.hasOwnProperty(C)||H&&H.hasOwnProperty(C)||(u||(u={}),u[C]="");for(C in H)H.hasOwnProperty(C)&&U[C]!==H[C]&&(u||(u={}),u[C]=H[C])}else u||(_||(_=[]),_.push(ie,u)),u=H;else ie==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,U=U?U.__html:void 0,H!=null&&U!==H&&(_=_||[]).push(ie,H)):ie==="children"?typeof H!="string"&&typeof H!="number"||(_=_||[]).push(ie,""+H):ie!=="suppressContentEditableWarning"&&ie!=="suppressHydrationWarning"&&(i.hasOwnProperty(ie)?(H!=null&&ie==="onScroll"&&Dt("scroll",o),_||U===H||(_=[])):(_=_||[]).push(ie,H))}u&&(_=_||[]).push("style",u);var ie=_;(a.updateQueue=ie)&&(a.flags|=4)}},q0=function(o,a,u,m){u!==m&&(a.flags|=4)};function Cl(o,a){if(!Ut)switch(o.tailMode){case"hidden":a=o.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Fn(o){var a=o.alternate!==null&&o.alternate.child===o.child,u=0,m=0;if(a)for(var v=o.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=m,o.childLanes=u,a}function y1(o,a,u){var m=a.pendingProps;switch(Dh(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(a),null;case 1:return or(a.type)&&Zc(),Fn(a),null;case 3:return m=a.stateNode,ya(),Lt(ir),Lt(zn),Kh(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(su(a)?a.flags|=4:o===null||o.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Yr!==null&&(Ef(Yr),Yr=null))),pf(o,a),Fn(a),null;case 5:Gh(a);var v=go(wl.current);if(u=a.type,o!==null&&a.stateNode!=null)B0(o,a,u,m,v),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(t(166));return Fn(a),null}if(o=go(gs.current),su(a)){m=a.stateNode,u=a.type;var _=a.memoizedProps;switch(m[ms]=a,m[gl]=_,o=(a.mode&1)!==0,u){case"dialog":Dt("cancel",m),Dt("close",m);break;case"iframe":case"object":case"embed":Dt("load",m);break;case"video":case"audio":for(v=0;v<fl.length;v++)Dt(fl[v],m);break;case"source":Dt("error",m);break;case"img":case"image":case"link":Dt("error",m),Dt("load",m);break;case"details":Dt("toggle",m);break;case"input":lt(m,_),Dt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!_.multiple},Dt("invalid",m);break;case"textarea":Zn(m,_),Dt("invalid",m)}Br(u,_),v=null;for(var C in _)if(_.hasOwnProperty(C)){var U=_[C];C==="children"?typeof U=="string"?m.textContent!==U&&(_.suppressHydrationWarning!==!0&&Yc(m.textContent,U,o),v=["children",U]):typeof U=="number"&&m.textContent!==""+U&&(_.suppressHydrationWarning!==!0&&Yc(m.textContent,U,o),v=["children",""+U]):i.hasOwnProperty(C)&&U!=null&&C==="onScroll"&&Dt("scroll",m)}switch(u){case"input":_t(m),dn(m,_,!0);break;case"textarea":_t(m),Cn(m);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(m.onclick=Qc)}m=v,a.updateQueue=m,m!==null&&(a.flags|=4)}else{C=v.nodeType===9?v:v.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=kt(u)),o==="http://www.w3.org/1999/xhtml"?u==="script"?(o=C.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof m.is=="string"?o=C.createElement(u,{is:m.is}):(o=C.createElement(u),u==="select"&&(C=o,m.multiple?C.multiple=!0:m.size&&(C.size=m.size))):o=C.createElementNS(o,u),o[ms]=a,o[gl]=m,U0(o,a,!1,!1),a.stateNode=o;e:{switch(C=Ps(u,m),u){case"dialog":Dt("cancel",o),Dt("close",o),v=m;break;case"iframe":case"object":case"embed":Dt("load",o),v=m;break;case"video":case"audio":for(v=0;v<fl.length;v++)Dt(fl[v],o);v=m;break;case"source":Dt("error",o),v=m;break;case"img":case"image":case"link":Dt("error",o),Dt("load",o),v=m;break;case"details":Dt("toggle",o),v=m;break;case"input":lt(o,m),v=Te(o,m),Dt("invalid",o);break;case"option":v=m;break;case"select":o._wrapperState={wasMultiple:!!m.multiple},v=G({},m,{value:void 0}),Dt("invalid",o);break;case"textarea":Zn(o,m),v=Dn(o,m),Dt("invalid",o);break;default:v=m}Br(u,v),U=v;for(_ in U)if(U.hasOwnProperty(_)){var H=U[_];_==="style"?fn(o,H):_==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&mr(o,H)):_==="children"?typeof H=="string"?(u!=="textarea"||H!=="")&&er(o,H):typeof H=="number"&&er(o,""+H):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?H!=null&&_==="onScroll"&&Dt("scroll",o):H!=null&&K(o,_,H,C))}switch(u){case"input":_t(o),dn(o,m,!1);break;case"textarea":_t(o),Cn(o);break;case"option":m.value!=null&&o.setAttribute("value",""+Ke(m.value));break;case"select":o.multiple=!!m.multiple,_=m.value,_!=null?Ht(o,!!m.multiple,_,!1):m.defaultValue!=null&&Ht(o,!!m.multiple,m.defaultValue,!0);break;default:typeof v.onClick=="function"&&(o.onclick=Qc)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Fn(a),null;case 6:if(o&&a.stateNode!=null)q0(o,a,o.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(t(166));if(u=go(wl.current),go(gs.current),su(a)){if(m=a.stateNode,u=a.memoizedProps,m[ms]=a,(_=m.nodeValue!==u)&&(o=br,o!==null))switch(o.tag){case 3:Yc(m.nodeValue,u,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Yc(m.nodeValue,u,(o.mode&1)!==0)}_&&(a.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[ms]=a,a.stateNode=m}return Fn(a),null;case 13:if(Lt(Gt),m=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ut&&wr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)Gg(),pa(),a.flags|=98560,_=!1;else if(_=su(a),m!==null&&m.dehydrated!==null){if(o===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[ms]=a}else pa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Fn(a),_=!1}else Yr!==null&&(Ef(Yr),Yr=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(m=m!==null,m!==(o!==null&&o.memoizedState!==null)&&m&&(a.child.flags|=8192,(a.mode&1)!==0&&(o===null||(Gt.current&1)!==0?gn===0&&(gn=3):Tf())),a.updateQueue!==null&&(a.flags|=4),Fn(a),null);case 4:return ya(),pf(o,a),o===null&&pl(a.stateNode.containerInfo),Fn(a),null;case 10:return Uh(a.type._context),Fn(a),null;case 17:return or(a.type)&&Zc(),Fn(a),null;case 19:if(Lt(Gt),_=a.memoizedState,_===null)return Fn(a),null;if(m=(a.flags&128)!==0,C=_.rendering,C===null)if(m)Cl(_,!1);else{if(gn!==0||o!==null&&(o.flags&128)!==0)for(o=a.child;o!==null;){if(C=uu(o),C!==null){for(a.flags|=128,Cl(_,!1),m=C.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=u,u=a.child;u!==null;)_=u,o=m,_.flags&=14680066,C=_.alternate,C===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=C.childLanes,_.lanes=C.lanes,_.child=C.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=C.memoizedProps,_.memoizedState=C.memoizedState,_.updateQueue=C.updateQueue,_.type=C.type,o=C.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),u=u.sibling;return It(Gt,Gt.current&1|2),a.child}o=o.sibling}_.tail!==null&&jt()>_a&&(a.flags|=128,m=!0,Cl(_,!1),a.lanes=4194304)}else{if(!m)if(o=uu(C),o!==null){if(a.flags|=128,m=!0,u=o.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),Cl(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!Ut)return Fn(a),null}else 2*jt()-_.renderingStartTime>_a&&u!==1073741824&&(a.flags|=128,m=!0,Cl(_,!1),a.lanes=4194304);_.isBackwards?(C.sibling=a.child,a.child=C):(u=_.last,u!==null?u.sibling=C:a.child=C,_.last=C)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=jt(),a.sibling=null,u=Gt.current,It(Gt,m?u&1|2:u&1),a):(Fn(a),null);case 22:case 23:return kf(),m=a.memoizedState!==null,o!==null&&o.memoizedState!==null!==m&&(a.flags|=8192),m&&(a.mode&1)!==0?(_r&1073741824)!==0&&(Fn(a),a.subtreeFlags&6&&(a.flags|=8192)):Fn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function v1(o,a){switch(Dh(a),a.tag){case 1:return or(a.type)&&Zc(),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return ya(),Lt(ir),Lt(zn),Kh(),o=a.flags,(o&65536)!==0&&(o&128)===0?(a.flags=o&-65537|128,a):null;case 5:return Gh(a),null;case 13:if(Lt(Gt),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(t(340));pa()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return Lt(Gt),null;case 4:return ya(),null;case 10:return Uh(a.type._context),null;case 22:case 23:return kf(),null;case 24:return null;default:return null}}var vu=!1,Un=!1,b1=typeof WeakSet=="function"?WeakSet:Set,je=null;function ba(o,a){var u=o.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){Jt(o,a,m)}else u.current=null}function mf(o,a,u){try{u()}catch(m){Jt(o,a,m)}}var $0=!1;function w1(o,a){if(Ch=pi,o=_g(),yh(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var v=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var C=0,U=-1,H=-1,ie=0,pe=0,ye=o,de=null;t:for(;;){for(var Ce;ye!==u||v!==0&&ye.nodeType!==3||(U=C+v),ye!==_||m!==0&&ye.nodeType!==3||(H=C+m),ye.nodeType===3&&(C+=ye.nodeValue.length),(Ce=ye.firstChild)!==null;)de=ye,ye=Ce;for(;;){if(ye===o)break t;if(de===u&&++ie===v&&(U=C),de===_&&++pe===m&&(H=C),(Ce=ye.nextSibling)!==null)break;ye=de,de=ye.parentNode}ye=Ce}u=U===-1||H===-1?null:{start:U,end:H}}else u=null}u=u||{start:0,end:0}}else u=null;for(kh={focusedElem:o,selectionRange:u},pi=!1,je=a;je!==null;)if(a=je,o=a.child,(a.subtreeFlags&1028)!==0&&o!==null)o.return=a,je=o;else for(;je!==null;){a=je;try{var Ae=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var Me=Ae.memoizedProps,en=Ae.memoizedState,ee=a.stateNode,Y=ee.getSnapshotBeforeUpdate(a.elementType===a.type?Me:Qr(a.type,Me),en);ee.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var re=a.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(be){Jt(a,a.return,be)}if(o=a.sibling,o!==null){o.return=a.return,je=o;break}je=a.return}return Ae=$0,$0=!1,Ae}function kl(o,a,u){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&o)===o){var _=v.destroy;v.destroy=void 0,_!==void 0&&mf(a,u,_)}v=v.next}while(v!==m)}}function bu(o,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&o)===o){var m=u.create;u.destroy=m()}u=u.next}while(u!==a)}}function gf(o){var a=o.ref;if(a!==null){var u=o.stateNode;switch(o.tag){case 5:o=u;break;default:o=u}typeof a=="function"?a(o):a.current=o}}function H0(o){var a=o.alternate;a!==null&&(o.alternate=null,H0(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&(delete a[ms],delete a[gl],delete a[Ih],delete a[r1],delete a[s1])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function G0(o){return o.tag===5||o.tag===3||o.tag===4}function W0(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||G0(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function xf(o,a,u){var m=o.tag;if(m===5||m===6)o=o.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(o,a):u.insertBefore(o,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(o,u)):(a=u,a.appendChild(o)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Qc));else if(m!==4&&(o=o.child,o!==null))for(xf(o,a,u),o=o.sibling;o!==null;)xf(o,a,u),o=o.sibling}function yf(o,a,u){var m=o.tag;if(m===5||m===6)o=o.stateNode,a?u.insertBefore(o,a):u.appendChild(o);else if(m!==4&&(o=o.child,o!==null))for(yf(o,a,u),o=o.sibling;o!==null;)yf(o,a,u),o=o.sibling}var Pn=null,Xr=!1;function Ni(o,a,u){for(u=u.child;u!==null;)K0(o,a,u),u=u.sibling}function K0(o,a,u){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(ro,u)}catch{}switch(u.tag){case 5:Un||ba(u,a);case 6:var m=Pn,v=Xr;Pn=null,Ni(o,a,u),Pn=m,Xr=v,Pn!==null&&(Xr?(o=Pn,u=u.stateNode,o.nodeType===8?o.parentNode.removeChild(u):o.removeChild(u)):Pn.removeChild(u.stateNode));break;case 18:Pn!==null&&(Xr?(o=Pn,u=u.stateNode,o.nodeType===8?jh(o.parentNode,u):o.nodeType===1&&jh(o,u),Wr(o)):jh(Pn,u.stateNode));break;case 4:m=Pn,v=Xr,Pn=u.stateNode.containerInfo,Xr=!0,Ni(o,a,u),Pn=m,Xr=v;break;case 0:case 11:case 14:case 15:if(!Un&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var _=v,C=_.destroy;_=_.tag,C!==void 0&&((_&2)!==0||(_&4)!==0)&&mf(u,a,C),v=v.next}while(v!==m)}Ni(o,a,u);break;case 1:if(!Un&&(ba(u,a),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(U){Jt(u,a,U)}Ni(o,a,u);break;case 21:Ni(o,a,u);break;case 22:u.mode&1?(Un=(m=Un)||u.memoizedState!==null,Ni(o,a,u),Un=m):Ni(o,a,u);break;default:Ni(o,a,u)}}function J0(o){var a=o.updateQueue;if(a!==null){o.updateQueue=null;var u=o.stateNode;u===null&&(u=o.stateNode=new b1),a.forEach(function(m){var v=j1.bind(null,o,m);u.has(m)||(u.add(m),m.then(v,v))})}}function Zr(o,a){var u=a.deletions;if(u!==null)for(var m=0;m<u.length;m++){var v=u[m];try{var _=o,C=a,U=C;e:for(;U!==null;){switch(U.tag){case 5:Pn=U.stateNode,Xr=!1;break e;case 3:Pn=U.stateNode.containerInfo,Xr=!0;break e;case 4:Pn=U.stateNode.containerInfo,Xr=!0;break e}U=U.return}if(Pn===null)throw Error(t(160));K0(_,C,v),Pn=null,Xr=!1;var H=v.alternate;H!==null&&(H.return=null),v.return=null}catch(ie){Jt(v,a,ie)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Y0(a,o),a=a.sibling}function Y0(o,a){var u=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Zr(a,o),ys(o),m&4){try{kl(3,o,o.return),bu(3,o)}catch(Me){Jt(o,o.return,Me)}try{kl(5,o,o.return)}catch(Me){Jt(o,o.return,Me)}}break;case 1:Zr(a,o),ys(o),m&512&&u!==null&&ba(u,u.return);break;case 5:if(Zr(a,o),ys(o),m&512&&u!==null&&ba(u,u.return),o.flags&32){var v=o.stateNode;try{er(v,"")}catch(Me){Jt(o,o.return,Me)}}if(m&4&&(v=o.stateNode,v!=null)){var _=o.memoizedProps,C=u!==null?u.memoizedProps:_,U=o.type,H=o.updateQueue;if(o.updateQueue=null,H!==null)try{U==="input"&&_.type==="radio"&&_.name!=null&&Bt(v,_),Ps(U,C);var ie=Ps(U,_);for(C=0;C<H.length;C+=2){var pe=H[C],ye=H[C+1];pe==="style"?fn(v,ye):pe==="dangerouslySetInnerHTML"?mr(v,ye):pe==="children"?er(v,ye):K(v,pe,ye,ie)}switch(U){case"input":qt(v,_);break;case"textarea":pr(v,_);break;case"select":var de=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!_.multiple;var Ce=_.value;Ce!=null?Ht(v,!!_.multiple,Ce,!1):de!==!!_.multiple&&(_.defaultValue!=null?Ht(v,!!_.multiple,_.defaultValue,!0):Ht(v,!!_.multiple,_.multiple?[]:"",!1))}v[gl]=_}catch(Me){Jt(o,o.return,Me)}}break;case 6:if(Zr(a,o),ys(o),m&4){if(o.stateNode===null)throw Error(t(162));v=o.stateNode,_=o.memoizedProps;try{v.nodeValue=_}catch(Me){Jt(o,o.return,Me)}}break;case 3:if(Zr(a,o),ys(o),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Wr(a.containerInfo)}catch(Me){Jt(o,o.return,Me)}break;case 4:Zr(a,o),ys(o);break;case 13:Zr(a,o),ys(o),v=o.child,v.flags&8192&&(_=v.memoizedState!==null,v.stateNode.isHidden=_,!_||v.alternate!==null&&v.alternate.memoizedState!==null||(wf=jt())),m&4&&J0(o);break;case 22:if(pe=u!==null&&u.memoizedState!==null,o.mode&1?(Un=(ie=Un)||pe,Zr(a,o),Un=ie):Zr(a,o),ys(o),m&8192){if(ie=o.memoizedState!==null,(o.stateNode.isHidden=ie)&&!pe&&(o.mode&1)!==0)for(je=o,pe=o.child;pe!==null;){for(ye=je=pe;je!==null;){switch(de=je,Ce=de.child,de.tag){case 0:case 11:case 14:case 15:kl(4,de,de.return);break;case 1:ba(de,de.return);var Ae=de.stateNode;if(typeof Ae.componentWillUnmount=="function"){m=de,u=de.return;try{a=m,Ae.props=a.memoizedProps,Ae.state=a.memoizedState,Ae.componentWillUnmount()}catch(Me){Jt(m,u,Me)}}break;case 5:ba(de,de.return);break;case 22:if(de.memoizedState!==null){Z0(ye);continue}}Ce!==null?(Ce.return=de,je=Ce):Z0(ye)}pe=pe.sibling}e:for(pe=null,ye=o;;){if(ye.tag===5){if(pe===null){pe=ye;try{v=ye.stateNode,ie?(_=v.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(U=ye.stateNode,H=ye.memoizedProps.style,C=H!=null&&H.hasOwnProperty("display")?H.display:null,U.style.display=Tt("display",C))}catch(Me){Jt(o,o.return,Me)}}}else if(ye.tag===6){if(pe===null)try{ye.stateNode.nodeValue=ie?"":ye.memoizedProps}catch(Me){Jt(o,o.return,Me)}}else if((ye.tag!==22&&ye.tag!==23||ye.memoizedState===null||ye===o)&&ye.child!==null){ye.child.return=ye,ye=ye.child;continue}if(ye===o)break e;for(;ye.sibling===null;){if(ye.return===null||ye.return===o)break e;pe===ye&&(pe=null),ye=ye.return}pe===ye&&(pe=null),ye.sibling.return=ye.return,ye=ye.sibling}}break;case 19:Zr(a,o),ys(o),m&4&&J0(o);break;case 21:break;default:Zr(a,o),ys(o)}}function ys(o){var a=o.flags;if(a&2){try{e:{for(var u=o.return;u!==null;){if(G0(u)){var m=u;break e}u=u.return}throw Error(t(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&(er(v,""),m.flags&=-33);var _=W0(o);yf(o,_,v);break;case 3:case 4:var C=m.stateNode.containerInfo,U=W0(o);xf(o,U,C);break;default:throw Error(t(161))}}catch(H){Jt(o,o.return,H)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function _1(o,a,u){je=o,Q0(o)}function Q0(o,a,u){for(var m=(o.mode&1)!==0;je!==null;){var v=je,_=v.child;if(v.tag===22&&m){var C=v.memoizedState!==null||vu;if(!C){var U=v.alternate,H=U!==null&&U.memoizedState!==null||Un;U=vu;var ie=Un;if(vu=C,(Un=H)&&!ie)for(je=v;je!==null;)C=je,H=C.child,C.tag===22&&C.memoizedState!==null?ex(v):H!==null?(H.return=C,je=H):ex(v);for(;_!==null;)je=_,Q0(_),_=_.sibling;je=v,vu=U,Un=ie}X0(o)}else(v.subtreeFlags&8772)!==0&&_!==null?(_.return=v,je=_):X0(o)}}function X0(o){for(;je!==null;){var a=je;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Un||bu(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!Un)if(u===null)m.componentDidMount();else{var v=a.elementType===a.type?u.memoizedProps:Qr(a.type,u.memoizedProps);m.componentDidUpdate(v,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&Zg(a,_,m);break;case 3:var C=a.updateQueue;if(C!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}Zg(a,C,u)}break;case 5:var U=a.stateNode;if(u===null&&a.flags&4){u=U;var H=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&u.focus();break;case"img":H.src&&(u.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ie=a.alternate;if(ie!==null){var pe=ie.memoizedState;if(pe!==null){var ye=pe.dehydrated;ye!==null&&Wr(ye)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Un||a.flags&512&&gf(a)}catch(de){Jt(a,a.return,de)}}if(a===o){je=null;break}if(u=a.sibling,u!==null){u.return=a.return,je=u;break}je=a.return}}function Z0(o){for(;je!==null;){var a=je;if(a===o){je=null;break}var u=a.sibling;if(u!==null){u.return=a.return,je=u;break}je=a.return}}function ex(o){for(;je!==null;){var a=je;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{bu(4,a)}catch(H){Jt(a,u,H)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var v=a.return;try{m.componentDidMount()}catch(H){Jt(a,v,H)}}var _=a.return;try{gf(a)}catch(H){Jt(a,_,H)}break;case 5:var C=a.return;try{gf(a)}catch(H){Jt(a,C,H)}}}catch(H){Jt(a,a.return,H)}if(a===o){je=null;break}var U=a.sibling;if(U!==null){U.return=a.return,je=U;break}je=a.return}}var N1=Math.ceil,wu=Z.ReactCurrentDispatcher,vf=Z.ReactCurrentOwner,zr=Z.ReactCurrentBatchConfig,gt=0,Nn=null,an=null,jn=0,_r=0,wa=yi(0),gn=0,Tl=null,yo=0,_u=0,bf=0,Pl=null,lr=null,wf=0,_a=1/0,qs=null,Nu=!1,_f=null,Si=null,Su=!1,Ei=null,Eu=0,jl=0,Nf=null,Cu=-1,ku=0;function Qn(){return(gt&6)!==0?jt():Cu!==-1?Cu:Cu=jt()}function Ci(o){return(o.mode&1)===0?1:(gt&2)!==0&&jn!==0?jn&-jn:o1.transition!==null?(ku===0&&(ku=io()),ku):(o=dt,o!==0||(o=window.event,o=o===void 0?16:sl(o.type)),o)}function es(o,a,u,m){if(50<jl)throw jl=0,Nf=null,Error(t(185));ui(o,u,m),((gt&2)===0||o!==Nn)&&(o===Nn&&((gt&2)===0&&(_u|=u),gn===4&&ki(o,jn)),cr(o,m),u===1&&gt===0&&(a.mode&1)===0&&(_a=jt()+500,tu&&bi()))}function cr(o,a){var u=o.callbackNode;Is(o,a);var m=so(o,o===Nn?jn:0);if(m===0)u!==null&&$o(u),o.callbackNode=null,o.callbackPriority=0;else if(a=m&-m,o.callbackPriority!==a){if(u!=null&&$o(u),a===1)o.tag===0?i1(nx.bind(null,o)):Ug(nx.bind(null,o)),t1(function(){(gt&6)===0&&bi()}),u=null;else{switch(hi(m)){case 1:u=no;break;case 4:u=ai;break;case 16:u=Ir;break;case 536870912:u=kc;break;default:u=Ir}u=ux(u,tx.bind(null,o))}o.callbackPriority=a,o.callbackNode=u}}function tx(o,a){if(Cu=-1,ku=0,(gt&6)!==0)throw Error(t(327));var u=o.callbackNode;if(Na()&&o.callbackNode!==u)return null;var m=so(o,o===Nn?jn:0);if(m===0)return null;if((m&30)!==0||(m&o.expiredLanes)!==0||a)a=Tu(o,m);else{a=m;var v=gt;gt|=2;var _=sx();(Nn!==o||jn!==a)&&(qs=null,_a=jt()+500,bo(o,a));do try{C1();break}catch(U){rx(o,U)}while(!0);Fh(),wu.current=_,gt=v,an!==null?a=0:(Nn=null,jn=0,a=gn)}if(a!==0){if(a===2&&(v=xr(o),v!==0&&(m=v,a=Sf(o,v))),a===1)throw u=Tl,bo(o,0),ki(o,m),cr(o,jt()),u;if(a===6)ki(o,m);else{if(v=o.current.alternate,(m&30)===0&&!S1(v)&&(a=Tu(o,m),a===2&&(_=xr(o),_!==0&&(m=_,a=Sf(o,_))),a===1))throw u=Tl,bo(o,0),ki(o,m),cr(o,jt()),u;switch(o.finishedWork=v,o.finishedLanes=m,a){case 0:case 1:throw Error(t(345));case 2:wo(o,lr,qs);break;case 3:if(ki(o,m),(m&130023424)===m&&(a=wf+500-jt(),10<a)){if(so(o,0)!==0)break;if(v=o.suspendedLanes,(v&m)!==m){Qn(),o.pingedLanes|=o.suspendedLanes&v;break}o.timeoutHandle=Ph(wo.bind(null,o,lr,qs),a);break}wo(o,lr,qs);break;case 4:if(ki(o,m),(m&4194240)===m)break;for(a=o.eventTimes,v=-1;0<m;){var C=31-Kn(m);_=1<<C,C=a[C],C>v&&(v=C),m&=~_}if(m=v,m=jt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*N1(m/1960))-m,10<m){o.timeoutHandle=Ph(wo.bind(null,o,lr,qs),m);break}wo(o,lr,qs);break;case 5:wo(o,lr,qs);break;default:throw Error(t(329))}}}return cr(o,jt()),o.callbackNode===u?tx.bind(null,o):null}function Sf(o,a){var u=Pl;return o.current.memoizedState.isDehydrated&&(bo(o,a).flags|=256),o=Tu(o,a),o!==2&&(a=lr,lr=u,a!==null&&Ef(a)),o}function Ef(o){lr===null?lr=o:lr.push.apply(lr,o)}function S1(o){for(var a=o;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var v=u[m],_=v.getSnapshot;v=v.value;try{if(!Jr(_(),v))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ki(o,a){for(a&=~bf,a&=~_u,o.suspendedLanes|=a,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var u=31-Kn(a),m=1<<u;o[u]=-1,a&=~m}}function nx(o){if((gt&6)!==0)throw Error(t(327));Na();var a=so(o,0);if((a&1)===0)return cr(o,jt()),null;var u=Tu(o,a);if(o.tag!==0&&u===2){var m=xr(o);m!==0&&(a=m,u=Sf(o,m))}if(u===1)throw u=Tl,bo(o,0),ki(o,a),cr(o,jt()),u;if(u===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,wo(o,lr,qs),cr(o,jt()),null}function Cf(o,a){var u=gt;gt|=1;try{return o(a)}finally{gt=u,gt===0&&(_a=jt()+500,tu&&bi())}}function vo(o){Ei!==null&&Ei.tag===0&&(gt&6)===0&&Na();var a=gt;gt|=1;var u=zr.transition,m=dt;try{if(zr.transition=null,dt=1,o)return o()}finally{dt=m,zr.transition=u,gt=a,(gt&6)===0&&bi()}}function kf(){_r=wa.current,Lt(wa)}function bo(o,a){o.finishedWork=null,o.finishedLanes=0;var u=o.timeoutHandle;if(u!==-1&&(o.timeoutHandle=-1,e1(u)),an!==null)for(u=an.return;u!==null;){var m=u;switch(Dh(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Zc();break;case 3:ya(),Lt(ir),Lt(zn),Kh();break;case 5:Gh(m);break;case 4:ya();break;case 13:Lt(Gt);break;case 19:Lt(Gt);break;case 10:Uh(m.type._context);break;case 22:case 23:kf()}u=u.return}if(Nn=o,an=o=Ti(o.current,null),jn=_r=a,gn=0,Tl=null,bf=_u=yo=0,lr=Pl=null,mo!==null){for(a=0;a<mo.length;a++)if(u=mo[a],m=u.interleaved,m!==null){u.interleaved=null;var v=m.next,_=u.pending;if(_!==null){var C=_.next;_.next=v,m.next=C}u.pending=m}mo=null}return o}function rx(o,a){do{var u=an;try{if(Fh(),du.current=mu,hu){for(var m=Wt.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}hu=!1}if(xo=0,_n=mn=Wt=null,_l=!1,Nl=0,vf.current=null,u===null||u.return===null){gn=1,Tl=a,an=null;break}e:{var _=o,C=u.return,U=u,H=a;if(a=jn,U.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var ie=H,pe=U,ye=pe.tag;if((pe.mode&1)===0&&(ye===0||ye===11||ye===15)){var de=pe.alternate;de?(pe.updateQueue=de.updateQueue,pe.memoizedState=de.memoizedState,pe.lanes=de.lanes):(pe.updateQueue=null,pe.memoizedState=null)}var Ce=T0(C);if(Ce!==null){Ce.flags&=-257,P0(Ce,C,U,_,a),Ce.mode&1&&k0(_,ie,a),a=Ce,H=ie;var Ae=a.updateQueue;if(Ae===null){var Me=new Set;Me.add(H),a.updateQueue=Me}else Ae.add(H);break e}else{if((a&1)===0){k0(_,ie,a),Tf();break e}H=Error(t(426))}}else if(Ut&&U.mode&1){var en=T0(C);if(en!==null){(en.flags&65536)===0&&(en.flags|=256),P0(en,C,U,_,a),zh(va(H,U));break e}}_=H=va(H,U),gn!==4&&(gn=2),Pl===null?Pl=[_]:Pl.push(_),_=C;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var ee=E0(_,H,a);Xg(_,ee);break e;case 1:U=H;var Y=_.type,re=_.stateNode;if((_.flags&128)===0&&(typeof Y.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(Si===null||!Si.has(re)))){_.flags|=65536,a&=-a,_.lanes|=a;var be=C0(_,U,a);Xg(_,be);break e}}_=_.return}while(_!==null)}ox(u)}catch(Oe){a=Oe,an===u&&u!==null&&(an=u=u.return);continue}break}while(!0)}function sx(){var o=wu.current;return wu.current=mu,o===null?mu:o}function Tf(){(gn===0||gn===3||gn===2)&&(gn=4),Nn===null||(yo&268435455)===0&&(_u&268435455)===0||ki(Nn,jn)}function Tu(o,a){var u=gt;gt|=2;var m=sx();(Nn!==o||jn!==a)&&(qs=null,bo(o,a));do try{E1();break}catch(v){rx(o,v)}while(!0);if(Fh(),gt=u,wu.current=m,an!==null)throw Error(t(261));return Nn=null,jn=0,gn}function E1(){for(;an!==null;)ix(an)}function C1(){for(;an!==null&&!Ec();)ix(an)}function ix(o){var a=cx(o.alternate,o,_r);o.memoizedProps=o.pendingProps,a===null?ox(o):an=a,vf.current=null}function ox(o){var a=o;do{var u=a.alternate;if(o=a.return,(a.flags&32768)===0){if(u=y1(u,a,_r),u!==null){an=u;return}}else{if(u=v1(u,a),u!==null){u.flags&=32767,an=u;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{gn=6,an=null;return}}if(a=a.sibling,a!==null){an=a;return}an=a=o}while(a!==null);gn===0&&(gn=5)}function wo(o,a,u){var m=dt,v=zr.transition;try{zr.transition=null,dt=1,k1(o,a,u,m)}finally{zr.transition=v,dt=m}return null}function k1(o,a,u,m){do Na();while(Ei!==null);if((gt&6)!==0)throw Error(t(327));u=o.finishedWork;var v=o.finishedLanes;if(u===null)return null;if(o.finishedWork=null,o.finishedLanes=0,u===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var _=u.lanes|u.childLanes;if(St(o,_),o===Nn&&(an=Nn=null,jn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Su||(Su=!0,ux(Ir,function(){return Na(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=zr.transition,zr.transition=null;var C=dt;dt=1;var U=gt;gt|=4,vf.current=null,w1(o,u),Y0(u,o),WN(kh),pi=!!Ch,kh=Ch=null,o.current=u,_1(u),uh(),gt=U,dt=C,zr.transition=_}else o.current=u;if(Su&&(Su=!1,Ei=o,Eu=v),_=o.pendingLanes,_===0&&(Si=null),Tc(u.stateNode),cr(o,jt()),a!==null)for(m=o.onRecoverableError,u=0;u<a.length;u++)v=a[u],m(v.value,{componentStack:v.stack,digest:v.digest});if(Nu)throw Nu=!1,o=_f,_f=null,o;return(Eu&1)!==0&&o.tag!==0&&Na(),_=o.pendingLanes,(_&1)!==0?o===Nf?jl++:(jl=0,Nf=o):jl=0,bi(),null}function Na(){if(Ei!==null){var o=hi(Eu),a=zr.transition,u=dt;try{if(zr.transition=null,dt=16>o?16:o,Ei===null)var m=!1;else{if(o=Ei,Ei=null,Eu=0,(gt&6)!==0)throw Error(t(331));var v=gt;for(gt|=4,je=o.current;je!==null;){var _=je,C=_.child;if((je.flags&16)!==0){var U=_.deletions;if(U!==null){for(var H=0;H<U.length;H++){var ie=U[H];for(je=ie;je!==null;){var pe=je;switch(pe.tag){case 0:case 11:case 15:kl(8,pe,_)}var ye=pe.child;if(ye!==null)ye.return=pe,je=ye;else for(;je!==null;){pe=je;var de=pe.sibling,Ce=pe.return;if(H0(pe),pe===ie){je=null;break}if(de!==null){de.return=Ce,je=de;break}je=Ce}}}var Ae=_.alternate;if(Ae!==null){var Me=Ae.child;if(Me!==null){Ae.child=null;do{var en=Me.sibling;Me.sibling=null,Me=en}while(Me!==null)}}je=_}}if((_.subtreeFlags&2064)!==0&&C!==null)C.return=_,je=C;else e:for(;je!==null;){if(_=je,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:kl(9,_,_.return)}var ee=_.sibling;if(ee!==null){ee.return=_.return,je=ee;break e}je=_.return}}var Y=o.current;for(je=Y;je!==null;){C=je;var re=C.child;if((C.subtreeFlags&2064)!==0&&re!==null)re.return=C,je=re;else e:for(C=Y;je!==null;){if(U=je,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:bu(9,U)}}catch(Oe){Jt(U,U.return,Oe)}if(U===C){je=null;break e}var be=U.sibling;if(be!==null){be.return=U.return,je=be;break e}je=U.return}}if(gt=v,bi(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(ro,o)}catch{}m=!0}return m}finally{dt=u,zr.transition=a}}return!1}function ax(o,a,u){a=va(u,a),a=E0(o,a,1),o=_i(o,a,1),a=Qn(),o!==null&&(ui(o,1,a),cr(o,a))}function Jt(o,a,u){if(o.tag===3)ax(o,o,u);else for(;a!==null;){if(a.tag===3){ax(a,o,u);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Si===null||!Si.has(m))){o=va(u,o),o=C0(a,o,1),a=_i(a,o,1),o=Qn(),a!==null&&(ui(a,1,o),cr(a,o));break}}a=a.return}}function T1(o,a,u){var m=o.pingCache;m!==null&&m.delete(a),a=Qn(),o.pingedLanes|=o.suspendedLanes&u,Nn===o&&(jn&u)===u&&(gn===4||gn===3&&(jn&130023424)===jn&&500>jt()-wf?bo(o,0):bf|=u),cr(o,a)}function lx(o,a){a===0&&((o.mode&1)===0?a=1:(a=Go,Go<<=1,(Go&130023424)===0&&(Go=4194304)));var u=Qn();o=Fs(o,a),o!==null&&(ui(o,a,u),cr(o,u))}function P1(o){var a=o.memoizedState,u=0;a!==null&&(u=a.retryLane),lx(o,u)}function j1(o,a){var u=0;switch(o.tag){case 13:var m=o.stateNode,v=o.memoizedState;v!==null&&(u=v.retryLane);break;case 19:m=o.stateNode;break;default:throw Error(t(314))}m!==null&&m.delete(a),lx(o,u)}var cx;cx=function(o,a,u){if(o!==null)if(o.memoizedProps!==a.pendingProps||ir.current)ar=!0;else{if((o.lanes&u)===0&&(a.flags&128)===0)return ar=!1,x1(o,a,u);ar=(o.flags&131072)!==0}else ar=!1,Ut&&(a.flags&1048576)!==0&&Bg(a,ru,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;yu(o,a),o=a.pendingProps;var v=da(a,zn.current);xa(a,u),v=Qh(null,a,m,o,v,u);var _=Xh();return a.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,or(m)?(_=!0,eu(a)):_=!1,a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,$h(a),v.updater=gu,a.stateNode=v,v._reactInternals=a,sf(a,m,o,u),a=cf(null,a,m,!0,_,u)):(a.tag=0,Ut&&_&&Mh(a),Yn(null,a,v,u),a=a.child),a;case 16:m=a.elementType;e:{switch(yu(o,a),o=a.pendingProps,v=m._init,m=v(m._payload),a.type=m,v=a.tag=A1(m),o=Qr(m,o),v){case 0:a=lf(null,a,m,o,u);break e;case 1:a=D0(null,a,m,o,u);break e;case 11:a=j0(null,a,m,o,u);break e;case 14:a=I0(null,a,m,Qr(m.type,o),u);break e}throw Error(t(306,m,""))}return a;case 0:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:Qr(m,v),lf(o,a,m,v,u);case 1:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:Qr(m,v),D0(o,a,m,v,u);case 3:e:{if(L0(a),o===null)throw Error(t(387));m=a.pendingProps,_=a.memoizedState,v=_.element,Qg(o,a),cu(a,m,null,u);var C=a.memoizedState;if(m=C.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){v=va(Error(t(423)),a),a=V0(o,a,m,u,v);break e}else if(m!==v){v=va(Error(t(424)),a),a=V0(o,a,m,u,v);break e}else for(wr=xi(a.stateNode.containerInfo.firstChild),br=a,Ut=!0,Yr=null,u=Jg(a,null,m,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(pa(),m===v){a=Bs(o,a,u);break e}Yn(o,a,m,u)}a=a.child}return a;case 5:return e0(a),o===null&&Vh(a),m=a.type,v=a.pendingProps,_=o!==null?o.memoizedProps:null,C=v.children,Th(m,v)?C=null:_!==null&&Th(m,_)&&(a.flags|=32),M0(o,a),Yn(o,a,C,u),a.child;case 6:return o===null&&Vh(a),null;case 13:return z0(o,a,u);case 4:return Hh(a,a.stateNode.containerInfo),m=a.pendingProps,o===null?a.child=ma(a,null,m,u):Yn(o,a,m,u),a.child;case 11:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:Qr(m,v),j0(o,a,m,v,u);case 7:return Yn(o,a,a.pendingProps,u),a.child;case 8:return Yn(o,a,a.pendingProps.children,u),a.child;case 12:return Yn(o,a,a.pendingProps.children,u),a.child;case 10:e:{if(m=a.type._context,v=a.pendingProps,_=a.memoizedProps,C=v.value,It(ou,m._currentValue),m._currentValue=C,_!==null)if(Jr(_.value,C)){if(_.children===v.children&&!ir.current){a=Bs(o,a,u);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var U=_.dependencies;if(U!==null){C=_.child;for(var H=U.firstContext;H!==null;){if(H.context===m){if(_.tag===1){H=Us(-1,u&-u),H.tag=2;var ie=_.updateQueue;if(ie!==null){ie=ie.shared;var pe=ie.pending;pe===null?H.next=H:(H.next=pe.next,pe.next=H),ie.pending=H}}_.lanes|=u,H=_.alternate,H!==null&&(H.lanes|=u),Bh(_.return,u,a),U.lanes|=u;break}H=H.next}}else if(_.tag===10)C=_.type===a.type?null:_.child;else if(_.tag===18){if(C=_.return,C===null)throw Error(t(341));C.lanes|=u,U=C.alternate,U!==null&&(U.lanes|=u),Bh(C,u,a),C=_.sibling}else C=_.child;if(C!==null)C.return=_;else for(C=_;C!==null;){if(C===a){C=null;break}if(_=C.sibling,_!==null){_.return=C.return,C=_;break}C=C.return}_=C}Yn(o,a,v.children,u),a=a.child}return a;case 9:return v=a.type,m=a.pendingProps.children,xa(a,u),v=Lr(v),m=m(v),a.flags|=1,Yn(o,a,m,u),a.child;case 14:return m=a.type,v=Qr(m,a.pendingProps),v=Qr(m.type,v),I0(o,a,m,v,u);case 15:return A0(o,a,a.type,a.pendingProps,u);case 17:return m=a.type,v=a.pendingProps,v=a.elementType===m?v:Qr(m,v),yu(o,a),a.tag=1,or(m)?(o=!0,eu(a)):o=!1,xa(a,u),N0(a,m,v),sf(a,m,v,u),cf(null,a,m,!0,o,u);case 19:return F0(o,a,u);case 22:return R0(o,a,u)}throw Error(t(156,a.tag))};function ux(o,a){return bn(o,a)}function I1(o,a,u,m){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(o,a,u,m){return new I1(o,a,u,m)}function Pf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function A1(o){if(typeof o=="function")return Pf(o)?1:0;if(o!=null){if(o=o.$$typeof,o===T)return 11;if(o===Ve)return 14}return 2}function Ti(o,a){var u=o.alternate;return u===null?(u=Or(o.tag,a,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=a,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&14680064,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,a=o.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u}function Pu(o,a,u,m,v,_){var C=2;if(m=o,typeof o=="function")Pf(o)&&(C=1);else if(typeof o=="string")C=5;else e:switch(o){case F:return _o(u.children,v,_,a);case j:C=8,v|=8;break;case z:return o=Or(12,u,a,v|2),o.elementType=z,o.lanes=_,o;case L:return o=Or(13,u,a,v),o.elementType=L,o.lanes=_,o;case me:return o=Or(19,u,a,v),o.elementType=me,o.lanes=_,o;case Pe:return ju(u,v,_,a);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case O:C=10;break e;case k:C=9;break e;case T:C=11;break e;case Ve:C=14;break e;case Se:C=16,m=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return a=Or(C,u,a,v),a.elementType=o,a.type=m,a.lanes=_,a}function _o(o,a,u,m){return o=Or(7,o,m,a),o.lanes=u,o}function ju(o,a,u,m){return o=Or(22,o,m,a),o.elementType=Pe,o.lanes=u,o.stateNode={isHidden:!1},o}function jf(o,a,u){return o=Or(6,o,null,a),o.lanes=u,o}function If(o,a,u){return a=Or(4,o.children!==null?o.children:[],o.key,a),a.lanes=u,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function R1(o,a,u,m,v){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ci(0),this.expirationTimes=ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.identifierPrefix=m,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Af(o,a,u,m,v,_,C,U,H){return o=new R1(o,a,u,U,H),a===1?(a=1,_===!0&&(a|=8)):a=0,_=Or(3,null,null,a),o.current=_,_.stateNode=o,_.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},$h(_),o}function M1(o,a,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:m==null?null:""+m,children:o,containerInfo:a,implementation:u}}function dx(o){if(!o)return vi;o=o._reactInternals;e:{if(oe(o)!==o||o.tag!==1)throw Error(t(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(or(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(o.tag===1){var u=o.type;if(or(u))return Og(o,u,a)}return a}function hx(o,a,u,m,v,_,C,U,H){return o=Af(u,m,!0,o,v,_,C,U,H),o.context=dx(null),u=o.current,m=Qn(),v=Ci(u),_=Us(m,v),_.callback=a??null,_i(u,_,v),o.current.lanes=v,ui(o,v,m),cr(o,m),o}function Iu(o,a,u,m){var v=a.current,_=Qn(),C=Ci(v);return u=dx(u),a.context===null?a.context=u:a.pendingContext=u,a=Us(_,C),a.payload={element:o},m=m===void 0?null:m,m!==null&&(a.callback=m),o=_i(v,a,C),o!==null&&(es(o,v,C,_),lu(o,v,C)),C}function Au(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function fx(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<a?u:a}}function Rf(o,a){fx(o,a),(o=o.alternate)&&fx(o,a)}function D1(){return null}var px=typeof reportError=="function"?reportError:function(o){console.error(o)};function Mf(o){this._internalRoot=o}Ru.prototype.render=Mf.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(t(409));Iu(o,a,null,null)},Ru.prototype.unmount=Mf.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;vo(function(){Iu(null,o,null,null)}),a[Ls]=null}};function Ru(o){this._internalRoot=o}Ru.prototype.unstable_scheduleHydration=function(o){if(o){var a=Rc();o={blockedOn:null,target:o,priority:a};for(var u=0;u<ds.length&&a!==0&&a<ds[u].priority;u++);ds.splice(u,0,o),u===0&&Lc(o)}};function Df(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Mu(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function mx(){}function L1(o,a,u,m,v){if(v){if(typeof m=="function"){var _=m;m=function(){var ie=Au(C);_.call(ie)}}var C=hx(a,m,o,0,null,!1,!1,"",mx);return o._reactRootContainer=C,o[Ls]=C.current,pl(o.nodeType===8?o.parentNode:o),vo(),C}for(;v=o.lastChild;)o.removeChild(v);if(typeof m=="function"){var U=m;m=function(){var ie=Au(H);U.call(ie)}}var H=Af(o,0,!1,null,null,!1,!1,"",mx);return o._reactRootContainer=H,o[Ls]=H.current,pl(o.nodeType===8?o.parentNode:o),vo(function(){Iu(a,H,u,m)}),H}function Du(o,a,u,m,v){var _=u._reactRootContainer;if(_){var C=_;if(typeof v=="function"){var U=v;v=function(){var H=Au(C);U.call(H)}}Iu(a,C,o,v)}else C=L1(u,a,o,v,m);return Au(C)}Ic=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var u=li(a.pendingLanes);u!==0&&(di(a,u|1),cr(a,jt()),(gt&6)===0&&(_a=jt()+500,bi()))}break;case 13:vo(function(){var m=Fs(o,1);if(m!==null){var v=Qn();es(m,o,1,v)}}),Rf(o,1)}},Wo=function(o){if(o.tag===13){var a=Fs(o,134217728);if(a!==null){var u=Qn();es(a,o,134217728,u)}Rf(o,134217728)}},Ac=function(o){if(o.tag===13){var a=Ci(o),u=Fs(o,a);if(u!==null){var m=Qn();es(u,o,a,m)}Rf(o,a)}},Rc=function(){return dt},Mc=function(o,a){var u=dt;try{return dt=o,a()}finally{dt=u}},cs=function(o,a,u){switch(a){case"input":if(qt(o,u),a=u.name,u.type==="radio"&&a!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var m=u[a];if(m!==o&&m.form===o.form){var v=Xc(m);if(!v)throw Error(t(90));Ct(m),qt(m,v)}}}break;case"textarea":pr(o,u);break;case"select":a=u.value,a!=null&&Ht(o,!!u.multiple,a,!1)}},jr=Cf,qr=vo;var V1={usingClientEntryPoint:!1,Events:[xl,ca,Xc,nr,js,Cf]},Il={findFiberByHostInstance:uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z1={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=sn(o),o===null?null:o.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||D1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{ro=Lu.inject(z1),gr=Lu}catch{}}return ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V1,ur.createPortal=function(o,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Df(a))throw Error(t(200));return M1(o,a,null,u)},ur.createRoot=function(o,a){if(!Df(o))throw Error(t(299));var u=!1,m="",v=px;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Af(o,1,!1,null,null,u,!1,m,v),o[Ls]=a.current,pl(o.nodeType===8?o.parentNode:o),new Mf(a)},ur.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=sn(a),o=o===null?null:o.stateNode,o},ur.flushSync=function(o){return vo(o)},ur.hydrate=function(o,a,u){if(!Mu(a))throw Error(t(200));return Du(null,o,a,!0,u)},ur.hydrateRoot=function(o,a,u){if(!Df(o))throw Error(t(405));var m=u!=null&&u.hydratedSources||null,v=!1,_="",C=px;if(u!=null&&(u.unstable_strictMode===!0&&(v=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),a=hx(a,null,o,1,u??null,v,!1,_,C),o[Ls]=a.current,pl(o),m)for(o=0;o<m.length;o++)u=m[o],v=u._getVersion,v=v(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,v]:a.mutableSourceEagerHydrationData.push(u,v);return new Ru(a)},ur.render=function(o,a,u){if(!Mu(a))throw Error(t(200));return Du(null,o,a,!1,u)},ur.unmountComponentAtNode=function(o){if(!Mu(o))throw Error(t(40));return o._reactRootContainer?(vo(function(){Du(null,null,o,!1,function(){o._reactRootContainer=null,o[Ls]=null})}),!0):!1},ur.unstable_batchedUpdates=Cf,ur.unstable_renderSubtreeIntoContainer=function(o,a,u,m){if(!Mu(u))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Du(o,a,u,!1,m)},ur.version="18.3.1-next-f1338f8080-20240426",ur}var Nx;function _b(){if(Nx)return zf.exports;Nx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zf.exports=W1(),zf.exports}var Sx;function K1(){if(Sx)return Vu;Sx=1;var n=_b();return Vu.createRoot=n.createRoot,Vu.hydrateRoot=n.hydrateRoot,Vu}var J1=K1();const Y1=bb(J1);_b();/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wl.apply(this,arguments)}var Li;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Li||(Li={}));const Ex="popstate";function Q1(n){n===void 0&&(n={});function e(i,l){let{pathname:c="/",search:d="",hash:p=""}=Fo(i.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),lp("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(i,l){let c=i.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=i.location.href,f=p.indexOf("#");d=f===-1?p:p.slice(0,f)}return d+"#"+(typeof l=="string"?l:ud(l))}function r(i,l){Md(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return Z1(e,t,r,n)}function nn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Md(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function X1(){return Math.random().toString(36).substr(2,8)}function Cx(n,e){return{usr:n.state,key:n.key,idx:e}}function lp(n,e,t,r){return t===void 0&&(t=null),Wl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Fo(e):e,{state:t,key:e&&e.key||r||X1()})}function ud(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function Z1(n,e,t,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:l=!1}=r,c=i.history,d=Li.Pop,p=null,f=y();f==null&&(f=0,c.replaceState(Wl({},c.state,{idx:f}),""));function y(){return(c.state||{idx:null}).idx}function b(){d=Li.Pop;let I=y(),$=I==null?null:I-f;f=I,p&&p({action:d,location:P.location,delta:$})}function N(I,$){d=Li.Push;let W=lp(P.location,I,$);t&&t(W,I),f=y()+1;let K=Cx(W,f),Z=P.createHref(W);try{c.pushState(K,"",Z)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;i.location.assign(Z)}l&&p&&p({action:d,location:P.location,delta:1})}function E(I,$){d=Li.Replace;let W=lp(P.location,I,$);t&&t(W,I),f=y();let K=Cx(W,f),Z=P.createHref(W);c.replaceState(K,"",Z),l&&p&&p({action:d,location:P.location,delta:0})}function A(I){let $=i.location.origin!=="null"?i.location.origin:i.location.href,W=typeof I=="string"?I:ud(I);return W=W.replace(/ $/,"%20"),nn($,"No window.location.(origin|href) available to create URL for href: "+W),new URL(W,$)}let P={get action(){return d},get location(){return n(i,c)},listen(I){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(Ex,b),p=I,()=>{i.removeEventListener(Ex,b),p=null}},createHref(I){return e(i,I)},createURL:A,encodeLocation(I){let $=A(I);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:N,replace:E,go(I){return c.go(I)}};return P}var kx;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(kx||(kx={}));function eS(n,e,t){return t===void 0&&(t="/"),tS(n,e,t)}function tS(n,e,t,r){let i=typeof e=="string"?Fo(e):e,l=Kp(i.pathname||"/",t);if(l==null)return null;let c=Nb(n);nS(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let f=pS(l);d=dS(c[p],f)}return d}function Nb(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let i=(l,c,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(nn(p.relativePath.startsWith(r),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(r.length));let f=Oi([r,p.relativePath]),y=t.concat(p);l.children&&l.children.length>0&&(nn(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Nb(l.children,e,y,f)),!(l.path==null&&!l.index)&&e.push({path:f,score:cS(f,l.index),routesMeta:y})};return n.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,c);else for(let p of Sb(l.path))i(l,c,p)}),e}function Sb(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return i?[l,""]:[l];let c=Sb(r.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),i&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function nS(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:uS(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const rS=/^:[\w-]+$/,sS=3,iS=2,oS=1,aS=10,lS=-2,Tx=n=>n==="*";function cS(n,e){let t=n.split("/"),r=t.length;return t.some(Tx)&&(r+=lS),e&&(r+=iS),t.filter(i=>!Tx(i)).reduce((i,l)=>i+(rS.test(l)?sS:l===""?oS:aS),r)}function uS(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function dS(n,e,t){let{routesMeta:r}=n,i={},l="/",c=[];for(let d=0;d<r.length;++d){let p=r[d],f=d===r.length-1,y=l==="/"?e:e.slice(l.length)||"/",b=hS({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},y),N=p.route;if(!b)return null;Object.assign(i,b.params),c.push({params:i,pathname:Oi([l,b.pathname]),pathnameBase:vS(Oi([l,b.pathnameBase])),route:N}),b.pathnameBase!=="/"&&(l=Oi([l,b.pathnameBase]))}return c}function hS(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=fS(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let l=i[0],c=l.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((f,y,b)=>{let{paramName:N,isOptional:E}=y;if(N==="*"){let P=d[b]||"";c=l.slice(0,l.length-P.length).replace(/(.)\/+$/,"$1")}const A=d[b];return E&&!A?f[N]=void 0:f[N]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:n}}function fS(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Md(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function pS(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Md(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Kp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}const mS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gS=n=>mS.test(n);function xS(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Fo(n):n,l;if(t)if(gS(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Md(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+t))}t.startsWith("/")?l=Px(t.substring(1),"/"):l=Px(t,e)}else l=e;return{pathname:l,search:bS(r),hash:wS(i)}}function Px(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Uf(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Jp(n,e){let t=yS(n);return e?t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function Yp(n,e,t,r){r===void 0&&(r=!1);let i;typeof n=="string"?i=Fo(n):(i=Wl({},n),nn(!i.pathname||!i.pathname.includes("?"),Uf("?","pathname","search",i)),nn(!i.pathname||!i.pathname.includes("#"),Uf("#","pathname","hash",i)),nn(!i.search||!i.search.includes("#"),Uf("#","search","hash",i)));let l=n===""||i.pathname==="",c=l?"/":i.pathname,d;if(c==null)d=t;else{let b=e.length-1;if(!r&&c.startsWith("..")){let N=c.split("/");for(;N[0]==="..";)N.shift(),b-=1;i.pathname=N.join("/")}d=b>=0?e[b]:"/"}let p=xS(i,d),f=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(f||y)&&(p.pathname+="/"),p}const Oi=n=>n.join("/").replace(/\/\/+/g,"/"),vS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),bS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,wS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function _S(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Eb=["post","put","patch","delete"];new Set(Eb);const NS=["get",...Eb];new Set(NS);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kl.apply(this,arguments)}const Qp=D.createContext(null),SS=D.createContext(null),Ji=D.createContext(null),Dd=D.createContext(null),ks=D.createContext({outlet:null,matches:[],isDataRoute:!1}),Cb=D.createContext(null);function ES(n,e){let{relative:t}=e===void 0?{}:e;Ga()||nn(!1);let{basename:r,navigator:i}=D.useContext(Ji),{hash:l,pathname:c,search:d}=Tb(n,{relative:t}),p=c;return r!=="/"&&(p=c==="/"?r:Oi([r,c])),i.createHref({pathname:p,search:d,hash:l})}function Ga(){return D.useContext(Dd)!=null}function Yi(){return Ga()||nn(!1),D.useContext(Dd).location}function kb(n){D.useContext(Ji).static||D.useLayoutEffect(n)}function as(){let{isDataRoute:n}=D.useContext(ks);return n?FS():CS()}function CS(){Ga()||nn(!1);let n=D.useContext(Qp),{basename:e,future:t,navigator:r}=D.useContext(Ji),{matches:i}=D.useContext(ks),{pathname:l}=Yi(),c=JSON.stringify(Jp(i,t.v7_relativeSplatPath)),d=D.useRef(!1);return kb(()=>{d.current=!0}),D.useCallback(function(f,y){if(y===void 0&&(y={}),!d.current)return;if(typeof f=="number"){r.go(f);return}let b=Yp(f,JSON.parse(c),l,y.relative==="path");n==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Oi([e,b.pathname])),(y.replace?r.replace:r.push)(b,y.state,y)},[e,r,c,l,n])}const kS=D.createContext(null);function TS(n){let e=D.useContext(ks).outlet;return e&&D.createElement(kS.Provider,{value:n},e)}function Xp(){let{matches:n}=D.useContext(ks),e=n[n.length-1];return e?e.params:{}}function Tb(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=D.useContext(Ji),{matches:i}=D.useContext(ks),{pathname:l}=Yi(),c=JSON.stringify(Jp(i,r.v7_relativeSplatPath));return D.useMemo(()=>Yp(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function PS(n,e){return jS(n,e)}function jS(n,e,t,r){Ga()||nn(!1);let{navigator:i}=D.useContext(Ji),{matches:l}=D.useContext(ks),c=l[l.length-1],d=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let f=Yi(),y;if(e){var b;let I=typeof e=="string"?Fo(e):e;p==="/"||(b=I.pathname)!=null&&b.startsWith(p)||nn(!1),y=I}else y=f;let N=y.pathname||"/",E=N;if(p!=="/"){let I=p.replace(/^\//,"").split("/");E="/"+N.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=eS(n,{pathname:E}),P=DS(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},d,I.params),pathname:Oi([p,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?p:Oi([p,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),l,t,r);return e&&P?D.createElement(Dd.Provider,{value:{location:Kl({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Li.Pop}},P):P}function IS(){let n=OS(),e=_S(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:i},t):null,null)}const AS=D.createElement(IS,null);class RS extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?D.createElement(ks.Provider,{value:this.props.routeContext},D.createElement(Cb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MS(n){let{routeContext:e,match:t,children:r}=n,i=D.useContext(Qp);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),D.createElement(ks.Provider,{value:e},r)}function DS(n,e,t,r){var i;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=r)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(i=t)==null?void 0:i.errors;if(d!=null){let y=c.findIndex(b=>b.route.id&&(d==null?void 0:d[b.route.id])!==void 0);y>=0||nn(!1),c=c.slice(0,Math.min(c.length,y+1))}let p=!1,f=-1;if(t&&r&&r.v7_partialHydration)for(let y=0;y<c.length;y++){let b=c[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(f=y),b.route.id){let{loaderData:N,errors:E}=t,A=b.route.loader&&N[b.route.id]===void 0&&(!E||E[b.route.id]===void 0);if(b.route.lazy||A){p=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((y,b,N)=>{let E,A=!1,P=null,I=null;t&&(E=d&&b.route.id?d[b.route.id]:void 0,P=b.route.errorElement||AS,p&&(f<0&&N===0?(US("route-fallback"),A=!0,I=null):f===N&&(A=!0,I=b.route.hydrateFallbackElement||null)));let $=e.concat(c.slice(0,N+1)),W=()=>{let K;return E?K=P:A?K=I:b.route.Component?K=D.createElement(b.route.Component,null):b.route.element?K=b.route.element:K=y,D.createElement(MS,{match:b,routeContext:{outlet:y,matches:$,isDataRoute:t!=null},children:K})};return t&&(b.route.ErrorBoundary||b.route.errorElement||N===0)?D.createElement(RS,{location:t.location,revalidation:t.revalidation,component:P,error:E,children:W(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):W()},null)}var Pb=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Pb||{}),jb=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(jb||{});function LS(n){let e=D.useContext(Qp);return e||nn(!1),e}function VS(n){let e=D.useContext(SS);return e||nn(!1),e}function zS(n){let e=D.useContext(ks);return e||nn(!1),e}function Ib(n){let e=zS(),t=e.matches[e.matches.length-1];return t.route.id||nn(!1),t.route.id}function OS(){var n;let e=D.useContext(Cb),t=VS(),r=Ib();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function FS(){let{router:n}=LS(Pb.UseNavigateStable),e=Ib(jb.UseNavigateStable),t=D.useRef(!1);return kb(()=>{t.current=!0}),D.useCallback(function(i,l){l===void 0&&(l={}),t.current&&(typeof i=="number"?n.navigate(i):n.navigate(i,Kl({fromRouteId:e},l)))},[n,e])}const jx={};function US(n,e,t){jx[n]||(jx[n]=!0)}function BS(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function qS(n){let{to:e,replace:t,state:r,relative:i}=n;Ga()||nn(!1);let{future:l,static:c}=D.useContext(Ji),{matches:d}=D.useContext(ks),{pathname:p}=Yi(),f=as(),y=Yp(e,Jp(d,l.v7_relativeSplatPath),p,i==="path"),b=JSON.stringify(y);return D.useEffect(()=>f(JSON.parse(b),{replace:t,state:r,relative:i}),[f,b,i,t,r]),null}function Ab(n){return TS(n.context)}function Vt(n){nn(!1)}function $S(n){let{basename:e="/",children:t=null,location:r,navigationType:i=Li.Pop,navigator:l,static:c=!1,future:d}=n;Ga()&&nn(!1);let p=e.replace(/^\/*/,"/"),f=D.useMemo(()=>({basename:p,navigator:l,static:c,future:Kl({v7_relativeSplatPath:!1},d)}),[p,d,l,c]);typeof r=="string"&&(r=Fo(r));let{pathname:y="/",search:b="",hash:N="",state:E=null,key:A="default"}=r,P=D.useMemo(()=>{let I=Kp(y,p);return I==null?null:{location:{pathname:I,search:b,hash:N,state:E,key:A},navigationType:i}},[p,y,b,N,E,A,i]);return P==null?null:D.createElement(Ji.Provider,{value:f},D.createElement(Dd.Provider,{children:t,value:P}))}function HS(n){let{children:e,location:t}=n;return PS(cp(e),t)}new Promise(()=>{});function cp(n,e){e===void 0&&(e=[]);let t=[];return D.Children.forEach(n,(r,i)=>{if(!D.isValidElement(r))return;let l=[...e,i];if(r.type===D.Fragment){t.push.apply(t,cp(r.props.children,l));return}r.type!==Vt&&nn(!1),!r.props.index||!r.props.children||nn(!1);let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=cp(r.props.children,l)),t.push(c)}),t}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function up(){return up=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},up.apply(this,arguments)}function GS(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,l;for(l=0;l<r.length;l++)i=r[l],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}function WS(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function KS(n,e){return n.button===0&&(!e||e==="_self")&&!WS(n)}const JS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YS="6";try{window.__reactRouterVersion=YS}catch{}const QS="startTransition",Ix=$1[QS];function XS(n){let{basename:e,children:t,future:r,window:i}=n,l=D.useRef();l.current==null&&(l.current=Q1({window:i,v5Compat:!0}));let c=l.current,[d,p]=D.useState({action:c.action,location:c.location}),{v7_startTransition:f}=r||{},y=D.useCallback(b=>{f&&Ix?Ix(()=>p(b)):p(b)},[p,f]);return D.useLayoutEffect(()=>c.listen(y),[c,y]),D.useEffect(()=>BS(r),[r]),D.createElement($S,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:r})}const ZS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",e2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=D.forwardRef(function(e,t){let{onClick:r,relative:i,reloadDocument:l,replace:c,state:d,target:p,to:f,preventScrollReset:y,viewTransition:b}=e,N=GS(e,JS),{basename:E}=D.useContext(Ji),A,P=!1;if(typeof f=="string"&&e2.test(f)&&(A=f,ZS))try{let K=new URL(window.location.href),Z=f.startsWith("//")?new URL(K.protocol+f):new URL(f),ce=Kp(Z.pathname,E);Z.origin===K.origin&&ce!=null?f=ce+Z.search+Z.hash:P=!0}catch{}let I=ES(f,{relative:i}),$=t2(f,{replace:c,state:d,target:p,preventScrollReset:y,relative:i,viewTransition:b});function W(K){r&&r(K),K.defaultPrevented||$(K)}return D.createElement("a",up({},N,{href:A||I,onClick:P||l?r:W,ref:t,target:p}))});var Ax;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ax||(Ax={}));var Rx;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Rx||(Rx={}));function t2(n,e){let{target:t,replace:r,state:i,preventScrollReset:l,relative:c,viewTransition:d}=e===void 0?{}:e,p=as(),f=Yi(),y=Tb(n,{relative:c});return D.useCallback(b=>{if(KS(b,t)){b.preventDefault();let N=r!==void 0?r:ud(f)===ud(y);p(n,{replace:N,state:i,preventScrollReset:l,relative:c,viewTransition:d})}},[f,p,y,r,i,t,n,l,c,d])}new Date().toISOString(),new Date().toISOString();const ts={id:"guest",name:"Guest",email:"",isMember:!1,membershipTier:"none",loyaltyPoints:0,affiliateCode:"",affiliateEarnings:0,wishlist:[],notifications:[],isAdmin:!1,socialRewards:{},shippingAddress:{street:"",suburb:"",city:"",province:"",postalCode:""}},n2=[{id:"s1",title:"Summer Tech Sale",products:["1761729812469"],discountPercentage:15,endsAt:new Date(Date.now()+864e5*2).toISOString(),image:"https://picsum.photos/800/400?random=20"}];var Mx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},r2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const l=n[t++];e[r++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=n[t++],c=n[t++],d=n[t++],p=((i&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Mb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const l=n[i],c=i+1<n.length,d=c?n[i+1]:0,p=i+2<n.length,f=p?n[i+2]:0,y=l>>2,b=(l&3)<<4|d>>4;let N=(d&15)<<2|f>>6,E=f&63;p||(E=64,c||(N=64)),r.push(t[y],t[b],t[N],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Rb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):r2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const l=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const f=i<n.length?t[n.charAt(i)]:64;++i;const b=i<n.length?t[n.charAt(i)]:64;if(++i,l==null||d==null||f==null||b==null)throw new s2;const N=l<<2|d>>4;if(r.push(N),f!==64){const E=d<<4&240|f>>2;if(r.push(E),b!==64){const A=f<<6&192|b;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class s2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i2=function(n){const e=Rb(n);return Mb.encodeByteArray(e,!0)},dd=function(n){return i2(n).replace(/\./g,"")},Db=function(n){try{return Mb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=()=>o2().__FIREBASE_DEFAULTS__,l2=()=>{if(typeof process>"u"||typeof Mx>"u")return;const n=Mx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},c2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Db(n[1]);return e&&JSON.parse(e)},Ld=()=>{try{return a2()||l2()||c2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Lb=n=>{var e,t;return(t=(e=Ld())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Vb=n=>{const e=Lb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},zb=()=>{var n;return(n=Ld())===null||n===void 0?void 0:n.config},Ob=n=>{var e;return(e=Ld())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[dd(JSON.stringify(t)),dd(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wn())}function h2(){var n;const e=(n=Ld())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function f2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function p2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function m2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function g2(){const n=Wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function x2(){return!h2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function y2(){try{return typeof indexedDB=="object"}catch{return!1}}function v2(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var l;e(((l=i.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="FirebaseError";class Ts extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=b2,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hc.prototype.create)}}class hc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,l=this.errors[e],c=l?w2(l,r):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new Ts(i,d,r)}}function w2(n,e){return n.replace(_2,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _2=/\{\$([^}]+)}/g;function N2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Jl(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const l=n[i],c=e[i];if(Dx(l)&&Dx(c)){if(!Jl(l,c))return!1}else if(l!==c)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Dx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function S2(n,e){const t=new E2(n,e);return t.subscribe.bind(t)}class E2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");C2(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Bf),i.error===void 0&&(i.error=Bf),i.complete===void 0&&(i.complete=Bf);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function C2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Bf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(n){return n&&n._delegate?n._delegate:n}class qi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new u2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(P2(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:i});r.resolve(l)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);r===d&&c.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&e(c,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:T2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function T2(n){return n===Eo?void 0:n}function P2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new k2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ht||(ht={}));const I2={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},A2=ht.INFO,R2={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},M2=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=R2[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zp{constructor(e){this.name=e,this._logLevel=A2,this._logHandler=M2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?I2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}}const D2=(n,e)=>e.some(t=>n instanceof t);let Lx,Vx;function L2(){return Lx||(Lx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function V2(){return Vx||(Vx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ub=new WeakMap,dp=new WeakMap,Bb=new WeakMap,qf=new WeakMap,em=new WeakMap;function z2(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Fi(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Ub.set(t,n)}).catch(()=>{}),em.set(e,n),e}function O2(n){if(dp.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});dp.set(n,e)}let hp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Bb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function F2(n){hp=n(hp)}function U2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call($f(this),e,...t);return Bb.set(r,e.sort?e.sort():[e]),Fi(r)}:V2().includes(n)?function(...e){return n.apply($f(this),e),Fi(Ub.get(this))}:function(...e){return Fi(n.apply($f(this),e))}}function B2(n){return typeof n=="function"?U2(n):(n instanceof IDBTransaction&&O2(n),D2(n,L2())?new Proxy(n,hp):n)}function Fi(n){if(n instanceof IDBRequest)return z2(n);if(qf.has(n))return qf.get(n);const e=B2(n);return e!==n&&(qf.set(n,e),em.set(e,n)),e}const $f=n=>em.get(n);function q2(n,e,{blocked:t,upgrade:r,blocking:i,terminated:l}={}){const c=indexedDB.open(n,e),d=Fi(c);return r&&c.addEventListener("upgradeneeded",p=>{r(Fi(c.result),p.oldVersion,p.newVersion,Fi(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),i&&p.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),d}const $2=["get","getKey","getAll","getAllKeys","count"],H2=["put","add","delete","clear"],Hf=new Map;function zx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Hf.get(e))return Hf.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=H2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$2.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,i?"readwrite":"readonly");let f=p.store;return r&&(f=f.index(d.shift())),(await Promise.all([f[t](...d),i&&p.done]))[0]};return Hf.set(e,l),l}F2(n=>({...n,get:(e,t,r)=>zx(e,t)||n.get(e,t,r),has:(e,t)=>!!zx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(W2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function W2(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fp="@firebase/app",Ox="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new Zp("@firebase/app"),K2="@firebase/app-compat",J2="@firebase/analytics-compat",Y2="@firebase/analytics",Q2="@firebase/app-check-compat",X2="@firebase/app-check",Z2="@firebase/auth",eE="@firebase/auth-compat",tE="@firebase/database",nE="@firebase/data-connect",rE="@firebase/database-compat",sE="@firebase/functions",iE="@firebase/functions-compat",oE="@firebase/installations",aE="@firebase/installations-compat",lE="@firebase/messaging",cE="@firebase/messaging-compat",uE="@firebase/performance",dE="@firebase/performance-compat",hE="@firebase/remote-config",fE="@firebase/remote-config-compat",pE="@firebase/storage",mE="@firebase/storage-compat",gE="@firebase/firestore",xE="@firebase/vertexai-preview",yE="@firebase/firestore-compat",vE="firebase",bE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="[DEFAULT]",wE={[fp]:"fire-core",[K2]:"fire-core-compat",[Y2]:"fire-analytics",[J2]:"fire-analytics-compat",[X2]:"fire-app-check",[Q2]:"fire-app-check-compat",[Z2]:"fire-auth",[eE]:"fire-auth-compat",[tE]:"fire-rtdb",[nE]:"fire-data-connect",[rE]:"fire-rtdb-compat",[sE]:"fire-fn",[iE]:"fire-fn-compat",[oE]:"fire-iid",[aE]:"fire-iid-compat",[lE]:"fire-fcm",[cE]:"fire-fcm-compat",[uE]:"fire-perf",[dE]:"fire-perf-compat",[hE]:"fire-rc",[fE]:"fire-rc-compat",[pE]:"fire-gcs",[mE]:"fire-gcs-compat",[gE]:"fire-fst",[yE]:"fire-fst-compat",[xE]:"fire-vertex","fire-js":"fire-js",[vE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd=new Map,_E=new Map,mp=new Map;function Fx(n,e){try{n.container.addComponent(e)}catch(t){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ro(n){const e=n.name;if(mp.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;mp.set(e,n);for(const t of hd.values())Fx(t,n);for(const t of _E.values())Fx(t,n);return!0}function Vd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vi(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new hc("app","Firebase",NE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=bE;function qb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:pp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ui.create("bad-app-name",{appName:String(i)});if(t||(t=zb()),!t)throw Ui.create("no-options");const l=hd.get(i);if(l){if(Jl(t,l.options)&&Jl(r,l.config))return l;throw Ui.create("duplicate-app",{appName:i})}const c=new j2(i);for(const p of mp.values())c.addComponent(p);const d=new SE(t,r,c);return hd.set(i,d),d}function tm(n=pp){const e=hd.get(n);if(!e&&n===pp&&zb())return qb();if(!e)throw Ui.create("no-app",{appName:n});return e}function bs(n,e,t){var r;let i=(r=wE[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const l=i.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(d.join(" "));return}Ro(new qi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="firebase-heartbeat-database",CE=1,Yl="firebase-heartbeat-store";let Gf=null;function $b(){return Gf||(Gf=q2(EE,CE,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ui.create("idb-open",{originalErrorMessage:n.message})})),Gf}async function kE(n){try{const t=(await $b()).transaction(Yl),r=await t.objectStore(Yl).get(Hb(n));return await t.done,r}catch(e){if(e instanceof Ts)ei.warn(e.message);else{const t=Ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ei.warn(t.message)}}}async function Ux(n,e){try{const r=(await $b()).transaction(Yl,"readwrite");await r.objectStore(Yl).put(e,Hb(n)),await r.done}catch(t){if(t instanceof Ts)ei.warn(t.message);else{const r=Ui.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ei.warn(r.message)}}}function Hb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=1024,PE=720*60*60*1e3;class jE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new AE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Bx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=PE}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ei.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bx(),{heartbeatsToSend:r,unsentEntries:i}=IE(this._heartbeatsCache.heartbeats),l=dd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ei.warn(t),""}}}function Bx(){return new Date().toISOString().substring(0,10)}function IE(n,e=TE){const t=[];let r=n.slice();for(const i of n){const l=t.find(c=>c.agent===i.agent);if(l){if(l.dates.push(i.date),qx(t)>e){l.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),qx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class AE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return y2()?v2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ux(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ux(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function qx(n){return dd(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n){Ro(new qi("platform-logger",e=>new G2(e),"PRIVATE")),Ro(new qi("heartbeat",e=>new jE(e),"PRIVATE")),bs(fp,Ox,n),bs(fp,Ox,"esm2017"),bs("fire-js","")}RE("");var ME="firebase",DE="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bs(ME,DE,"app");var $x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jo,Gb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,j){function z(){}z.prototype=j.prototype,F.D=j.prototype,F.prototype=new z,F.prototype.constructor=F,F.C=function(O,k,T){for(var L=Array(arguments.length-2),me=2;me<arguments.length;me++)L[me-2]=arguments[me];return j.prototype[k].apply(O,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(F,j,z){z||(z=0);var O=Array(16);if(typeof j=="string")for(var k=0;16>k;++k)O[k]=j.charCodeAt(z++)|j.charCodeAt(z++)<<8|j.charCodeAt(z++)<<16|j.charCodeAt(z++)<<24;else for(k=0;16>k;++k)O[k]=j[z++]|j[z++]<<8|j[z++]<<16|j[z++]<<24;j=F.g[0],z=F.g[1],k=F.g[2];var T=F.g[3],L=j+(T^z&(k^T))+O[0]+3614090360&4294967295;j=z+(L<<7&4294967295|L>>>25),L=T+(k^j&(z^k))+O[1]+3905402710&4294967295,T=j+(L<<12&4294967295|L>>>20),L=k+(z^T&(j^z))+O[2]+606105819&4294967295,k=T+(L<<17&4294967295|L>>>15),L=z+(j^k&(T^j))+O[3]+3250441966&4294967295,z=k+(L<<22&4294967295|L>>>10),L=j+(T^z&(k^T))+O[4]+4118548399&4294967295,j=z+(L<<7&4294967295|L>>>25),L=T+(k^j&(z^k))+O[5]+1200080426&4294967295,T=j+(L<<12&4294967295|L>>>20),L=k+(z^T&(j^z))+O[6]+2821735955&4294967295,k=T+(L<<17&4294967295|L>>>15),L=z+(j^k&(T^j))+O[7]+4249261313&4294967295,z=k+(L<<22&4294967295|L>>>10),L=j+(T^z&(k^T))+O[8]+1770035416&4294967295,j=z+(L<<7&4294967295|L>>>25),L=T+(k^j&(z^k))+O[9]+2336552879&4294967295,T=j+(L<<12&4294967295|L>>>20),L=k+(z^T&(j^z))+O[10]+4294925233&4294967295,k=T+(L<<17&4294967295|L>>>15),L=z+(j^k&(T^j))+O[11]+2304563134&4294967295,z=k+(L<<22&4294967295|L>>>10),L=j+(T^z&(k^T))+O[12]+1804603682&4294967295,j=z+(L<<7&4294967295|L>>>25),L=T+(k^j&(z^k))+O[13]+4254626195&4294967295,T=j+(L<<12&4294967295|L>>>20),L=k+(z^T&(j^z))+O[14]+2792965006&4294967295,k=T+(L<<17&4294967295|L>>>15),L=z+(j^k&(T^j))+O[15]+1236535329&4294967295,z=k+(L<<22&4294967295|L>>>10),L=j+(k^T&(z^k))+O[1]+4129170786&4294967295,j=z+(L<<5&4294967295|L>>>27),L=T+(z^k&(j^z))+O[6]+3225465664&4294967295,T=j+(L<<9&4294967295|L>>>23),L=k+(j^z&(T^j))+O[11]+643717713&4294967295,k=T+(L<<14&4294967295|L>>>18),L=z+(T^j&(k^T))+O[0]+3921069994&4294967295,z=k+(L<<20&4294967295|L>>>12),L=j+(k^T&(z^k))+O[5]+3593408605&4294967295,j=z+(L<<5&4294967295|L>>>27),L=T+(z^k&(j^z))+O[10]+38016083&4294967295,T=j+(L<<9&4294967295|L>>>23),L=k+(j^z&(T^j))+O[15]+3634488961&4294967295,k=T+(L<<14&4294967295|L>>>18),L=z+(T^j&(k^T))+O[4]+3889429448&4294967295,z=k+(L<<20&4294967295|L>>>12),L=j+(k^T&(z^k))+O[9]+568446438&4294967295,j=z+(L<<5&4294967295|L>>>27),L=T+(z^k&(j^z))+O[14]+3275163606&4294967295,T=j+(L<<9&4294967295|L>>>23),L=k+(j^z&(T^j))+O[3]+4107603335&4294967295,k=T+(L<<14&4294967295|L>>>18),L=z+(T^j&(k^T))+O[8]+1163531501&4294967295,z=k+(L<<20&4294967295|L>>>12),L=j+(k^T&(z^k))+O[13]+2850285829&4294967295,j=z+(L<<5&4294967295|L>>>27),L=T+(z^k&(j^z))+O[2]+4243563512&4294967295,T=j+(L<<9&4294967295|L>>>23),L=k+(j^z&(T^j))+O[7]+1735328473&4294967295,k=T+(L<<14&4294967295|L>>>18),L=z+(T^j&(k^T))+O[12]+2368359562&4294967295,z=k+(L<<20&4294967295|L>>>12),L=j+(z^k^T)+O[5]+4294588738&4294967295,j=z+(L<<4&4294967295|L>>>28),L=T+(j^z^k)+O[8]+2272392833&4294967295,T=j+(L<<11&4294967295|L>>>21),L=k+(T^j^z)+O[11]+1839030562&4294967295,k=T+(L<<16&4294967295|L>>>16),L=z+(k^T^j)+O[14]+4259657740&4294967295,z=k+(L<<23&4294967295|L>>>9),L=j+(z^k^T)+O[1]+2763975236&4294967295,j=z+(L<<4&4294967295|L>>>28),L=T+(j^z^k)+O[4]+1272893353&4294967295,T=j+(L<<11&4294967295|L>>>21),L=k+(T^j^z)+O[7]+4139469664&4294967295,k=T+(L<<16&4294967295|L>>>16),L=z+(k^T^j)+O[10]+3200236656&4294967295,z=k+(L<<23&4294967295|L>>>9),L=j+(z^k^T)+O[13]+681279174&4294967295,j=z+(L<<4&4294967295|L>>>28),L=T+(j^z^k)+O[0]+3936430074&4294967295,T=j+(L<<11&4294967295|L>>>21),L=k+(T^j^z)+O[3]+3572445317&4294967295,k=T+(L<<16&4294967295|L>>>16),L=z+(k^T^j)+O[6]+76029189&4294967295,z=k+(L<<23&4294967295|L>>>9),L=j+(z^k^T)+O[9]+3654602809&4294967295,j=z+(L<<4&4294967295|L>>>28),L=T+(j^z^k)+O[12]+3873151461&4294967295,T=j+(L<<11&4294967295|L>>>21),L=k+(T^j^z)+O[15]+530742520&4294967295,k=T+(L<<16&4294967295|L>>>16),L=z+(k^T^j)+O[2]+3299628645&4294967295,z=k+(L<<23&4294967295|L>>>9),L=j+(k^(z|~T))+O[0]+4096336452&4294967295,j=z+(L<<6&4294967295|L>>>26),L=T+(z^(j|~k))+O[7]+1126891415&4294967295,T=j+(L<<10&4294967295|L>>>22),L=k+(j^(T|~z))+O[14]+2878612391&4294967295,k=T+(L<<15&4294967295|L>>>17),L=z+(T^(k|~j))+O[5]+4237533241&4294967295,z=k+(L<<21&4294967295|L>>>11),L=j+(k^(z|~T))+O[12]+1700485571&4294967295,j=z+(L<<6&4294967295|L>>>26),L=T+(z^(j|~k))+O[3]+2399980690&4294967295,T=j+(L<<10&4294967295|L>>>22),L=k+(j^(T|~z))+O[10]+4293915773&4294967295,k=T+(L<<15&4294967295|L>>>17),L=z+(T^(k|~j))+O[1]+2240044497&4294967295,z=k+(L<<21&4294967295|L>>>11),L=j+(k^(z|~T))+O[8]+1873313359&4294967295,j=z+(L<<6&4294967295|L>>>26),L=T+(z^(j|~k))+O[15]+4264355552&4294967295,T=j+(L<<10&4294967295|L>>>22),L=k+(j^(T|~z))+O[6]+2734768916&4294967295,k=T+(L<<15&4294967295|L>>>17),L=z+(T^(k|~j))+O[13]+1309151649&4294967295,z=k+(L<<21&4294967295|L>>>11),L=j+(k^(z|~T))+O[4]+4149444226&4294967295,j=z+(L<<6&4294967295|L>>>26),L=T+(z^(j|~k))+O[11]+3174756917&4294967295,T=j+(L<<10&4294967295|L>>>22),L=k+(j^(T|~z))+O[2]+718787259&4294967295,k=T+(L<<15&4294967295|L>>>17),L=z+(T^(k|~j))+O[9]+3951481745&4294967295,F.g[0]=F.g[0]+j&4294967295,F.g[1]=F.g[1]+(k+(L<<21&4294967295|L>>>11))&4294967295,F.g[2]=F.g[2]+k&4294967295,F.g[3]=F.g[3]+T&4294967295}r.prototype.u=function(F,j){j===void 0&&(j=F.length);for(var z=j-this.blockSize,O=this.B,k=this.h,T=0;T<j;){if(k==0)for(;T<=z;)i(this,F,T),T+=this.blockSize;if(typeof F=="string"){for(;T<j;)if(O[k++]=F.charCodeAt(T++),k==this.blockSize){i(this,O),k=0;break}}else for(;T<j;)if(O[k++]=F[T++],k==this.blockSize){i(this,O),k=0;break}}this.h=k,this.o+=j},r.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var j=1;j<F.length-8;++j)F[j]=0;var z=8*this.o;for(j=F.length-8;j<F.length;++j)F[j]=z&255,z/=256;for(this.u(F),F=Array(16),j=z=0;4>j;++j)for(var O=0;32>O;O+=8)F[z++]=this.g[j]>>>O&255;return F};function l(F,j){var z=d;return Object.prototype.hasOwnProperty.call(z,F)?z[F]:z[F]=j(F)}function c(F,j){this.h=j;for(var z=[],O=!0,k=F.length-1;0<=k;k--){var T=F[k]|0;O&&T==j||(z[k]=T,O=!1)}this.g=z}var d={};function p(F){return-128<=F&&128>F?l(F,function(j){return new c([j|0],0>j?-1:0)}):new c([F|0],0>F?-1:0)}function f(F){if(isNaN(F)||!isFinite(F))return b;if(0>F)return I(f(-F));for(var j=[],z=1,O=0;F>=z;O++)j[O]=F/z|0,z*=4294967296;return new c(j,0)}function y(F,j){if(F.length==0)throw Error("number format error: empty string");if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(F.charAt(0)=="-")return I(y(F.substring(1),j));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var z=f(Math.pow(j,8)),O=b,k=0;k<F.length;k+=8){var T=Math.min(8,F.length-k),L=parseInt(F.substring(k,k+T),j);8>T?(T=f(Math.pow(j,T)),O=O.j(T).add(f(L))):(O=O.j(z),O=O.add(f(L)))}return O}var b=p(0),N=p(1),E=p(16777216);n=c.prototype,n.m=function(){if(P(this))return-I(this).m();for(var F=0,j=1,z=0;z<this.g.length;z++){var O=this.i(z);F+=(0<=O?O:4294967296+O)*j,j*=4294967296}return F},n.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(A(this))return"0";if(P(this))return"-"+I(this).toString(F);for(var j=f(Math.pow(F,6)),z=this,O="";;){var k=Z(z,j).g;z=$(z,k.j(j));var T=((0<z.g.length?z.g[0]:z.h)>>>0).toString(F);if(z=k,A(z))return T+O;for(;6>T.length;)T="0"+T;O=T+O}},n.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function A(F){if(F.h!=0)return!1;for(var j=0;j<F.g.length;j++)if(F.g[j]!=0)return!1;return!0}function P(F){return F.h==-1}n.l=function(F){return F=$(this,F),P(F)?-1:A(F)?0:1};function I(F){for(var j=F.g.length,z=[],O=0;O<j;O++)z[O]=~F.g[O];return new c(z,~F.h).add(N)}n.abs=function(){return P(this)?I(this):this},n.add=function(F){for(var j=Math.max(this.g.length,F.g.length),z=[],O=0,k=0;k<=j;k++){var T=O+(this.i(k)&65535)+(F.i(k)&65535),L=(T>>>16)+(this.i(k)>>>16)+(F.i(k)>>>16);O=L>>>16,T&=65535,L&=65535,z[k]=L<<16|T}return new c(z,z[z.length-1]&-2147483648?-1:0)};function $(F,j){return F.add(I(j))}n.j=function(F){if(A(this)||A(F))return b;if(P(this))return P(F)?I(this).j(I(F)):I(I(this).j(F));if(P(F))return I(this.j(I(F)));if(0>this.l(E)&&0>F.l(E))return f(this.m()*F.m());for(var j=this.g.length+F.g.length,z=[],O=0;O<2*j;O++)z[O]=0;for(O=0;O<this.g.length;O++)for(var k=0;k<F.g.length;k++){var T=this.i(O)>>>16,L=this.i(O)&65535,me=F.i(k)>>>16,Ve=F.i(k)&65535;z[2*O+2*k]+=L*Ve,W(z,2*O+2*k),z[2*O+2*k+1]+=T*Ve,W(z,2*O+2*k+1),z[2*O+2*k+1]+=L*me,W(z,2*O+2*k+1),z[2*O+2*k+2]+=T*me,W(z,2*O+2*k+2)}for(O=0;O<j;O++)z[O]=z[2*O+1]<<16|z[2*O];for(O=j;O<2*j;O++)z[O]=0;return new c(z,0)};function W(F,j){for(;(F[j]&65535)!=F[j];)F[j+1]+=F[j]>>>16,F[j]&=65535,j++}function K(F,j){this.g=F,this.h=j}function Z(F,j){if(A(j))throw Error("division by zero");if(A(F))return new K(b,b);if(P(F))return j=Z(I(F),j),new K(I(j.g),I(j.h));if(P(j))return j=Z(F,I(j)),new K(I(j.g),j.h);if(30<F.g.length){if(P(F)||P(j))throw Error("slowDivide_ only works with positive integers.");for(var z=N,O=j;0>=O.l(F);)z=ce(z),O=ce(O);var k=J(z,1),T=J(O,1);for(O=J(O,2),z=J(z,2);!A(O);){var L=T.add(O);0>=L.l(F)&&(k=k.add(z),T=L),O=J(O,1),z=J(z,1)}return j=$(F,k.j(j)),new K(k,j)}for(k=b;0<=F.l(j);){for(z=Math.max(1,Math.floor(F.m()/j.m())),O=Math.ceil(Math.log(z)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),T=f(z),L=T.j(j);P(L)||0<L.l(F);)z-=O,T=f(z),L=T.j(j);A(T)&&(T=N),k=k.add(T),F=$(F,L)}return new K(k,F)}n.A=function(F){return Z(this,F).h},n.and=function(F){for(var j=Math.max(this.g.length,F.g.length),z=[],O=0;O<j;O++)z[O]=this.i(O)&F.i(O);return new c(z,this.h&F.h)},n.or=function(F){for(var j=Math.max(this.g.length,F.g.length),z=[],O=0;O<j;O++)z[O]=this.i(O)|F.i(O);return new c(z,this.h|F.h)},n.xor=function(F){for(var j=Math.max(this.g.length,F.g.length),z=[],O=0;O<j;O++)z[O]=this.i(O)^F.i(O);return new c(z,this.h^F.h)};function ce(F){for(var j=F.g.length+1,z=[],O=0;O<j;O++)z[O]=F.i(O)<<1|F.i(O-1)>>>31;return new c(z,F.h)}function J(F,j){var z=j>>5;j%=32;for(var O=F.g.length-z,k=[],T=0;T<O;T++)k[T]=0<j?F.i(T+z)>>>j|F.i(T+z+1)<<32-j:F.i(T+z);return new c(k,F.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Gb=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=y,jo=c}).apply(typeof $x<"u"?$x:typeof self<"u"?self:typeof window<"u"?window:{});var zu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wb,Dl,Kb,Yu,gp,Jb,Yb,Qb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,w,S){return h==Array.prototype||h==Object.prototype||(h[w]=S.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof zu=="object"&&zu];for(var w=0;w<h.length;++w){var S=h[w];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function i(h,w){if(w)e:{var S=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var X=h[R];if(!(X in S))break e;S=S[X]}h=h[h.length-1],R=S[h],w=w(R),w!=R&&w!=null&&e(S,h,{configurable:!0,writable:!0,value:w})}}function l(h,w){h instanceof String&&(h+="");var S=0,R=!1,X={next:function(){if(!R&&S<h.length){var ae=S++;return{value:w(ae,h[ae]),done:!1}}return R=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}i("Array.prototype.values",function(h){return h||function(){return l(this,function(w,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(h){var w=typeof h;return w=w!="object"?w:h?Array.isArray(h)?"array":w:"null",w=="array"||w=="object"&&typeof h.length=="number"}function f(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function y(h,w,S){return h.call.apply(h.bind,arguments)}function b(h,w,S){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,R),h.apply(w,X)}}return function(){return h.apply(w,arguments)}}function N(h,w,S){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:b,N.apply(null,arguments)}function E(h,w){var S=Array.prototype.slice.call(arguments,1);return function(){var R=S.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function A(h,w){function S(){}S.prototype=w.prototype,h.aa=w.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(R,X,ae){for(var we=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)we[bt-2]=arguments[bt];return w.prototype[X].apply(R,we)}}function P(h){const w=h.length;if(0<w){const S=Array(w);for(let R=0;R<w;R++)S[R]=h[R];return S}return[]}function I(h,w){for(let S=1;S<arguments.length;S++){const R=arguments[S];if(p(R)){const X=h.length||0,ae=R.length||0;h.length=X+ae;for(let we=0;we<ae;we++)h[X+we]=R[we]}else h.push(R)}}class ${constructor(w,S){this.i=w,this.j=S,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function W(h){return/^[\s\xa0]*$/.test(h)}function K(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function Z(h){return Z[" "](h),h}Z[" "]=function(){};var ce=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function J(h,w,S){for(const R in h)w.call(S,h[R],R,h)}function F(h,w){for(const S in h)w.call(void 0,h[S],S,h)}function j(h){const w={};for(const S in h)w[S]=h[S];return w}const z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,w){let S,R;for(let X=1;X<arguments.length;X++){R=arguments[X];for(S in R)h[S]=R[S];for(let ae=0;ae<z.length;ae++)S=z[ae],Object.prototype.hasOwnProperty.call(R,S)&&(h[S]=R[S])}}function k(h){var w=1;h=h.split(":");const S=[];for(;0<w&&h.length;)S.push(h.shift()),w--;return h.length&&S.push(h.join(":")),S}function T(h){d.setTimeout(()=>{throw h},0)}function L(){var h=ve;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class me{constructor(){this.h=this.g=null}add(w,S){const R=Ve.get();R.set(w,S),this.h?this.h.next=R:this.g=R,this.h=R}}var Ve=new $(()=>new Se,h=>h.reset());class Se{constructor(){this.next=this.g=this.h=null}set(w,S){this.h=w,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,B=!1,ve=new me,G=()=>{const h=d.Promise.resolve(void 0);Pe=()=>{h.then(q)}};var q=()=>{for(var h;h=L();){try{h.h.call(h.g)}catch(S){T(S)}var w=Ve;w.j(h),100>w.h&&(w.h++,h.next=w.g,w.g=h)}B=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var he=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};d.addEventListener("test",S,w),d.removeEventListener("test",S,w)}catch{}return h})();function ze(h,w){if(se.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget){if(ce){e:{try{Z(w.nodeName);var X=!0;break e}catch{}X=!1}X||(w=null)}}else S=="mouseover"?w=h.fromElement:S=="mouseout"&&(w=h.toElement);this.relatedTarget=w,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:We[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ze.aa.h.call(this)}}A(ze,se);var We={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Je(h,w,S,R,X){this.listener=h,this.proxy=null,this.src=w,this.type=S,this.capture=!!R,this.ha=X,this.key=++Ke,this.da=this.fa=!1}function He(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _t(h){this.src=h,this.g={},this.h=0}_t.prototype.add=function(h,w,S,R,X){var ae=h.toString();h=this.g[ae],h||(h=this.g[ae]=[],this.h++);var we=at(h,w,R,X);return-1<we?(w=h[we],S||(w.fa=!1)):(w=new Je(w,this.src,ae,!!R,X),w.fa=S,h.push(w)),w};function Ct(h,w){var S=w.type;if(S in h.g){var R=h.g[S],X=Array.prototype.indexOf.call(R,w,void 0),ae;(ae=0<=X)&&Array.prototype.splice.call(R,X,1),ae&&(He(w),h.g[S].length==0&&(delete h.g[S],h.h--))}}function at(h,w,S,R){for(var X=0;X<h.length;++X){var ae=h[X];if(!ae.da&&ae.listener==w&&ae.capture==!!S&&ae.ha==R)return X}return-1}var Te="closure_lm_"+(1e6*Math.random()|0),lt={};function Bt(h,w,S,R,X){if(Array.isArray(w)){for(var ae=0;ae<w.length;ae++)Bt(h,w[ae],S,R,X);return null}return S=Cn(S),h&&h[et]?h.K(w,S,f(R)?!!R.capture:!1,X):qt(h,w,S,!1,R,X)}function qt(h,w,S,R,X,ae){if(!w)throw Error("Invalid event type");var we=f(X)?!!X.capture:!!X,bt=Zn(h);if(bt||(h[Te]=bt=new _t(h)),S=bt.add(w,S,R,we,ae),S.proxy)return S;if(R=dn(),S.proxy=R,R.src=h,R.listener=S,h.addEventListener)he||(X=we),X===void 0&&(X=!1),h.addEventListener(w.toString(),R,X);else if(h.attachEvent)h.attachEvent(Ht(w.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return S}function dn(){function h(S){return w.call(h.src,h.listener,S)}const w=Dn;return h}function $t(h,w,S,R,X){if(Array.isArray(w))for(var ae=0;ae<w.length;ae++)$t(h,w[ae],S,R,X);else R=f(R)?!!R.capture:!!R,S=Cn(S),h&&h[et]?(h=h.i,w=String(w).toString(),w in h.g&&(ae=h.g[w],S=at(ae,S,R,X),-1<S&&(He(ae[S]),Array.prototype.splice.call(ae,S,1),ae.length==0&&(delete h.g[w],h.h--)))):h&&(h=Zn(h))&&(w=h.g[w.toString()],h=-1,w&&(h=at(w,S,R,X)),(S=-1<h?w[h]:null)&&_e(S))}function _e(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[et])Ct(w.i,h);else{var S=h.type,R=h.proxy;w.removeEventListener?w.removeEventListener(S,R,h.capture):w.detachEvent?w.detachEvent(Ht(S),R):w.addListener&&w.removeListener&&w.removeListener(R),(S=Zn(w))?(Ct(S,h),S.h==0&&(S.src=null,w[Te]=null)):He(h)}}}function Ht(h){return h in lt?lt[h]:lt[h]="on"+h}function Dn(h,w){if(h.da)h=!0;else{w=new ze(w,this);var S=h.listener,R=h.ha||h.src;h.fa&&_e(h),h=S.call(R,w)}return h}function Zn(h){return h=h[Te],h instanceof _t?h:null}var pr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cn(h){return typeof h=="function"?h:(h[pr]||(h[pr]=function(w){return h.handleEvent(w)}),h[pr])}function kt(){M.call(this),this.i=new _t(this),this.M=this,this.F=null}A(kt,M),kt.prototype[et]=!0,kt.prototype.removeEventListener=function(h,w,S,R){$t(this,h,w,S,R)};function Mt(h,w){var S,R=h.F;if(R)for(S=[];R;R=R.F)S.push(R);if(h=h.M,R=w.type||w,typeof w=="string")w=new se(w,h);else if(w instanceof se)w.target=w.target||h;else{var X=w;w=new se(R,h),O(w,X)}if(X=!0,S)for(var ae=S.length-1;0<=ae;ae--){var we=w.g=S[ae];X=hn(we,R,!0,w)&&X}if(we=w.g=h,X=hn(we,R,!0,w)&&X,X=hn(we,R,!1,w)&&X,S)for(ae=0;ae<S.length;ae++)we=w.g=S[ae],X=hn(we,R,!1,w)&&X}kt.prototype.N=function(){if(kt.aa.N.call(this),this.i){var h=this.i,w;for(w in h.g){for(var S=h.g[w],R=0;R<S.length;R++)He(S[R]);delete h.g[w],h.h--}}this.F=null},kt.prototype.K=function(h,w,S,R){return this.i.add(String(h),w,!1,S,R)},kt.prototype.L=function(h,w,S,R){return this.i.add(String(h),w,!0,S,R)};function hn(h,w,S,R){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();for(var X=!0,ae=0;ae<w.length;++ae){var we=w[ae];if(we&&!we.da&&we.capture==S){var bt=we.listener,pn=we.ha||we.src;we.fa&&Ct(h.i,we),X=bt.call(pn,R)!==!1&&X}}return X&&!R.defaultPrevented}function mr(h,w,S){if(typeof h=="function")S&&(h=N(h,S));else if(h&&typeof h.handleEvent=="function")h=N(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:d.setTimeout(h,w||0)}function er(h){h.g=mr(()=>{h.g=null,h.i&&(h.i=!1,er(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class ue extends M{constructor(w,S){super(),this.m=w,this.l=S,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:er(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $e(h){M.call(this),this.h=h,this.g={}}A($e,M);var Tt=[];function fn(h){J(h.g,function(w,S){this.g.hasOwnProperty(S)&&_e(w)},h),h.g={}}$e.prototype.N=function(){$e.aa.N.call(this),fn(this)},$e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ln=d.JSON.stringify,Br=d.JSON.parse,Ps=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Tr(){}Tr.prototype.h=null;function ls(h){return h.h||(h.h=h.i())}function cs(){}var Vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tr(){se.call(this,"d")}A(tr,se);function Pr(){se.call(this,"c")}A(Pr,se);var nr={},js=null;function jr(){return js=js||new kt}nr.La="serverreachability";function qr(h){se.call(this,nr.La,h)}A(qr,se);function te(h){const w=jr();Mt(w,new qr(w))}nr.STAT_EVENT="statevent";function Q(h,w){se.call(this,nr.STAT_EVENT,h),this.stat=w}A(Q,se);function ne(h){const w=jr();Mt(w,new Q(w,h))}nr.Ma="timingevent";function fe(h,w){se.call(this,nr.Ma,h),this.size=w}A(fe,se);function Ne(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},w)}function qe(){this.g=!0}qe.prototype.xa=function(){this.g=!1};function Ze(h,w,S,R,X,ae){h.info(function(){if(h.g)if(ae)for(var we="",bt=ae.split("&"),pn=0;pn<bt.length;pn++){var pt=bt[pn].split("=");if(1<pt.length){var wn=pt[0];pt=pt[1];var on=wn.split("_");we=2<=on.length&&on[1]=="type"?we+(wn+"="+pt+"&"):we+(wn+"=redacted&")}}else we=null;else we=ae;return"XMLHTTP REQ ("+R+") [attempt "+X+"]: "+w+`
`+S+`
`+we})}function ct(h,w,S,R,X,ae,we){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+X+"]: "+w+`
`+S+`
`+ae+" "+we})}function Re(h,w,S,R){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+vt(h,S)+(R?" "+R:"")})}function Ye(h,w){h.info(function(){return"TIMEOUT: "+w})}qe.prototype.info=function(){};function vt(h,w){if(!h.g)return w;if(!w)return null;try{var S=JSON.parse(w);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var R=S[h];if(!(2>R.length)){var X=R[1];if(Array.isArray(X)&&!(1>X.length)){var ae=X[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var we=1;we<X.length;we++)X[we]=""}}}}return Ln(S)}catch{return w}}var Pt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},V={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oe;function Le(){}A(Le,Tr),Le.prototype.g=function(){return new XMLHttpRequest},Le.prototype.i=function(){return{}},oe=new Le;function tt(h,w,S,R){this.j=h,this.i=w,this.l=S,this.R=R||1,this.U=new $e(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new it}function it(){this.i=null,this.g="",this.h=!1}var sn={},Nt={};function bn(h,w,S){h.L=1,h.v=di(xr(w)),h.m=S,h.P=!0,$o(h,null)}function $o(h,w){h.F=Date.now(),jt(h),h.A=xr(h.v);var S=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),fi(S.i,"t",R),h.C=0,S=h.j.J,h.h=new it,h.g=Bc(h.j,S?w:null,!h.m),0<h.O&&(h.M=new ue(N(h.Y,h,h.g),h.O)),w=h.U,S=h.g,R=h.ca;var X="readystatechange";Array.isArray(X)||(X&&(Tt[0]=X.toString()),X=Tt);for(var ae=0;ae<X.length;ae++){var we=Bt(S,X[ae],R||w.handleEvent,!1,w.h||w);if(!we)break;w.g[we.key]=we}w=h.H?j(h.H):{},h.m?(h.u||(h.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,w)):(h.u="GET",h.g.ea(h.A,h.u,null,w)),te(),Ze(h.i,h.u,h.A,h.l,h.R,h.m)}tt.prototype.ca=function(h){h=h.target;const w=this.M;w&&sr(h)==3?w.j():this.Y(h)},tt.prototype.Y=function(h){try{if(h==this.g)e:{const on=sr(this.g);var w=this.g.Ba();const Rr=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||il(this.g)))){this.J||on!=4||w==7||(w==8||0>=Rr?te(3):te(2)),no(this);var S=this.g.Z();this.X=S;t:if(Ec(this)){var R=il(this.g);h="";var X=R.length,ae=sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),ai(this);var we="";break t}this.h.i=new d.TextDecoder}for(w=0;w<X;w++)this.h.h=!0,h+=this.h.i.decode(R[w],{stream:!(ae&&w==X-1)});R.length=0,this.h.g+=h,this.C=0,we=this.h.g}else we=this.g.oa();if(this.o=S==200,ct(this.i,this.u,this.A,this.l,this.R,on,S),this.o){if(this.T&&!this.K){t:{if(this.g){var bt,pn=this.g;if((bt=pn.g?pn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(bt)){var pt=bt;break t}}pt=null}if(S=pt)Re(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,el(this,S);else{this.o=!1,this.s=3,ne(12),Ir(this),ai(this);break e}}if(this.P){S=!0;let vr;for(;!this.J&&this.C<we.length;)if(vr=uh(this,we),vr==Nt){on==4&&(this.s=4,ne(14),S=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}else if(vr==sn){this.s=4,ne(15),Re(this.i,this.l,we,"[Invalid Chunk]"),S=!1;break}else Re(this.i,this.l,vr,null),el(this,vr);if(Ec(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||we.length!=0||this.h.h||(this.s=1,ne(16),S=!1),this.o=this.o&&S,!S)Re(this.i,this.l,we,"[Invalid Chunked Response]"),Ir(this),ai(this);else if(0<we.length&&!this.W){this.W=!0;var wn=this.j;wn.g==this&&wn.ba&&!wn.M&&(wn.j.info("Great, no buffering proxy detected. Bytes received: "+we.length),al(wn),wn.M=!0,ne(11))}}else Re(this.i,this.l,we,null),el(this,we);on==4&&Ir(this),this.o&&!this.J&&(on==4?ta(this.j,this):(this.o=!1,jt(this)))}else Yo(this.g),S==400&&0<we.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Ir(this),ai(this)}}}catch{}finally{}};function Ec(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function uh(h,w){var S=h.C,R=w.indexOf(`
`,S);return R==-1?Nt:(S=Number(w.substring(S,R)),isNaN(S)?sn:(R+=1,R+S>w.length?Nt:(w=w.slice(R,R+S),h.C=R+S,w)))}tt.prototype.cancel=function(){this.J=!0,Ir(this)};function jt(h){h.S=Date.now()+h.I,Cc(h,h.I)}function Cc(h,w){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ne(N(h.ba,h),w)}function no(h){h.B&&(d.clearTimeout(h.B),h.B=null)}tt.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ye(this.i,this.A),this.L!=2&&(te(),ne(17)),Ir(this),this.s=2,ai(this)):Cc(this,this.S-h)};function ai(h){h.j.G==0||h.J||ta(h.j,h)}function Ir(h){no(h);var w=h.M;w&&typeof w.ma=="function"&&w.ma(),h.M=null,fn(h.U),h.g&&(w=h.g,h.g=null,w.abort(),w.ma())}function el(h,w){try{var S=h.j;if(S.G!=0&&(S.g==h||Kn(S.h,h))){if(!h.K&&Kn(S.h,h)&&S.G==3){try{var R=S.Da.g.parse(w)}catch{R=null}if(Array.isArray(R)&&R.length==3){var X=R;if(X[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)ea(S),Kr(S);else break e;Zo(S),ne(18)}}else S.za=X[1],0<S.za-S.T&&37500>X[2]&&S.F&&S.v==0&&!S.C&&(S.C=Ne(N(S.Za,S),6e3));if(1>=Tc(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Ds(S,11)}else if((h.K||S.g==h)&&ea(S),!W(w))for(X=S.Da.g.parse(w),w=0;w<X.length;w++){let pt=X[w];if(S.T=pt[0],pt=pt[1],S.G==2)if(pt[0]=="c"){S.K=pt[1],S.ia=pt[2];const wn=pt[3];wn!=null&&(S.la=wn,S.j.info("VER="+S.la));const on=pt[4];on!=null&&(S.Aa=on,S.j.info("SVER="+S.Aa));const Rr=pt[5];Rr!=null&&typeof Rr=="number"&&0<Rr&&(R=1.5*Rr,S.L=R,S.j.info("backChannelRequestTimeoutMs_="+R)),R=S;const vr=h.g;if(vr){const co=vr.g?vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(co){var ae=R.h;ae.g||co.indexOf("spdy")==-1&&co.indexOf("quic")==-1&&co.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(tl(ae,ae.h),ae.h=null))}if(R.D){const ra=vr.g?vr.g.getResponseHeader("X-HTTP-Session-Id"):null;ra&&(R.ya=ra,St(R.I,R.D,ra))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),R=S;var we=h;if(R.qa=Uc(R,R.J?R.ia:null,R.W),we.K){Pc(R.h,we);var bt=we,pn=R.L;pn&&(bt.I=pn),bt.B&&(no(bt),jt(bt)),R.g=we}else lo(R);0<S.i.length&&fs(S)}else pt[0]!="stop"&&pt[0]!="close"||Ds(S,7);else S.G==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?Ds(S,7):Tn(S):pt[0]!="noop"&&S.l&&S.l.ta(pt),S.v=0)}}te(4)}catch{}}var kc=class{constructor(h,w){this.g=h,this.map=w}};function ro(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Tc(h){return h.h?1:h.g?h.g.size:0}function Kn(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function tl(h,w){h.g?h.g.add(w):h.h=w}function Pc(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}ro.prototype.cancel=function(){if(this.i=jc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function jc(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const S of h.g.values())w=w.concat(S.D);return w}return P(h.i)}function Ho(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var w=[],S=h.length,R=0;R<S;R++)w.push(h[R]);return w}w=[],S=0;for(R in h)w[S++]=h[R];return w}function Go(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var w=[];h=h.length;for(var S=0;S<h;S++)w.push(S);return w}w=[],S=0;for(const R in h)w[S++]=R;return w}}}function li(h,w){if(h.forEach&&typeof h.forEach=="function")h.forEach(w,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,w,void 0);else for(var S=Go(h),R=Ho(h),X=R.length,ae=0;ae<X;ae++)w.call(void 0,R[ae],S&&S[ae],h)}var so=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dh(h,w){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var R=h[S].indexOf("="),X=null;if(0<=R){var ae=h[S].substring(0,R);X=h[S].substring(R+1)}else ae=h[S];w(ae,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Is(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Is){this.h=h.h,io(this,h.j),this.o=h.o,this.g=h.g,ci(this,h.s),this.l=h.l;var w=h.i,S=new us;S.i=w.i,w.g&&(S.g=new Map(w.g),S.h=w.h),ui(this,S),this.m=h.m}else h&&(w=String(h).match(so))?(this.h=!1,io(this,w[1]||"",!0),this.o=dt(w[2]||""),this.g=dt(w[3]||"",!0),ci(this,w[4]),this.l=dt(w[5]||"",!0),ui(this,w[6]||"",!0),this.m=dt(w[7]||"")):(this.h=!1,this.i=new us(null,this.h))}Is.prototype.toString=function(){var h=[],w=this.j;w&&h.push(hi(w,Wo,!0),":");var S=this.g;return(S||w=="file")&&(h.push("//"),(w=this.o)&&h.push(hi(w,Wo,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(hi(S,S.charAt(0)=="/"?Rc:Ac,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",hi(S,nl)),h.join("")};function xr(h){return new Is(h)}function io(h,w,S){h.j=S?dt(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function ci(h,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);h.s=w}else h.s=null}function ui(h,w,S){w instanceof us?(h.i=w,ds(h.i,h.h)):(S||(w=hi(w,Mc)),h.i=new us(w,h.h))}function St(h,w,S){h.i.set(w,S)}function di(h){return St(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function dt(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function hi(h,w,S){return typeof h=="string"?(h=encodeURI(h).replace(w,Ic),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ic(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Wo=/[#\/\?@]/g,Ac=/[#\?:]/g,Rc=/[#\?]/g,Mc=/[#\?@]/g,nl=/#/g;function us(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function kn(h){h.g||(h.g=new Map,h.h=0,h.i&&dh(h.i,function(w,S){h.add(decodeURIComponent(w.replace(/\+/g," ")),S)}))}n=us.prototype,n.add=function(h,w){kn(this),this.i=null,h=Ar(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(w),this.h+=1,this};function $r(h,w){kn(h),w=Ar(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function Hr(h,w){return kn(h),w=Ar(h,w),h.g.has(w)}n.forEach=function(h,w){kn(this),this.g.forEach(function(S,R){S.forEach(function(X){h.call(w,X,R,this)},this)},this)},n.na=function(){kn(this);const h=Array.from(this.g.values()),w=Array.from(this.g.keys()),S=[];for(let R=0;R<w.length;R++){const X=h[R];for(let ae=0;ae<X.length;ae++)S.push(w[R])}return S},n.V=function(h){kn(this);let w=[];if(typeof h=="string")Hr(this,h)&&(w=w.concat(this.g.get(Ar(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)w=w.concat(h[S])}return w},n.set=function(h,w){return kn(this),this.i=null,h=Ar(this,h),Hr(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},n.get=function(h,w){return h?(h=this.V(h),0<h.length?String(h[0]):w):w};function fi(h,w,S){$r(h,w),0<S.length&&(h.i=null,h.g.set(Ar(h,w),P(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(var S=0;S<w.length;S++){var R=w[S];const ae=encodeURIComponent(String(R)),we=this.V(R);for(R=0;R<we.length;R++){var X=ae;we[R]!==""&&(X+="="+encodeURIComponent(String(we[R]))),h.push(X)}}return this.i=h.join("&")};function Ar(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function ds(h,w){w&&!h.j&&(kn(h),h.i=null,h.g.forEach(function(S,R){var X=R.toLowerCase();R!=X&&($r(this,R),fi(this,X,S))},h)),h.j=w}function hh(h,w){const S=new qe;if(d.Image){const R=new Image;R.onload=E(rr,S,"TestLoadImage: loaded",!0,w,R),R.onerror=E(rr,S,"TestLoadImage: error",!1,w,R),R.onabort=E(rr,S,"TestLoadImage: abort",!1,w,R),R.ontimeout=E(rr,S,"TestLoadImage: timeout",!1,w,R),d.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else w(!1)}function Dc(h,w){const S=new qe,R=new AbortController,X=setTimeout(()=>{R.abort(),rr(S,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:R.signal}).then(ae=>{clearTimeout(X),ae.ok?rr(S,"TestPingServer: ok",!0,w):rr(S,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(X),rr(S,"TestPingServer: error",!1,w)})}function rr(h,w,S,R,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),R(S)}catch{}}function fh(){this.g=new Ps}function Lc(h,w,S){const R=S||"";try{li(h,function(X,ae){let we=X;f(X)&&(we=Ln(X)),w.push(R+ae+"="+encodeURIComponent(we))})}catch(X){throw w.push(R+"type="+encodeURIComponent("_badmap")),X}}function As(h){this.l=h.Ub||null,this.j=h.eb||!1}A(As,Tr),As.prototype.g=function(){return new oo(this.l,this.j)},As.prototype.i=(function(h){return function(){return h}})({});function oo(h,w){kt.call(this),this.D=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(oo,kt),n=oo.prototype,n.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=w,this.readyState=1,Wr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(w.body=h),(this.D||d).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vc(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vc(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?Gr(this):Wr(this),this.readyState==3&&Vc(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Gr(this))},n.Qa=function(h){this.g&&(this.response=h,Gr(this))},n.ga=function(){this.g&&Gr(this)};function Gr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Wr(h)}n.setRequestHeader=function(h,w){this.u.append(h,w)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var S=w.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=w.next();return h.join(`\r
`)};function Wr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(oo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Rs(h){let w="";return J(h,function(S,R){w+=R,w+=":",w+=S,w+=`\r
`}),w}function pi(h,w,S){e:{for(R in S){var R=!1;break e}R=!0}R||(S=Rs(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):St(h,w,S))}function Ft(h){kt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ft,kt);var ph=/^https?$/i,rl=["POST","PUT"];n=Ft.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,w,S,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oe.g(),this.v=this.o?ls(this.o):ls(oe),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(ae){ao(this,ae);return}if(h=S||"",S=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var X in R)S.set(X,R[X]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const ae of R.keys())S.set(ae,R.get(ae));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(S.keys()).find(ae=>ae.toLowerCase()=="content-type"),X=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(rl,w,void 0))||R||X||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,we]of S)this.g.setRequestHeader(ae,we);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jo(this),this.u=!0,this.g.send(h),this.u=!1}catch(ae){ao(this,ae)}};function ao(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.m=5,Ko(h),yr(h)}function Ko(h){h.A||(h.A=!0,Mt(h,"complete"),Mt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Mt(this,"complete"),Mt(this,"abort"),yr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yr(this,!0)),Ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?sl(this):this.bb())},n.bb=function(){sl(this)};function sl(h){if(h.h&&typeof c<"u"&&(!h.v[1]||sr(h)!=4||h.Z()!=2)){if(h.u&&sr(h)==4)mr(h.Ea,0,h);else if(Mt(h,"readystatechange"),sr(h)==4){h.h=!1;try{const we=h.Z();e:switch(we){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var S;if(!(S=w)){var R;if(R=we===0){var X=String(h.D).match(so)[1]||null;!X&&d.self&&d.self.location&&(X=d.self.location.protocol.slice(0,-1)),R=!ph.test(X?X.toLowerCase():"")}S=R}if(S)Mt(h,"complete"),Mt(h,"success");else{h.m=6;try{var ae=2<sr(h)?h.g.statusText:""}catch{ae=""}h.l=ae+" ["+h.Z()+"]",Ko(h)}}finally{yr(h)}}}}function yr(h,w){if(h.g){Jo(h);const S=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,w||Mt(h,"ready");try{S.onreadystatechange=R}catch{}}}function Jo(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function sr(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),Br(w)}};function il(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Yo(h){const w={};h=(h.g&&2<=sr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(W(h[R]))continue;var S=k(h[R]);const X=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ae=w[X]||[];w[X]=ae,ae.push(S)}F(w,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(h,w,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||w}function ol(h){this.Aa=0,this.i=[],this.j=new qe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hs("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hs("baseRetryDelayMs",5e3,h),this.cb=hs("retryDelaySeedMs",1e4,h),this.Wa=hs("forwardChannelMaxRetries",2,h),this.wa=hs("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ro(h&&h.concurrentRequestLimit),this.Da=new fh,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ol.prototype,n.la=8,n.G=1,n.connect=function(h,w,S,R){ne(0),this.W=h,this.H=w||{},S&&R!==void 0&&(this.H.OSID=S,this.H.OAID=R),this.F=this.X,this.I=Uc(this,null,this.W),fs(this)};function Tn(h){if(Qo(h),h.G==3){var w=h.U++,S=xr(h.I);if(St(S,"SID",h.K),St(S,"RID",w),St(S,"TYPE","terminate"),Ms(h,S),w=new tt(h,h.j,w),w.L=2,w.v=di(xr(S)),S=!1,d.navigator&&d.navigator.sendBeacon)try{S=d.navigator.sendBeacon(w.v.toString(),"")}catch{}!S&&d.Image&&(new Image().src=w.v,S=!0),S||(w.g=Bc(w.j,null),w.g.ea(w.v)),w.F=Date.now(),jt(w)}Fc(h)}function Kr(h){h.g&&(al(h),h.g.cancel(),h.g=null)}function Qo(h){Kr(h),h.u&&(d.clearTimeout(h.u),h.u=null),ea(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function fs(h){if(!gr(h.h)&&!h.s){h.s=!0;var w=h.Ga;Pe||G(),B||(Pe(),B=!0),ve.add(w,h),h.B=0}}function mh(h,w){return Tc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=w.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ne(N(h.Ga,h,w),Oc(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const X=new tt(this,this.j,h);let ae=this.o;if(this.S&&(ae?(ae=j(ae),O(ae,this.S)):ae=this.S),this.m!==null||this.O||(X.H=ae,ae=null),this.P)e:{for(var w=0,S=0;S<this.i.length;S++){t:{var R=this.i[S];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(w+=R,4096<w){w=S;break e}if(w===4096||S===this.i.length-1){w=S+1;break e}}w=1e3}else w=1e3;w=mi(this,X,w),S=xr(this.I),St(S,"RID",h),St(S,"CVER",22),this.D&&St(S,"X-HTTP-Session-Id",this.D),Ms(this,S),ae&&(this.O?w="headers="+encodeURIComponent(String(Rs(ae)))+"&"+w:this.m&&pi(S,this.m,ae)),tl(this.h,X),this.Ua&&St(S,"TYPE","init"),this.P?(St(S,"$req",w),St(S,"SID","null"),X.T=!0,bn(X,S,null)):bn(X,S,w),this.G=2}}else this.G==3&&(h?Xo(this,h):this.i.length==0||gr(this.h)||Xo(this))};function Xo(h,w){var S;w?S=w.l:S=h.U++;const R=xr(h.I);St(R,"SID",h.K),St(R,"RID",S),St(R,"AID",h.T),Ms(h,R),h.m&&h.o&&pi(R,h.m,h.o),S=new tt(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),w&&(h.i=w.D.concat(h.i)),w=mi(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),tl(h.h,S),bn(S,R,w)}function Ms(h,w){h.H&&J(h.H,function(S,R){St(w,R,S)}),h.l&&li({},function(S,R){St(w,R,S)})}function mi(h,w,S){S=Math.min(h.i.length,S);var R=h.l?N(h.l.Na,h.l,h):null;e:{var X=h.i;let ae=-1;for(;;){const we=["count="+S];ae==-1?0<S?(ae=X[0].g,we.push("ofs="+ae)):ae=0:we.push("ofs="+ae);let bt=!0;for(let pn=0;pn<S;pn++){let pt=X[pn].g;const wn=X[pn].map;if(pt-=ae,0>pt)ae=Math.max(0,X[pn].g-100),bt=!1;else try{Lc(wn,we,"req"+pt+"_")}catch{R&&R(wn)}}if(bt){R=we.join("&");break e}}}return h=h.i.splice(0,S),w.D=h,R}function lo(h){if(!h.g&&!h.u){h.Y=1;var w=h.Fa;Pe||G(),B||(Pe(),B=!0),ve.add(w,h),h.v=0}}function Zo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ne(N(h.Fa,h),Oc(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,zc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ne(N(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),Kr(this),zc(this))};function al(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function zc(h){h.g=new tt(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var w=xr(h.qa);St(w,"RID","rpc"),St(w,"SID",h.K),St(w,"AID",h.T),St(w,"CI",h.F?"0":"1"),!h.F&&h.ja&&St(w,"TO",h.ja),St(w,"TYPE","xmlhttp"),Ms(h,w),h.m&&h.o&&pi(w,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=di(xr(w)),S.m=null,S.P=!0,$o(S,h)}n.Za=function(){this.C!=null&&(this.C=null,Kr(this),Zo(this),ne(19))};function ea(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function ta(h,w){var S=null;if(h.g==w){ea(h),al(h),h.g=null;var R=2}else if(Kn(h.h,w))S=w.D,Pc(h.h,w),R=1;else return;if(h.G!=0){if(w.o)if(R==1){S=w.m?w.m.length:0,w=Date.now()-w.F;var X=h.B;R=jr(),Mt(R,new fe(R,S)),fs(h)}else lo(h);else if(X=w.s,X==3||X==0&&0<w.X||!(R==1&&mh(h,w)||R==2&&Zo(h)))switch(S&&0<S.length&&(w=h.h,w.i=w.i.concat(S)),X){case 1:Ds(h,5);break;case 4:Ds(h,10);break;case 3:Ds(h,6);break;default:Ds(h,2)}}}function Oc(h,w){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*w}function Ds(h,w){if(h.j.info("Error code "+w),w==2){var S=N(h.fb,h),R=h.Xa;const X=!R;R=new Is(R||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||io(R,"https"),di(R),X?hh(R.toString(),S):Dc(R.toString(),S)}else ne(2);h.G=0,h.l&&h.l.sa(w),Fc(h),Qo(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function Fc(h){if(h.G=0,h.ka=[],h.l){const w=jc(h.h);(w.length!=0||h.i.length!=0)&&(I(h.ka,w),I(h.ka,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.ra()}}function Uc(h,w,S){var R=S instanceof Is?xr(S):new Is(S);if(R.g!="")w&&(R.g=w+"."+R.g),ci(R,R.s);else{var X=d.location;R=X.protocol,w=w?w+"."+X.hostname:X.hostname,X=+X.port;var ae=new Is(null);R&&io(ae,R),w&&(ae.g=w),X&&ci(ae,X),S&&(ae.l=S),R=ae}return S=h.D,w=h.ya,S&&w&&St(R,S,w),St(R,"VER",h.la),Ms(h,R),R}function Bc(h,w,S){if(w&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Ca&&!h.pa?new Ft(new As({eb:S})):new Ft(h.pa),w.Ha(h.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ll(){}n=ll.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function na(){}na.prototype.g=function(h,w){return new Jn(h,w)};function Jn(h,w){kt.call(this),this.g=new ol(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(h?h["X-WebChannel-Client-Profile"]=w.va:h={"X-WebChannel-Client-Profile":w.va}),this.g.S=h,(h=w&&w.Sb)&&!W(h)&&(this.g.m=h),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!W(w)&&(this.g.D=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new ps(this)}A(Jn,kt),Jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){Tn(this.g)},Jn.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=Ln(h),h=S);w.i.push(new kc(w.Ya++,h)),w.G==3&&fs(w)},Jn.prototype.N=function(){this.g.l=null,delete this.j,Tn(this.g),delete this.g,Jn.aa.N.call(this)};function qc(h){tr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const S in w){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}A(qc,tr);function $c(){Pr.call(this),this.status=1}A($c,Pr);function ps(h){this.g=h}A(ps,ll),ps.prototype.ua=function(){Mt(this.g,"a")},ps.prototype.ta=function(h){Mt(this.g,new qc(h))},ps.prototype.sa=function(h){Mt(this.g,new $c)},ps.prototype.ra=function(){Mt(this.g,"b")},na.prototype.createWebChannel=na.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,Qb=function(){return new na},Yb=function(){return jr()},Jb=nr,gp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pt.NO_ERROR=0,Pt.TIMEOUT=8,Pt.HTTP_ERROR=6,Yu=Pt,V.COMPLETE="complete",Kb=V,cs.EventType=Vn,Vn.OPEN="a",Vn.CLOSE="b",Vn.ERROR="c",Vn.MESSAGE="d",kt.prototype.listen=kt.prototype.K,Dl=cs,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Wb=Ft}).apply(typeof zu<"u"?zu:typeof self<"u"?self:typeof window<"u"?window:{});const Hx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn("google-credentials-uid"),qn.FIRST_PARTY=new qn("first-party-uid"),qn.MOCK_USER=new qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo=new Zp("@firebase/firestore");function Rl(){return Mo.logLevel}function De(n,...e){if(Mo.logLevel<=ht.DEBUG){const t=e.map(nm);Mo.debug(`Firestore (${Wa}): ${n}`,...t)}}function ti(n,...e){if(Mo.logLevel<=ht.ERROR){const t=e.map(nm);Mo.error(`Firestore (${Wa}): ${n}`,...t)}}function La(n,...e){if(Mo.logLevel<=ht.WARN){const t=e.map(nm);Mo.warn(`Firestore (${Wa}): ${n}`,...t)}}function nm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(n="Unexpected state"){const e=`FIRESTORE (${Wa}) INTERNAL ASSERTION FAILED: `+n;throw ti(e),new Error(e)}function wt(n,e){n||Xe()}function rt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends Ts{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(qn.UNAUTHENTICATED)))}shutdown(){}}class VE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zE{constructor(e){this.t=e,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0);let r=this.i;const i=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Qs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Qs,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await i(this.currentUser)}))},d=p=>{De("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(De("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Qs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(De("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string"),new Xb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string"),new qn(e)}}class OE{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=qn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FE{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new OE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(qn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class UE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BE{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){wt(this.o===void 0);const r=l=>{l.error!=null&&De("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,De("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const i=l=>{De("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>i(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?i(l):De("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(wt(typeof t.token=="string"),this.R=t.token,new UE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=qE(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<t&&(r+=e.charAt(i[l]%e.length))}return r}}function yt(n,e){return n<e?-1:n>e?1:0}function Va(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return yn.fromMillis(Date.now())}static fromDate(e){return yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new yn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?yt(this.nanoseconds,e.nanoseconds):yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new nt(e)}static min(){return new nt(new yn(0,0))}static max(){return new nt(new yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,t,r){t===void 0?t=0:t>e.length&&Xe(),r===void 0?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ql.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ql?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const l=e.get(i),c=t.get(i);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ot extends Ql{construct(e,t,r){return new Ot(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Ot(t)}static emptyPath(){return new Ot([])}}const $E=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class An extends Ql{construct(e,t,r){return new An(e,t,r)}static isValidIdentifier(e){return $E.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),An.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new An(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const l=()=>{if(r.length===0)throw new ke(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new ke(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ke(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(r+=d,i++):(l(),i++)}if(l(),c)throw new ke(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new An(t)}static emptyPath(){return new An([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Ot.fromString(e))}static fromName(e){return new Fe(Ot.fromString(e).popFirst(5))}static empty(){return new Fe(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Ot(e.slice()))}}function HE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=nt.fromTimestamp(r===1e9?new yn(t+1,0):new yn(t,r));return new $i(i,Fe.empty(),e)}function GE(n){return new $i(n.readTime,n.key,-1)}class $i{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new $i(nt.min(),Fe.empty(),-1)}static max(){return new $i(nt.max(),Fe.empty(),-1)}}function WE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Fe.comparator(n.documentKey,e.documentKey),t!==0?t:yt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==KE)throw n;De("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge(((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.reject(t)}static resolve(e){return new ge(((t,r)=>{t(e)}))}static reject(e){return new ge(((t,r)=>{r(e)}))}static waitFor(e){return new ge(((t,r)=>{let i=0,l=0,c=!1;e.forEach((d=>{++i,d.next((()=>{++l,c&&l===i&&t()}),(p=>r(p)))})),c=!0,l===i&&t()}))}static or(e){let t=ge.resolve(!1);for(const r of e)t=t.next((i=>i?ge.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,l)=>{r.push(t.call(this,i,l))})),this.waitFor(r)}static mapArray(e,t){return new ge(((r,i)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const f=p;t(e[f]).next((y=>{c[f]=y,++d,d===l&&r(c)}),(y=>i(y)))}}))}static doWhile(e,t){return new ge(((r,i)=>{const l=()=>{e()===!0?t().next((()=>{l()}),i):r()};l()}))}}function YE(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function mc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}rm.oe=-1;function zd(n){return n==null}function fd(n){return n===0&&1/n==-1/0}function QE(n){return typeof n=="number"&&Number.isInteger(n)&&!fd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Bo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ew(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new Kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ou(this.root,e,this.comparator,!0)}}class Ou{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,r,i,l){this.key=e,this.value=t,this.color=r??In.RED,this.left=i??In.EMPTY,this.right=l??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,l){return new In(e??this.key,t??this.value,r??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,r),null):l===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return In.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(e,t,r,i,l){return this}insert(e,t,r){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wx(this.data.getIterator())}getIteratorFrom(e){return new Wx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class Wx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new Nr([])}unionWith(e){let t=new Rn(An.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Va(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new tw("Invalid base64 string: "+l):l}})(e);return new Mn(t)}static fromUint8Array(e){const t=(function(i){let l="";for(let c=0;c<i.length;++c)l+=String.fromCharCode(i[c]);return l})(e);return new Mn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const XE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(n){if(wt(!!n),typeof n=="string"){let e=0;const t=XE.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tn(n.seconds),nanos:tn(n.nanos)}}function tn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Do(n){return typeof n=="string"?Mn.fromBase64String(n):Mn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function im(n){const e=n.mapValue.fields.__previous_value__;return sm(e)?im(e):e}function Xl(n){const e=Hi(n.mapValue.fields.__local_write_time__.timestampValue);return new yn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t,r,i,l,c,d,p,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=f}}class Zl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu={mapValue:{}};function Lo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?sm(n)?4:tC(n)?9007199254740991:eC(n)?10:11:Xe()}function Es(n,e){if(n===e)return!0;const t=Lo(n);if(t!==Lo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Xl(n).isEqual(Xl(e));case 3:return(function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const c=Hi(i.timestampValue),d=Hi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,l){return Do(i.bytesValue).isEqual(Do(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,l){return tn(i.geoPointValue.latitude)===tn(l.geoPointValue.latitude)&&tn(i.geoPointValue.longitude)===tn(l.geoPointValue.longitude)})(n,e);case 2:return(function(i,l){if("integerValue"in i&&"integerValue"in l)return tn(i.integerValue)===tn(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const c=tn(i.doubleValue),d=tn(l.doubleValue);return c===d?fd(c)===fd(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Va(n.arrayValue.values||[],e.arrayValue.values||[],Es);case 10:case 11:return(function(i,l){const c=i.mapValue.fields||{},d=l.mapValue.fields||{};if(Gx(c)!==Gx(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Es(c[p],d[p])))return!1;return!0})(n,e);default:return Xe()}}function ec(n,e){return(n.values||[]).find((t=>Es(t,e)))!==void 0}function za(n,e){if(n===e)return 0;const t=Lo(n),r=Lo(e);if(t!==r)return yt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return yt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=tn(l.integerValue||l.doubleValue),p=tn(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return Kx(n.timestampValue,e.timestampValue);case 4:return Kx(Xl(n),Xl(e));case 5:return yt(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=Do(l),p=Do(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let f=0;f<d.length&&f<p.length;f++){const y=yt(d[f],p[f]);if(y!==0)return y}return yt(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=yt(tn(l.latitude),tn(c.latitude));return d!==0?d:yt(tn(l.longitude),tn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Jx(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var d,p,f,y;const b=l.fields||{},N=c.fields||{},E=(d=b.value)===null||d===void 0?void 0:d.arrayValue,A=(p=N.value)===null||p===void 0?void 0:p.arrayValue,P=yt(((f=E==null?void 0:E.values)===null||f===void 0?void 0:f.length)||0,((y=A==null?void 0:A.values)===null||y===void 0?void 0:y.length)||0);return P!==0?P:Jx(E,A)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Fu.mapValue&&c===Fu.mapValue)return 0;if(l===Fu.mapValue)return 1;if(c===Fu.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),f=c.fields||{},y=Object.keys(f);p.sort(),y.sort();for(let b=0;b<p.length&&b<y.length;++b){const N=yt(p[b],y[b]);if(N!==0)return N;const E=za(d[p[b]],f[y[b]]);if(E!==0)return E}return yt(p.length,y.length)})(n.mapValue,e.mapValue);default:throw Xe()}}function Kx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return yt(n,e);const t=Hi(n),r=Hi(e),i=yt(t.seconds,r.seconds);return i!==0?i:yt(t.nanos,r.nanos)}function Jx(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const l=za(t[i],r[i]);if(l)return l}return yt(t.length,r.length)}function Oa(n){return xp(n)}function xp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Hi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Do(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const l of t.values||[])i?i=!1:r+=",",r+=xp(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",l=!0;for(const c of r)l?l=!1:i+=",",i+=`${c}:${xp(t.fields[c])}`;return i+"}"})(n.mapValue):Xe()}function Yx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yp(n){return!!n&&"integerValue"in n}function om(n){return!!n&&"arrayValue"in n}function Qx(n){return!!n&&"nullValue"in n}function Xx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qu(n){return!!n&&"mapValue"in n}function eC(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ol(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Bo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ol(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ol(n.arrayValue.values[t]);return e}return Object.assign({},n)}function tC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.value=e}static empty(){return new hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ol(t)}setAll(e){let t=An.emptyPath(),r={},i=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}c?r[d.lastSegment()]=Ol(c):i.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,i)}delete(e){const t=this.field(e.popLast());Qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Es(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Qu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Bo(t,((i,l)=>e[i]=l));for(const i of r)delete e[i]}clone(){return new hr(Ol(this.value))}}function nw(n){const e=[];return Bo(n.fields,((t,r)=>{const i=new An([t]);if(Qu(r)){const l=nw(r.mapValue).fields;if(l.length===0)e.push(i);else for(const c of l)e.push(i.child(c))}else e.push(i)})),new Nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t,r,i,l,c,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Hn(e,0,nt.min(),nt.min(),nt.min(),hr.empty(),0)}static newFoundDocument(e,t,r,i){return new Hn(e,1,t,nt.min(),r,i,0)}static newNoDocument(e,t){return new Hn(e,2,t,nt.min(),nt.min(),hr.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,nt.min(),nt.min(),hr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t){this.position=e,this.inclusive=t}}function Zx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const l=e[i],c=n.position[i];if(l.field.isKeyField()?r=Fe.comparator(Fe.fromName(c.referenceValue),t.key):r=za(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function ey(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Es(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function nC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rw=class{};class un extends rw{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new sC(e,t,r):t==="array-contains"?new aC(e,r):t==="in"?new lC(e,r):t==="not-in"?new cC(e,r):t==="array-contains-any"?new uC(e,r):new un(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new iC(e,r):new oC(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(za(t,this.value)):t!==null&&Lo(this.value)===Lo(t)&&this.matchesComparison(za(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class is extends rw{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new is(e,t)}matches(e){return sw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function sw(n){return n.op==="and"}function iw(n){return rC(n)&&sw(n)}function rC(n){for(const e of n.filters)if(e instanceof is)return!1;return!0}function vp(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+Oa(n.value);if(iw(n))return n.filters.map((e=>vp(e))).join(",");{const e=n.filters.map((t=>vp(t))).join(",");return`${n.op}(${e})`}}function ow(n,e){return n instanceof un?(function(r,i){return i instanceof un&&r.op===i.op&&r.field.isEqual(i.field)&&Es(r.value,i.value)})(n,e):n instanceof is?(function(r,i){return i instanceof is&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((l,c,d)=>l&&ow(c,i.filters[d])),!0):!1})(n,e):void Xe()}function aw(n){return n instanceof un?(function(t){return`${t.field.canonicalString()} ${t.op} ${Oa(t.value)}`})(n):n instanceof is?(function(t){return t.op.toString()+" {"+t.getFilters().map(aw).join(" ,")+"}"})(n):"Filter"}class sC extends un{constructor(e,t,r){super(e,t,r),this.key=Fe.fromName(r.referenceValue)}matches(e){const t=Fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class iC extends un{constructor(e,t){super(e,"in",t),this.keys=lw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class oC extends un{constructor(e,t){super(e,"not-in",t),this.keys=lw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>Fe.fromName(r.referenceValue)))}class aC extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return om(t)&&ec(t.arrayValue,this.value)}}class lC extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ec(this.value.arrayValue,t)}}class cC extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ec(this.value.arrayValue,t)}}class uC extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!om(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>ec(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,t=null,r=[],i=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function ty(n,e=null,t=[],r=[],i=null,l=null,c=null){return new dC(n,e,t,r,i,l,c)}function am(n){const e=rt(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>vp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),zd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Oa(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Oa(r))).join(",")),e.ue=t}return e.ue}function lm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ow(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ey(n.startAt,e.startAt)&&ey(n.endAt,e.endAt)}function bp(n){return Fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t=null,r=[],i=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hC(n,e,t,r,i,l,c,d){return new Ka(n,e,t,r,i,l,c,d)}function Od(n){return new Ka(n)}function ny(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function cw(n){return n.collectionGroup!==null}function Fl(n){const e=rt(n);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Rn(An.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((f=>{f.isInequality()&&(d=d.add(f.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new tc(l,r))})),t.has(An.keyField().canonicalString())||e.ce.push(new tc(An.keyField(),r))}return e.ce}function ws(n){const e=rt(n);return e.le||(e.le=fC(e,Fl(n))),e.le}function fC(n,e){if(n.limitType==="F")return ty(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const l=i.dir==="desc"?"asc":"desc";return new tc(i.field,l)}));const t=n.endAt?new pd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new pd(n.startAt.position,n.startAt.inclusive):null;return ty(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function wp(n,e){const t=n.filters.concat([e]);return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _p(n,e,t){return new Ka(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fd(n,e){return lm(ws(n),ws(e))&&n.limitType===e.limitType}function uw(n){return`${am(ws(n))}|lt:${n.limitType}`}function Ea(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>aw(i))).join(", ")}]`),zd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Oa(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Oa(i))).join(",")),`Target(${r})`})(ws(n))}; limitType=${n.limitType})`}function Ud(n,e){return e.isFoundDocument()&&(function(r,i){const l=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Fe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,i){for(const l of Fl(r))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const l of r.filters)if(!l.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(c,d,p){const f=Zx(c,d,p);return c.inclusive?f<=0:f<0})(r.startAt,Fl(r),i)||r.endAt&&!(function(c,d,p){const f=Zx(c,d,p);return c.inclusive?f>=0:f>0})(r.endAt,Fl(r),i))})(n,e)}function pC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dw(n){return(e,t)=>{let r=!1;for(const i of Fl(n)){const l=mC(i,e,t);if(l!==0)return l;r=r||i.field.isKeyField()}return 0}}function mC(n,e,t){const r=n.field.isKeyField()?Fe.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),f=d.data.field(l);return p!==null&&f!==null?za(p,f):Xe()})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,l]of r)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Bo(this.inner,((t,r)=>{for(const[i,l]of r)e(i,l)}))}isEmpty(){return ew(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new Kt(Fe.comparator);function ni(){return gC}const hw=new Kt(Fe.comparator);function Ll(...n){let e=hw;for(const t of n)e=e.insert(t.key,t);return e}function fw(n){let e=hw;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Co(){return Ul()}function pw(){return Ul()}function Ul(){return new Ja((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xC=new Kt(Fe.comparator),yC=new Rn(Fe.comparator);function ut(...n){let e=yC;for(const t of n)e=e.add(t);return e}const vC=new Rn(yt);function bC(){return vC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fd(e)?"-0":e}}function mw(n){return{integerValue:""+n}}function wC(n,e){return QE(e)?mw(e):cm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(){this._=void 0}}function _C(n,e,t){return n instanceof md?(function(i,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&sm(l)&&(l=im(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}})(t,e):n instanceof Fa?xw(n,e):n instanceof nc?yw(n,e):(function(i,l){const c=gw(i,l),d=ry(c)+ry(i.Pe);return yp(c)&&yp(i.Pe)?mw(d):cm(i.serializer,d)})(n,e)}function NC(n,e,t){return n instanceof Fa?xw(n,e):n instanceof nc?yw(n,e):t}function gw(n,e){return n instanceof gd?(function(r){return yp(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class md extends Bd{}class Fa extends Bd{constructor(e){super(),this.elements=e}}function xw(n,e){const t=vw(e);for(const r of n.elements)t.some((i=>Es(i,r)))||t.push(r);return{arrayValue:{values:t}}}class nc extends Bd{constructor(e){super(),this.elements=e}}function yw(n,e){let t=vw(e);for(const r of n.elements)t=t.filter((i=>!Es(i,r)));return{arrayValue:{values:t}}}class gd extends Bd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ry(n){return tn(n.integerValue||n.doubleValue)}function vw(n){return om(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this.field=e,this.transform=t}}function EC(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Fa&&i instanceof Fa||r instanceof nc&&i instanceof nc?Va(r.elements,i.elements,Es):r instanceof gd&&i instanceof gd?Es(r.Pe,i.Pe):r instanceof md&&i instanceof md})(n.transform,e.transform)}class CC{constructor(e,t){this.version=e,this.transformResults=t}}class ss{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ss}static exists(e){return new ss(void 0,e)}static updateTime(e){return new ss(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qd{}function bw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new um(n.key,ss.none()):new gc(n.key,n.data,ss.none());{const t=n.data,r=hr.empty();let i=new Rn(An.comparator);for(let l of e.fields)if(!i.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),i=i.add(l)}return new Qi(n.key,r,new Nr(i.toArray()),ss.none())}}function kC(n,e,t){n instanceof gc?(function(i,l,c){const d=i.value.clone(),p=iy(i.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Qi?(function(i,l,c){if(!Xu(i.precondition,l))return void l.convertToUnknownDocument(c.version);const d=iy(i.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(ww(i)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(i,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Bl(n,e,t,r){return n instanceof gc?(function(l,c,d,p){if(!Xu(l.precondition,c))return d;const f=l.value.clone(),y=oy(l.fieldTransforms,p,c);return f.setAll(y),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Qi?(function(l,c,d,p){if(!Xu(l.precondition,c))return d;const f=oy(l.fieldTransforms,p,c),y=c.data;return y.setAll(ww(l)),y.setAll(f),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,r):(function(l,c,d){return Xu(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function TC(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),l=gw(r.transform,i||null);l!=null&&(t===null&&(t=hr.empty()),t.set(r.field,l))}return t||null}function sy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Va(r,i,((l,c)=>EC(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class gc extends qd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qi extends qd{constructor(e,t,r,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ww(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function iy(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const l=n[i],c=l.transform,d=e.data.field(l.field);r.set(l.field,NC(c,d,t[i]))}return r}function oy(n,e,t){const r=new Map;for(const i of n){const l=i.transform,c=t.data.field(i.field);r.set(i.field,_C(l,c,e))}return r}class um extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PC extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&kC(l,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Bl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=pw();return this.mutations.forEach((i=>{const l=e.get(i.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(i.key)?null:d;const p=bw(c,d);p!==null&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(nt.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ut())}isEqual(e){return this.batchId===e.batchId&&Va(this.mutations,e.mutations,((t,r)=>sy(t,r)))&&Va(this.baseMutations,e.baseMutations,((t,r)=>sy(t,r)))}}class dm{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=(function(){return xC})();const l=e.mutations;for(let c=0;c<l.length;c++)i=i.insert(l[c].key,r[c].version);return new dm(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,mt;function RC(n){switch(n){default:return Xe();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function _w(n){if(n===void 0)return ti("GRPC error has no .code"),le.UNKNOWN;switch(n){case cn.OK:return le.OK;case cn.CANCELLED:return le.CANCELLED;case cn.UNKNOWN:return le.UNKNOWN;case cn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case cn.INTERNAL:return le.INTERNAL;case cn.UNAVAILABLE:return le.UNAVAILABLE;case cn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case cn.NOT_FOUND:return le.NOT_FOUND;case cn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case cn.ABORTED:return le.ABORTED;case cn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case cn.DATA_LOSS:return le.DATA_LOSS;default:return Xe()}}(mt=cn||(cn={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=new jo([4294967295,4294967295],0);function ay(n){const e=MC().encode(n),t=new Gb;return t.update(e),new Uint8Array(t.digest())}function ly(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new jo([t,r],0),new jo([i,l],0)]}class hm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vl(`Invalid padding: ${t}`);if(r<0)throw new Vl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=jo.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(jo.fromNumber(r)));return i.compare(DC)===1&&(i=new jo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=ay(e),[r,i]=ly(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(r,i,l);if(!this.de(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new hm(l,i,t);return r.forEach((d=>c.insert(d))),c}insert(e){if(this.Ie===0)return;const t=ay(e),[r,i]=ly(t);for(let l=0;l<this.hashCount;l++){const c=this.Ee(r,i,l);this.Ae(c)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,t,r,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new $d(nt.min(),i,new Kt(yt),ni(),ut())}}class xc{constructor(e,t,r,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new xc(r,t,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Nw{constructor(e,t){this.targetId=e,this.me=t}}class Sw{constructor(e,t,r=Mn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class cy{constructor(){this.fe=0,this.ge=dy(),this.pe=Mn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ut(),t=ut(),r=ut();return this.ge.forEach(((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Xe()}})),new xc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=dy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,wt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class LC{constructor(e){this.Le=e,this.Be=new Map,this.ke=ni(),this.qe=uy(),this.Qe=new Kt(yt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Xe()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((r,i)=>{this.ze(i)&&t(i)}))}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const l=i.target;if(bp(l))if(r===0){const c=new Fe(l.path);this.Ue(t,c,Hn.newNoDocument(c,nt.min()))}else wt(r===1);else{const c=this.Ye(t);if(c!==r){const d=this.Ze(e),p=d?this.Xe(d,e,c):1;if(p!==0){this.je(t);const f=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,f)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:l=0}=t;let c,d;try{c=Do(r).toUint8Array()}catch(p){if(p instanceof tw)return La("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new hm(c,i,l)}catch(p){return La(p instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Ie===0?null:d}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach((l=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Ue(t,l,null),i++)})),i}rt(e){const t=new Map;this.Be.forEach(((l,c)=>{const d=this.Je(c);if(d){if(l.current&&bp(d.target)){const p=new Fe(d.target.path);this.ke.get(p)!==null||this.it(c,p)||this.Ue(c,p,Hn.newNoDocument(p,e))}l.be&&(t.set(c,l.ve()),l.Ce())}}));let r=ut();this.qe.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const f=this.Je(p);return!f||f.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(l))})),this.ke.forEach(((l,c)=>c.setReadTime(e)));const i=new $d(e,t,this.Qe,this.ke,r);return this.ke=ni(),this.qe=uy(),this.Qe=new Kt(yt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new cy,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Rn(yt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||De("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cy),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function uy(){return new Kt(Fe.comparator)}function dy(){return new Kt(Fe.comparator)}const VC={asc:"ASCENDING",desc:"DESCENDING"},zC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OC={and:"AND",or:"OR"};class FC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Np(n,e){return n.useProto3Json||zd(e)?e:{value:e}}function xd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ew(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UC(n,e){return xd(n,e.toTimestamp())}function _s(n){return wt(!!n),nt.fromTimestamp((function(t){const r=Hi(t);return new yn(r.seconds,r.nanos)})(n))}function fm(n,e){return Sp(n,e).canonicalString()}function Sp(n,e){const t=(function(i){return new Ot(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Cw(n){const e=Ot.fromString(n);return wt(Iw(e)),e}function Ep(n,e){return fm(n.databaseId,e.path)}function Wf(n,e){const t=Cw(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Fe(Tw(t))}function kw(n,e){return fm(n.databaseId,e)}function BC(n){const e=Cw(n);return e.length===4?Ot.emptyPath():Tw(e)}function Cp(n){return new Ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Tw(n){return wt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function hy(n,e,t){return{name:Ep(n,e),fields:t.value.mapValue.fields}}function qC(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Xe()})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=(function(f,y){return f.useProto3Json?(wt(y===void 0||typeof y=="string"),Mn.fromBase64String(y||"")):(wt(y===void 0||y instanceof Buffer||y instanceof Uint8Array),Mn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(f){const y=f.code===void 0?le.UNKNOWN:_w(f.code);return new ke(y,f.message||"")})(c);t=new Sw(r,i,l,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wf(n,r.document.name),l=_s(r.document.updateTime),c=r.document.createTime?_s(r.document.createTime):nt.min(),d=new hr({mapValue:{fields:r.document.fields}}),p=Hn.newFoundDocument(i,l,c,d),f=r.targetIds||[],y=r.removedTargetIds||[];t=new Zu(f,y,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Wf(n,r.document),l=r.readTime?_s(r.readTime):nt.min(),c=Hn.newNoDocument(i,l),d=r.removedTargetIds||[];t=new Zu([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Wf(n,r.document),l=r.removedTargetIds||[];t=new Zu([],l,i,null)}else{if(!("filter"in e))return Xe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:l}=r,c=new AC(i,l),d=r.targetId;t=new Nw(d,c)}}return t}function $C(n,e){let t;if(e instanceof gc)t={update:hy(n,e.key,e.value)};else if(e instanceof um)t={delete:Ep(n,e.key)};else if(e instanceof Qi)t={update:hy(n,e.key,e.data),updateMask:ZC(e.fieldMask)};else{if(!(e instanceof PC))return Xe();t={verify:Ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,c){const d=c.transform;if(d instanceof md)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Fa)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof nc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof gd)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw Xe()})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,l){return l.updateTime!==void 0?{updateTime:UC(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Xe()})(n,e.precondition)),t}function HC(n,e){return n&&n.length>0?(wt(e!==void 0),n.map((t=>(function(i,l){let c=i.updateTime?_s(i.updateTime):_s(l);return c.isEqual(nt.min())&&(c=_s(l)),new CC(c,i.transformResults||[])})(t,e)))):[]}function GC(n,e){return{documents:[kw(n,e.path)]}}function WC(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=kw(n,i);const l=(function(f){if(f.length!==0)return jw(is.create(f,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(f){if(f.length!==0)return f.map((y=>(function(N){return{field:Ca(N.field),direction:YC(N.dir)}})(y)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Np(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{_t:t,parent:i}}function KC(n){let e=BC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(r===1);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(b){const N=Pw(b);return N instanceof is&&iw(N)?N.getFilters():[N]})(t.where));let c=[];t.orderBy&&(c=(function(b){return b.map((N=>(function(A){return new tc(ka(A.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(N)))})(t.orderBy));let d=null;t.limit&&(d=(function(b){let N;return N=typeof b=="object"?b.value:b,zd(N)?null:N})(t.limit));let p=null;t.startAt&&(p=(function(b){const N=!!b.before,E=b.values||[];return new pd(E,N)})(t.startAt));let f=null;return t.endAt&&(f=(function(b){const N=!b.before,E=b.values||[];return new pd(E,N)})(t.endAt)),hC(e,i,c,l,d,"F",p,f)}function JC(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Pw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ka(t.unaryFilter.field);return un.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ka(t.unaryFilter.field);return un.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ka(t.unaryFilter.field);return un.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ka(t.unaryFilter.field);return un.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}})(n):n.fieldFilter!==void 0?(function(t){return un.create(ka(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return is.create(t.compositeFilter.filters.map((r=>Pw(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Xe()}})(t.compositeFilter.op))})(n):Xe()}function YC(n){return VC[n]}function QC(n){return zC[n]}function XC(n){return OC[n]}function Ca(n){return{fieldPath:n.canonicalString()}}function ka(n){return An.fromServerFormat(n.fieldPath)}function jw(n){return n instanceof un?(function(t){if(t.op==="=="){if(Xx(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NAN"}};if(Qx(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Xx(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NOT_NAN"}};if(Qx(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ca(t.field),op:QC(t.op),value:t.value}}})(n):n instanceof is?(function(t){const r=t.getFilters().map((i=>jw(i)));return r.length===1?r[0]:{compositeFilter:{op:XC(t.op),filters:r}}})(n):Xe()}function ZC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Iw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t,r,i,l=nt.min(),c=nt.min(),d=Mn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.ct=e}}function tk(n){const e=KC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_p(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.un=new rk}addToCollectionParentIndex(e,t){return this.un.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve($i.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve($i.min())}updateCollectionGroup(e,t,r){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class rk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Rn(Ot.comparator),l=!i.has(r);return this.index[t]=i.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Rn(Ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ua(0)}static kn(){return new Ua(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(){this.changes=new Ja((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&Bl(r.mutation,i,Nr.empty(),yn.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ut()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ut()){const i=Co();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((l=>{let c=Ll();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Co();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ut())))}populateOverlays(e,t,r){const i=[];return r.forEach((l=>{t.has(l)||i.push(l)})),this.documentOverlayCache.getOverlays(e,i).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,r,i){let l=ni();const c=Ul(),d=(function(){return Ul()})();return t.forEach(((p,f)=>{const y=r.get(f.key);i.has(f.key)&&(y===void 0||y.mutation instanceof Qi)?l=l.insert(f.key,f):y!==void 0?(c.set(f.key,y.mutation.getFieldMask()),Bl(y.mutation,f,y.mutation.getFieldMask(),yn.now())):c.set(f.key,Nr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((f,y)=>c.set(f,y))),t.forEach(((f,y)=>{var b;return d.set(f,new ik(y,(b=c.get(f))!==null&&b!==void 0?b:null))})),d)))}recalculateAndSaveOverlays(e,t){const r=Ul();let i=new Kt(((c,d)=>c-d)),l=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const f=t.get(p);if(f===null)return;let y=r.get(p)||Nr.empty();y=d.applyToLocalView(f,y),r.set(p,y);const b=(i.get(d.batchId)||ut()).add(p);i=i.insert(d.batchId,b)}))})).next((()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),f=p.key,y=p.value,b=pw();y.forEach((N=>{if(!l.has(N)){const E=bw(t.get(N),r.get(N));E!==null&&b.set(N,E),l=l.add(N)}})),c.push(this.documentOverlayCache.saveOverlays(e,f,b))}return ge.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(c){return Fe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((l=>{const c=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-l.size):ge.resolve(Co());let d=-1,p=l;return c.next((f=>ge.forEach(f,((y,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),l.get(y)?ge.resolve():this.remoteDocumentCache.getEntry(e,y).next((N=>{p=p.insert(y,N)}))))).next((()=>this.populateOverlays(e,f,l))).next((()=>this.computeViews(e,p,f,ut()))).next((y=>({batchId:d,changes:fw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fe(t)).next((r=>{let i=Ll();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const l=t.collectionGroup;let c=Ll();return this.indexManager.getCollectionParents(e,l).next((d=>ge.forEach(d,(p=>{const f=(function(b,N){return new Ka(N,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next((y=>{y.forEach(((b,N)=>{c=c.insert(b,N)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,i)))).next((c=>{l.forEach(((p,f)=>{const y=f.getKey();c.get(y)===null&&(c=c.insert(y,Hn.newInvalidDocument(y)))}));let d=Ll();return c.forEach(((p,f)=>{const y=l.get(p);y!==void 0&&Bl(y.mutation,f,Nr.empty(),yn.now()),Ud(t,f)&&(d=d.insert(p,f))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return ge.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:_s(i.createTime)}})(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(i){return{name:i.name,query:tk(i.bundledQuery),readTime:_s(i.readTime)}})(t)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.overlays=new Kt(Fe.comparator),this.Ir=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Co();return ge.forEach(t,(i=>this.getOverlay(e,i).next((l=>{l!==null&&r.set(i,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,l)=>{this.ht(e,t,l)})),ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(r)),ge.resolve()}getOverlaysForCollection(e,t,r){const i=Co(),l=t.length+1,c=new Fe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,f=p.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===l&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let l=new Kt(((f,y)=>f-y));const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let y=l.get(f.largestBatchId);y===null&&(y=Co(),l=l.insert(f.largestBatchId,y)),y.set(f.getKey(),f)}}const d=Co(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((f,y)=>d.set(f,y))),!(d.size()>=i)););return ge.resolve(d)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const c=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new IC(t,r));let l=this.Ir.get(t);l===void 0&&(l=ut(),this.Ir.set(t,l)),this.Ir.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.Tr=new Rn(En.Er),this.dr=new Rn(En.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new En(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Vr(new En(e,t))}mr(e,t){e.forEach((r=>this.removeReference(r,t)))}gr(e){const t=new Fe(new Ot([])),r=new En(t,e),i=new En(t,e+1),l=[];return this.dr.forEachInRange([r,i],(c=>{this.Vr(c),l.push(c.key)})),l}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Fe(new Ot([])),r=new En(t,e),i=new En(t,e+1);let l=ut();return this.dr.forEachInRange([r,i],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new En(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class En{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Fe.comparator(e.key,t.key)||yt(e.wr,t.wr)}static Ar(e,t){return yt(e.wr,t.wr)||Fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Rn(En.Er)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new jC(l,t,r,i);this.mutationQueue.push(c);for(const d of i)this.br=this.br.add(new En(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ge.resolve(c)}lookupMutationBatch(e,t){return ge.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),l=i<0?0:i;return ge.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new En(t,0),i=new En(t,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([r,i],(c=>{const d=this.Dr(c.wr);l.push(d)})),ge.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(yt);return t.forEach((i=>{const l=new En(i,0),c=new En(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,c],(d=>{r=r.add(d.wr)}))})),ge.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let l=r;Fe.isDocumentKey(l)||(l=l.child(""));const c=new En(new Fe(l),0);let d=new Rn(yt);return this.br.forEachWhile((p=>{const f=p.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(d=d.add(p.wr)),!0)}),c),ge.resolve(this.Cr(d))}Cr(e){const t=[];return e.forEach((r=>{const i=this.Dr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){wt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ge.forEach(t.mutations,(i=>{const l=new En(i.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,t){const r=new En(t,0),i=this.br.firstAfterOrEqual(r);return ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.Mr=e,this.docs=(function(){return new Kt(Fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),l=i?i.size:0,c=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ge.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=ni();return t.forEach((i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():Hn.newInvalidDocument(i))})),ge.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let l=ni();const c=t.path,d=new Fe(c.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:f,value:{document:y}}=p.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||WE(GE(y),r)<=0||(i.has(y.key)||Ud(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return ge.resolve(l)}getAllFromCollectionGroup(e,t,r,i){Xe()}Or(e,t){return ge.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new hk(this)}getSize(e){return ge.resolve(this.size)}}class hk extends sk{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)})),ge.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.persistence=e,this.Nr=new Ja((t=>am(t)),lm),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pm,this.targetCount=0,this.kr=Ua.Bn()}forEachTarget(e,t){return this.Nr.forEach(((r,i)=>t(i))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),ge.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Ua(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Kn(t),ge.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,r){let i=0;const l=[];return this.Nr.forEach(((c,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.Nr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),ge.waitFor(l).next((()=>i))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return ge.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),ge.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach((c=>{l.push(i.markPotentiallyOrphaned(e,c))})),ge.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return ge.resolve(r)}containsKey(e,t){return ge.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t){this.qr={},this.overlays={},this.Qr=new rm(0),this.Kr=!1,this.Kr=!0,this.$r=new ck,this.referenceDelegate=e(this),this.Ur=new fk(this),this.indexManager=new nk,this.remoteDocumentCache=(function(i){return new dk(i)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new ek(t),this.Gr=new ak(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new uk(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){De("MemoryPersistence","Starting transaction:",e);const i=new mk(this.Qr.next());return this.referenceDelegate.zr(),r(i).next((l=>this.referenceDelegate.jr(i).next((()=>l)))).toPromise().then((l=>(i.raiseOnCommittedEvent(),l)))}Hr(e,t){return ge.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,t))))}}class mk extends JE{constructor(e){super(),this.currentSequenceNumber=e}}class mm{constructor(e){this.persistence=e,this.Jr=new pm,this.Yr=null}static Zr(e){return new mm(e)}get Xr(){if(this.Yr)return this.Yr;throw Xe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),ge.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((i=>this.Xr.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((l=>this.Xr.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.Xr,(r=>{const i=Fe.fromPath(r);return this.ei(e,i).next((l=>{l||t.removeEntry(i,nt.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return ge.or([()=>ge.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ut(),i=ut();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new gm(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return x2()?8:YE(Wn())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const l={result:null};return this.Yi(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.Zi(e,t,i,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new gk;return this.Xi(e,t,c).next((d=>{if(l.result=d,this.zi)return this.es(e,t,c,d.size)}))})).next((()=>l.result))}es(e,t,r,i){return r.documentReadCount<this.ji?(Rl()<=ht.DEBUG&&De("QueryEngine","SDK will not create cache indexes for query:",Ea(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ge.resolve()):(Rl()<=ht.DEBUG&&De("QueryEngine","Query:",Ea(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Rl()<=ht.DEBUG&&De("QueryEngine","The SDK decides to create cache indexes for query:",Ea(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ws(t))):ge.resolve())}Yi(e,t){if(ny(t))return ge.resolve(null);let r=ws(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=_p(t,null,"F"),r=ws(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=ut(...l);return this.Ji.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,r).next((p=>{const f=this.ts(t,d);return this.ns(t,f,c,p.readTime)?this.Yi(e,_p(t,null,"F")):this.rs(e,f,t,p)}))))})))))}Zi(e,t,r,i){return ny(t)||i.isEqual(nt.min())?ge.resolve(null):this.Ji.getDocuments(e,r).next((l=>{const c=this.ts(t,l);return this.ns(t,c,r,i)?ge.resolve(null):(Rl()<=ht.DEBUG&&De("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ea(t)),this.rs(e,c,t,HE(i,-1)).next((d=>d)))}))}ts(e,t){let r=new Rn(dw(e));return t.forEach(((i,l)=>{Ud(e,l)&&(r=r.add(l))})),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Xi(e,t,r){return Rl()<=ht.DEBUG&&De("QueryEngine","Using full collection scan to execute query:",Ea(t)),this.Ji.getDocumentsMatchingQuery(e,t,$i.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Kt(yt),this._s=new Ja((l=>am(l)),lm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ok(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function vk(n,e,t,r){return new yk(n,e,t,r)}async function Aw(n,e){const t=rt(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((l=>(i=l,t.ls(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],d=[];let p=ut();for(const f of i){c.push(f.batchId);for(const y of f.mutations)p=p.add(y.key)}for(const f of l){d.push(f.batchId);for(const y of f.mutations)p=p.add(y.key)}return t.localDocuments.getDocuments(r,p).next((f=>({hs:f,removedBatchIds:c,addedBatchIds:d})))}))}))}function bk(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),l=t.cs.newChangeBuffer({trackRemovals:!0});return(function(d,p,f,y){const b=f.batch,N=b.keys();let E=ge.resolve();return N.forEach((A=>{E=E.next((()=>y.getEntry(p,A))).next((P=>{const I=f.docVersions.get(A);wt(I!==null),P.version.compareTo(I)<0&&(b.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),y.addEntry(P)))}))})),E.next((()=>d.mutationQueue.removeMutationBatch(p,b)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let p=ut();for(let f=0;f<d.mutationResults.length;++f)d.mutationResults[f].transformResults.length>0&&(p=p.add(d.batch.mutations[f].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function Rw(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function wk(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const d=[];e.targetChanges.forEach(((y,b)=>{const N=i.get(b);if(!N)return;d.push(t.Ur.removeMatchingKeys(l,y.removedDocuments,b).next((()=>t.Ur.addMatchingKeys(l,y.addedDocuments,b))));let E=N.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?E=E.withResumeToken(Mn.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):y.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(y.resumeToken,r)),i=i.insert(b,E),(function(P,I,$){return P.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(N,E,y)&&d.push(t.Ur.updateTargetData(l,E))}));let p=ni(),f=ut();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),d.push(_k(l,c,e.documentUpdates).next((y=>{p=y.Ps,f=y.Is}))),!r.isEqual(nt.min())){const y=t.Ur.getLastRemoteSnapshotVersion(l).next((b=>t.Ur.setTargetsMetadata(l,l.currentSequenceNumber,r)));d.push(y)}return ge.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,f))).next((()=>p))})).then((l=>(t.os=i,l)))}function _k(n,e,t){let r=ut(),i=ut();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let c=ni();return t.forEach(((d,p)=>{const f=l.get(d);p.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(nt.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!f.isValidDocument()||p.version.compareTo(f.version)>0||p.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):De("LocalStore","Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",p.version)})),{Ps:c,Is:i}}))}function Nk(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Sk(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Ur.getTargetData(r,e).next((l=>l?(i=l,ge.resolve(i)):t.Ur.allocateTargetId(r).next((c=>(i=new zi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r}))}async function kp(n,e,t){const r=rt(n),i=r.os.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!mc(c))throw c;De("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function fy(n,e,t){const r=rt(n);let i=nt.min(),l=ut();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,f,y){const b=rt(p),N=b._s.get(y);return N!==void 0?ge.resolve(b.os.get(N)):b.Ur.getTargetData(f,y)})(r,c,ws(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>r.ss.getDocumentsMatchingQuery(c,e,t?i:nt.min(),t?l:ut()))).next((d=>(Ek(r,pC(e),d),{documents:d,Ts:l})))))}function Ek(n,e,t){let r=n.us.get(e)||nt.min();t.forEach(((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.us.set(e,r)}class py{constructor(){this.activeTargetIds=bC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ck{constructor(){this.so=new py,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new py,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){De("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){De("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu=null;function Kf(){return Uu===null?Uu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uu++,"0x"+Uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="WebChannelConnection";class jk extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${l}`}get Fo(){return!1}Mo(t,r,i,l,c){const d=Kf(),p=this.xo(t,r.toUriEncodedString());De("RestConnection",`Sending RPC '${t}' ${d}:`,p,i);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,l,c),this.No(t,p,f,i).then((y=>(De("RestConnection",`Received RPC '${t}' ${d}: `,y),y)),(y=>{throw La("RestConnection",`RPC '${t}' ${d} failed with error: `,y,"url: ",p,"request:",i),y}))}Lo(t,r,i,l,c,d){return this.Mo(t,r,i,l,c)}Oo(t,r,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Wa})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((l,c)=>t[c]=l)),i&&i.headers.forEach(((l,c)=>t[c]=l))}xo(t,r){const i=Tk[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const l=Kf();return new Promise(((c,d)=>{const p=new Wb;p.setWithCredentials(!0),p.listenOnce(Kb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Yu.NO_ERROR:const y=p.getResponseJson();De(Bn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case Yu.TIMEOUT:De(Bn,`RPC '${e}' ${l} timed out`),d(new ke(le.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const b=p.getStatus();if(De(Bn,`RPC '${e}' ${l} failed with status:`,b,"response text:",p.getResponseText()),b>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const E=N==null?void 0:N.error;if(E&&E.status&&E.message){const A=(function(I){const $=I.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf($)>=0?$:le.UNKNOWN})(E.status);d(new ke(A,E.message))}else d(new ke(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ke(le.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{De(Bn,`RPC '${e}' ${l} completed.`)}}));const f=JSON.stringify(i);De(Bn,`RPC '${e}' ${l} sending request:`,i),p.send(t,"POST",f,r,15)}))}Bo(e,t,r){const i=Kf(),l=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Qb(),d=Yb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(p.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Oo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const y=l.join("");De(Bn,`Creating RPC '${e}' stream ${i}: ${y}`,p);const b=c.createWebChannel(y,p);let N=!1,E=!1;const A=new Pk({Io:I=>{E?De(Bn,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(N||(De(Bn,`Opening RPC '${e}' stream ${i} transport.`),b.open(),N=!0),De(Bn,`RPC '${e}' stream ${i} sending:`,I),b.send(I))},To:()=>b.close()}),P=(I,$,W)=>{I.listen($,(K=>{try{W(K)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return P(b,Dl.EventType.OPEN,(()=>{E||(De(Bn,`RPC '${e}' stream ${i} transport opened.`),A.yo())})),P(b,Dl.EventType.CLOSE,(()=>{E||(E=!0,De(Bn,`RPC '${e}' stream ${i} transport closed`),A.So())})),P(b,Dl.EventType.ERROR,(I=>{E||(E=!0,La(Bn,`RPC '${e}' stream ${i} transport errored:`,I),A.So(new ke(le.UNAVAILABLE,"The operation could not be completed")))})),P(b,Dl.EventType.MESSAGE,(I=>{var $;if(!E){const W=I.data[0];wt(!!W);const K=W,Z=K.error||(($=K[0])===null||$===void 0?void 0:$.error);if(Z){De(Bn,`RPC '${e}' stream ${i} received error:`,Z);const ce=Z.status;let J=(function(z){const O=cn[z];if(O!==void 0)return _w(O)})(ce),F=Z.message;J===void 0&&(J=le.INTERNAL,F="Unknown error status: "+ce+" with message "+Z.message),E=!0,A.So(new ke(J,F)),b.close()}else De(Bn,`RPC '${e}' stream ${i} received:`,W),A.bo(W)}})),P(d,Jb.STAT_EVENT,(I=>{I.stat===gp.PROXY?De(Bn,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===gp.NOPROXY&&De(Bn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{A.wo()}),0),A}}function Jf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(n){return new FC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t,r=1e3,i=1.5,l=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&De("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t,r,i,l,c,d,p){this.ui=e,this.Ho=r,this.Jo=i,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Mw(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(ti(t.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.Yo===t&&this.P_(r,i)}),(r=>{e((()=>{const i=new ke(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)}))}))}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((i=>{r((()=>this.I_(i)))})),this.stream.onMessage((i=>{r((()=>++this.e_==1?this.E_(i):this.onNext(i)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return De("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(De("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ik extends Dw{constructor(e,t,r,i,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=l}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=qC(this.serializer,e),r=(function(l){if(!("targetChange"in l))return nt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?nt.min():c.readTime?_s(c.readTime):nt.min()})(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Cp(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=bp(p)?{documents:GC(l,p)}:{query:WC(l,p)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Ew(l,c.resumeToken);const f=Np(l,c.expectedCount);f!==null&&(d.expectedCount=f)}else if(c.snapshotVersion.compareTo(nt.min())>0){d.readTime=xd(l,c.snapshotVersion.toTimestamp());const f=Np(l,c.expectedCount);f!==null&&(d.expectedCount=f)}return d})(this.serializer,e);const r=JC(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Cp(this.serializer),t.removeTarget=e,this.a_(t)}}class Ak extends Dw{constructor(e,t,r,i,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return wt(!!e.streamToken),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=HC(e.writeResults,e.commitTime),r=_s(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Cp(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>$C(this.serializer,r)))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ke(le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Mo(e,Sp(t,r),i,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ke(le.UNKNOWN,l.toString())}))}Lo(e,t,r,i,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Lo(e,Sp(t,r),i,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ke(le.UNKNOWN,c.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class Mk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ti(t),this.D_=!1):De("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,t,r,i,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((c=>{r.enqueueAndForget((async()=>{qo(this)&&(De("RemoteStore","Restarting streams for network reachability change."),await(async function(p){const f=rt(p);f.L_.add(4),await yc(f),f.q_.set("Unknown"),f.L_.delete(4),await Gd(f)})(this))}))})),this.q_=new Mk(r,i)}}async function Gd(n){if(qo(n))for(const e of n.B_)await e(!0)}async function yc(n){for(const e of n.B_)await e(!1)}function Lw(n,e){const t=rt(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),bm(t)?vm(t):Ya(t).r_()&&ym(t,e))}function xm(n,e){const t=rt(n),r=Ya(t);t.N_.delete(e),r.r_()&&Vw(t,e),t.N_.size===0&&(r.r_()?r.o_():qo(t)&&t.q_.set("Unknown"))}function ym(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ya(n).A_(e)}function Vw(n,e){n.Q_.xe(e),Ya(n).R_(e)}function vm(n){n.Q_=new LC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ya(n).start(),n.q_.v_()}function bm(n){return qo(n)&&!Ya(n).n_()&&n.N_.size>0}function qo(n){return rt(n).L_.size===0}function zw(n){n.Q_=void 0}async function Lk(n){n.q_.set("Online")}async function Vk(n){n.N_.forEach(((e,t)=>{ym(n,e)}))}async function zk(n,e){zw(n),bm(n)?(n.q_.M_(e),vm(n)):n.q_.set("Unknown")}async function Ok(n,e,t){if(n.q_.set("Online"),e instanceof Sw&&e.state===2&&e.cause)try{await(async function(i,l){const c=l.cause;for(const d of l.targetIds)i.N_.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.N_.delete(d),i.Q_.removeTarget(d))})(n,e)}catch(r){De("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yd(n,r)}else if(e instanceof Zu?n.Q_.Ke(e):e instanceof Nw?n.Q_.He(e):n.Q_.We(e),!t.isEqual(nt.min()))try{const r=await Rw(n.localStore);t.compareTo(r)>=0&&await(function(l,c){const d=l.Q_.rt(c);return d.targetChanges.forEach(((p,f)=>{if(p.resumeToken.approximateByteSize()>0){const y=l.N_.get(f);y&&l.N_.set(f,y.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,f)=>{const y=l.N_.get(p);if(!y)return;l.N_.set(p,y.withResumeToken(Mn.EMPTY_BYTE_STRING,y.snapshotVersion)),Vw(l,p);const b=new zi(y.target,p,f,y.sequenceNumber);ym(l,b)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){De("RemoteStore","Failed to raise snapshot:",r),await yd(n,r)}}async function yd(n,e,t){if(!mc(e))throw e;n.L_.add(1),await yc(n),n.q_.set("Offline"),t||(t=()=>Rw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{De("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Gd(n)}))}function Ow(n,e){return e().catch((t=>yd(n,t,e)))}async function Wd(n){const e=rt(n),t=Gi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Fk(e);)try{const i=await Nk(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Uk(e,i)}catch(i){await yd(e,i)}Fw(e)&&Uw(e)}function Fk(n){return qo(n)&&n.O_.length<10}function Uk(n,e){n.O_.push(e);const t=Gi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Fw(n){return qo(n)&&!Gi(n).n_()&&n.O_.length>0}function Uw(n){Gi(n).start()}async function Bk(n){Gi(n).p_()}async function qk(n){const e=Gi(n);for(const t of n.O_)e.m_(t.mutations)}async function $k(n,e,t){const r=n.O_.shift(),i=dm.from(r,e,t);await Ow(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Wd(n)}async function Hk(n,e){e&&Gi(n).V_&&await(async function(r,i){if((function(c){return RC(c)&&c!==le.ABORTED})(i.code)){const l=r.O_.shift();Gi(r).s_(),await Ow(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i))),await Wd(r)}})(n,e),Fw(n)&&Uw(n)}async function gy(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),De("RemoteStore","RemoteStore received new credentials");const r=qo(t);t.L_.add(3),await yc(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Gd(t)}async function Gk(n,e){const t=rt(n);e?(t.L_.delete(2),await Gd(t)):e||(t.L_.add(2),await yc(t),t.q_.set("Unknown"))}function Ya(n){return n.K_||(n.K_=(function(t,r,i){const l=rt(t);return l.w_(),new Ik(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)})(n.datastore,n.asyncQueue,{Eo:Lk.bind(null,n),Ro:Vk.bind(null,n),mo:zk.bind(null,n),d_:Ok.bind(null,n)}),n.B_.push((async e=>{e?(n.K_.s_(),bm(n)?vm(n):n.q_.set("Unknown")):(await n.K_.stop(),zw(n))}))),n.K_}function Gi(n){return n.U_||(n.U_=(function(t,r,i){const l=rt(t);return l.w_(),new Ak(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Bk.bind(null,n),mo:Hk.bind(null,n),f_:qk.bind(null,n),g_:$k.bind(null,n)}),n.B_.push((async e=>{e?(n.U_.s_(),await Wd(n)):(await n.U_.stop(),n.O_.length>0&&(De("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,t,r,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new Qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,l){const c=Date.now()+r,d=new wm(e,t,c,i,l);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _m(n,e){if(ti("AsyncQueue",`${e}: ${n}`),mc(n))return new ke(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Fe.comparator(t.key,r.key):(t,r)=>Fe.comparator(t.key,r.key),this.keyedMap=Ll(),this.sortedSet=new Kt(this.comparator)}static emptySet(e){return new Aa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Aa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Aa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this.W_=new Kt(Fe.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Xe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ba{constructor(e,t,r,i,l,c,d,p,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Ba(e,t,Aa.emptySet(t),c,r,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class Kk{constructor(){this.queries=yy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=rt(t),l=i.queries;i.queries=yy(),l.forEach(((c,d)=>{for(const p of d.j_)p.onError(r)}))})(this,new ke(le.ABORTED,"Firestore shutting down"))}}function yy(){return new Ja((n=>uw(n)),Fd)}async function Nm(n,e){const t=rt(n);let r=3;const i=e.query;let l=t.queries.get(i);l?!l.H_()&&e.J_()&&(r=2):(l=new Wk,r=e.J_()?0:1);try{switch(r){case 0:l.z_=await t.onListen(i,!0);break;case 1:l.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=_m(c,`Initialization of query '${Ea(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,l),l.j_.push(e),e.Z_(t.onlineState),l.z_&&e.X_(l.z_)&&Em(t)}async function Sm(n,e){const t=rt(n),r=e.query;let i=3;const l=t.queries.get(r);if(l){const c=l.j_.indexOf(e);c>=0&&(l.j_.splice(c,1),l.j_.length===0?i=e.J_()?0:1:!l.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Jk(n,e){const t=rt(n);let r=!1;for(const i of e){const l=i.query,c=t.queries.get(l);if(c){for(const d of c.j_)d.X_(i)&&(r=!0);c.z_=i}}r&&Em(t)}function Yk(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const l of i.j_)l.onError(t);r.queries.delete(e)}function Em(n){n.Y_.forEach((e=>{e.next()}))}var Tp,vy;(vy=Tp||(Tp={})).ea="default",vy.Cache="cache";class Cm{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ba(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Tp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.key=e}}class qw{constructor(e){this.key=e}}class Qk{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ut(),this.mutatedKeys=ut(),this.Aa=dw(e),this.Ra=new Aa(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new xy,i=t?t.Ra:this.Ra;let l=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,b)=>{const N=i.get(y),E=Ud(this.query,b)?b:null,A=!!N&&this.mutatedKeys.has(N.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let I=!1;N&&E?N.data.isEqual(E.data)?A!==P&&(r.track({type:3,doc:E}),I=!0):this.ga(N,E)||(r.track({type:2,doc:E}),I=!0,(p&&this.Aa(E,p)>0||f&&this.Aa(E,f)<0)&&(d=!0)):!N&&E?(r.track({type:0,doc:E}),I=!0):N&&!E&&(r.track({type:1,doc:N}),I=!0,(p||f)&&(d=!0)),I&&(E?(c=c.add(E),l=P?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{Ra:c,fa:r,ns:d,mutatedKeys:l}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const l=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const c=e.fa.G_();c.sort(((y,b)=>(function(E,A){const P=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return P(E)-P(A)})(y.type,b.type)||this.Aa(y.doc,b.doc))),this.pa(r),i=i!=null&&i;const d=t&&!i?this.ya():[],p=this.da.size===0&&this.current&&!i?1:0,f=p!==this.Ea;return this.Ea=p,c.length!==0||f?{snapshot:new Ba(this.query,e.Ra,l,c,e.mutatedKeys,p===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ut(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const t=[];return e.forEach((r=>{this.da.has(r)||t.push(new qw(r))})),this.da.forEach((r=>{e.has(r)||t.push(new Bw(r))})),t}ba(e){this.Ta=e.Ts,this.da=ut();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ba.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Xk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Zk{constructor(e){this.key=e,this.va=!1}}class eT{constructor(e,t,r,i,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Ja((d=>uw(d)),Fd),this.Ma=new Map,this.xa=new Set,this.Oa=new Kt(Fe.comparator),this.Na=new Map,this.La=new pm,this.Ba={},this.ka=new Map,this.qa=Ua.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function tT(n,e,t=!0){const r=Jw(n);let i;const l=r.Fa.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.Da()):i=await $w(r,e,t,!0),i}async function nT(n,e){const t=Jw(n);await $w(t,e,!0,!1)}async function $w(n,e,t,r){const i=await Sk(n.localStore,ws(e)),l=i.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return r&&(d=await rT(n,e,l,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&Lw(n.remoteStore,i),d}async function rT(n,e,t,r,i){n.Ka=(b,N,E)=>(async function(P,I,$,W){let K=I.view.ma($);K.ns&&(K=await fy(P.localStore,I.query,!1).then((({documents:F})=>I.view.ma(F,K))));const Z=W&&W.targetChanges.get(I.targetId),ce=W&&W.targetMismatches.get(I.targetId)!=null,J=I.view.applyChanges(K,P.isPrimaryClient,Z,ce);return wy(P,I.targetId,J.wa),J.snapshot})(n,b,N,E);const l=await fy(n.localStore,e,!0),c=new Qk(e,l.Ts),d=c.ma(l.documents),p=xc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=c.applyChanges(d,n.isPrimaryClient,p);wy(n,t,f.wa);const y=new Xk(e,t,c);return n.Fa.set(e,y),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),f.snapshot}async function sT(n,e,t){const r=rt(n),i=r.Fa.get(e),l=r.Ma.get(i.targetId);if(l.length>1)return r.Ma.set(i.targetId,l.filter((c=>!Fd(c,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await kp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&xm(r.remoteStore,i.targetId),Pp(r,i.targetId)})).catch(pc)):(Pp(r,i.targetId),await kp(r.localStore,i.targetId,!0))}async function iT(n,e){const t=rt(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xm(t.remoteStore,r.targetId))}async function oT(n,e,t){const r=fT(n);try{const i=await(function(c,d){const p=rt(c),f=yn.now(),y=d.reduce(((E,A)=>E.add(A.key)),ut());let b,N;return p.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let A=ni(),P=ut();return p.cs.getEntries(E,y).next((I=>{A=I,A.forEach((($,W)=>{W.isValidDocument()||(P=P.add($))}))})).next((()=>p.localDocuments.getOverlayedDocuments(E,A))).next((I=>{b=I;const $=[];for(const W of d){const K=TC(W,b.get(W.key).overlayedDocument);K!=null&&$.push(new Qi(W.key,K,nw(K.value.mapValue),ss.exists(!0)))}return p.mutationQueue.addMutationBatch(E,f,$,d)})).next((I=>{N=I;const $=I.applyToLocalDocumentSet(b,P);return p.documentOverlayCache.saveOverlays(E,I.batchId,$)}))})).then((()=>({batchId:N.batchId,changes:fw(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(c,d,p){let f=c.Ba[c.currentUser.toKey()];f||(f=new Kt(yt)),f=f.insert(d,p),c.Ba[c.currentUser.toKey()]=f})(r,i.batchId,t),await vc(r,i.changes),await Wd(r.remoteStore)}catch(i){const l=_m(i,"Failed to persist write");t.reject(l)}}async function Hw(n,e){const t=rt(n);try{const r=await wk(t.localStore,e);e.targetChanges.forEach(((i,l)=>{const c=t.Na.get(l);c&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.va=!0:i.modifiedDocuments.size>0?wt(c.va):i.removedDocuments.size>0&&(wt(c.va),c.va=!1))})),await vc(t,r,e)}catch(r){await pc(r)}}function by(n,e,t){const r=rt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach(((l,c)=>{const d=c.view.Z_(e);d.snapshot&&i.push(d.snapshot)})),(function(c,d){const p=rt(c);p.onlineState=d;let f=!1;p.queries.forEach(((y,b)=>{for(const N of b.j_)N.Z_(d)&&(f=!0)})),f&&Em(p)})(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aT(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),l=i&&i.key;if(l){let c=new Kt(Fe.comparator);c=c.insert(l,Hn.newNoDocument(l,nt.min()));const d=ut().add(l),p=new $d(nt.min(),new Map,new Kt(yt),c,d);await Hw(r,p),r.Oa=r.Oa.remove(l),r.Na.delete(e),km(r)}else await kp(r.localStore,e,!1).then((()=>Pp(r,e,t))).catch(pc)}async function lT(n,e){const t=rt(n),r=e.batch.batchId;try{const i=await bk(t.localStore,e);Ww(t,r,null),Gw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vc(t,i)}catch(i){await pc(i)}}async function cT(n,e,t){const r=rt(n);try{const i=await(function(c,d){const p=rt(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let y;return p.mutationQueue.lookupMutationBatch(f,d).next((b=>(wt(b!==null),y=b.keys(),p.mutationQueue.removeMutationBatch(f,b)))).next((()=>p.mutationQueue.performConsistencyCheck(f))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(f,y,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y))).next((()=>p.localDocuments.getDocuments(f,y)))}))})(r.localStore,e);Ww(r,e,t),Gw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vc(r,i)}catch(i){await pc(i)}}function Gw(n,e){(n.ka.get(e)||[]).forEach((t=>{t.resolve()})),n.ka.delete(e)}function Ww(n,e,t){const r=rt(n);let i=r.Ba[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Pp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach((r=>{n.La.containsKey(r)||Kw(n,r)}))}function Kw(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(xm(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),km(n))}function wy(n,e,t){for(const r of t)r instanceof Bw?(n.La.addReference(r.key,e),uT(n,r)):r instanceof qw?(De("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Kw(n,r.key)):Xe()}function uT(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(De("SyncEngine","New document in limbo: "+t),n.xa.add(r),km(n))}function km(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Fe(Ot.fromString(e)),r=n.qa.next();n.Na.set(r,new Zk(t)),n.Oa=n.Oa.insert(t,r),Lw(n.remoteStore,new zi(ws(Od(t.path)),r,"TargetPurposeLimboResolution",rm.oe))}}async function vc(n,e,t){const r=rt(n),i=[],l=[],c=[];r.Fa.isEmpty()||(r.Fa.forEach(((d,p)=>{c.push(r.Ka(p,e,t).then((f=>{var y;if((f||t)&&r.isPrimaryClient){const b=f?!f.fromCache:(y=t==null?void 0:t.targetChanges.get(p.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(p.targetId,b?"current":"not-current")}if(f){i.push(f);const b=gm.Wi(p.targetId,f);l.push(b)}})))})),await Promise.all(c),r.Ca.d_(i),await(async function(p,f){const y=rt(p);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ge.forEach(f,(N=>ge.forEach(N.$i,(E=>y.persistence.referenceDelegate.addReference(b,N.targetId,E))).next((()=>ge.forEach(N.Ui,(E=>y.persistence.referenceDelegate.removeReference(b,N.targetId,E)))))))))}catch(b){if(!mc(b))throw b;De("LocalStore","Failed to update sequence numbers: "+b)}for(const b of f){const N=b.targetId;if(!b.fromCache){const E=y.os.get(N),A=E.snapshotVersion,P=E.withLastLimboFreeSnapshotVersion(A);y.os=y.os.insert(N,P)}}})(r.localStore,l))}async function dT(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){De("SyncEngine","User change. New user:",e.toKey());const r=await Aw(t.localStore,e);t.currentUser=e,(function(l,c){l.ka.forEach((d=>{d.forEach((p=>{p.reject(new ke(le.CANCELLED,c))}))})),l.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vc(t,r.hs)}}function hT(n,e){const t=rt(n),r=t.Na.get(e);if(r&&r.va)return ut().add(r.key);{let i=ut();const l=t.Ma.get(e);if(!l)return i;for(const c of l){const d=t.Fa.get(c);i=i.unionWith(d.view.Va)}return i}}function Jw(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aT.bind(null,e),e.Ca.d_=Jk.bind(null,e.eventManager),e.Ca.$a=Yk.bind(null,e.eventManager),e}function fT(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cT.bind(null,e),e}class vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return vk(this.persistence,new xk,e.initialUser,this.serializer)}Ga(e){return new pk(mm.Zr,this.serializer)}Wa(e){return new Ck}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vd.provider={build:()=>new vd};class jp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>by(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dT.bind(null,this.syncEngine),await Gk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Kk})()}createDatastore(e){const t=Hd(e.databaseInfo.databaseId),r=(function(l){return new jk(l)})(e.databaseInfo);return(function(l,c,d,p){return new Rk(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,l,c,d){return new Dk(r,i,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>by(this.syncEngine,t,0)),(function(){return my.D()?new my:new kk})())}createSyncEngine(e,t){return(function(i,l,c,d,p,f,y){const b=new eT(i,l,c,d,p,f);return y&&(b.Qa=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const l=rt(i);De("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await yc(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}jp.provider={build:()=>new jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,t,r,i,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=qn.UNAUTHENTICATED,this.clientId=Zb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{De("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(De("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=_m(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Yf(n,e){n.asyncQueue.verifyOperationInProgress(),De("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await Aw(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function _y(n,e){n.asyncQueue.verifyOperationInProgress();const t=await mT(n);De("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>gy(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>gy(e.remoteStore,i))),n._onlineComponents=e}async function mT(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){De("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===le.FAILED_PRECONDITION||i.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;La("Error using user provided cache. Falling back to memory cache: "+t),await Yf(n,new vd)}}else De("FirestoreClient","Using default OfflineComponentProvider"),await Yf(n,new vd);return n._offlineComponents}async function Yw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(De("FirestoreClient","Using user provided OnlineComponentProvider"),await _y(n,n._uninitializedComponentsProvider._online)):(De("FirestoreClient","Using default OnlineComponentProvider"),await _y(n,new jp))),n._onlineComponents}function gT(n){return Yw(n).then((e=>e.syncEngine))}async function bd(n){const e=await Yw(n),t=e.eventManager;return t.onListen=tT.bind(null,e.syncEngine),t.onUnlisten=sT.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nT.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iT.bind(null,e.syncEngine),t}function xT(n,e,t={}){const r=new Qs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,f){const y=new Tm({next:N=>{y.Za(),c.enqueueAndForget((()=>Sm(l,b)));const E=N.docs.has(d);!E&&N.fromCache?f.reject(new ke(le.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&N.fromCache&&p&&p.source==="server"?f.reject(new ke(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(N)},error:N=>f.reject(N)}),b=new Cm(Od(d.path),y,{includeMetadataChanges:!0,_a:!0});return Nm(l,b)})(await bd(n),n.asyncQueue,e,t,r))),r.promise}function yT(n,e,t={}){const r=new Qs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,f){const y=new Tm({next:N=>{y.Za(),c.enqueueAndForget((()=>Sm(l,b))),N.fromCache&&p.source==="server"?f.reject(new ke(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(N)},error:N=>f.reject(N)}),b=new Cm(d,y,{includeMetadataChanges:!0,_a:!0});return Nm(l,b)})(await bd(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(n,e,t){if(!t)throw new ke(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vT(n,e,t,r){if(e===!0&&r===!0)throw new ke(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Sy(n){if(!Fe.isDocumentKey(n))throw new ke(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ey(n){if(Fe.isDocumentKey(n))throw new ke(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Xe()}function Cr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kd(n);throw new ke(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ke(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ke(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ke(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ke(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ke(le.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jd{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cy(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new LE;switch(r.type){case"firstParty":return new FE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Ny.get(t);r&&(De("ComponentProvider","Removing Datastore"),Ny.delete(t),r.terminate())})(this),Promise.resolve()}}function bT(n,e,t,r={}){var i;const l=(n=Cr(n,Jd))._getSettings(),c=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&La("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),r.mockUserToken){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=qn.MOCK_USER;else{d=Fb(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ke(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new qn(f)}n._authCredentials=new VE(new Xb(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class Gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}}class Bi extends Xi{constructor(e,t,r){super(e,t,Od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new Fe(e))}withConverter(e){return new Bi(this.firestore,e,this._path)}}function vs(n,e,...t){if(n=rn(n),Xw("collection","path",e),n instanceof Jd){const r=Ot.fromString(e,...t);return Ey(r),new Bi(n,null,r)}{if(!(n instanceof Gn||n instanceof Bi))throw new ke(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ot.fromString(e,...t));return Ey(r),new Bi(n.firestore,null,r)}}function Et(n,e,...t){if(n=rn(n),arguments.length===1&&(e=Zb.newId()),Xw("doc","path",e),n instanceof Jd){const r=Ot.fromString(e,...t);return Sy(r),new Gn(n,null,new Fe(r))}{if(!(n instanceof Gn||n instanceof Bi))throw new ke(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ot.fromString(e,...t));return Sy(r),new Gn(n.firestore,n instanceof Bi?n.converter:null,new Fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Mw(this,"async_queue_retry"),this.Vu=()=>{const r=Jf();r&&De("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Jf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Jf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new Qs;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!mc(e))throw e;De("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const i=(function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d})(r);throw ti("INTERNAL UNHANDLED ERROR: ",i),r})).then((r=>(this.du=!1,r))))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=wm.createAndSchedule(this,e,t,r,(l=>this.yu(l)));return this.Tu.push(i),i}fu(){this.Eu&&Xe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Ty(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const l of r)if(l in i&&typeof i[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Wi extends Jd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ky,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ky(e),this._firestoreClient=void 0,await e}}}function wT(n,e){const t=typeof n=="object"?n:tm(),r=typeof n=="string"?n:e,i=Vd(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const l=Vb("firestore");l&&bT(i,...l)}return i}function Yd(n){if(n._terminated)throw new ke(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_T(n),n._firestoreClient}function _T(n){var e,t,r;const i=n._freezeSettings(),l=(function(d,p,f,y){return new ZE(d,p,f,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Qw(y.experimentalLongPollingOptions),y.useFetchStreams)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new pT(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qa(Mn.fromBase64String(e))}catch(t){throw new ke(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qa(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ke(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return yt(this._lat,e._lat)||yt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==i[l])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=/^__.*__$/;class ST{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Qi(e,this.data,this.fieldMask,t,this.fieldTransforms):new gc(e,this.data,t,this.fieldTransforms)}}class Zw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function e_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class Zd{constructor(e,t,r,i,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Zd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return wd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(e_(this.Cu)&&NT.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ET{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hd(e)}Qu(e,t,r,i=!1){return new Zd({Cu:e,methodName:t,qu:r,path:An.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Im(n){const e=n._freezeSettings(),t=Hd(n._databaseId);return new ET(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CT(n,e,t,r,i,l={}){const c=n.Qu(l.merge||l.mergeFields?2:0,e,t,i);Rm("Data must be an object, but it was:",c,r);const d=t_(r,c);let p,f;if(l.merge)p=new Nr(c.fieldMask),f=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const b of l.mergeFields){const N=Ip(e,b,t);if(!c.contains(N))throw new ke(le.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);r_(y,N)||y.push(N)}p=new Nr(y),f=c.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,f=c.fieldTransforms;return new ST(new hr(d),p,f)}class eh extends Xd{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eh}}function kT(n,e,t){return new Zd({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Am extends Xd{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=kT(this,e,!0),r=this.Ku.map((l=>Qa(l,t))),i=new Fa(r);return new SC(e.path,i)}isEqual(e){return e instanceof Am&&Jl(this.Ku,e.Ku)}}function TT(n,e,t,r){const i=n.Qu(1,e,t);Rm("Data must be an object, but it was:",i,r);const l=[],c=hr.empty();Bo(r,((p,f)=>{const y=Mm(e,p,t);f=rn(f);const b=i.Nu(y);if(f instanceof eh)l.push(y);else{const N=Qa(f,b);N!=null&&(l.push(y),c.set(y,N))}}));const d=new Nr(l);return new Zw(c,d,i.fieldTransforms)}function PT(n,e,t,r,i,l){const c=n.Qu(1,e,t),d=[Ip(e,r,t)],p=[i];if(l.length%2!=0)throw new ke(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<l.length;N+=2)d.push(Ip(e,l[N])),p.push(l[N+1]);const f=[],y=hr.empty();for(let N=d.length-1;N>=0;--N)if(!r_(f,d[N])){const E=d[N];let A=p[N];A=rn(A);const P=c.Nu(E);if(A instanceof eh)f.push(E);else{const I=Qa(A,P);I!=null&&(f.push(E),y.set(E,I))}}const b=new Nr(f);return new Zw(y,b,c.fieldTransforms)}function jT(n,e,t,r=!1){return Qa(t,n.Qu(r?4:3,e))}function Qa(n,e){if(n_(n=rn(n)))return Rm("Unsupported field value:",e,n),t_(n,e);if(n instanceof Xd)return(function(r,i){if(!e_(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(i);l&&i.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,i){const l=[];let c=0;for(const d of r){let p=Qa(d,i.Lu(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(r,i){if((r=rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=yn.fromDate(r);return{timestampValue:xd(i.serializer,l)}}if(r instanceof yn){const l=new yn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xd(i.serializer,l)}}if(r instanceof Pm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qa)return{bytesValue:Ew(i.serializer,r._byteString)};if(r instanceof Gn){const l=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw i.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:fm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jm)return(function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.Bu("VectorValues must only contain numeric values.");return cm(d.serializer,p)}))}}}}}})(r,i);throw i.Bu(`Unsupported field value: ${Kd(r)}`)})(n,e)}function t_(n,e){const t={};return ew(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bo(n,((r,i)=>{const l=Qa(i,e.Mu(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function n_(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yn||n instanceof Pm||n instanceof qa||n instanceof Gn||n instanceof Xd||n instanceof jm)}function Rm(n,e,t){if(!n_(t)||!(function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)})(t)){const r=Kd(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Ip(n,e,t){if((e=rn(e))instanceof Qd)return e._internalPath;if(typeof e=="string")return Mm(n,e);throw wd("Field path arguments must be of type string or ",n,!1,void 0,t)}const IT=new RegExp("[~\\*/\\[\\]]");function Mm(n,e,t){if(e.search(IT)>=0)throw wd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Qd(...e.split("."))._internalPath}catch{throw wd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wd(n,e,t,r,i){const l=r&&!r.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new ke(le.INVALID_ARGUMENT,d+n+p)}function r_(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,t,r,i,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(th("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AT extends s_{data(){return super.data()}}function th(n,e){return typeof e=="string"?Mm(n,e):e instanceof Qd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ke(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dm{}class o_ extends Dm{}function $s(n,e,...t){let r=[];e instanceof Dm&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((p=>p instanceof Lm)).length,d=l.filter((p=>p instanceof nh)).length;if(c>1||c>0&&d>0)throw new ke(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class nh extends o_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new nh(e,t,r)}_apply(e){const t=this._parse(e);return a_(e._query,t),new Xi(e.firestore,e.converter,wp(e._query,t))}_parse(e){const t=Im(e.firestore);return(function(l,c,d,p,f,y,b){let N;if(f.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ke(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){jy(b,y);const E=[];for(const A of b)E.push(Py(p,l,A));N={arrayValue:{values:E}}}else N=Py(p,l,b)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||jy(b,y),N=jT(d,c,b,y==="in"||y==="not-in");return un.create(f,y,N)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ta(n,e,t){const r=e,i=th("where",n);return nh._create(i,r,t)}class Lm extends Dm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Lm(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:is.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,l){let c=i;const d=l.getFlattenedFilters();for(const p of d)a_(c,p),c=wp(c,p)})(e._query,t),new Xi(e.firestore,e.converter,wp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vm extends o_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Vm(e,t)}_apply(e){const t=(function(i,l,c){if(i.startAt!==null)throw new ke(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ke(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tc(l,c)})(e._query,this._field,this._direction);return new Xi(e.firestore,e.converter,(function(i,l){const c=i.explicitOrderBy.concat([l]);return new Ka(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Qf(n,e="asc"){const t=e,r=th("orderBy",n);return Vm._create(r,t)}function Py(n,e,t){if(typeof(t=rn(t))=="string"){if(t==="")throw new ke(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cw(e)&&t.indexOf("/")!==-1)throw new ke(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ot.fromString(t));if(!Fe.isDocumentKey(r))throw new ke(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yx(n,new Fe(r))}if(t instanceof Gn)return Yx(n,t._key);throw new ke(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kd(t)}.`)}function jy(n,e){if(!Array.isArray(n)||n.length===0)throw new ke(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function a_(n,e){const t=(function(i,l){for(const c of i)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ke(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class RT{convertValue(e,t="none"){switch(Lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Do(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Bo(e,((i,l)=>{r[i]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,i;const l=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((c=>tn(c.doubleValue)));return new jm(l)}convertGeoPoint(e){return new Pm(tn(e.latitude),tn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=im(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Xl(e));default:return null}}convertTimestamp(e){const t=Hi(e);return new yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ot.fromString(e);wt(Iw(r));const i=new Zl(r.get(1),r.get(3)),l=new Fe(r.popFirst(5));return i.isEqual(t)||ti(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class l_ extends s_{constructor(e,t,r,i,l,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(th("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ed extends l_{data(e={}){return super.data(e)}}class c_{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ed(this._firestore,this._userDataWriter,r.key,r,new zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,l){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((d=>{const p=new ed(i._firestore,i._userDataWriter,d.doc.key,d.doc,new zl(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new ed(i._firestore,i._userDataWriter,d.doc.key,d.doc,new zl(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,y=-1;return d.type!==0&&(f=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:DT(d.type),doc:p,oldIndex:f,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n){n=Cr(n,Gn);const e=Cr(n.firestore,Wi);return xT(Yd(e),n._key).then((t=>u_(e,n,t)))}class zm extends RT{constructor(e){super(),this.firestore=e}convertBytes(e){return new qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}function Pa(n){n=Cr(n,Xi);const e=Cr(n.firestore,Wi),t=Yd(e),r=new zm(e);return i_(n._query),yT(t,n._query).then((i=>new c_(e,r,n,i)))}function No(n,e,t){n=Cr(n,Gn);const r=Cr(n.firestore,Wi),i=MT(n.converter,e);return Om(r,[CT(Im(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ss.none())])}function ln(n,e,t,...r){n=Cr(n,Gn);const i=Cr(n.firestore,Wi),l=Im(i);let c;return c=typeof(e=rn(e))=="string"||e instanceof Qd?PT(l,"updateDoc",n._key,e,t,r):TT(l,"updateDoc",n._key,e),Om(i,[c.toMutation(n._key,ss.exists(!0))])}function Xf(n){return Om(Cr(n.firestore,Wi),[new um(n._key,ss.none())])}function Bu(n,...e){var t,r,i;n=rn(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||Ty(e[c])||(l=e[c],c++);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Ty(e[c])){const b=e[c];e[c]=(t=b.next)===null||t===void 0?void 0:t.bind(b),e[c+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),e[c+2]=(i=b.complete)===null||i===void 0?void 0:i.bind(b)}let p,f,y;if(n instanceof Gn)f=Cr(n.firestore,Wi),y=Od(n._key.path),p={next:b=>{e[c]&&e[c](u_(f,n,b))},error:e[c+1],complete:e[c+2]};else{const b=Cr(n,Xi);f=Cr(b.firestore,Wi),y=b._query;const N=new zm(f);p={next:E=>{e[c]&&e[c](new c_(f,N,b,E))},error:e[c+1],complete:e[c+2]},i_(n._query)}return(function(N,E,A,P){const I=new Tm(P),$=new Cm(E,I,A);return N.asyncQueue.enqueueAndForget((async()=>Nm(await bd(N),$))),()=>{I.Za(),N.asyncQueue.enqueueAndForget((async()=>Sm(await bd(N),$)))}})(Yd(f),y,d,p)}function Om(n,e){return(function(r,i){const l=new Qs;return r.asyncQueue.enqueueAndForget((async()=>oT(await gT(r),i,l))),l.promise})(Yd(n),e)}function u_(n,e,t){const r=t.docs.get(e._key),i=new zm(n);return new l_(n,i,e._key,r,new zl(t.hasPendingWrites,t.fromCache),e.converter)}function Ap(...n){return new Am("arrayUnion",n)}(function(e,t=!0){(function(i){Wa=i})(Uo),Ro(new qi("firestore",((r,{instanceIdentifier:i,options:l})=>{const c=r.getProvider("app").getImmediate(),d=new Wi(new zE(r.getProvider("auth-internal")),new BE(r.getProvider("app-check-internal")),(function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ke(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(f.options.projectId,y)})(c,i),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),bs(Hx,"4.7.3",e),bs(Hx,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="firebasestorage.googleapis.com",h_="storageBucket",VT=120*1e3,zT=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt extends Ts{constructor(e,t,r=0){super(Zf(e),`Firebase Storage: ${t} (${Zf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qt||(Qt={}));function Zf(n){return"storage/"+n}function Fm(){const n="An unknown error occurred, please check the error payload for server response.";return new Zt(Qt.UNKNOWN,n)}function OT(n){return new Zt(Qt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function FT(n){return new Zt(Qt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function UT(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zt(Qt.UNAUTHENTICATED,n)}function BT(){return new Zt(Qt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function qT(n){return new Zt(Qt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function $T(){return new Zt(Qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HT(){return new Zt(Qt.CANCELED,"User canceled the upload/download.")}function GT(n){return new Zt(Qt.INVALID_URL,"Invalid URL '"+n+"'.")}function WT(n){return new Zt(Qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function KT(){return new Zt(Qt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+h_+"' property when initializing the app?")}function JT(){return new Zt(Qt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function YT(){return new Zt(Qt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function QT(n){return new Zt(Qt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Rp(n){return new Zt(Qt.INVALID_ARGUMENT,n)}function f_(){return new Zt(Qt.APP_DELETED,"The Firebase app was deleted.")}function XT(n){return new Zt(Qt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ql(n,e){return new Zt(Qt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ml(n){throw new Zt(Qt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Sr.makeFromUrl(e,t)}catch{return new Sr(e,"")}if(r.path==="")return r;throw WT(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function l(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+i+c,"i"),p={bucket:1,path:3};function f(Z){Z.path_=decodeURIComponent(Z.path)}const y="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",E=new RegExp(`^https?://${b}/${y}/b/${i}/o${N}`,"i"),A={bucket:1,path:3},P=t===d_?"(?:storage.googleapis.com|storage.cloud.google.com)":t,I="([^?#]*)",$=new RegExp(`^https?://${P}/${i}/${I}`,"i"),K=[{regex:d,indices:p,postModify:l},{regex:E,indices:A,postModify:f},{regex:$,indices:{bucket:1,path:2},postModify:f}];for(let Z=0;Z<K.length;Z++){const ce=K[Z],J=ce.regex.exec(e);if(J){const F=J[ce.indices.bucket];let j=J[ce.indices.path];j||(j=""),r=new Sr(F,j),ce.postModify(r);break}}if(r==null)throw GT(e);return r}}class ZT{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(n,e,t){let r=1,i=null,l=null,c=!1,d=0;function p(){return d===2}let f=!1;function y(...I){f||(f=!0,e.apply(null,I))}function b(I){i=setTimeout(()=>{i=null,n(E,p())},I)}function N(){l&&clearTimeout(l)}function E(I,...$){if(f){N();return}if(I){N(),y.call(null,I,...$);return}if(p()||c){N(),y.call(null,I,...$);return}r<64&&(r*=2);let K;d===1?(d=2,K=0):K=(r+Math.random())*1e3,b(K)}let A=!1;function P(I){A||(A=!0,N(),!f&&(i!==null?(I||(d=2),clearTimeout(i),b(0)):I||(d=1)))}return b(0),l=setTimeout(()=>{c=!0,P(!0)},t),P}function tP(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(n){return n!==void 0}function rP(n){return typeof n=="object"&&!Array.isArray(n)}function Um(n){return typeof n=="string"||n instanceof String}function Iy(n){return Bm()&&n instanceof Blob}function Bm(){return typeof Blob<"u"}function Ay(n,e,t,r){if(r<e)throw Rp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Rp(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function p_(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Io;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Io||(Io={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||i||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,t,r,i,l,c,d,p,f,y,b,N=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=f,this.progressCallback_=y,this.connectionFactory_=b,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,A)=>{this.resolve_=E,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new qu(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const p=d.loaded,f=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,f)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===Io.NO_ERROR,p=l.getStatus();if(!d||sP(p,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===Io.ABORT;r(!1,new qu(!1,null,y));return}const f=this.successCodes_.indexOf(p)!==-1;r(!0,new qu(f,l))})},t=(r,i)=>{const l=this.resolve_,c=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());nP(p)?l(p):l()}catch(p){c(p)}else if(d!==null){const p=Fm();p.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,p)):c(p)}else if(i.canceled){const p=this.appDelete_?f_():HT();c(p)}else{const p=$T();c(p)}};this.canceled_?t(!1,new qu(!1,null,!0)):this.backoffId_=eP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qu{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function oP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function aP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function cP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function uP(n,e,t,r,i,l,c=!0){const d=p_(n.urlParams),p=n.url+d,f=Object.assign({},n.headers);return lP(f,e),oP(f,t),aP(f,l),cP(f,r),new iP(p,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function hP(...n){const e=dP();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Bm())return new Blob(n);throw new Zt(Qt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(n){if(typeof atob>"u")throw QT("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ep{constructor(e,t){this.data=e,this.contentType=t||null}}function m_(n,e){switch(n){case rs.RAW:return new ep(g_(e));case rs.BASE64:case rs.BASE64URL:return new ep(x_(n,e));case rs.DATA_URL:return new ep(gP(e),xP(e))}throw Fm()}function g_(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=r,c=n.charCodeAt(++t);r=65536|(l&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function mP(n){let e;try{e=decodeURIComponent(n)}catch{throw ql(rs.DATA_URL,"Malformed data URL.")}return g_(e)}function x_(n,e){switch(n){case rs.BASE64:{const i=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(i||l)throw ql(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case rs.BASE64URL:{const i=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(i||l)throw ql(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=pP(e)}catch(i){throw i.message.includes("polyfill")?i:ql(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class y_{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ql(rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=yP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function gP(n){const e=new y_(n);return e.base64?x_(rs.BASE64,e.rest):mP(e.rest)}function xP(n){return new y_(n).contentType}function yP(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,t){let r=0,i="";Iy(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Iy(this.data_)){const r=this.data_,i=fP(r,e,t);return i===null?null:new Ii(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ii(r,!0)}}static getBlob(...e){if(Bm()){const t=e.map(r=>r instanceof Ii?r.data_:r);return new Ii(hP.apply(null,t))}else{const t=e.map(c=>Um(c)?m_(rs.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let l=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)i[l++]=c[d]}),new Ii(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(n){let e;try{e=JSON.parse(n)}catch{return null}return rP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function bP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function b_(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(n,e){return e}class Xn{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||wP}}let $u=null;function _P(n){return!Um(n)||n.length<2?n:b_(n)}function w_(){if($u)return $u;const n=[];n.push(new Xn("bucket")),n.push(new Xn("generation")),n.push(new Xn("metageneration")),n.push(new Xn("name","fullPath",!0));function e(l,c){return _P(c)}const t=new Xn("name");t.xform=e,n.push(t);function r(l,c){return c!==void 0?Number(c):c}const i=new Xn("size");return i.xform=r,n.push(i),n.push(new Xn("timeCreated")),n.push(new Xn("updated")),n.push(new Xn("md5Hash",null,!0)),n.push(new Xn("cacheControl",null,!0)),n.push(new Xn("contentDisposition",null,!0)),n.push(new Xn("contentEncoding",null,!0)),n.push(new Xn("contentLanguage",null,!0)),n.push(new Xn("contentType",null,!0)),n.push(new Xn("metadata","customMetadata",!0)),$u=n,$u}function NP(n,e){function t(){const r=n.bucket,i=n.fullPath,l=new Sr(r,i);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function SP(n,e,t){const r={};r.type="file";const i=t.length;for(let l=0;l<i;l++){const c=t[l];r[c.local]=c.xform(r,e[c.server])}return NP(r,n),r}function __(n,e,t){const r=v_(e);return r===null?null:SP(n,r,t)}function EP(n,e,t,r){const i=v_(e);if(i===null||!Um(i.downloadTokens))return null;const l=i.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(f=>{const y=n.bucket,b=n.fullPath,N="/b/"+c(y)+"/o/"+c(b),E=qm(N,t,r),A=p_({alt:"media",token:f});return E+A})[0]}function CP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const l=e[i];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class N_{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(n){if(!n)throw Fm()}function kP(n,e){function t(r,i){const l=__(n,i,e);return S_(l!==null),l}return t}function TP(n,e){function t(r,i){const l=__(n,i,e);return S_(l!==null),EP(l,i,n.host,n._protocol)}return t}function E_(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=BT():i=UT():t.getStatus()===402?i=FT(n.bucket):t.getStatus()===403?i=qT(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function PP(n){const e=E_(n);function t(r,i){let l=e(r,i);return r.getStatus()===404&&(l=OT(n.path)),l.serverResponse=i.serverResponse,l}return t}function jP(n,e,t){const r=e.fullServerUrl(),i=qm(r,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new N_(i,l,TP(n,t),c);return d.errorHandler=PP(e),d}function IP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function AP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=IP(null,e)),r}function RP(n,e,t,r,i){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function d(){let K="";for(let Z=0;Z<2;Z++)K=K+Math.random().toString().slice(2);return K}const p=d();c["Content-Type"]="multipart/related; boundary="+p;const f=AP(e,r,i),y=CP(f,t),b="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+p+`\r
Content-Type: `+f.contentType+`\r
\r
`,N=`\r
--`+p+"--",E=Ii.getBlob(b,r,N);if(E===null)throw JT();const A={name:f.fullPath},P=qm(l,n.host,n._protocol),I="POST",$=n.maxUploadRetryTime,W=new N_(P,I,kP(n,t),$);return W.urlParams=A,W.headers=c,W.body=E.uploadData(),W.errorHandler=E_(e),W}class MP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Io.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Io.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Io.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ml("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ml("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ml("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ml("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ml("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class DP extends MP{initXhr(){this.xhr_.responseType="text"}}function C_(){return new DP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t){this._service=e,t instanceof Sr?this._location=t:this._location=Sr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Vo(e,t)}get root(){const e=new Sr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return b_(this._location.path)}get storage(){return this._service}get parent(){const e=vP(this._location.path);if(e===null)return null;const t=new Sr(this._location.bucket,e);return new Vo(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw XT(e)}}function k_(n,e,t){n._throwIfRoot("uploadBytes");const r=RP(n.storage,n._location,w_(),new Ii(e,!0),t);return n.storage.makeRequestWithTokens(r,C_).then(i=>({metadata:i,ref:n}))}function LP(n,e,t=rs.RAW,r){n._throwIfRoot("uploadString");const i=m_(t,e),l=Object.assign({},r);return l.contentType==null&&i.contentType!=null&&(l.contentType=i.contentType),k_(n,i.data,l)}function VP(n){n._throwIfRoot("getDownloadURL");const e=jP(n.storage,n._location,w_());return n.storage.makeRequestWithTokens(e,C_).then(t=>{if(t===null)throw YT();return t})}function zP(n,e){const t=bP(n._location.path,e),r=new Sr(n._location.bucket,t);return new Vo(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(n){return/^[A-Za-z]+:\/\//.test(n)}function FP(n,e){return new Vo(n,e)}function T_(n,e){if(n instanceof $m){const t=n;if(t._bucket==null)throw KT();const r=new Vo(t,t._bucket);return e!=null?T_(r,e):r}else return e!==void 0?zP(n,e):n}function UP(n,e){if(e&&OP(e)){if(n instanceof $m)return FP(n,e);throw Rp("To use ref(service, url), the first argument must be a Storage instance.")}else return T_(n,e)}function Ry(n,e){const t=e==null?void 0:e[h_];return t==null?null:Sr.makeFromBucketSpec(t,n)}function BP(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Fb(i,n.app.options.projectId))}class $m{constructor(e,t,r,i,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=d_,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=VT,this._maxUploadRetryTime=zT,this._requests=new Set,i!=null?this._bucket=Sr.makeFromBucketSpec(i,this._host):this._bucket=Ry(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Sr.makeFromBucketSpec(this._url,e):this._bucket=Ry(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ay("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ay("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vo(this,e)}_makeRequest(e,t,r,i,l=!0){if(this._deleted)return new ZT(f_());{const c=uP(e,this._appId,r,i,t,this._firebaseVersion,l);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const My="@firebase/storage",Dy="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="storage";function qP(n,e,t){return n=rn(n),k_(n,e,t)}function $P(n,e,t,r){return n=rn(n),LP(n,e,t,r)}function Gs(n){return n=rn(n),VP(n)}function Ws(n,e){return n=rn(n),UP(n,e)}function HP(n=tm(),e){n=rn(n);const r=Vd(n,P_).getImmediate({identifier:e}),i=Vb("storage");return i&&GP(r,...i),r}function GP(n,e,t,r={}){BP(n,e,t,r)}function WP(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new $m(t,r,i,e,Uo)}function KP(){Ro(new qi(P_,WP,"PUBLIC").setMultipleInstances(!0)),bs(My,Dy,""),bs(My,Dy,"esm2017")}KP();function Hm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function j_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const JP=j_,I_=new hc("auth","Firebase",j_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Zp("@firebase/auth");function YP(n,...e){_d.logLevel<=ht.WARN&&_d.warn(`Auth (${Uo}): ${n}`,...e)}function td(n,...e){_d.logLevel<=ht.ERROR&&_d.error(`Auth (${Uo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(n,...e){throw Gm(n,...e)}function Ns(n,...e){return Gm(n,...e)}function A_(n,e,t){const r=Object.assign(Object.assign({},JP()),{[e]:t});return new hc("auth","Firebase",r).create(e,{appName:n.name})}function Ao(n){return A_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gm(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return I_.create(n,...e)}function Qe(n,e,...t){if(!n)throw Gm(e,...t)}function Ks(n){const e="INTERNAL ASSERTION FAILED: "+n;throw td(e),new Error(e)}function si(n,e){n||Ks(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function QP(){return Ly()==="http:"||Ly()==="https:"}function Ly(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QP()||p2()||"connection"in navigator)?navigator.onLine:!0}function ZP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t){this.shortDelay=e,this.longDelay=t,si(t>e,"Short delay should be less than long delay!"),this.isMobile=d2()||m2()}get(){return XP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(n,e){si(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ks("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ks("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ks("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=new bc(3e4,6e4);function Km(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Xa(n,e,t,r,i={}){return M_(n,i,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const d=fc(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const f=Object.assign({method:e,headers:p},l);return f2()||(f.referrerPolicy="no-referrer"),R_.fetch()(D_(n,n.config.apiHost,t,d),f)})}async function M_(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},ej),e);try{const i=new rj(n),l=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Hu(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,f]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hu(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Hu(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Hu(n,"user-disabled",c);const y=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw A_(n,y,f);ri(n,y)}}catch(i){if(i instanceof Ts)throw i;ri(n,"network-request-failed",{message:String(i)})}}async function nj(n,e,t,r,i={}){const l=await Xa(n,e,t,r,i);return"mfaPendingCredential"in l&&ri(n,"multi-factor-auth-required",{_serverResponse:l}),l}function D_(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Wm(n.config,i):`${n.config.apiScheme}://${i}`}class rj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ns(this.auth,"network-request-failed")),tj.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hu(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Ns(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(n,e){return Xa(n,"POST","/v1/accounts:delete",e)}async function L_(n,e){return Xa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ij(n,e=!1){const t=rn(n),r=await t.getIdToken(e),i=Jm(r);Qe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:i,token:r,authTime:$l(tp(i.auth_time)),issuedAtTime:$l(tp(i.iat)),expirationTime:$l(tp(i.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function tp(n){return Number(n)*1e3}function Jm(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return td("JWT malformed, contained fewer than 3 sections"),null;try{const i=Db(t);return i?JSON.parse(i):(td("Failed to decode base64 JWT payload"),null)}catch(i){return td("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Vy(n){const e=Jm(n);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Ts&&oj(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function oj({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$l(this.lastLoginAt),this.creationTime=$l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(n){var e;const t=n.auth,r=await n.getIdToken(),i=await rc(n,L_(t,{idToken:r}));Qe(i==null?void 0:i.users.length,t,"internal-error");const l=i.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?V_(l.providerUserInfo):[],d=cj(n.providerData,c),p=n.isAnonymous,f=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),y=p?f:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Dp(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(n,b)}async function lj(n){const e=rn(n);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cj(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function V_(n){return n.map(e=>{var{providerId:t}=e,r=Hm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uj(n,e){const t=await M_(n,{},async()=>{const r=fc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=n.config,c=D_(n,i,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",R_.fetch()(c,{method:"POST",headers:d,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dj(n,e){return Xa(n,"POST","/v2/accounts:revokeToken",Km(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const t=Vy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:l}=await uj(e,t);this.updateTokensAndExpiration(r,i,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:l}=t,c=new Ra;return r&&(Qe(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(Qe(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),l&&(Qe(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ra,this.toJSON())}_performRefresh(){return Ks("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(n,e){Qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Js{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,l=Hm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Dp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await rc(this,this.stsTokenManager.getToken(this.auth,e));return Qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ij(this,e)}reload(){return lj(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Js(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Nd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vi(this.auth.app))return Promise.reject(Ao(this.auth));const e=await this.getIdToken();return await rc(this,sj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,l,c,d,p,f,y;const b=(r=t.displayName)!==null&&r!==void 0?r:void 0,N=(i=t.email)!==null&&i!==void 0?i:void 0,E=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,A=(c=t.photoURL)!==null&&c!==void 0?c:void 0,P=(d=t.tenantId)!==null&&d!==void 0?d:void 0,I=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,$=(f=t.createdAt)!==null&&f!==void 0?f:void 0,W=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:K,emailVerified:Z,isAnonymous:ce,providerData:J,stsTokenManager:F}=t;Qe(K&&F,e,"internal-error");const j=Ra.fromJSON(this.name,F);Qe(typeof K=="string",e,"internal-error"),ji(b,e.name),ji(N,e.name),Qe(typeof Z=="boolean",e,"internal-error"),Qe(typeof ce=="boolean",e,"internal-error"),ji(E,e.name),ji(A,e.name),ji(P,e.name),ji(I,e.name),ji($,e.name),ji(W,e.name);const z=new Js({uid:K,auth:e,email:N,emailVerified:Z,displayName:b,isAnonymous:ce,photoURL:A,phoneNumber:E,tenantId:P,stsTokenManager:j,createdAt:$,lastLoginAt:W});return J&&Array.isArray(J)&&(z.providerData=J.map(O=>Object.assign({},O))),I&&(z._redirectEventId=I),z}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ra;i.updateFromServerResponse(t);const l=new Js({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Nd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Qe(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?V_(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),d=new Ra;d.updateFromIdToken(r);const p=new Js({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Dp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,f),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=new Map;function Ys(n){si(n instanceof Function,"Expected a class definition");let e=zy.get(n);return e?(si(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,zy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}z_.type="NONE";const Oy=z_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ma{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:l}=this.auth;this.fullUserKey=nd(this.userKey,i.apiKey,l),this.fullPersistenceKey=nd("persistence",i.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Js._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ma(Ys(Oy),e,r);const i=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=i[0]||Ys(Oy);const c=nd(r,e.config.apiKey,e.name);let d=null;for(const f of t)try{const y=await f._get(c);if(y){const b=Js._fromJSON(e,y);f!==l&&(d=b),l=f;break}}catch{}const p=i.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ma(l,e,r):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async f=>{if(f!==l)try{await f._remove(c)}catch{}})),new Ma(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(B_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(O_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($_(e))return"Blackberry";if(H_(e))return"Webos";if(F_(e))return"Safari";if((e.includes("chrome/")||U_(e))&&!e.includes("edge/"))return"Chrome";if(q_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function O_(n=Wn()){return/firefox\//i.test(n)}function F_(n=Wn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function U_(n=Wn()){return/crios\//i.test(n)}function B_(n=Wn()){return/iemobile/i.test(n)}function q_(n=Wn()){return/android/i.test(n)}function $_(n=Wn()){return/blackberry/i.test(n)}function H_(n=Wn()){return/webos/i.test(n)}function Ym(n=Wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function hj(n=Wn()){var e;return Ym(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fj(){return g2()&&document.documentMode===10}function G_(n=Wn()){return Ym(n)||q_(n)||H_(n)||$_(n)||/windows phone/i.test(n)||B_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n,e=[]){let t;switch(n){case"Browser":t=Fy(Wn());break;case"Worker":t=`${Fy(Wn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(n,e={}){return Xa(n,"GET","/v2/passwordPolicy",Km(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=6;class xj{constructor(e){var t,r,i,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:gj,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,l,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(i=p.containsLowercaseLetter)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uy(this),this.idTokenSubscription=new Uy(this),this.beforeStateQueue=new pj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ys(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ma.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await L_(this,{idToken:e}),r=await Js._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Vi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=i==null?void 0:i._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vi(this.app))return Promise.reject(Ao(this));const t=e?rn(e):null;return t&&Qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vi(this.app)?Promise.reject(Ao(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vi(this.app)?Promise.reject(Ao(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mj(this),t=new xj(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new hc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await dj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ys(e)||this._popupRedirectResolver;Qe(t,this,"argument-error"),this.redirectPersistenceManager=await Ma.create(this,[Ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,i);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=W_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&YP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Qm(n){return rn(n)}class Uy{constructor(e){this.auth=e,this.observer=null,this.addObserver=S2(t=>this.observer=t)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vj(n){Xm=n}function bj(n){return Xm.loadJS(n)}function wj(){return Xm.gapiScript}function _j(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nj(n,e){const t=Vd(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),l=t.getOptions();if(Jl(l,e??{}))return i;ri(i,"already-initialized")}return t.initialize({options:e})}function Sj(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ys);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ej(n,e,t){const r=Qm(n);Qe(r._canInitEmulator,r,"emulator-config-failed"),Qe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,l=K_(e),{host:c,port:d}=Cj(e),p=d===null?"":`:${d}`;r.config.emulator={url:`${l}//${c}${p}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})}),kj()}function K_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Cj(n){const e=K_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const l=i[1];return{host:l,port:By(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:By(c)}}}function By(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function kj(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ks("not implemented")}_getIdTokenResponse(e){return Ks("not implemented")}_linkToIdToken(e,t){return Ks("not implemented")}_getReauthenticationResolver(e){return Ks("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(n,e){return nj(n,"POST","/v1/accounts:signInWithIdp",Km(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="http://localhost";class zo extends J_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,l=Hm(t,["providerId","signInMethod"]);if(!r||!i)return null;const c=new zo(r,i);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Da(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Da(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Da(e,t)}buildRequest(){const e={requestUri:Tj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends Y_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends wc{constructor(){super("facebook.com")}static credential(e){return zo._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ai.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zo._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ri.credential(t,r)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends wc{constructor(){super("github.com")}static credential(e){return zo._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mi.credential(e.oauthAccessToken)}catch{return null}}}Mi.GITHUB_SIGN_IN_METHOD="github.com";Mi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends wc{constructor(){super("twitter.com")}static credential(e,t){return zo._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Di.credential(t,r)}catch{return null}}}Di.TWITTER_SIGN_IN_METHOD="twitter.com";Di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const l=await Js._fromIdTokenResponse(e,r,i),c=qy(r);return new $a({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=qy(r);return new $a({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function qy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd extends Ts{constructor(e,t,r,i){var l;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Sd.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Sd(e,t,r,i)}}function Q_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Sd._fromErrorAndOperation(n,l,e,r):l})}async function Pj(n,e,t=!1){const r=await rc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return $a._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jj(n,e,t=!1){const{auth:r}=n;if(Vi(r.app))return Promise.reject(Ao(r));const i="reauthenticate";try{const l=await rc(n,Q_(r,i,e,n),t);Qe(l.idToken,r,"internal-error");const c=Jm(l.idToken);Qe(c,r,"internal-error");const{sub:d}=c;return Qe(n.uid===d,r,"user-mismatch"),$a._forOperation(n,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ri(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ij(n,e,t=!1){if(Vi(n.app))return Promise.reject(Ao(n));const r="signIn",i=await Q_(n,r,e),l=await $a._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(l.user),l}function Aj(n,e,t,r){return rn(n).onIdTokenChanged(e,t,r)}function Rj(n,e,t){return rn(n).beforeAuthStateChanged(e,t)}const Ed="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ed,"1"),this.storage.removeItem(Ed),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=1e3,Dj=10;class Z_ extends X_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=G_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);fj()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Dj):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Mj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Z_.type="LOCAL";const Lj=Z_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN extends X_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}eN.type="SESSION";const tN=eN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new rh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:l}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(c).map(async f=>f(t.origin,l)),p=await Vj(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const f=Zm("",20);i.port1.start();const y=setTimeout(()=>{p(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(b){const N=b;if(N.data.eventId===f)switch(N.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(N.data.response);break;default:clearTimeout(y),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(){return window}function Oj(n){Ss().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(){return typeof Ss().WorkerGlobalScope<"u"&&typeof Ss().importScripts=="function"}async function Fj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Uj(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Bj(){return nN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="firebaseLocalStorageDb",qj=1,Cd="firebaseLocalStorage",sN="fbase_key";class _c{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sh(n,e){return n.transaction([Cd],e?"readwrite":"readonly").objectStore(Cd)}function $j(){const n=indexedDB.deleteDatabase(rN);return new _c(n).toPromise()}function Lp(){const n=indexedDB.open(rN,qj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Cd,{keyPath:sN})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Cd)?e(r):(r.close(),await $j(),e(await Lp()))})})}async function $y(n,e,t){const r=sh(n,!0).put({[sN]:e,value:t});return new _c(r).toPromise()}async function Hj(n,e){const t=sh(n,!1).get(e),r=await new _c(t).toPromise();return r===void 0?null:r.value}function Hy(n,e){const t=sh(n,!0).delete(e);return new _c(t).toPromise()}const Gj=800,Wj=3;class iN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Wj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rh._getInstance(Bj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Fj(),!this.activeServiceWorker)return;this.sender=new zj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Uj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lp();return await $y(e,Ed,"1"),await Hy(e,Ed),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>$y(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Hj(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Hy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=sh(i,!1).getAll();return new _c(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:l}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Gj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iN.type="LOCAL";const Kj=iN;new bc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(n,e){return e?Ys(e):(Qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg extends J_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Da(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Da(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Da(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Yj(n){return Ij(n.auth,new eg(n),n.bypassAuthState)}function Qj(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),jj(t,new eg(n),n.bypassAuthState)}async function Xj(n){const{auth:e,user:t}=n;return Qe(t,e,"internal-error"),Pj(t,new eg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,t,r,i,l=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yj;case"linkViaPopup":case"linkViaRedirect":return Xj;case"reauthViaPopup":case"reauthViaRedirect":return Qj;default:ri(this.auth,"internal-error")}}resolve(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=new bc(2e3,1e4);class ja extends oN{constructor(e,t,r,i,l){super(e,t,i,l),this.provider=r,this.authWindow=null,this.pollId=null,ja.currentPopupAction&&ja.currentPopupAction.cancel(),ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){si(this.filter.length===1,"Popup operations only handle one event");const e=Zm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ns(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ns(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ns(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zj.get())};e()}}ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="pendingRedirect",rd=new Map;class tI extends oN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=rd.get(this.auth._key());if(!e){try{const r=await nI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}rd.set(this.auth._key(),e)}return this.bypassAuthState||rd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nI(n,e){const t=iI(e),r=sI(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function rI(n,e){rd.set(n._key(),e)}function sI(n){return Ys(n._redirectPersistence)}function iI(n){return nd(eI,n.config.apiKey,n.name)}async function oI(n,e,t=!1){if(Vi(n.app))return Promise.reject(Ao(n));const r=Qm(n),i=Jj(r,e),c=await new tI(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=600*1e3;class lI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!aN(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ns(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gy(e))}saveEventToCache(e){this.cachedEventUids.add(Gy(e)),this.lastProcessedEventTime=Date.now()}}function Gy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(n,e={}){return Xa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hI=/^https?/;async function fI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await uI(n);for(const t of e)try{if(pI(t))return}catch{}ri(n,"unauthorized-domain")}function pI(n){const e=Mp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!hI.test(t))return!1;if(dI.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new bc(3e4,6e4);function Wy(){const n=Ss().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gI(n){return new Promise((e,t)=>{var r,i,l;function c(){Wy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wy(),t(Ns(n,"network-request-failed"))},timeout:mI.get()})}if(!((i=(r=Ss().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((l=Ss().gapi)===null||l===void 0)&&l.load)c();else{const d=_j("iframefcb");return Ss()[d]=()=>{gapi.load?c():t(Ns(n,"network-request-failed"))},bj(`${wj()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw sd=null,e})}let sd=null;function xI(n){return sd=sd||gI(n),sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new bc(5e3,15e3),vI="__/auth/iframe",bI="emulator/auth/iframe",wI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_I=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function NI(n){const e=n.config;Qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Wm(e,bI):`https://${n.config.authDomain}/${vI}`,r={apiKey:e.apiKey,appName:n.name,v:Uo},i=_I.get(n.config.apiHost);i&&(r.eid=i);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${fc(r).slice(1)}`}async function SI(n){const e=await xI(n),t=Ss().gapi;return Qe(t,n,"internal-error"),e.open({where:document.body,url:NI(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wI,dontclear:!0},r=>new Promise(async(i,l)=>{await r.restyle({setHideOnLeave:!1});const c=Ns(n,"network-request-failed"),d=Ss().setTimeout(()=>{l(c)},yI.get());function p(){Ss().clearTimeout(d),i(r)}r.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CI=500,kI=600,TI="_blank",PI="http://localhost";class Ky{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jI(n,e,t,r=CI,i=kI){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const p=Object.assign(Object.assign({},EI),{width:r.toString(),height:i.toString(),top:l,left:c}),f=Wn().toLowerCase();t&&(d=U_(f)?TI:t),O_(f)&&(e=e||PI,p.scrollbars="yes");const y=Object.entries(p).reduce((N,[E,A])=>`${N}${E}=${A},`,"");if(hj(f)&&d!=="_self")return II(e||"",d),new Ky(null);const b=window.open(e||"",d,y);Qe(b,n,"popup-blocked");try{b.focus()}catch{}return new Ky(b)}function II(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="__/auth/handler",RI="emulator/auth/handler",MI=encodeURIComponent("fac");async function Jy(n,e,t,r,i,l){Qe(n.config.authDomain,n,"auth-domain-config-required"),Qe(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Uo,eventId:i};if(e instanceof Y_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",N2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,b]of Object.entries({}))c[y]=b}if(e instanceof wc){const y=e.getScopes().filter(b=>b!=="");y.length>0&&(c.scopes=y.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const p=await n._getAppCheckToken(),f=p?`#${MI}=${encodeURIComponent(p)}`:"";return`${DI(n)}?${fc(d).slice(1)}${f}`}function DI({config:n}){return n.emulator?Wm(n,RI):`https://${n.authDomain}/${AI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="webStorageSupport";class LI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tN,this._completeRedirectFn=oI,this._overrideRedirectResult=rI}async _openPopup(e,t,r,i){var l;si((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Jy(e,t,r,Mp(),i);return jI(e,c,Zm())}async _openRedirect(e,t,r,i){await this._originValidation(e);const l=await Jy(e,t,r,Mp(),i);return Oj(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:l}=this.eventManagers[t];return i?Promise.resolve(i):(si(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await SI(e),r=new lI(e);return t.register("authEvent",i=>(Qe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(np,{type:np},i=>{var l;const c=(l=i==null?void 0:i[0])===null||l===void 0?void 0:l[np];c!==void 0&&t(!!c),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return G_()||F_()||Ym()}}const VI=LI;var Yy="@firebase/auth",Qy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function FI(n){Ro(new qi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=r.options;Qe(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:W_(n)},f=new yj(r,i,l,p);return Sj(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ro(new qi("auth-internal",e=>{const t=Qm(e.getProvider("auth").getImmediate());return(r=>new zI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bs(Yy,Qy,OI(n)),bs(Yy,Qy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=300,BI=Ob("authIdTokenMaxAge")||UI;let Xy=null;const qI=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>BI)return;const i=t==null?void 0:t.token;Xy!==i&&(Xy=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function $I(n=tm()){const e=Vd(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Nj(n,{popupRedirectResolver:VI,persistence:[Kj,Lj,tN]}),r=Ob("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=qI(l.toString());Rj(t,c,()=>c(t.currentUser)),Aj(t,d=>c(d))}}const i=Lb("auth");return i&&Ej(t,`http://${i}`),t}function HI(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}vj({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const l=Ns("internal-error");l.customData=i,t(l)},r.type="text/javascript",r.charset="UTF-8",HI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});FI("Browser");const id={apiKey:"AIzaSyCFi4LIpQBzs9QGnn4QQdNJtCvMOi_-VF8",authDomain:"spoilme-edee0.firebaseapp.com",projectId:"spoilme-edee0",storageBucket:"spoilme-edee0.firebasestorage.app",messagingSenderId:"744288044885",appId:"1:744288044885:web:24614b67ffe485446151dc",measurementId:"G-H9VG45QVZR"},GI=id.apiKey&&id.projectId&&id.projectId!=="your-app-id";let Ee=null,xn=null,WI=null;if(GI)try{const n=qb(id);Ee=wT(n,"spoilme");try{xn=HP(n),console.log("Firebase Storage initialized")}catch(e){console.error("Firebase Storage init failed:",e)}try{WI=$I(n),console.log("Firebase Auth initialized")}catch(e){console.error("Firebase Auth init failed:",e)}console.log("Firebase initialized successfully")}catch(n){console.error("Firebase initialization error:",n)}else console.warn("Firebase keys missing or invalid. Application running in Demo Mode (Local Storage).");const lN=D.createContext(void 0),zt=(n,e=new WeakSet)=>{if(n==null)return null;if(typeof n!="object")return n;if(e.has(n))return null;if(e.add(n),n instanceof Date)return n.toISOString();if(typeof n.toDate=="function")try{return n.toDate().toISOString()}catch{return null}if(n.path&&typeof n.path=="string"&&(n.firestore||n._key))return n.path;if(Array.isArray(n))return n.map(i=>zt(i,e));if(n.seconds!==void 0&&n.nanoseconds!==void 0&&Object.keys(n).length<=4)return new Date(n.seconds*1e3+n.nanoseconds/1e6).toISOString();const t=Object.getPrototypeOf(n);if(t&&t!==Object.prototype&&t!==null)return null;const r={};for(const i in n)if(!(i.startsWith("_")||i==="auth"||i==="firestore"||i==="app"||i==="metadata"||i==="proactiveRefresh"||i==="providerData"||i==="stsTokenManager")&&Object.prototype.hasOwnProperty.call(n,i)){const l=zt(n[i],e);l!=null&&(r[i]=l)}return r},KI=()=>{const n=["Thandiwe Zulu","Jessica Nel","Precious Khumalo","Sarah Van Der Merwe","Amahle Dlamini","Chloe Naidoo","Nicole Botha","Zanele Mthembu","Ashley Smith","Bianca Fourie"],e=new Date,t=e.getFullYear()*100+e.getMonth(),r=c=>{let d=c+=1831565813;return d=Math.imul(d^d>>>15,d|1),d^=d+Math.imul(d^d>>>7,d|61),((d^d>>>14)>>>0)/4294967296},i=n.map((c,d)=>({id:`aff_${d}`,name:c,sales:0,rank:0,change:"same"}));i[0].sales=28561.68;let l=28561.68;for(let c=1;c<i.length;c++){const p=1500+r(t+c)*3500,f=Math.floor(r(t+c+50)*99)/100;l=Math.max(1e3,l-p);const y=Math.floor(l)+f;i[c].sales=parseFloat(y.toFixed(2))}return i.forEach((c,d)=>{c.rank=d+1;const p=r(t+d+200);c.change=p>.6?"up":p<.3?"down":"same",d===0&&(c.change="same")}),i},JI=()=>{const n=["Thandiwe Zulu","Jessica Nel","Precious Khumalo","Sarah Van Der Merwe","Amahle Dlamini","Chloe Naidoo","Nicole Botha","Zanele Mthembu","Ashley Smith","Bianca Fourie","Elize Venter","Fayruz Adams","Gugulethu Mchunu","Megan Reddy","Nosipho Cele","Anelisa Peterson","Busisiwe Malinga","Danielle Jacobs","Fatima Khan","Isabella Martins","Liesl Jacobs","Nomvula Gqola","Pieterse Van Zyl","Rethabile Mokoena","Sibusiso Ndlovu","Tshegofatso Moloi","Lerato Pillay","Anja Pretorius","Fatima Akoojee","Mandisa Botha"],e=new Date,t=Math.floor((e.getTime()-new Date(e.getFullYear(),0,0).getTime())/1e3/60/60/24),r=Math.ceil(t/7),i=e.getFullYear()*100+r,l=f=>{let y=f+=1831565813;return y=Math.imul(y^y>>>15,y|1),y^=y+Math.imul(y^y>>>7,y|61),((y^y>>>14)>>>0)/4294967296},c=[...n].sort((f,y)=>l(i+f.length)-.5),d=[],p=[500,250,200,...Array(7).fill(100),...Array(10).fill(50)];for(let f=0;f<p.length;f++)d.push({rank:f+1,name:c[f],prize:p[f]});return d},YI=({children:n})=>{const[e,t]=D.useState([]),[r,i]=D.useState([]),[l,c]=D.useState([]),[d,p]=D.useState(()=>{try{const te=localStorage.getItem("spv_cart");return te?JSON.parse(te):[]}catch(te){return console.error("Failed to load cart",te),[]}}),[f,y]=D.useState(ts),[b,N]=D.useState(n2),[E,A]=D.useState([]),[P,I]=D.useState(!0),[$,W]=D.useState(null),[K,Z]=D.useState(null),[ce,J]=D.useState([]),[F,j]=D.useState(0),[z,O]=D.useState([]),[k,T]=D.useState(!Ee),[L,me]=D.useState(!1),[Ve,Se]=D.useState([]),[Pe,B]=D.useState([]);D.useEffect(()=>{const te=localStorage.getItem("spv_active_user");if(te)try{const Ne=JSON.parse(te);y(Ne)}catch(Ne){console.error("Error parsing stored user",Ne),y(ts)}J(KI()),O(JI());const Q=new Date,ne=Q.getFullYear()*100+Q.getMonth();j(780+Math.floor((Ne=>{let qe=Ne+=1831565813;return qe=Math.imul(qe^qe>>>15,qe|1),qe^=qe+Math.imul(qe^qe>>>7,qe|61),((qe^qe>>>14)>>>0)/4294967296})(ne)*15));try{const Ne=localStorage.getItem("spv_packaging_presets");Ne&&Se(JSON.parse(Ne));const qe=localStorage.getItem("spv_material_presets");qe&&B(JSON.parse(qe))}catch(Ne){console.error("Error loading presets",Ne)}},[]),D.useEffect(()=>{localStorage.setItem("spv_cart",JSON.stringify(d))},[d]),D.useEffect(()=>{k&&localStorage.setItem("spv_orders",JSON.stringify(l))},[l,k]);const ve=te=>{try{const Q=zt(te);localStorage.setItem("spv_active_user",JSON.stringify(Q))}catch(Q){console.error("Error saving user to localStorage",Q)}};D.useEffect(()=>{if(!Ee||k||!f.id||f.id==="guest")return;const te=Bu(Et(Ee,"users",f.id),Q=>{if(Q.exists()){const ne=Q.data();y(fe=>{const Ne={...fe,...ne};return ve(Ne),Ne})}},Q=>{Q.code==="not-found"&&Q.message.includes("default")&&W("Database ID Mismatch. Please clear browser cache.")});return()=>te()},[f.id,k]);const G=te=>{Se(Q=>{const fe=Q.find(Ne=>Ne.name===te.name)?Q.map(Ne=>Ne.name===te.name?te:Ne):[...Q,te];return localStorage.setItem("spv_packaging_presets",JSON.stringify(fe)),fe})},q=te=>{Se(Q=>{const ne=Q.filter(fe=>fe.name!==te);return localStorage.setItem("spv_packaging_presets",JSON.stringify(ne)),ne})},M=te=>{B(Q=>{const fe=Q.find(Ne=>Ne.name===te.name)?Q.map(Ne=>Ne.name===te.name?te:Ne):[...Q,te];return localStorage.setItem("spv_material_presets",JSON.stringify(fe)),fe})},se=te=>{B(Q=>{const ne=Q.filter(fe=>fe.name!==te);return localStorage.setItem("spv_material_presets",JSON.stringify(ne)),ne})},he=async(te,Q)=>{const ne=te.trim().toLowerCase();let fe=null;if(ne==="spoilmevintagediy@gmail.com"&&Q==="admin@spoilme"&&(fe={...ts,id:"admin_01",name:"Admin User",email:te,isAdmin:!0,isMember:!0,membershipTier:"deluxe",loyaltyPoints:9999,affiliateCode:"ADMIN_MASTER",socialRewards:{}}),!fe&&Q==="test"&&(ne==="eliz@gmail.com"?fe={...ts,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",isMember:!1,membershipTier:"none"}:ne==="anna@gmail.com"&&(fe={...ts,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",isMember:!0,membershipTier:"basic",loyaltyPoints:100})),!fe&&Ee)try{const Ne=vs(Ee,"users"),qe=$s(Ne,Ta("email","==",ne)),Ze=await Pa(qe);if(!Ze.empty){const ct=zt(Ze.docs[0].data());ct.password===Q&&(fe={...ct,id:Ze.docs[0].id})}}catch(Ne){console.error("Error logging in via DB:",Ne)}return fe?(y(fe),ve(fe),!0):!1},ze=async te=>{const Q={...ts,...te,id:`user_${Date.now()}`,affiliateCode:`Spoilme-${Date.now().toString().slice(-6)}`,affiliateStats:te.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1}};try{return!k&&Ee&&await No(Et(Ee,"users",Q.id),zt(Q)),y(Q),ve(Q),!0}catch(ne){return console.error("Registration Failed",ne),y(Q),ve(Q),!0}},We=()=>{y(ts),localStorage.removeItem("spv_active_user")},et=async te=>{const Q={...f,shippingAddress:te};if(y(Q),ve(Q),!k&&Ee&&f.id!=="guest")try{await ln(Et(Ee,"users",f.id),{shippingAddress:te})}catch(ne){console.error("Error saving address to DB",ne)}},Ke=async()=>{if(k||!Ee){alert("Database not connected. Cannot seed users.");return}const te=[{...ts,id:"u1",name:"Elize Test 1",email:"eliz@gmail.com",password:"test",isMember:!1,membershipTier:"none",affiliateCode:"Spoilme-ELIZ01",affiliateStats:{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...ts,id:"u2",name:"Anna Test 2",email:"anna@gmail.com",password:"test",isMember:!0,membershipTier:"basic",loyaltyPoints:100,affiliateCode:"Spoilme-ANNA02",affiliateStats:{status:"pending",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0}},{...ts,id:"u3",name:"Fay Test 3",email:"fay@gmail.com",password:"test",isMember:!0,membershipTier:"premium",loyaltyPoints:500,affiliateCode:"Spoilme-FAY003",affiliateStats:{status:"approved",totalSalesCount:45,totalSalesValue:4500,commissionRate:10,balance:450,recurringBalance:50}},{...ts,id:"u4",name:"Debs Test 4",email:"debs@gmail.com",password:"test",isMember:!0,membershipTier:"deluxe",loyaltyPoints:1e3,affiliateCode:"Spoilme-DEBS04",affiliateStats:{status:"approved",totalSalesCount:150,totalSalesValue:15e3,commissionRate:15,balance:2250,recurringBalance:300}}];try{for(const Q of te)await No(Et(Ee,"users",Q.id),zt(Q));alert("Test Users Created!")}catch(Q){console.error("Error seeding users:",Q)}};D.useEffect(()=>{if(console.log("Loading products, isDemoMode:",k,"db:",!!Ee),k){const Q=localStorage.getItem("spv_products");t(Q?JSON.parse(Q):[]);const ne=localStorage.getItem("spv_categories");i(ne?JSON.parse(ne):[]);const fe=localStorage.getItem("spv_vouchers");fe&&A(JSON.parse(fe));const Ne=localStorage.getItem("spv_orders");c(Ne?JSON.parse(Ne):[]),I(!1);return}const te=setTimeout(()=>{P&&(W("Connection timed out"),I(!1))},5e3);try{const Q=$s(vs(Ee,"products"),Qf("createdAt","desc")),ne=new Map,fe=async Re=>{if(!Re)return null;if(typeof Re=="string"){if(Re.startsWith("http")||Re.startsWith("data:")||Re.startsWith("blob:")||Re.startsWith("/"))return Re;if(Re.startsWith("gs://"))try{const Ye=Re.match(/^gs:\/\/[^/]+\/(.+)$/),vt=Ye?Ye[1]:Re;if(ne.has(Re))return ne.get(Re);if(xn){const Pt=await Gs(Ws(xn,decodeURIComponent(vt)));return ne.set(Re,Pt),Pt}}catch(Ye){return console.error("Failed to convert gs:// URL to downloadURL",Re,Ye),null}if(!Re.startsWith("http")&&xn)try{if(ne.has(Re))return ne.get(Re);const Ye=await Gs(Ws(xn,Re));return ne.set(Re,Ye),Ye}catch{}return Re}else if(typeof Re=="object"){if(Re.fullPath)try{const Ye=Re.fullPath+"::fullPath";if(ne.has(Ye))return ne.get(Ye);if(xn){const vt=await Gs(Ws(xn,Re.fullPath));return ne.set(Ye,vt),vt}}catch(Ye){return console.error("Failed to convert storage object fullPath to downloadURL",Re,Ye),null}if(Re.path)try{const Ye=Re.path+"::path";if(ne.has(Ye))return ne.get(Ye);if(xn){const vt=await Gs(Ws(xn,Re.path));return ne.set(Ye,vt),vt}}catch(Ye){return console.error("Failed to convert storage object path to downloadURL",Re,Ye),null}}return null},Ne=Bu(Q,async Re=>{console.log("Firestore snapshot received, docs count:",Re.docs.length),clearTimeout(te);const Ye=await Promise.all(Re.docs.map(async vt=>{const Pt={...zt(vt.data()),id:vt.id};console.log("Raw product:",Pt.id,"images:",Pt.images);try{if(Pt.images&&Array.isArray(Pt.images)){const V=await Promise.all(Pt.images.map(async oe=>await fe(oe)));Pt.images=V.filter(Boolean),console.log("Resolved images for",Pt.id,":",Pt.images)}}catch(V){console.error("Failed resolving product images for",Pt.id,V)}return Pt}));t(Ye),console.log("Loaded products and resolved images (first 5):",Ye.slice(0,5).map(vt=>({id:vt.id,images:vt.images})))},Re=>{console.log("Firestore products error:",Re),clearTimeout(te),W(Re.message),I(!1)}),qe=Bu(vs(Ee,"categories"),Re=>{console.log("Categories snapshot received, docs count:",Re.docs.length);const Ye=Re.docs.map(vt=>({...zt(vt.data()),id:vt.id}));i(Ye)},Re=>{console.log("Firestore categories error:",Re)}),Ze=f.isAdmin?$s(vs(Ee,"orders"),Qf("date","desc")):$s(vs(Ee,"orders"),Ta("customerEmail","==",f.email),Qf("date","desc")),ct=Bu(Ze,Re=>{console.log("Orders snapshot received, docs count:",Re.docs.length);const Ye=Re.docs.map(vt=>({...zt(vt.data()),id:vt.id}));c(Ye),I(!1)},()=>{I(!1)});return()=>{clearTimeout(te),Ne(),qe(),ct()}}catch(Q){console.log("Try-catch error in products useEffect:",Q),clearTimeout(te),I(!1)}},[k,f.isAdmin,f.email]);const Je=(te,Q={})=>{p(ne=>{const fe=ne.findIndex(ct=>ct.id===te.id&&ct.selectedSize===Q.selectedSize&&ct.selectedMaterial===Q.selectedMaterial&&ct.selectedChainStyle===Q.selectedChainStyle&&ct.selectedChainLength===Q.selectedChainLength),Ne=fe>-1?ne[fe]:null,qe=Ne?Ne.quantity:0;let Ze=te.stock;if(te.type==="Ring"&&Q.selectedSize&&te.ringStock&&(Ze=te.ringStock[Q.selectedSize]||0),qe>=Ze)return alert(`Sorry, you can't add more of this item. We only have ${Ze} in stock.`),ne;if(fe>-1){const ct=[...ne];return ct[fe]={...ct[fe],quantity:ct[fe].quantity+1},ct}return[...ne,{...te,quantity:1,...Q}]})},He=(te,Q={})=>{p(ne=>ne.filter(fe=>!(fe.id===te&&fe.selectedSize===Q.selectedSize&&fe.selectedMaterial===Q.selectedMaterial&&fe.selectedChainStyle===Q.selectedChainStyle&&fe.selectedChainLength===Q.selectedChainLength)))},_t=(te,Q,ne={})=>{if(Q<=0){He(te,ne);return}const fe=e.find(Ze=>Ze.id===te);if(!fe)return;let Ne=fe.stock;fe.type==="Ring"&&ne.selectedSize&&fe.ringStock&&(Ne=fe.ringStock[ne.selectedSize]||0);const qe=Math.min(Q,Ne);Q>Ne&&alert(`Sorry, we only have ${Ne} of this item in stock. Quantity has been adjusted.`),p(Ze=>Ze.map(ct=>ct.id===te&&ct.selectedSize===ne.selectedSize&&ct.selectedMaterial===ne.selectedMaterial&&ct.selectedChainStyle===ne.selectedChainStyle&&ct.selectedChainLength===ne.selectedChainLength?{...ct,quantity:qe}:ct))},Ct=()=>{p([]),Z(null)},at=te=>{y(Q=>{const fe=Q.wishlist.includes(te)?Q.wishlist.filter(qe=>qe!==te):[...Q.wishlist,te],Ne={...Q,wishlist:fe};return ve(Ne),Ne})},Te=async te=>{if(!f.id||f.id==="guest"){console.error("Cannot apply for affiliate as guest user directly.");return}const Q={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},ne={...f,name:`${te.name} ${te.surname}`,birthday:te.dob,notifications:[Q,...f.notifications],affiliateStats:{...f.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1},status:"pending",gender:te.gender,joinReason:`${te.reason} | Socials: ${te.socials}`}};y(ne),ve(ne),!k&&Ee&&f.id!=="guest"&&await ln(Et(Ee,"users",f.id),zt(ne))},lt=async(te,Q)=>{if(k||!Ee)return;const ne=Et(Ee,"users",te),fe={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Welcome to the Partnership Program!",message:`Welcome to Spoil Me Vintage Partnership Program! We are thrilled to have you on the team.${Q?` Note from admin: ${Q}`:""}`,date:new Date().toISOString(),isRead:!1};await ln(ne,{"affiliateStats.status":"approved","affiliateStats.commissionRate":10,"affiliateStats.adminNote":Q||"",notifications:Ap(fe)})},Bt=async(te,Q)=>{if(k||!Ee)return;const ne=Et(Ee,"users",te),fe={id:`aff_status_${Date.now()}`,type:"affiliate_msg",title:"Partnership Application Update",message:`We regret to inform you that your application has been declined.${Q?` Note: ${Q}`:""}`,date:new Date().toISOString(),isRead:!1};await ln(ne,{"affiliateStats.status":"rejected","affiliateStats.adminNote":Q||"",notifications:Ap(fe)})},qt=async(te,Q)=>{if(k||!Ee)return;const ne={id:`aff_msg_${Date.now()}`,type:"affiliate_msg",title:"Partnership Update",message:Q,date:new Date().toISOString(),isRead:!1},fe=await Pa($s(vs(Ee,"users"),Ta("id","==",te)));fe.empty||await ln(fe.docs[0].ref,{notifications:[ne,...fe.docs[0].data().notifications]})},dn=async(te,Q)=>{if(k||!Ee)return;const ne=Et(Ee,"users",te);await ln(ne,{"affiliateStats.commissionRate":Q})},$t=async(te,Q)=>{if(k||!Ee)return;const ne=Et(Ee,"users",te);await ln(ne,{"affiliateStats.parentId":Q})},_e=async()=>{const te={...f,affiliateStats:{...f.affiliateStats,hasContentAccess:!0}};y(te),ve(te),!k&&Ee&&f.id!=="guest"&&await ln(Et(Ee,"users",f.id),zt(te))},Ht=async()=>{const te={...f,affiliateStats:{...f.affiliateStats,isElite:!0}};y(te),ve(te),!k&&Ee&&f.id!=="guest"&&await ln(Et(Ee,"users",f.id),zt(te))},Dn=async(te,Q)=>{var ct;if(!Ee&&!k)return{success:!1,message:"Database not ready"};let ne=null,fe=null;if(k)if(f.affiliateCode===te)ne=f;else return{success:!1,message:"In Demo Mode, only your own code works."};else{const Re=$s(vs(Ee,"users"),Ta("affiliateCode","==",te)),Ye=await Pa(Re);Ye.empty||(ne={...Ye.docs[0].data(),id:Ye.docs[0].id},fe=Ye.docs[0].ref)}if(!ne)return{success:!1,message:"Affiliate code not found."};if(((ct=ne.affiliateStats)==null?void 0:ct.status)!=="approved"&&!k)return{success:!1,message:"Affiliate not approved."};const Ne=ne.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},qe=Q*Ne.commissionRate/100,Ze={...Ne,totalSalesCount:Ne.totalSalesCount+1,totalSalesValue:Ne.totalSalesValue+Q,balance:Ne.balance+qe};if(Ze.totalSalesCount>=500?Ze.commissionRate=20:Ze.totalSalesCount>=100?Ze.commissionRate=15:Ze.totalSalesCount>=50&&(Ze.commissionRate=11),k)y({...ne,affiliateStats:Ze});else if(fe){const Re={id:`sale_${Date.now()}`,type:"system",title:"New Partnership Sale!",message:`You earned R${qe.toFixed(2)} commission!`,date:new Date().toISOString(),isRead:!1};if(await ln(fe,{affiliateStats:Ze,notifications:[Re,...ne.notifications||[]]}),Ne.parentId)try{const Ye=Et(Ee,"users",Ne.parentId),vt=await LT(Ye);if(vt.exists()){const Pt=vt.data(),V=Pt.affiliateStats||{status:"approved",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0},oe=Q*.01,Le={...V,balance:(V.balance||0)+oe},tt={id:`sub_sale_${Date.now()}`,type:"system",title:"Downline Sale Bonus",message:`You earned R${oe.toFixed(2)} from a recruit's sale!`,date:new Date().toISOString(),isRead:!1};await ln(Ye,{affiliateStats:Le,notifications:[tt,...Pt.notifications||[]]})}}catch(Ye){console.error("Failed to process parent commission",Ye)}}return{success:!0,message:`Sale simulated! Added R${qe.toFixed(2)}.`}},Zn=async(te,Q)=>{if(k){if(f.id===te){const ne={...f,loyaltyPoints:f.loyaltyPoints+Q};y(ne),ve(ne)}return}if(Ee)if(f.id===te){const ne={...f,loyaltyPoints:f.loyaltyPoints+Q};y(ne),ve(ne),await ln(Et(Ee,"users",te),{loyaltyPoints:ne.loyaltyPoints})}else{const ne=await Pa($s(vs(Ee,"users"),Ta("id","==",te)));ne.empty||await ln(ne.docs[0].ref,{loyaltyPoints:(ne.docs[0].data().loyaltyPoints||0)+Q})}},pr=async()=>k||!Ee?[]:(await Pa($s(vs(Ee,"users")))).docs.map(Q=>({...zt(Q.data()),id:Q.id})),Cn=async te=>{const Q=zt(te);t(ne=>[Q,...ne]),!k&&Ee?await No(Et(Ee,"products",Q.id),Q):localStorage.setItem("spv_products",JSON.stringify([Q,...e]))},kt=async te=>{const Q=zt(te);if(t(ne=>ne.map(fe=>fe.id===Q.id?Q:fe)),!k&&Ee)await No(Et(Ee,"products",Q.id),Q);else{const ne=e.map(fe=>fe.id===Q.id?Q:fe);localStorage.setItem("spv_products",JSON.stringify(ne))}},Mt=async te=>{if(t(Q=>Q.filter(ne=>ne.id!==te)),!k&&Ee)await Xf(Et(Ee,"products",te));else{const Q=e.filter(ne=>ne.id!==te);localStorage.setItem("spv_products",JSON.stringify(Q))}},hn=async te=>{const Q=zt(te);c(ne=>[Q,...ne]),!k&&Ee&&await No(Et(Ee,"orders",Q.id),Q)},mr=async te=>{const Q=zt(te);c(ne=>ne.map(fe=>fe.id===Q.id?Q:fe)),!k&&Ee&&await ln(Et(Ee,"orders",Q.id),Q)},er=async te=>{c(Q=>Q.filter(ne=>ne.id!==te)),!k&&Ee&&await Xf(Et(Ee,"orders",te))},ue=async te=>{const Q=zt(te);i(ne=>[...ne,Q]),!k&&Ee?await No(Et(Ee,"categories",Q.id),Q):localStorage.setItem("spv_categories",JSON.stringify([...r,Q]))},$e=async te=>{const Q=zt(te);if(i(ne=>ne.map(fe=>fe.id===Q.id?Q:fe)),!k&&Ee)await No(Et(Ee,"categories",Q.id),Q);else{const ne=r.map(fe=>fe.id===Q.id?Q:fe);localStorage.setItem("spv_categories",JSON.stringify(ne))}},Tt=async te=>{if(i(Q=>Q.filter(ne=>ne.id!==te)),!k&&Ee)await Xf(Et(Ee,"categories",te));else{const Q=r.filter(ne=>ne.id!==te);localStorage.setItem("spv_categories",JSON.stringify(Q))}},fn=async te=>{const Q=zt(te);i(Q),k&&localStorage.setItem("spv_categories",JSON.stringify(Q))},Ln=te=>N(Q=>[...Q,te]),Br=te=>{const Q=zt(te);A(fe=>[...fe,Q]);const ne=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify([...ne,Q]))},Ps=te=>{A(ne=>ne.filter(fe=>fe.code!==te));const Q=JSON.parse(localStorage.getItem("spv_vouchers")||"[]");localStorage.setItem("spv_vouchers",JSON.stringify(Q.filter(ne=>ne.code!==te)))},Tr=te=>{const Q=E.find(ne=>ne.code===te);return Q?(Z(Q),!0):!1},ls=()=>{localStorage.clear(),window.location.reload()},cs=()=>d.reduce((te,Q)=>te+(Q.price+(Q.selectedMaterialModifier||0))*Q.quantity,0),Vn=async te=>{var qe;if(!f.email)throw new Error("User must be logged in to checkout.");const Q={...te,id:`ord_${Date.now()}`,orderNumber:`#SMV-${Date.now().toString().slice(-6)}`,date:new Date().toISOString(),customerName:f.name,customerEmail:f.email,status:"Pending"};await hn(Q);const ne=[];for(const Ze of d)(qe=Ze.tags)!=null&&qe.includes("Voucher")||ne.push({id:`notif_${Date.now()}_${Ze.id}`,type:"review_request",title:"How was your purchase?",message:`Review ${Ze.name} to earn 100 Points!`,productId:Ze.id,productName:Ze.name,date:new Date().toISOString(),isRead:!1});const fe=Math.floor(te.total/10),Ne={...f,loyaltyPoints:Math.max(0,f.loyaltyPoints+fe),notifications:[...ne,...f.notifications]};return y(Ne),ve(Ne),!k&&Ee&&f.id!=="guest"&&await ln(Et(Ee,"users",f.id),zt(Ne)),Q},tr=async(te,Q)=>{const ne="GV-"+Math.random().toString(36).substr(2,9).toUpperCase(),fe={code:ne,discountType:"fixed",value:te,minSpend:te,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};Br(fe);const Ne={id:`gift_${Date.now()}`,type:"gift_ready",title:"Gift Ready",message:"Your voucher is ready.",date:new Date().toISOString(),isRead:!1,voucherData:{code:ne,amount:te,meta:Q}},qe={...f,notifications:[Ne,...f.notifications]};y(qe),ve(qe),!k&&Ee&&f.id!=="guest"&&await ln(Et(Ee,"users",f.id),zt(qe))},Pr=async(te,Q,ne,fe)=>{if(f.id==="guest")return;const Ne=e.find(Ze=>Ze.id===te);if(Ne){const Ze={id:`rev_${Date.now()}`,userName:f.name,location:"Verified Buyer",content:ne,rating:Q,date:new Date().toLocaleDateString()};await kt({...Ne,reviews:[Ze,...Ne.reviews||[]]})}const qe={...f,loyaltyPoints:f.loyaltyPoints+100,notifications:f.notifications.filter(Ze=>Ze.id!==fe)};y(qe),ve(qe),!k&&Ee&&await ln(Et(Ee,"users",f.id),zt(qe))},nr=async te=>{const Q={...f,loyaltyPoints:f.loyaltyPoints+50};y(Q),ve(Q),!k&&Ee&&f.id!=="guest"&&await ln(Et(Ee,"users",f.id),{loyaltyPoints:Q.loyaltyPoints})},js=async(te,Q)=>{if(f.id==="guest")return;const ne=f.socialRewards||{};if(ne[te])return;const fe={...f,loyaltyPoints:f.loyaltyPoints+100,socialRewards:{...ne,[te]:!0},socialHandles:{...f.socialHandles,[te]:Q}};y(fe),ve(fe),!k&&Ee&&await ln(Et(Ee,"users",f.id),zt(fe))},jr=(te,Q,ne="system")=>{const fe={id:`sys_${Date.now()}`,type:ne,title:te,message:Q,date:new Date().toISOString(),isRead:!1},Ne={...f,notifications:[fe,...f.notifications]};y(Ne),ve(Ne)},qr=()=>{try{const te=JSON.stringify(e);return te.length>0?{status:"success",details:`Serialization OK. Size: ${(te.length/1024).toFixed(2)} KB`}:{status:"warning",details:"Empty products."}}catch(te){return{status:"error",details:`Error: ${te.message}`}}};return s.jsx(lN.Provider,{value:{products:e,categories:r,cart:d,user:f,specials:b,vouchers:E,appliedVoucher:K,affiliateLeaderboard:ce,memberCount:F,weeklyWinners:z,isLoading:P,isDemoMode:k,dbConnectionError:$,orders:l,isStickyProgressBarVisible:L,setIsStickyProgressBarVisible:me,packagingPresets:Ve,materialPresets:Pe,savePackagingPreset:G,deletePackagingPreset:q,saveMaterialPreset:M,deleteMaterialPreset:se,login:he,logout:We,register:ze,addToCart:Je,removeFromCart:He,updateCartQuantity:_t,clearCart:Ct,toggleWishlist:at,checkout:Vn,submitReview:Pr,addSystemNotification:jr,processGiftVoucherPurchase:tr,applyForAffiliate:Te,approveAffiliate:lt,rejectAffiliate:Bt,sendAffiliateMessage:qt,buyAffiliateContent:_e,joinAffiliateElite:Ht,simulateAffiliateSale:Dn,updateAffiliateTier:dn,assignAffiliateParent:$t,addProduct:Cn,updateProduct:kt,deleteProduct:Mt,addOrder:hn,updateOrder:mr,deleteOrder:er,addCategory:ue,updateCategory:$e,deleteCategory:Tt,replaceCategories:fn,addSpecial:Ln,resetStore:ls,seedTestUsers:Ke,getAllUsers:pr,runDataDiagnostics:qr,adminAdjustPoints:Zn,getCartTotal:cs,addVoucher:Br,deleteVoucher:Ps,applyExternalVoucher:Tr,setAppliedVoucher:Z,shareProduct:nr,claimSocialReward:js,updateUserAddress:et},children:n})},Rt=()=>{const n=D.useContext(lN);if(!n)throw new Error("useStore must be used within StoreProvider");return n};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=(n,e)=>{const t=D.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:p,...f},y)=>D.createElement("svg",{ref:y,...QI,width:i,height:i,stroke:r,strokeWidth:c?Number(l)*24/Number(i):l,className:["lucide",`lucide-${XI(n)}`,d].join(" "),...f},[...e.map(([b,N])=>D.createElement(b,N)),...Array.isArray(p)?p:[p]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=xe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=xe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=xe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=xe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=xe("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=xe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=xe("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=xe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=xe("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=xe("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=xe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=xe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=xe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=xe("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=xe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=xe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=xe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=xe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=xe("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=xe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=xe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=xe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=xe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=xe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=xe("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=xe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=xe("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=xe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=xe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=xe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=xe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=xe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=xe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=xe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=xe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=xe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=xe("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=xe("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=xe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=xe("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=xe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=xe("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=xe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=xe("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=xe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=xe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=xe("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=xe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=xe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=xe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=xe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=xe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=xe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=xe("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=xe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=xe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=xe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=xe("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl=xe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=xe("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=xe("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=xe("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=xe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=xe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=xe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=xe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=xe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=xe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=xe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),av=["Thandi","Jessica","Precious","Elize","Zanele","Sarah","Nosipho","Annelie","Busi","Nicole","Lindiwe","Megan","Nompumelelo","Bianca","Ayanda","Michelle","Gugulethu","Chantelle","Siphesihle","Debbie","Refilwe","Karen"],lv=["Priya","Meera","Anjali","Deepa","Lakshmi"],cv=["Wei","Li","Mei","Yuki","Jin"],uv=["Dlamini","Botha","Nkosi","Nel","Khumalo","Van Der Merwe","Molefe","Smith","Mthembu","Coetzee","Ngcobo","Fourie","Mkhize","Van Wyk","Zulu","Kruger"],dv=["Naidoo","Patel","Govender","Chetty","Singh"],hv=["Chen","Wang","Lee","Zhang","Liu"],fv=["Sandton","Cape Town","Durban North","Centurion","Paarl","Soweto","Umhlanga","Bloemfontein","Stellenbosch","George","Ballito","Benoni","Midrand","Somerset West","Port Elizabeth","Pretoria East"],jA=()=>{const{products:n}=Rt(),[e,t]=D.useState(!1),[r,i]=D.useState(null),l=D.useMemo(()=>n.filter(c=>c.stock>1&&(c.soldCount||0)>150),[n]);return D.useEffect(()=>{if(l.length===0)return;let c;const d=()=>{const f=l[Math.floor(Math.random()*l.length)],y=Math.random();let b="",N="";y>.99?(b=cv[Math.floor(Math.random()*cv.length)],N=hv[Math.floor(Math.random()*hv.length)]):y>.98?(b=lv[Math.floor(Math.random()*lv.length)],N=dv[Math.floor(Math.random()*dv.length)]):(b=av[Math.floor(Math.random()*av.length)],N=uv[Math.floor(Math.random()*uv.length)]);const E=fv[Math.floor(Math.random()*fv.length)],A=`${Math.floor(Math.random()*59)+1} minutes ago`,P=f.type==="Pendant"||f.type==="Bracelet";i({img:P?void 0:f.images[0],name:`${b} ${N.charAt(0)}.`,location:E,productName:f.name,productId:f.id,timeAgo:A}),t(!0),setTimeout(()=>{t(!1)},6e3);const I=Math.floor(Math.random()*25001+2e4);c=setTimeout(d,I)};return c=setTimeout(d,5e3),()=>clearTimeout(c)},[l]),r?s.jsx("div",{className:`fixed bottom-4 left-4 z-50 max-w-xs w-full transition-all duration-700 transform ${e?"translate-y-0 opacity-100":"translate-y-20 opacity-0 pointer-events-none"}`,children:s.jsxs("div",{className:"bg-zinc-900/95 backdrop-blur-md border border-gray-800 p-3 rounded-xl shadow-2xl flex items-center gap-3 relative overflow-hidden group",children:[s.jsx("button",{onClick:()=>t(!1),className:"absolute top-1 right-1 text-gray-500 hover:text-white p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(vn,{size:12})}),r.img?s.jsx("div",{className:"w-16 h-16 shrink-0 rounded-lg overflow-hidden border border-gray-700 bg-black",children:s.jsx("img",{src:r.img,alt:"Product",className:"w-full h-full object-cover",onError:c=>{console.warn("Image failed to load in SocialProofPopup:",c.currentTarget.src),c.currentTarget.src="https://via.placeholder.com/200"}})}):s.jsx("div",{className:"w-16 h-16 shrink-0 rounded-lg border border-purple-500/30 bg-purple-900/20 flex items-center justify-center",children:s.jsxs("span",{className:"font-cherry text-xs text-purple-400 text-center leading-none",children:["Unique",s.jsx("br",{}),"Find"]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[s.jsx("span",{className:"text-xs font-bold text-white truncate",children:r.name}),s.jsxs("span",{className:"text-[9px] text-gray-400",children:["in ",r.location]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[9px] text-green-400 font-bold uppercase tracking-wide mb-1",children:[s.jsx(ic,{size:10})," Verified Purchase"]}),s.jsx(Ie,{to:`/product/${r.productId}`,className:"block text-xs text-gray-300 hover:text-pink-500 transition-colors truncate line-clamp-2 leading-tight",children:r.productName}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:r.timeAgo})]})]})}):null},op=500,vN=({subtotal:n,isSticky:e=!1,onContinueShopping:t,onClose:r})=>{const i=op-n,l=Math.min(n/op*100,100),c=n>=op,d=c?"Congratulations! You've unlocked FREE shipping!":`You're R${i.toFixed(2)} away from free shipping!`;return e?s.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 p-3 z-40 animate-in slide-in-from-bottom-5 duration-300",children:s.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[s.jsx("div",{className:"p-2 bg-pink-900/20 text-pink-500 rounded-full border border-pink-500/30",children:s.jsx(os,{size:20})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`text-sm font-bold ${c?"text-green-400":"text-white"}`,children:d}),s.jsx("div",{className:"w-full bg-black/50 rounded-full h-2 mt-1 overflow-hidden border border-gray-700",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c?"bg-green-500":"bg-pink-500"}`,style:{width:`${l}%`}})})]}),s.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:text-white",children:s.jsx(vn,{size:18})})]})}):s.jsx("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-pink-500/30 rounded-2xl p-6 shadow-lg mb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[s.jsx("div",{className:"p-3 bg-pink-900/30 text-pink-400 rounded-full border border-pink-500/30",children:s.jsx(os,{size:28})}),s.jsxs("div",{className:"flex-1 text-center md:text-left",children:[s.jsx("h3",{className:`text-lg font-bold ${c?"text-green-400":"text-white"}`,children:d}),s.jsx("div",{className:"w-full bg-black rounded-full h-2.5 mt-2 overflow-hidden border border-gray-700 shadow-inner",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c?"bg-green-500":"bg-pink-500"} shadow-[inset_0_1px_1px_rgba(255,255,255,0.2)]`,style:{width:`${l}%`}})})]}),!c&&s.jsxs("button",{onClick:t,className:"w-full md:w-auto mt-2 md:mt-0 px-6 py-3 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-colors shadow-lg flex items-center justify-center gap-2",children:["Continue Shopping ",s.jsx(At,{size:18})]})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ha;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Ha||(Ha={}));class ap extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const IA=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},AA=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},i=()=>e!==null?e.name:IA(n),l=()=>i()!=="web",c=b=>{const N=f.get(b);return!!(N!=null&&N.platforms.has(i())||d(b))},d=b=>{var N;return(N=t.PluginHeaders)===null||N===void 0?void 0:N.find(E=>E.name===b)},p=b=>n.console.error(b),f=new Map,y=(b,N={})=>{const E=f.get(b);if(E)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),E.proxy;const A=i(),P=d(b);let I;const $=async()=>(!I&&A in N?I=typeof N[A]=="function"?I=await N[A]():I=N[A]:e!==null&&!I&&"web"in N&&(I=typeof N.web=="function"?I=await N.web():I=N.web),I),W=(j,z)=>{var O,k;if(P){const T=P==null?void 0:P.methods.find(L=>z===L.name);if(T)return T.rtype==="promise"?L=>t.nativePromise(b,z.toString(),L):(L,me)=>t.nativeCallback(b,z.toString(),L,me);if(j)return(O=j[z])===null||O===void 0?void 0:O.bind(j)}else{if(j)return(k=j[z])===null||k===void 0?void 0:k.bind(j);throw new ap(`"${b}" plugin is not implemented on ${A}`,Ha.Unimplemented)}},K=j=>{let z;const O=(...k)=>{const T=$().then(L=>{const me=W(L,j);if(me){const Ve=me(...k);return z=Ve==null?void 0:Ve.remove,Ve}else throw new ap(`"${b}.${j}()" is not implemented on ${A}`,Ha.Unimplemented)});return j==="addListener"&&(T.remove=async()=>z()),T};return O.toString=()=>`${j.toString()}() { [capacitor code] }`,Object.defineProperty(O,"name",{value:j,writable:!1,configurable:!1}),O},Z=K("addListener"),ce=K("removeListener"),J=(j,z)=>{const O=Z({eventName:j},z),k=async()=>{const L=await O;ce({eventName:j,callbackId:L},z)},T=new Promise(L=>O.then(()=>L({remove:k})));return T.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},T},F=new Proxy({},{get(j,z){switch(z){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return P?J:Z;case"removeListener":return ce;default:return K(z)}}});return r[b]=F,f.set(b,{name:b,proxy:F,platforms:new Set([...Object.keys(N),...P?[A]:[]])}),F};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=i,t.handleError=p,t.isNativePlatform=l,t.isPluginAvailable=c,t.registerPlugin=y,t.Exception=ap,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},RA=n=>n.Capacitor=AA(n),Op=RA(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ag=Op.registerPlugin;class bN{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const l=this.windowListeners[e];l&&!l.registered&&this.addWindowListener(l),r&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const i=this.listeners[e];if(!i){if(r){let l=this.retainedEventArguments[e];l||(l=[]),l.push(t),this.retainedEventArguments[e]=l}return}i.forEach(l=>l(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new Op.Exception(e,Ha.Unimplemented)}unavailable(e="not available"){return new Op.Exception(e,Ha.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const pv=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),mv=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class MA extends bN{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,l]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=mv(i).trim(),l=mv(l).trim(),t[i]=l}),t}async setCookie(e){try{const t=pv(e.key),r=pv(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,l=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${l}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}ag("CapacitorCookies",{web:()=>new MA});const DA=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),LA=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,l,c)=>(i[l]=n[e[c]],i),{})},VA=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[l,c]=i;let d,p;return Array.isArray(c)?(p="",c.forEach(f=>{d=e?encodeURIComponent(f):f,p+=`${l}=${d}&`}),p.slice(0,-1)):(d=e?encodeURIComponent(c):c,p=`${l}=${d}`),`${r}&${p}`},"").substr(1):null,zA=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=LA(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const l=new URLSearchParams;for(const[c,d]of Object.entries(n.data||{}))l.set(c,d);t.body=l.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const l=new FormData;if(n.data instanceof FormData)n.data.forEach((d,p)=>{l.append(p,d)});else for(const d of Object.keys(n.data))l.append(d,n.data[d]);t.body=l;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class OA extends bN{async request(e){const t=zA(e,e.webFetchExtra),r=VA(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,l=await fetch(i,t),c=l.headers.get("content-type")||"";let{responseType:d="text"}=l.ok?e:{};c.includes("application/json")&&(d="json");let p,f;switch(d){case"arraybuffer":case"blob":f=await l.blob(),p=await DA(f);break;case"json":p=await l.json();break;case"document":case"text":default:p=await l.text()}const y={};return l.headers.forEach((b,N)=>{y[N]=b}),{data:p,headers:y,status:l.status,url:l.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}ag("CapacitorHttp",{web:()=>new OA});async function FA(n){try{const e=globalThis.Capacitor||window.Capacitor,t=e&&e.Plugins&&e.Plugins.UpdaterPlugin;if(t&&t.downloadAndInstall){await t.downloadAndInstall({url:n});return}}catch{}throw new Error("UpdaterPlugin not available")}ag("UpdaterPlugin",{web:()=>({openUrl:async()=>{console.warn("UpdaterPlugin not available on web")}})});const UA="https://spoilme-edee0.web.app/Spoil-Me-Vintage-0.1.apk",BA=()=>{if(typeof navigator>"u")return!1;const n=navigator.userAgent||navigator.vendor||"";return/Android|iPhone|iPad|iPod/i.test(n)};function qA({apkUrl:n=UA,playStoreUrl:e}){const[t,r]=D.useState(!1);if(D.useEffect(()=>{if(!BA())return;localStorage.getItem("appPromptDismissed")||r(!0)},[]),!t)return null;const i=()=>{localStorage.setItem("appPromptDismissed",String(Date.now())),r(!1)},l=()=>{window.location.href=n},c=async()=>{try{window.Capacitor&&window.Capacitor.isNativePlatform&&window.Capacitor.isNativePlatform()?await FA(n):window.open(n,"_blank")}catch(d){console.error("Updater error",d),window.open(n,"_blank")}i()};return s.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:i}),s.jsxs("div",{className:"relative bg-zinc-900 rounded-xl p-6 w-[92%] max-w-md text-gray-100",children:[s.jsx("h3",{className:"text-lg font-bold mb-2",children:"Make your experience better  download the app"}),s.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"Get faster checkout, push notifications, and a native experience."}),s.jsxs("div",{className:"flex gap-3",children:[e?s.jsx("a",{className:"px-4 py-2 bg-cyan-500 text-black rounded font-semibold",href:e,children:"Get it on Google Play"}):s.jsx("button",{onClick:l,className:"px-4 py-2 bg-green-500 text-black rounded font-semibold",children:"Download APK"}),s.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded font-semibold",children:"Open installer"}),s.jsx("button",{onClick:i,className:"px-4 py-2 ring-1 ring-gray-700 rounded text-gray-300",children:"Maybe later"})]})]})]})}const $A=()=>{const[n,e]=D.useState(!1),{cart:t,user:r,isStickyProgressBarVisible:i,setIsStickyProgressBarVisible:l,getCartTotal:c}=Rt(),d=Yi();D.useEffect(()=>{window.scrollTo(0,0)},[d.pathname]);const p=t.reduce((N,E)=>N+E.quantity,0),f=c(),y=r.wishlist?r.wishlist.length:0,b=r.notifications?r.notifications.filter(N=>!N.isRead).length:0;return s.jsxs("div",{className:"min-h-screen flex flex-col bg-black text-gray-100",children:[s.jsx("style",{children:`
        @keyframes marquee {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
        .animate-marquee {
          animation: marquee 10s linear infinite;
        }
        .animate-marquee:hover {
          animation-play-state: paused;
        }
      `}),s.jsx("div",{className:"w-full bg-zinc-900 border-b border-white/5 overflow-hidden py-2 relative z-[60]",children:s.jsxs("div",{className:"flex animate-marquee whitespace-nowrap",children:[s.jsxs("div",{className:"flex items-center gap-8 px-4",children:[s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(oi,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(kr,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(os,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[s.jsx(Yt,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[s.jsx(Gl,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[s.jsx(Ur,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(ic,{size:14,className:"text-green-500"})," And lots more!"]})]}),s.jsxs("div",{className:"flex items-center gap-8 px-4",children:[s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(oi,{size:14,className:"text-cyan-400"})," Trusted by 10,000+ Shoppers"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(kr,{size:14,className:"text-yellow-400"})," Sold over 50,000 unique vintage pieces"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(os,{size:14,className:"text-green-400"})," Free Shipping over R500"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-pink-300 uppercase tracking-wider",children:[s.jsx(Yt,{size:14,className:"text-pink-500"})," Membership Perk: Free Gifts on Valentine's, Mother's & Father's Day"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-purple-300 uppercase tracking-wider",children:[s.jsx(Gl,{size:14,className:"text-purple-500"})," Membership Perk: Pay as little as R8 per item"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-cyan-300 uppercase tracking-wider",children:[s.jsx(Ur,{size:14,className:"text-cyan-500"})," Membership Perk: R50 - R200 Birthday Voucher"]}),s.jsx("span",{className:"text-gray-700",children:""}),s.jsxs("span",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold text-gray-300 uppercase tracking-wider",children:[s.jsx(ic,{size:14,className:"text-green-500"})," And lots more!"]})]})]})}),s.jsxs("header",{className:"sticky top-0 z-50 bg-black/95 backdrop-blur-sm border-b border-gray-800 transition-all",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"relative flex flex-col lg:flex-row items-center justify-center lg:justify-between h-auto lg:h-20 py-4 lg:py-0 gap-3",children:[s.jsx("button",{className:"absolute top-1/2 -translate-y-1/2 left-4 lg:hidden p-2 rounded-md text-gray-400 hover:text-white",onClick:()=>e(!n),children:n?s.jsx(vn,{size:24}):s.jsx(dA,{size:24})}),s.jsxs(Ie,{to:"/",className:"flex-shrink-0 group flex flex-col items-center leading-none",children:[s.jsx("span",{className:"font-cherry text-[24px] font-bold text-pink-500 group-hover:text-pink-400 transition-colors drop-shadow-[0_0_5px_rgba(236,72,153,0.5)]",children:"Spoil Me"}),s.jsx("span",{className:"font-cherry text-[24px] font-bold text-cyan-400 group-hover:text-cyan-300 transition-colors drop-shadow-[0_0_5px_rgba(34,211,238,0.5)] ml-7 -mt-1",children:"Vintage"})]}),s.jsxs("nav",{className:"hidden lg:flex absolute left-1/2 -translate-x-1/2 space-x-8",children:[s.jsx(Ie,{to:"/",className:`text-sm font-medium hover:text-cyan-400 transition-colors ${d.pathname==="/"?"text-cyan-400":"text-gray-300"}`,children:"Home"}),s.jsx(Ie,{to:"/#catalog",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Catalog"}),s.jsxs(Ie,{to:"/membership",className:`text-sm font-medium flex items-center gap-1 hover:text-purple-400 transition-colors ${d.pathname==="/membership"?"text-purple-400 font-bold":"text-gray-300"}`,children:[s.jsx(Er,{size:14})," Membership"]}),s.jsx(Ie,{to:"/#specials",className:"text-sm font-medium text-gray-300 hover:text-cyan-400 transition-colors",children:"Specials"})]}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-3 w-full lg:w-auto justify-center lg:justify-end",children:[s.jsx("button",{className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors",children:s.jsx(oh,{size:20})}),r.email?s.jsx(Ie,{to:"/earn-rewards",className:"group flex items-center justify-center p-2 relative",title:"Your Loyalty Rewards",children:s.jsxs("div",{className:"flex items-center gap-1.5 hover:bg-purple-900/50 px-2 py-1 rounded-full transition-colors border border-transparent hover:border-purple-500/30",children:[s.jsx(Ur,{size:20,className:"text-purple-400 group-hover:text-pink-400"}),s.jsx("span",{className:"hidden md:inline-block text-xs font-bold text-purple-200 group-hover:text-white",children:r.loyaltyPoints})]})}):s.jsx(Ie,{to:"/earn-rewards",className:"p-2 text-gray-400 hover:text-purple-400 transition-colors relative",title:"Earn Rewards",children:s.jsx(Ur,{size:20})}),r.email&&s.jsxs(Ie,{to:"/profile",className:"p-2 text-gray-400 hover:text-yellow-400 transition-colors relative group",children:[s.jsx(dN,{size:20}),b>0&&s.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-yellow-400 rounded-full shadow-[0_0_5px_rgba(250,204,21,0.8)]",children:b})]}),s.jsxs(Ie,{to:"/profile",className:"p-2 text-gray-400 hover:text-pink-500 transition-colors relative group",children:[s.jsx(rg,{size:20}),y>0&&s.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-pink-600 rounded-full shadow-[0_0_5px_rgba(236,72,153,0.8)]",children:y})]}),r.email?s.jsx(Ie,{to:"/profile",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative",children:s.jsx(uc,{size:20})}):s.jsx(Ie,{to:"/login",className:"p-2 text-gray-400 hover:text-cyan-400 transition-colors relative flex items-center gap-1",children:s.jsx(gN,{size:20})}),s.jsxs(Ie,{to:"/cart",className:"p-2 text-gray-400 hover:text-pink-500 transition-colors relative group",children:[s.jsx(ig,{size:20}),p>0&&s.jsx("span",{className:"absolute top-1 right-0 inline-flex items-center justify-center w-4 h-4 text-[10px] font-bold leading-none text-black transform translate-x-1/4 -translate-y-1/4 bg-green-400 rounded-full shadow-[0_0_5px_rgba(74,222,128,0.8)]",children:p})]})]})]})}),n&&s.jsx("div",{className:"lg:hidden absolute top-full left-0 w-full bg-zinc-900 border-b border-gray-800 shadow-lg animate-in slide-in-from-top-5 duration-200 z-40",children:s.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[s.jsx(Ie,{to:"/",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Home"}),s.jsxs(Ie,{to:"/membership",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-purple-400 hover:bg-zinc-800 hover:text-purple-300 flex items-center gap-2",children:[s.jsx(Er,{size:16})," Membership Perks"]}),s.jsxs(Ie,{to:"/earn-rewards",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center gap-2",children:[s.jsx(Ur,{size:16,className:"text-purple-400"}),r.email?"My Rewards":"Earn Rewards",r.email&&s.jsxs("span",{className:"bg-purple-900/50 text-purple-200 text-[10px] px-2 py-0.5 rounded-full font-bold ml-auto",children:[r.loyaltyPoints," Pts"]})]}),s.jsxs(Ie,{to:"/affiliate-program",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-green-400 flex items-center gap-2",children:[s.jsx(og,{size:16,className:"text-green-500"})," Partnership Program"]}),r.email?s.jsxs(Ie,{to:"/profile",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400 flex items-center justify-between",children:["My Profile",b>0&&s.jsxs("span",{className:"bg-yellow-400 text-black text-xs px-2 py-0.5 rounded-full font-bold",children:[b," New"]})]}):s.jsx(Ie,{to:"/login",onClick:()=>e(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-gray-200 hover:bg-zinc-800 hover:text-cyan-400",children:"Login / Register"})]})})]}),s.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx(Ab,{})}),s.jsx(jA,{}),i&&f>0&&s.jsx(vN,{subtotal:f,isSticky:!0,onClose:()=>l(!1)}),s.jsx(qA,{}),s.jsx("footer",{className:"bg-zinc-950 border-t border-gray-800 py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"About"}),s.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Our Story"}),s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Careers"}),s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Press"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-cyan-400 tracking-wider uppercase mb-4",children:"Support"}),s.jsxs("ul",{className:"space-y-3 text-sm text-gray-400",children:[s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Contact Us"}),s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Shipping"}),s.jsx("li",{className:"hover:text-white cursor-pointer",children:"Returns"}),s.jsx("li",{className:"hover:text-green-400 cursor-pointer flex items-center gap-2 text-gray-300 font-medium",children:s.jsxs("a",{href:"https://spoilme-edee0.web.app/Spoil-Me-Vintage-0.1.apk",download:!0,style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"inherit",textDecoration:"none"},children:[s.jsx(Xs,{size:14})," Download App"]})})]})]})]}),r.isAdmin&&s.jsx("div",{className:"mt-12 pt-8 border-t border-gray-900 flex justify-center",children:s.jsxs(Ie,{to:"/admin",className:"flex items-center gap-2 text-xs text-red-400 hover:text-red-300 uppercase tracking-widest font-bold transition-colors bg-red-900/10 px-4 py-2 rounded border border-red-900/30",children:[s.jsx(zp,{size:14})," Admin Dashboard"]})})]})})]})},HA=()=>{const n=Yi(),e=as(),{user:t}=Rt();D.useEffect(()=>{t.isAdmin||e("/login")},[t,e]);const r=[{path:"/admin",icon:zp,label:"Dashboard"},{path:"/admin/orders",icon:Ki,label:"Orders"},{path:"/admin/products",icon:Td,label:"Products"},{path:"/admin/categories",icon:NA,label:"Categories"},{path:"/admin/gift-cards",icon:Yt,label:"Gift Cards"},{path:"/admin/social",icon:Oo,label:"Social Studio"},{path:"/admin/affiliates",icon:oi,label:"Affiliates"},{path:"/admin/winners",icon:ns,label:"Weekly Winners"},{path:"/admin/expenses",icon:Cs,label:"Expenses"}];return t.isAdmin?s.jsxs("div",{className:"min-h-screen bg-black flex text-gray-100",children:[s.jsxs("aside",{className:"w-64 bg-zinc-900 border-r border-gray-800 hidden md:flex flex-col fixed h-full",children:[s.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-800",children:[s.jsx("span",{className:"text-xl font-bold text-pink-500 drop-shadow-[0_0_3px_rgba(236,72,153,0.6)]",children:"Spoil Me Vintage"}),s.jsx("span",{className:"ml-2 text-xs bg-purple-900/50 border border-purple-500/50 text-purple-300 px-2 py-0.5 rounded",children:"ADMIN"})]}),s.jsxs("nav",{className:"flex-1 p-4 space-y-1",children:[s.jsxs(Ie,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium text-gray-400 hover:bg-zinc-800 hover:text-white rounded-lg mb-4 transition-colors",children:[s.jsx(sc,{size:18})," Back to Store"]}),s.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase px-4 mb-2 mt-6",children:"Management"}),r.map(i=>{const l=n.pathname===i.path;return s.jsxs(Ie,{to:i.path,className:`flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-colors ${l?"bg-pink-900/20 text-pink-400 border border-pink-500/20":"text-gray-400 hover:bg-zinc-800 hover:text-white"}`,children:[s.jsx(i.icon,{size:18})," ",i.label]},i.path)})]})]}),s.jsx("main",{className:"flex-1 md:ml-64 p-8 overflow-y-auto bg-black",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:s.jsx(Ab,{})})}),s.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 w-full bg-zinc-900 border-t border-gray-800 flex justify-around py-3 z-50 overflow-x-auto",children:[s.jsx(Ie,{to:"/admin",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(zp,{size:24})}),s.jsx(Ie,{to:"/admin/orders",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Ki,{size:24})}),s.jsx(Ie,{to:"/admin/products",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Td,{size:24})}),s.jsx(Ie,{to:"/admin/social",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Oo,{size:24})}),s.jsx(Ie,{to:"/admin/gift-cards",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Yt,{size:24})}),s.jsx(Ie,{to:"/admin/affiliates",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(oi,{size:24})}),s.jsx(Ie,{to:"/admin/expenses",className:"p-2 text-gray-400 hover:text-white",children:s.jsx(Cs,{size:24})})]})]}):null},dr=({product:n})=>{const{addToCart:e,toggleWishlist:t,user:r,cart:i}=Rt(),[l,c]=D.useState(!1),d=r.wishlist.includes(n.id),p=as(),f=new Date,y=n.promoStartsAt?new Date(n.promoStartsAt):null,b=n.promoExpiresAt?new Date(n.promoExpiresAt):null,N=y&&!isNaN(y.getTime()),E=b&&!isNaN(b.getTime()),A=(n.promoPrice||0)>0&&(!N||y<=f)&&(!E||b>f),P=parseFloat((n.price*.8).toFixed(2));let I=n.price,$=!1,W="none";r.isMember?($=!0,A?r.membershipTier==="deluxe"&&n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0?(I=n.promoDeluxeMemberPrice,W="deluxe"):r.membershipTier==="premium"&&n.promoPremiumMemberPrice&&n.promoPremiumMemberPrice>0?(I=n.promoPremiumMemberPrice,W="premium"):r.membershipTier==="basic"&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?(I=n.promoBasicMemberPrice,W="basic"):I=Math.min(P,n.promoPrice||1/0):I=P):A&&(I=n.promoPrice);const K=A&&n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0?n.promoBasicMemberPrice:P,ce=n.reviews&&n.reviews.length>0?(n.reviews.reduce((Se,Pe)=>Se+Pe.rating,0)/n.reviews.length).toFixed(1):"5.0",J=n.reviews?n.reviews.length:0,F=n.soldCount||0,z=A?(()=>{if(!E||!b)return null;const Se=b.getTime()-f.getTime();if(Se<=0)return null;const Pe=Math.floor(Se/(1e3*60*60*24)),B=Math.floor(Se%(1e3*60*60*24)/(1e3*60*60)),ve=Math.floor(Se%(1e3*60*60)/(1e3*60));return Pe>0?`${Pe}d ${B}h`:`${B}h ${ve}m`})():null,O=n.type==="Ring"||n.showEarringOptions&&n.earringMaterials&&n.earringMaterials.length>1||n.type==="Pendant"&&n.chainStyles&&n.chainStyles.length>1,k=n.stock<=0,T=i.filter(Se=>Se.id===n.id).reduce((Se,Pe)=>Se+Pe.quantity,0),L=!O&&T>=n.stock,me=()=>{k||L||(O?p(`/product/${n.id}`):e({...n,price:I}))},Ve=A&&(n.promoBasicMemberPrice&&n.promoBasicMemberPrice>0||n.promoDeluxeMemberPrice&&n.promoDeluxeMemberPrice>0);return s.jsxs("div",{className:"group relative bg-zinc-900 rounded-lg shadow-[0_0_30px_rgba(255,255,255,0.15)] hover:shadow-pink-500/20 transition-all duration-300 border border-gray-800 hover:border-pink-500/50 z-0 flex flex-col h-full",children:[s.jsxs(Ie,{to:`/product/${n.id}`,className:"block relative overflow-hidden aspect-square rounded-t-lg",children:[s.jsx("img",{src:n.images[0],alt:n.name,onError:Se=>{console.warn("Image failed to load in ProductCard:",Se.currentTarget.src)},className:`w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500 ${k?"opacity-50 grayscale":"opacity-90 group-hover:opacity-100"}`}),s.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1 z-10",children:[$&&s.jsxs("span",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-purple-400/30 flex items-center gap-1",children:[s.jsx(Er,{size:10,fill:"currentColor"}),W!=="none"?`${W.toUpperCase()} PRICE`:"MEMBER"]}),!$&&A&&s.jsx("span",{className:"bg-green-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-green-500/30",children:"PROMO"}),n.isNewArrival&&s.jsx("span",{className:"bg-cyan-600 text-white text-[10px] font-bold px-2 py-1 rounded-sm shadow-sm border border-cyan-500/30",children:"NEW"})]}),k&&s.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center z-20",children:s.jsx("div",{className:"border-2 border-white px-4 py-2 transform -rotate-12 backdrop-blur-sm",children:s.jsx("span",{className:"text-white font-bold uppercase tracking-widest text-lg",children:"Sold Out"})})}),A&&z&&!k&&s.jsxs("div",{className:"absolute bottom-0 left-0 w-full bg-black/80 backdrop-blur-md py-1 px-2 flex items-center justify-center gap-1.5 text-[10px] text-green-400 font-bold border-t border-green-500/30",children:[s.jsx(ii,{size:10})," Ends in: ",z]})]}),s.jsx("button",{onClick:Se=>{Se.preventDefault(),t(n.id)},className:`absolute top-2 right-2 p-2 rounded-full bg-black/50 backdrop-blur-md shadow-md transition-colors border border-transparent hover:border-pink-500 z-20 ${d?"text-pink-500":"text-gray-300 hover:text-white"}`,children:s.jsx(rg,{size:18,fill:d?"currentColor":"none"})}),s.jsxs("div",{className:"p-4 rounded-b-lg flex flex-col flex-1 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:"text-xs text-cyan-400 font-medium uppercase tracking-wider truncate pr-2",children:n.category}),s.jsx("button",{onClick:me,disabled:k||L,className:`p-1.5 rounded-full transition-all flex-shrink-0 -mt-1 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed ${r.isMember?"bg-purple-600/20 text-purple-400 hover:bg-purple-600 hover:text-white border border-purple-500/30":"bg-zinc-800 text-gray-300 hover:bg-cyan-500 hover:text-black border border-gray-700"}`,title:O?"View Options":k?"Sold Out":L?"Stock limit in cart":"Add to Cart",children:O?s.jsx(Vp,{size:16}):s.jsx(Ki,{size:16})})]}),s.jsx(Ie,{to:`/product/${n.id}`,children:s.jsx("h3",{className:"text-sm font-bold text-gray-100 leading-tight group-hover:text-pink-500 transition-colors line-clamp-2 h-10",children:n.name})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[s.jsx(Zs,{size:12,fill:"currentColor"}),s.jsx("span",{className:"text-xs font-bold text-gray-300",children:ce}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:["(",J,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[F>0&&s.jsxs("div",{className:"text-gray-500 font-medium flex items-center gap-1",children:[F," sold"]}),n.stock>0&&n.stock<=5&&s.jsx("div",{className:"text-orange-400 font-medium flex items-center gap-1",children:"Low Stock"})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 min-h-[20px]",children:[n.compareAtPrice&&s.jsxs("div",{className:"flex items-center gap-1 relative",children:[s.jsxs("span",{className:"text-[10px] text-gray-500 line-through",children:["RRP R",n.compareAtPrice.toFixed(2)]}),s.jsx("button",{onClick:Se=>{Se.preventDefault(),c(!l)},className:"text-gray-600 hover:text-gray-400 focus:outline-none",children:s.jsx(ih,{size:10})}),l&&s.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-48 p-2 bg-zinc-950 border border-gray-700 rounded shadow-xl text-[10px] text-gray-300 z-50",children:"Recommended retail price."})]}),s.jsxs("span",{className:"text-sm font-bold text-green-400",children:["Retail R",n.price.toFixed(2)]})]}),s.jsx("div",{className:"mt-auto pt-2 border-t border-gray-800/50",children:r.isMember?s.jsx("div",{className:"flex items-end justify-between",children:s.jsxs("div",{className:"flex flex-col w-full",children:[s.jsxs("span",{className:"text-[10px] font-bold text-purple-400 uppercase tracking-wide flex items-center gap-1",children:[s.jsx(Er,{size:10})," ",W!=="none"?W:"Member"," Price"]}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("span",{className:"text-2xl font-bold text-white drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:["R",I.toFixed(2)]}),I<n.price&&s.jsxs("span",{className:"text-xs text-gray-500 line-through",children:["R",n.price.toFixed(2)]})]})]})}):s.jsx("div",{className:"flex items-end justify-between",children:s.jsxs("div",{className:"flex flex-col w-full",children:[A?s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("span",{className:"text-2xl font-bold text-green-400",children:["R",I.toFixed(2)]}),s.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["R",n.price.toFixed(2)]})]}):null,Ve?s.jsxs("div",{className:"flex flex-col gap-0.5 mt-1",children:[s.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[s.jsx("span",{children:"Basic & Premium:"}),s.jsxs("span",{className:"text-purple-400 font-bold",children:["R",(n.promoBasicMemberPrice||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[s.jsx("span",{children:"Deluxe:"}),s.jsxs("span",{className:"text-purple-400 font-bold",children:["R",(n.promoDeluxeMemberPrice||0).toFixed(2)]})]})]}):s.jsxs("div",{className:"text-[10px] text-gray-400 flex items-center gap-1 mt-0.5",children:["Members: ",s.jsxs("span",{className:"text-purple-400 font-bold",children:["R",K.toFixed(2)]})]})]})})})]})]})},GA=n=>!!n&&/^https?:\/\//i.test(n),WA=n=>!!n&&n.startsWith("data:"),KA=n=>!!n&&n.startsWith("blob:"),JA=n=>!!n&&n.startsWith("gs://");async function YA(n){if(!n)return null;if(typeof n=="string"){if(GA(n)||WA(n)||KA(n)||n.startsWith("/"))return n;if(JA(n)){const e=n.match(/^gs:\/\/[^/]+\/(.+)$/),t=e?e[1]:n;try{return xn?await Gs(Ws(xn,decodeURIComponent(t).replace(/^\//,""))):null}catch(r){return console.warn("Failed to resolve gs:// URL",n,r),null}}try{return xn?await Gs(Ws(xn,n.replace(/^\//,""))):n}catch{}return n}if(typeof n=="object"){const e=n.fullPath||n.path||n.name||null;if(e&&xn)try{return await Gs(Ws(xn,e.replace(/^\//,"")))}catch(t){return console.warn("Failed to resolve storage object image path",n,t),null}}return null}function wN(n,e){const[t,r]=D.useState(e||void 0);return D.useEffect(()=>{let i=!0;if(!n){r(e);return}return(async()=>{try{const l=await YA(n);i&&r(l||e)}catch(l){console.error("Error resolving image src",l),i&&r(e)}})(),()=>{i=!1}},[n,e]),t}const jd=({src:n,alt:e="",className:t,fallback:r,onError:i})=>{const l=wN(n,r||"https://via.placeholder.com/600");return s.jsx("img",{src:l,alt:e,className:t,onError:c=>{i==null||i(c)}})},QA=()=>{const{products:n,categories:e,specials:t,user:r,memberCount:i,weeklyWinners:l}=Rt(),c=D.useRef(null),d=D.useRef(null),p=D.useRef(null),f=D.useRef(null),y=D.useRef(null),b=D.useRef(null),N=D.useRef(null),E=D.useRef(null),A=D.useRef(null),P=D.useRef(null),I=n.filter(T=>T.isBestSeller),$=n.filter(T=>T.type==="Ring"||T.isFeaturedRing),W=n.filter(T=>T.type==="Bracelet"||T.isFeaturedBracelet),K=n.filter(T=>T.isUniquePendant),Z=n.filter(T=>T.type==="Stud"||T.isFeaturedStud),ce=n.filter(T=>T.type==="Dangle"||T.isFeaturedDangle),J=n.filter(T=>T.isJewelrySet),F=n.filter(T=>T.type==="Watch"||T.isFeaturedWatch),j=n.filter(T=>T.type==="Jewelry Box"||T.isFeaturedJewelryBox),z=n.filter(T=>T.type==="Perfume Holder"||T.isFeaturedPerfumeHolder),O=800-i,k=(T,L)=>{if(T.current){const me=T.current.clientWidth*.8;T.current.scrollBy({left:L==="right"?me:-me,behavior:"smooth"})}};return s.jsxs("div",{className:"space-y-12",children:[s.jsx("div",{className:"space-y-2",children:s.jsxs("section",{className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-pink-900 via-purple-900 to-indigo-900 border border-pink-500/30 shadow-[0_0_20px_rgba(236,72,153,0.2)] group hover:shadow-[0_0_30px_rgba(236,72,153,0.4)] transition-all",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-full bg-white/5 skew-x-12 translate-x-20 group-hover:translate-x-10 transition-transform duration-700"}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between p-6 md:p-8 relative z-10 gap-6",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"p-4 bg-white/10 backdrop-blur-md rounded-full border border-white/20 shadow-lg hidden sm:block",children:s.jsx(oc,{size:32,className:"text-pink-300"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"bg-green-500 text-white text-[10px] font-bold px-2 py-0.5 rounded shadow animate-pulse",children:"LIMITED OFFER"}),s.jsx("span",{className:"text-pink-300 text-xs font-bold uppercase tracking-wider",children:"Give the perfect gift"})]}),s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-1",children:"Buy a Gift Voucher"}),s.jsxs("p",{className:"text-sm md:text-base text-gray-200",children:["Purchase between ",s.jsx("strong",{className:"text-white",children:"R250 - R500"})," and get an ",s.jsx("span",{className:"text-yellow-300 font-bold underline decoration-wavy",children:"EXTRA R100"})," to spend!"]})]})]}),s.jsxs(Ie,{to:"/gift-cards",className:"whitespace-nowrap px-8 py-3 bg-white text-purple-900 font-bold rounded-full hover:bg-gray-100 transition-colors shadow-lg flex items-center gap-2 group/btn",children:["Create Voucher ",s.jsx(At,{size:18,className:"group-hover/btn:translate-x-1 transition-transform"})]})]})]})}),s.jsxs("div",{className:"relative rounded-2xl overflow-hidden border-4 border-cyan-500",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[s.jsxs("section",{className:"relative bg-zinc-900 text-white",children:[s.jsxs("div",{className:`absolute top-2 right-2 text-xs font-bold px-3 py-1 rounded-full border shadow-md z-20 ${O<=20?"bg-red-600 border-red-400 text-white animate-pulse":"bg-black/50 border-cyan-500/50 text-cyan-300"}`,children:[O," spot",O!==1?"s":""," left"]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-cyan-900/10 via-black to-zinc-900"}),s.jsx("div",{className:"relative z-10 p-4 flex flex-col justify-center",children:s.jsxs("div",{className:"max-w-3xl mx-auto text-center space-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-sm font-bold text-cyan-400",children:" Spoil Me Package"}),s.jsx("h2",{className:"font-cherry text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-cyan-400 drop-shadow-lg py-1",children:"Join the club Win weekly."}),s.jsx("p",{className:"text-sm text-gray-300",children:"All for just R19/month  cancel whenever you want!"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center pt-2",children:[s.jsxs(Ie,{to:"/membership",className:"px-5 py-2.5 bg-pink-600 hover:bg-pink-500 text-white rounded-lg font-semibold transition-all hover:shadow-[0_0_20px_rgba(236,72,153,0.6)] flex items-center justify-center gap-2 text-xs",children:["Join Now ",s.jsx(At,{size:14})]}),s.jsxs(Ie,{to:"/weekly-winners",className:"px-5 py-2.5 border border-gray-500 hover:border-cyan-400 hover:text-cyan-400 hover:bg-cyan-950/30 text-gray-300 rounded-lg font-semibold transition-all text-xs flex items-center justify-center gap-2",children:["View This Week's Winners ",s.jsx(ns,{size:14})]})]})]})})]}),l.length>0&&s.jsx("section",{className:"bg-gradient-to-r from-amber-300 via-yellow-400 to-amber-300 py-3 overflow-hidden border-t-2 border-cyan-500/50",children:s.jsx("div",{className:"flex animate-marquee whitespace-nowrap",style:{animationDuration:"40s"},children:[...l,...l].map((T,L)=>s.jsxs("div",{className:"flex items-center mx-6",children:[s.jsx(ns,{size:16,className:"text-amber-700 mr-3 shrink-0"}),s.jsx("span",{className:"text-sm text-black font-bold tracking-wide",children:T.name}),s.jsx("span",{className:"text-xs text-zinc-700 font-medium mx-2",children:"won"}),s.jsxs("span",{className:"text-sm font-extrabold text-black",children:["R",T.prize.toFixed(2),"!"]})]},L))})})]}),I.length>0&&s.jsxs("section",{children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-yellow-400 pb-1 inline-block transform -rotate-1 drop-shadow-[0_0_5px_rgba(250,204,21,0.5)]",children:"Best Sellers"}),s.jsxs(Ie,{to:"/catalog/best",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(At,{size:14})]})]}),s.jsxs("div",{className:"relative group/slider",children:[s.jsx("button",{onClick:()=>k(c,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/slider:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(So,{size:20})}),s.jsx("button",{onClick:()=>k(c,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/slider:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Fr,{size:20})}),s.jsx("div",{ref:c,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:I.map(T=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(dr,{product:T})},T.id))})]})]}),s.jsxs("section",{children:[s.jsx("div",{className:"flex justify-between items-end mb-6",children:s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-b-2 border-purple-500 pb-1 inline-block transform -rotate-1 drop-shadow-[0_0_5px_rgba(168,85,247,0.5)]",children:"Shop by Category"})}),s.jsx("div",{className:"grid grid-cols-3 gap-1 md:gap-8 md:p-4",children:e.map(T=>{const L=T.name==="Red Collection",me=`/collections/${encodeURIComponent(T.name)}`;return L?s.jsx("div",{className:"relative aspect-[4/5] md:aspect-square group cursor-pointer z-10",children:s.jsxs(Ie,{to:me,className:"block w-full h-full relative rounded-xl md:rounded-2xl overflow-hidden bg-zinc-900 text-white border-2 md:border-4 border-black transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 15px 3px rgba(220, 38, 38, 0.6)"},children:[s.jsx(jd,{src:T.image,alt:T.name,className:"w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity",fallback:"https://via.placeholder.com/600",onError:Ve=>{console.warn("Image failed to load in Home category:",Ve.currentTarget.src),Ve.currentTarget.src="https://via.placeholder.com/600"}}),s.jsxs("div",{className:"absolute bottom-0 left-0 p-1.5 md:p-4 w-full bg-gradient-to-t from-black/80 to-transparent",children:[s.jsx("h3",{className:"font-handwriting text-xl md:text-3xl font-bold mb-0.5 md:mb-1 text-white drop-shadow-md truncate",children:T.name}),s.jsx("p",{className:"text-gray-200 text-[9px] md:text-xs drop-shadow-md line-clamp-1",children:T.description})]})]})},T.id):s.jsx("div",{className:"relative aspect-[4/5] md:aspect-square cursor-pointer overflow-hidden transition-all duration-300 rounded-lg md:rounded-xl border border-gray-800 bg-zinc-900 hover:border-gray-600 group",children:s.jsxs(Ie,{to:me,className:"block w-full h-full relative",children:[s.jsx(jd,{src:T.image,alt:T.name,className:"w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity",fallback:"https://via.placeholder.com/600",onError:Ve=>{console.warn("Image failed to load in Home category alt:",Ve.currentTarget.src),Ve.currentTarget.src="https://via.placeholder.com/600"}}),s.jsxs("div",{className:"absolute bottom-0 left-0 p-1.5 md:p-4 w-full bg-gradient-to-t from-black/80 to-transparent",children:[s.jsx("h3",{className:"font-handwriting text-xl md:text-3xl font-bold mb-0.5 md:mb-1 text-white drop-shadow-md truncate",children:T.name}),s.jsx("p",{className:"text-gray-200 text-[9px] md:text-xs drop-shadow-md line-clamp-1",children:T.description})]})]})},T.id)})})]}),s.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 py-8 border-y border-gray-800 bg-zinc-900/50 backdrop-blur-sm rounded-xl px-6 my-8",children:[s.jsxs(Ie,{to:"/earn-rewards",className:"flex items-center gap-3 group cursor-pointer",children:[s.jsx("div",{className:"p-3 bg-zinc-800 text-pink-500 rounded-full shadow-[0_0_10px_rgba(236,72,153,0.2)] group-hover:shadow-[0_0_15px_rgba(236,72,153,0.5)] transition-all",children:r.email?s.jsx(Ur,{size:20}):s.jsx(Yt,{size:20})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-100 text-base",children:r.email?`My Points: ${r.loyaltyPoints}`:"Loyalty Rewards"}),s.jsx("p",{className:"text-xs text-gray-400",children:r.email?"Redeem for discounts or earn more":"Earn points on every vintage find."})]})]}),s.jsxs(Ie,{to:"/affiliate-program",className:"flex items-center gap-3 group cursor-pointer",children:[s.jsx("div",{className:"p-3 bg-zinc-800 text-green-400 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.2)] group-hover:shadow-[0_0_15px_rgba(74,222,128,0.5)] transition-all",children:s.jsx(og,{size:20})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-100 text-base",children:"Partnership Program"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Earn 20% commission on referrals."})]})]}),s.jsxs("div",{className:"flex items-center gap-3 group",children:[s.jsx("div",{className:"p-3 bg-zinc-800 text-cyan-400 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.2)] group-hover:shadow-[0_0_15px_rgba(34,211,238,0.5)] transition-all",children:s.jsx(ii,{size:20})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-100 text-base",children:"Flash Sales"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Daily limited-time offers."})]})]})]}),K.length>0&&s.jsxs("section",{children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-purple-500 pl-4 inline-block",children:"Unique Pendants"}),s.jsxs(Ie,{to:"/catalog/unique",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(At,{size:14})]})]}),s.jsxs("div",{className:"relative group/pendants",children:[s.jsx("button",{onClick:()=>k(f,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/pendants:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(So,{size:20})}),s.jsx("button",{onClick:()=>k(f,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/pendants:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Fr,{size:20})}),s.jsx("div",{ref:f,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:K.map(T=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(dr,{product:T})},T.id))})]})]}),$.length>0&&s.jsxs("section",{id:"rings",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-500 pl-4 inline-block",children:"Rings"}),s.jsxs(Ie,{to:"/catalog/ring",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(At,{size:14})]})]}),s.jsxs("div",{className:"relative group/rings",children:[s.jsx("button",{onClick:()=>k(d,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/rings:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(So,{size:20})}),s.jsx("button",{onClick:()=>k(d,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/rings:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Fr,{size:20})}),s.jsx("div",{ref:d,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:$.map(T=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(dr,{product:T})},T.id))})]})]}),W.length>0&&s.jsxs("section",{id:"bracelets",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-teal-500 pl-4 inline-block",children:"Bracelets"}),s.jsxs(Ie,{to:"/catalog/bracelet",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(At,{size:14})]})]}),s.jsxs("div",{className:"relative group/bracelets",children:[s.jsx("button",{onClick:()=>k(p,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/bracelets:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(So,{size:20})}),s.jsx("button",{onClick:()=>k(p,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/bracelets:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Fr,{size:20})}),s.jsx("div",{ref:p,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:W.map(T=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(dr,{product:T})},T.id))})]})]}),Z.length>0&&s.jsxs("section",{id:"studs",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-400 pl-4 inline-block",children:"Stud Earrings"}),s.jsxs(Ie,{to:"/catalog/stud",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(At,{size:14})]})]}),s.jsxs("div",{className:"relative group/studs",children:[s.jsx("button",{onClick:()=>k(y,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/studs:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(So,{size:20})}),s.jsx("button",{onClick:()=>k(y,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/studs:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Fr,{size:20})}),s.jsx("div",{ref:y,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:Z.map(T=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(dr,{product:T})},T.id))})]})]}),ce.length>0&&s.jsxs("section",{id:"dangles",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-cyan-400 pl-4 inline-block",children:"Dangle Earrings"}),s.jsxs(Ie,{to:"/catalog/dangle",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(At,{size:14})]})]}),s.jsxs("div",{className:"relative group/dangles",children:[s.jsx("button",{onClick:()=>k(b,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/dangles:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Fr,{size:20})}),s.jsx("button",{onClick:()=>k(b,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/dangles:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Fr,{size:20})}),s.jsx("div",{ref:b,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:ce.map(T=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(dr,{product:T})},T.id))})]})]}),s.jsxs("section",{className:"relative overflow-hidden rounded-2xl p-8 md:p-12 text-center border-2 border-purple-500 shadow-[0_0_40px_rgba(168,85,247,0.4)] group mt-12",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900 via-black to-zinc-900"}),s.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[s.jsx("div",{className:"bg-purple-600 p-4 rounded-full shadow-[0_0_20px_rgba(168,85,247,0.6)] animate-pulse",children:s.jsx(Er,{size:40,className:"text-white"})}),s.jsx("h2",{className:"font-cherry text-3xl md:text-5xl text-white drop-shadow-md",children:"Unlock VIP Pricing"}),s.jsxs("p",{className:"text-gray-300 max-w-2xl text-lg leading-relaxed",children:["Join our exclusive membership club to save up to ",s.jsx("span",{className:"text-purple-400 font-bold",children:"50% OFF"})," retail prices, receive monthly free gifts, and access members-only collections."]}),s.jsxs(Ie,{to:"/membership",className:"px-8 py-4 bg-white text-purple-900 font-bold rounded-full hover:scale-105 transition-transform shadow-[0_0_20px_rgba(255,255,255,0.3)] flex items-center gap-2",children:["View Membership Perks ",s.jsx(At,{size:20})]})]})]}),F.length>0&&s.jsxs("section",{id:"watches",className:"mt-12",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-yellow-500 pl-4 inline-block",children:"Watches"}),s.jsxs(Ie,{to:"/catalog/watch",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(At,{size:14})]})]}),s.jsxs("div",{className:"relative group/watches",children:[s.jsx("button",{onClick:()=>k(E,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/watches:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(So,{size:20})}),s.jsx("button",{onClick:()=>k(E,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/watches:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Fr,{size:20})}),s.jsx("div",{ref:E,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:F.map(T=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(dr,{product:T})},T.id))})]})]}),j.length>0&&s.jsxs("section",{id:"jewelry-boxes",className:"mt-12",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-orange-500 pl-4 inline-block flex items-center gap-2",children:[s.jsx(hN,{size:20})," Jewelry Boxes"]}),s.jsxs(Ie,{to:"/catalog/box",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(At,{size:14})]})]}),s.jsxs("div",{className:"relative group/boxes",children:[s.jsx("button",{onClick:()=>k(A,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/boxes:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Fr,{size:20})}),s.jsx("div",{ref:A,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:j.map(T=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(dr,{product:T})},T.id))})]})]}),z.length>0&&s.jsxs("section",{id:"perfumes",className:"mt-12",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-blue-500 pl-4 inline-block flex items-center gap-2",children:[s.jsx(sA,{size:20})," Perfume Holders"]}),s.jsxs(Ie,{to:"/catalog/perfume",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(At,{size:14})]})]}),s.jsxs("div",{className:"relative group/perfumes",children:[s.jsx("button",{onClick:()=>k(P,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/perfumes:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Fr,{size:20})}),s.jsx("div",{ref:P,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:z.map(T=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(dr,{product:T})},T.id))})]})]}),J.length>0&&s.jsxs("section",{id:"jewelry-sets",className:"mt-12",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("h2",{className:"font-cherry text-[22px] font-bold text-white border-l-4 border-pink-500 pl-4 inline-block",children:"Jewelry Sets"}),s.jsxs(Ie,{to:"/catalog/sets",className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View All ",s.jsx(At,{size:14})]})]}),s.jsxs("div",{className:"relative group/sets",children:[s.jsx("button",{onClick:()=>k(N,"left"),className:"md:hidden absolute left-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/sets:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(So,{size:20})}),s.jsx("button",{onClick:()=>k(N,"right"),className:"md:hidden absolute right-0 top-1/2 -translate-y-1/2 z-20 p-2 bg-black/70 text-white rounded-full shadow-lg backdrop-blur-sm border border-gray-700 opacity-0 group-hover/sets:opacity-100 transition-opacity focus:opacity-100",children:s.jsx(Fr,{size:20})}),s.jsx("div",{ref:N,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-4 -mx-4 px-4 md:mx-0 md:px-0 md:pb-0 md:grid md:grid-cols-4 md:overflow-visible no-scrollbar scroll-smooth",children:J.map(T=>s.jsx("div",{className:"min-w-[calc(50%-8px)] snap-start md:min-w-0",children:s.jsx(dr,{product:T})},T.id))})]})]})]})},XA={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},Sa=[{size:5,mm:49.3},{size:6,mm:51.9},{size:7,mm:54.4},{size:8,mm:57},{size:9,mm:59.5},{size:10,mm:62.1},{size:11,mm:64.6},{size:12,mm:67.2},{size:13,mm:69.7}],ZA=()=>{const{id:n}=Xp(),{products:e,addToCart:t,toggleWishlist:r,user:i,shareProduct:l,cart:c}=Rt(),d=as(),[p,f]=D.useState(0),[y,b]=D.useState(!1),[N,E]=D.useState(!1),[A,P]=D.useState(!1),[I,$]=D.useState(!1),[W,K]=D.useState(1),[Z,ce]=D.useState(""),[J,F]=D.useState("Ring Finger"),[j,z]=D.useState(null),[O,k]=D.useState(""),[T,L]=D.useState(null),[me,Ve]=D.useState(""),[Se,Pe]=D.useState(""),B=e.find(ue=>ue.id===n),ve=B?e.filter(ue=>ue.category===B.category&&ue.id!==B.id).slice(0,4):[];D.useEffect(()=>{window.scrollTo(0,0),P(!1)},[n]),D.useEffect(()=>{if(B){if(B.type==="Ring"&&B.ringStock){const ue=Object.entries(B.ringStock).filter(([$e,Tt])=>Tt>0).map(([$e])=>$e);ue.length>0&&k(ue[0])}(B.type==="Stud"||B.type==="Dangle")&&B.showEarringOptions&&B.earringMaterials&&B.earringMaterials.length>0&&L(B.earringMaterials[0]),B.type==="Pendant"&&B.chainStyles&&B.chainStyles.length>0&&(B.chainStyles.includes("Metal Chain")?Ve("Metal Chain"):Ve(B.chainStyles[0]))}},[B]),D.useEffect(()=>{if(me==="Leather Cord")Pe("45cm");else if(me==="Metal Chain"&&(B!=null&&B.pendantChainLengths)){const ue=Object.keys(B.pendantChainLengths).find($e=>B.pendantChainLengths[$e]);ue&&Pe(ue)}},[me,B]);const G=D.useMemo(()=>{var ue;return((ue=c.find($e=>$e.id===(B==null?void 0:B.id)&&$e.selectedSize===O&&$e.selectedMaterial===(T==null?void 0:T.name)&&$e.selectedChainStyle===me&&$e.selectedChainLength===Se))==null?void 0:ue.quantity)||0},[c,B==null?void 0:B.id,O,T,me,Se]),{availableStock:q,isOutOfStock:M,isStockLimitInCart:se,buttonText:he}=D.useMemo(()=>{var Ln;if(!B)return{availableStock:0,isOutOfStock:!0,isStockLimitInCart:!0,buttonText:"Product not found"};let ue=B.stock,$e=ue<=0,Tt="Add to Cart";B.type==="Ring"&&(O?(ue=((Ln=B.ringStock)==null?void 0:Ln[O])||0,ue<=0&&($e=!0,Tt="Out of Stock")):($e=!0,Tt="Select a Size"));const fn=ue>0&&G>=ue;return!$e&&fn&&(Tt="Stock limit in cart"),{availableStock:ue,isOutOfStock:$e,isStockLimitInCart:fn,buttonText:Tt}},[B,O,G]);if(!B)return s.jsx("div",{className:"text-center py-20 text-gray-400",children:"Product not found"});const ze=i.wishlist.includes(B.id),We=new Date,et=B.promoStartsAt?new Date(B.promoStartsAt):null,Ke=B.promoExpiresAt?new Date(B.promoExpiresAt):null,Je=et&&!isNaN(et.getTime()),He=Ke&&!isNaN(Ke.getTime()),_t=(B.promoPrice||0)>0&&(!Je||et<=We)&&(!He||Ke>We),Ct=parseFloat((B.price*.8).toFixed(2));let at=B.price,Te="none";i.isMember?(at=Ct,_t&&(i.membershipTier==="deluxe"&&B.promoDeluxeMemberPrice&&B.promoDeluxeMemberPrice>0?(at=B.promoDeluxeMemberPrice,Te="deluxe"):i.membershipTier==="premium"&&B.promoPremiumMemberPrice&&B.promoPremiumMemberPrice>0?(at=B.promoPremiumMemberPrice,Te="premium"):i.membershipTier==="basic"&&B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0?(at=B.promoBasicMemberPrice,Te="basic"):(B.promoPrice||1/0)<Ct&&(at=B.promoPrice))):_t&&(at=B.promoPrice);const lt=_t&&B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0?B.promoBasicMemberPrice:Ct;let Bt=at;T&&(Bt+=T.modifier);const qt=B.price+((T==null?void 0:T.modifier)||0),dn=qt-lt,$t=Math.round(dn/qt*100),_e=_t&&(B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0||B.promoDeluxeMemberPrice&&B.promoDeluxeMemberPrice>0),Ht=ue=>Math.round((qt-ue)/qt*100),Dn=B.reviews&&B.reviews.length>0,Zn=Dn?(B.reviews.reduce((ue,$e)=>ue+$e.rating,0)/B.reviews.length).toFixed(1):"4.9",pr=Dn?B.reviews.length:128,Cn=B.giftProductId?e.find(ue=>ue.id===B.giftProductId):null,kt=()=>{M||se||(t({...B,price:at},{selectedSize:O,selectedMaterial:T==null?void 0:T.name,selectedMaterialModifier:T==null?void 0:T.modifier,selectedChainStyle:me,selectedChainLength:Se}),Cn&&t(Cn,{}))},Mt=()=>{const ue=parseFloat(Z);if(!ue||isNaN(ue))return;let $e=Sa[0],Tt=Math.abs(ue-$e.mm);for(let fn=1;fn<Sa.length;fn++){const Ln=Math.abs(ue-Sa[fn].mm);Ln<Tt&&(Tt=Ln,$e=Sa[fn])}ue>Sa[Sa.length-1].mm+1.5?z(13):z($e.size),K(4)},hn=()=>{$(!1),K(1),ce(""),z(null)},mr=async ue=>{const $e=window.location.href,Tt="Look at this I just bought or saw this isn't it beautiful!",fn=`${Tt} ${$e}`;if(i.id&&!A?(l(B.id),P(!0),alert("You earned 50 Loyalty Points for sharing!")):i.id,ue==="native"&&navigator.share)try{await navigator.share({title:B.name,text:Tt,url:$e})}catch{console.log("Native share cancelled")}else ue==="whatsapp"?window.open(`https://wa.me/?text=${encodeURIComponent(fn)}`,"_blank"):ue==="facebook"&&window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent($e)}&quote=${encodeURIComponent(Tt)}`,"_blank")},er=wN(B.images[p]||B.images[0]||"","https://via.placeholder.com/800x800");return s.jsxs("div",{className:"space-y-16 pt-4 pb-16 relative",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-4",children:[s.jsx(Ie,{to:"/",className:"hover:text-white",children:"Home"}),s.jsx("span",{children:"/"}),s.jsx(Ie,{to:`/collections/${encodeURIComponent(B.category)}`,className:"hover:text-white",children:B.category}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-gray-300 truncate max-w-[200px]",children:B.name})]}),N&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>E(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4 text-yellow-400",children:[s.jsx(rp,{size:32}),s.jsx("h3",{className:"text-xl font-bold text-white",children:"Verified Purchases Only"})]}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed mb-4",children:"To maintain the integrity of our reviews, we only accept feedback from verified customers who have purchased this specific item."}),s.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800 mb-6",children:[s.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"How it works:"}),s.jsxs("ul",{className:"text-xs text-gray-400 space-y-3",children:[s.jsxs("li",{className:"flex gap-2 items-start",children:[s.jsx(ii,{size:14,className:"text-cyan-400 shrink-0 mt-0.5"})," ",s.jsxs("span",{children:["A secure review link will be sent to you ",s.jsx("strong",{children:"25 days after purchase"}),"."]})]}),s.jsxs("li",{className:"flex gap-2 items-start",children:[s.jsx(Zs,{size:14,className:"text-yellow-400 shrink-0 mt-0.5"})," ",s.jsxs("span",{children:["Review honestly and earn ",s.jsx("strong",{children:"100 Loyalty Points"}),"!"]})]}),s.jsxs("li",{className:"flex gap-2 items-start",children:[s.jsx(Yt,{size:14,className:"text-pink-500 shrink-0 mt-0.5"})," ",s.jsx("span",{children:"Use points (1000 pts = R10) for discounts on your next order."})]})]})]}),s.jsx("button",{onClick:()=>E(!1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-xl font-semibold transition-colors",children:"Understood"})]})]}),I&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:hn}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in slide-in-from-bottom-4 duration-300",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[s.jsxs("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[s.jsx(ov,{className:"text-pink-500",size:20})," Find Your Ring Size"]}),s.jsx("button",{onClick:hn,className:"text-gray-500 hover:text-white",children:s.jsx(sp,{size:16})})]}),s.jsxs("div",{className:"min-h-[250px] flex flex-col",children:[W===1&&s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"bg-pink-900/20 p-4 rounded-xl border border-pink-500/20 text-center",children:[s.jsx("span",{className:"text-3xl block mb-2",children:""}),s.jsx("p",{className:"text-sm text-pink-200 font-semibold",children:"Step 1"})]}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Take a flexible measuring tape or a piece of string and wrap it around the base of the finger you want to wear the ring on."}),s.jsxs("div",{className:"p-3 bg-yellow-900/20 border border-yellow-500/20 rounded-lg",children:[s.jsxs("p",{className:"text-xs text-yellow-400 font-bold flex items-center gap-2",children:[s.jsx(sp,{size:14})," Important:"]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Please read your measurement in Millimeters (MM), not CM."})]})]}),W===2&&s.jsxs("div",{className:"flex-1 space-y-6 text-center flex flex-col justify-center",children:[s.jsx("p",{className:"text-white font-semibold",children:"Did you measure your finger with a tape or string?"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:()=>K(3),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-xl font-bold transition-all",children:"Yes, I measured my finger"}),s.jsx("button",{onClick:()=>K(1),className:"w-full py-3 bg-zinc-800 hover:bg-zinc-700 text-gray-300 rounded-xl font-medium transition-all",children:"Back to Instructions"})]})]}),W===3&&s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Which finger?"}),s.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-sm",value:J,onChange:ue=>F(ue.target.value),children:[s.jsx("option",{children:"Thumb"}),s.jsx("option",{children:"Index Finger"}),s.jsx("option",{children:"Middle Finger"}),s.jsx("option",{children:"Ring Finger"}),s.jsx("option",{children:"Pinky Finger"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Measured Length (MM)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",placeholder:"e.g. 54.5",className:"w-full p-3 bg-black border border-gray-700 rounded-xl text-white text-lg font-bold focus:border-pink-500 focus:outline-none",value:Z,onChange:ue=>ce(ue.target.value)}),s.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm font-bold",children:"mm"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Please enter the exact circumference."})]})]}),W===4&&s.jsxs("div",{className:"flex-1 text-center flex flex-col justify-center space-y-6",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Based on your ",J," measurement:"]}),s.jsxs("div",{className:"inline-block p-6 bg-zinc-800 rounded-full border-4 border-pink-500 shadow-[0_0_20px_rgba(236,72,153,0.4)]",children:[s.jsx("span",{className:"block text-xs text-gray-400 uppercase tracking-wide",children:"US Size"}),s.jsx("span",{className:"text-4xl font-black text-white",children:j})]})]}),B.ringStock&&B.ringStock[(j==null?void 0:j.toString())||""]>0?s.jsxs("button",{onClick:()=>{k((j==null?void 0:j.toString())||""),hn()},className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-xl font-bold transition-all flex items-center justify-center gap-2",children:[s.jsx(ft,{size:18})," Select Size ",j]}):s.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/20 rounded-lg text-red-300 text-sm",children:["Sorry, Size ",j," is currently out of stock."]})]})]}),s.jsxs("div",{className:"flex justify-between mt-6 pt-4 border-t border-gray-800",children:[W>1&&W<4?s.jsxs("button",{onClick:()=>K(ue=>ue-1),className:"text-gray-400 hover:text-white text-sm flex items-center gap-1",children:[s.jsx(sc,{size:14})," Back"]}):s.jsx("div",{}),W===1&&s.jsxs("button",{onClick:()=>K(2),className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500",children:["Next Step ",s.jsx(At,{size:14,className:"inline"})]}),W===3&&s.jsx("button",{onClick:Mt,disabled:!Z,className:"bg-pink-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Get My Size"}),W===4&&s.jsx("button",{onClick:hn,className:"text-gray-400 hover:text-white text-sm",children:"Close"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"aspect-square rounded-2xl overflow-hidden bg-zinc-900 shadow-lg border border-gray-800 relative group",children:[s.jsx(jd,{src:er,alt:B.name,className:"w-full h-full object-cover opacity-95",onError:ue=>{console.warn("Image failed to load in ProductDetail primary:",ue.currentTarget.src),ue.currentTarget.src="https://via.placeholder.com/800x800"}}),s.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[B.isNewArrival&&s.jsx("span",{className:"bg-cyan-600/90 text-white text-xs font-bold px-3 py-1 rounded-full w-fit",children:"NEW"}),i.isMember&&s.jsxs("span",{className:"bg-purple-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg border border-purple-400 flex items-center gap-1 w-fit",children:[s.jsx(Er,{size:12,fill:"currentColor"}),Te!=="none"?`${Te.toUpperCase()} PRICE`:"MEMBER DEAL"]})]}),_t&&!i.isMember&&s.jsx("span",{className:"absolute top-4 right-4 bg-green-600/90 text-white text-xs font-bold px-3 py-1 rounded-full shadow-[0_0_10px_rgba(74,222,128,0.5)]",children:"PROMO"})]}),s.jsx("div",{className:"grid grid-cols-4 gap-4",children:B.images.map((ue,$e)=>s.jsx("button",{onClick:()=>f($e),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${p===$e?"border-pink-500 opacity-100 shadow-[0_0_10px_rgba(236,72,153,0.4)]":"border-gray-800 opacity-60 hover:opacity-100"}`,children:s.jsx(jd,{src:ue,alt:`View ${$e}`,className:"w-full h-full object-cover",onError:Tt=>{console.warn("Image failed to load in ProductDetail thumb:",Tt.currentTarget.src),Tt.currentTarget.src="https://via.placeholder.com/320x320"}})},$e))})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-2",children:[s.jsx("span",{className:"uppercase tracking-wider font-semibold text-cyan-400",children:B.category}),s.jsx("span",{children:""}),s.jsxs("div",{className:"flex items-center text-yellow-400 gap-1",children:[s.jsx(Zs,{size:14,fill:"currentColor"})," ",Zn," (",pr," reviews)"]})]}),s.jsx("h1",{className:"text-[26px] font-bold text-white mb-4",children:B.name}),s.jsxs("div",{className:"flex flex-col gap-1",children:[B.compareAtPrice&&B.compareAtPrice>Bt&&s.jsxs("div",{className:"flex items-center gap-2 relative",children:[s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["RRP R",B.compareAtPrice.toFixed(2)]}),s.jsx("button",{onClick:()=>b(!y),className:"text-gray-500 hover:text-cyan-400",children:s.jsx(ih,{size:14})}),y&&s.jsx("div",{className:"absolute top-6 left-0 z-10 bg-zinc-950 border border-gray-700 p-3 rounded-lg shadow-xl w-64 text-xs text-gray-300 leading-relaxed",children:"Recommended retail price (RRP) set by the manufacturer and used for price comparison purposes."})]}),s.jsxs("div",{className:"flex items-baseline gap-3",children:[s.jsxs("span",{className:`text-[32px] font-bold drop-shadow-sm ${i.isMember?"text-purple-400":"text-green-400"}`,children:["R",Bt.toFixed(2)]}),qt>Bt+.01&&s.jsxs("span",{className:"text-lg text-gray-600 line-through",children:["R",qt.toFixed(2)]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-1",children:[_t&&s.jsxs("div",{className:"flex items-center gap-2 text-xs bg-green-900/30 border border-green-500/30 text-green-400 px-2 py-1 rounded w-fit",children:[s.jsx(ii,{size:12})," Ends: ",new Date(B.promoExpiresAt).toLocaleDateString()]}),i.isMember&&s.jsxs("div",{className:"flex items-center gap-2 text-xs bg-purple-900/30 border border-purple-500/30 text-purple-400 px-2 py-1 rounded w-fit font-bold",children:[s.jsx(Er,{size:12})," ",Te!=="none"?Te:"Member"," Pricing Applied"]})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${q>0?"bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.8)]":"bg-red-500"}`}),s.jsx("span",{className:`${q>0?q<=5?"text-orange-400":"text-green-400":"text-red-400"} font-bold`,children:q>0?q<=5?`Only ${q} left!`:"In Stock":"Out of Stock"})]})]})]}),!i.isMember&&s.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-900/50 rounded-xl p-5 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:s.jsx(Er,{size:80,className:"text-purple-500 transform rotate-12"})}),s.jsxs("h3",{className:"text-purple-400 font-bold text-sm uppercase tracking-wider mb-4 flex items-center gap-2",children:[s.jsx(Er,{size:16,fill:"currentColor"})," Unlock Membership Savings"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-zinc-800/50 border border-zinc-700/50",children:[s.jsx("span",{className:"text-gray-400",children:"Retail Price"}),s.jsxs("span",{className:"text-gray-300 font-medium",children:["R",qt.toFixed(2)]})]}),_e?s.jsxs("div",{className:"space-y-2",children:[B.promoBasicMemberPrice&&B.promoBasicMemberPrice>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Basic Member"}),s.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[Ht(B.promoBasicMemberPrice),"% Off"]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:["R",B.promoBasicMemberPrice.toFixed(0)]})})]}),B.promoPremiumMemberPrice&&B.promoPremiumMemberPrice>0&&B.promoPremiumMemberPrice!==B.promoBasicMemberPrice&&s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-purple-200 font-bold text-xs",children:"Premium Member"}),s.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:[Ht(B.promoPremiumMemberPrice),"% Off"]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:["R",B.promoPremiumMemberPrice.toFixed(0)]})})]}),B.promoDeluxeMemberPrice&&B.promoDeluxeMemberPrice>0&&s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-lime-900/20 border border-lime-500/40",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-lime-200 font-bold text-xs",children:"Deluxe Member"}),s.jsxs("span",{className:"text-xs text-lime-300 uppercase font-bold",children:[Ht(B.promoDeluxeMemberPrice),"% Off"]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"block text-lime-400 font-bold text-lg",children:["R",B.promoDeluxeMemberPrice.toFixed(0)]})})]})]}):s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded bg-purple-900/20 border border-purple-500/40",children:[s.jsx("span",{className:"text-purple-200 font-bold",children:"Member Price"}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"block text-purple-400 font-bold text-lg",children:["R",lt.toFixed(2)]}),s.jsxs("span",{className:"text-xs text-purple-300 uppercase font-bold",children:["Save ",$t,"%"]})]})]})]}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx("button",{onClick:()=>d("/membership"),className:"w-full py-3 text-sm font-bold uppercase tracking-widest text-white bg-gradient-to-r from-purple-600 to-pink-600 rounded hover:shadow-[0_0_15px_rgba(168,85,247,0.4)] transition-all",children:"Join Now"}),s.jsx("p",{className:"text-[10px] text-red-400 font-bold mt-2 uppercase tracking-wide animate-pulse",children:"LIMITED places Available"})]})]}),s.jsxs("div",{className:"space-y-6 mt-6 border-t border-gray-800 pt-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-cherry text-2xl text-pink-500 mb-2 tracking-wide",children:"Description"}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:B.description})]}),B.whenAndHowToWear&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-cherry text-2xl text-cyan-400 mb-2 tracking-wide",children:"Stylish Suggestions"}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:B.whenAndHowToWear})]}),B.material&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-cherry text-2xl text-purple-400 mb-2 tracking-wide",children:"Materials"}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed font-light",children:B.material})]}),B.isUniquePendant&&s.jsxs("div",{className:"bg-orange-900/10 border border-orange-500/20 rounded-xl p-5 mt-4",children:[s.jsxs("h3",{className:"font-cherry text-xl text-orange-400 mb-3 tracking-wide flex items-center gap-2",children:[s.jsx(sp,{size:20})," Oxidized Jewelry Care"]}),s.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"This unique pendant features a deliberate oxidized finish (darkened patina) to enhance the vintage detail."}),s.jsxs("ul",{className:"text-xs text-gray-400 space-y-2 list-disc pl-4",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Do NOT use liquid silver cleaner or dips:"})," These will strip the antique finish instantly."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Avoid polishing cloths:"})," Aggressive rubbing can remove the darkened details."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Keep it dry:"})," Remove before swimming or showering to preserve the wire wrapping."]}),s.jsx("li",{children:"To clean, simply wipe gently with a soft, dry cotton cloth."})]})]})]}),Cn&&s.jsxs("div",{className:"bg-gradient-to-r from-purple-900/40 to-pink-900/40 border border-purple-500/30 rounded-xl p-4 flex items-center gap-4 shadow-[0_0_15px_rgba(168,85,247,0.1)]",children:[s.jsx("div",{className:"p-3 bg-black/50 rounded-full text-pink-400 border border-pink-500/30",children:s.jsx(Yt,{size:24})}),s.jsxs("div",{children:[s.jsx("span",{className:"block text-xs font-bold text-pink-400 uppercase tracking-wider mb-1",children:"Free Gift Included"}),s.jsx("h4",{className:"font-bold text-white",children:Cn.name}),s.jsxs("p",{className:"text-xs text-gray-400",children:["Value: R",B.giftValue||Cn.price]})]}),s.jsx("div",{className:"ml-auto",children:s.jsx("img",{src:Cn.images[0],alt:"Gift",className:"w-12 h-12 rounded object-cover border border-gray-700"})})]}),s.jsxs("div",{className:"space-y-6 py-4 border-t border-gray-800",children:[B.type==="Ring"&&B.ringStock&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Size"}),s.jsxs("button",{onClick:()=>{$(!0),K(1)},className:"text-xs text-pink-400 hover:text-pink-300 flex items-center gap-1 underline decoration-dotted underline-offset-4",children:[s.jsx(ov,{size:14})," Find My Ring Size"]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(B.ringStock).map(([ue,$e])=>s.jsx("button",{disabled:$e===0,onClick:()=>k(ue),className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium border transition-all ${O===ue?"bg-pink-600 border-pink-600 text-white shadow-[0_0_10px_rgba(236,72,153,0.5)]":$e===0?"bg-zinc-900 border-gray-800 text-gray-600 cursor-not-allowed decoration-slice line-through":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:ue},ue))}),O&&B.ringStock[O]>0&&s.jsxs("p",{className:`text-xs mt-2 flex items-center gap-1 ${B.ringStock[O]<=5?"text-orange-400 font-bold":"text-green-400"}`,children:[s.jsx(ft,{size:12}),B.ringStock[O]<=5?`Only ${B.ringStock[O]} left in stock!`:"In Stock"]}),O&&B.ringStock[O]===0&&s.jsx("p",{className:"text-xs text-red-500 mt-2 font-bold",children:"Out of stock for this size."})]}),(B.type==="Stud"||B.type==="Dangle")&&B.showEarringOptions&&B.earringMaterials&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Material"}),s.jsx("div",{className:"grid gap-3",children:B.earringMaterials.map(ue=>s.jsxs("div",{onClick:()=>L(ue),className:`relative p-4 rounded-xl border cursor-pointer transition-all ${(T==null?void 0:T.name)===ue.name?"bg-pink-900/10 border-pink-500 shadow-[0_0_10px_rgba(236,72,153,0.2)]":"bg-zinc-900 border-gray-800 hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:`font-medium text-sm ${(T==null?void 0:T.name)===ue.name?"text-white":"text-gray-300"}`,children:ue.name}),s.jsx("span",{className:"text-xs font-bold text-pink-400",children:ue.modifier>0?`+R${ue.modifier}`:""})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ue.description}),(T==null?void 0:T.name)===ue.name&&s.jsx("div",{className:"absolute top-3 right-3 w-4 h-4 bg-pink-500 rounded-full flex items-center justify-center",children:s.jsx(ft,{size:10,className:"text-white"})})]},ue.name))})]}),B.type==="Pendant"&&B.chainStyles&&B.chainStyles.length>0&&s.jsxs("div",{className:"space-y-6",children:[B.chainStyles.length>1&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Chain Style"}),s.jsx("div",{className:"flex gap-4",children:B.chainStyles.map(ue=>s.jsx("button",{onClick:()=>Ve(ue),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all ${me===ue?"bg-pink-600 border-pink-600 text-white":"bg-zinc-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:ue},ue))})]}),me==="Metal Chain"&&B.pendantChainLengths&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-sm font-medium text-white",children:"Select Length"}),s.jsx("div",{className:"grid gap-2",children:Object.keys(B.pendantChainLengths).filter(ue=>B.pendantChainLengths[ue]).map(ue=>s.jsxs("button",{onClick:()=>Pe(ue),className:`text-left p-3 rounded-lg border transition-all ${Se===ue?"bg-cyan-900/20 border-cyan-500":"bg-zinc-900 border-gray-800 hover:bg-zinc-800"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:`text-sm font-medium ${Se===ue?"text-cyan-400":"text-gray-200"}`,children:ue}),Se===ue&&s.jsx(ft,{size:14,className:"text-cyan-400"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:XA[ue]||""})]},ue))})]}),me==="Leather Cord"&&s.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg border border-gray-700 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-gray-700 rounded-full",children:s.jsx(ft,{size:14,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-white",children:"Fixed Length: 45cm"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Standard leather cord length."})]})]})]})]}),s.jsxs("div",{className:"flex gap-4 pt-4",children:[s.jsxs("button",{onClick:kt,disabled:M||se,className:"flex-1 bg-pink-600 text-white py-4 rounded-xl font-semibold hover:bg-pink-500 transition-all flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(236,72,153,0.4)] text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Ki,{size:20})," ",he]}),s.jsx("button",{onClick:()=>r(B.id),className:`p-4 rounded-xl border transition-colors ${ze?"border-pink-500 bg-pink-500/10 text-pink-500":"border-gray-700 hover:bg-zinc-800 text-gray-400 hover:text-white"}`,children:s.jsx(rg,{size:24,fill:ze?"currentColor":"none"})})]}),s.jsxs("div",{className:"bg-gradient-to-r from-cyan-900/20 to-purple-900/20 border border-cyan-500/30 rounded-xl p-5 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 pointer-events-none",children:s.jsx(Oo,{size:60})}),s.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-2",children:[s.jsx(Yt,{size:18,className:"text-pink-500"})," Share & Earn"]}),s.jsxs("p",{className:"text-xs text-gray-300 mb-4 max-w-sm",children:["Share this treasure with friends and earn ",s.jsx("strong",{className:"text-green-400",children:"50 Loyalty Points"})," instantly!"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:()=>mr("whatsapp"),className:"flex-1 py-2 bg-[#25D366] hover:bg-[#1ebc57] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(37,211,102,0.4)]",children:[s.jsx(lc,{size:16})," WhatsApp"]}),s.jsxs("button",{onClick:()=>mr("facebook"),className:"flex-1 py-2 bg-[#1877F2] hover:bg-[#166fe5] text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all hover:shadow-[0_0_10px_rgba(24,119,242,0.4)]",children:[s.jsx(Hl,{size:16})," Facebook"]}),navigator.share&&s.jsxs("button",{onClick:()=>mr("native"),className:"flex-1 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg font-bold text-xs flex items-center justify-center gap-2 transition-all",children:[s.jsx(Oo,{size:16})," More"]})]}),A&&s.jsxs("div",{className:"mt-3 text-xs text-green-400 font-bold flex items-center gap-1 justify-center animate-in fade-in zoom-in",children:[s.jsx(ft,{size:12})," 50 Points Awarded!"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-8 border-t border-gray-800",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(os,{className:"text-cyan-400 mt-1",size:20}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm text-gray-200",children:"Free Delivery"}),s.jsx("p",{className:"text-xs text-gray-500",children:"On orders over R500 (PUDO/PAXI only)"})]})]}),s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ia,{className:"text-cyan-400 mt-1",size:20}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm text-gray-200",children:""}),s.jsx("p",{className:"text-xs text-gray-500",children:""})]})]})]})]})]}),s.jsxs("div",{className:"pt-12 border-t border-gray-800 animate-in fade-in slide-in-from-bottom-10 duration-700",children:[B.isUniquePendant&&s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl mb-8 flex gap-3 items-start",children:[s.jsx(tg,{className:"text-purple-400 shrink-0 mt-1",size:20}),s.jsxs("p",{className:"text-sm text-gray-300",children:[s.jsx("strong",{children:"Please note:"})," As this is a one-of-a-kind treasure, these reviews reflect experiences from customers who have purchased similar unique pendants from our collection."]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-8 gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"font-cherry text-[26px] font-bold text-white flex items-center gap-3",children:["Customer Reviews",s.jsx("span",{className:"text-sm font-sans font-normal text-gray-500 bg-zinc-900 px-3 py-1 rounded-full",children:pr})]}),s.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[s.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-green-900/20 border border-green-500/30 text-green-400 px-2 py-1 rounded text-xs font-bold w-fit",children:[s.jsx(rp,{size:14,fill:"currentColor",className:"text-green-500"})," Verified Purchases Only"]}),s.jsx("p",{className:"text-xs text-gray-500 max-w-md",children:"To ensure authenticity, only customers who have purchased this item can leave a review."})]})]}),s.jsx("button",{onClick:()=>E(!0),className:"px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg border border-gray-700 hover:border-gray-600 transition-all flex items-center gap-2 text-sm font-semibold shadow-lg",children:"Write a review"})]}),Dn?s.jsx("div",{className:"space-y-8",children:B.reviews.map(ue=>s.jsxs("div",{className:"flex flex-col md:flex-row gap-6 border-b border-gray-800 pb-8 last:border-0",children:[s.jsxs("div",{className:"md:w-48 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-white font-bold text-xs",children:ue.userName.charAt(0)}),s.jsx("span",{className:"font-bold text-gray-200 text-sm",children:ue.userName})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-10 mb-1",children:[s.jsx(rp,{size:12,className:"text-green-500"}),s.jsx("span",{className:"text--[10px] text-green-500 font-medium",children:"Verified Buyer"})]}),s.jsx("p",{className:"text-xs text-gray-500 ml-10 mb-2",children:ue.location}),s.jsxs("div",{className:"flex items-center gap-1 ml-10",children:[s.jsx("div",{className:"flex text-yellow-400",children:[1,2,3,4,5].map($e=>s.jsx(Zs,{size:12,fill:$e<=Math.round(ue.rating)?"currentColor":"none",className:$e<=Math.round(ue.rating)?"text-yellow-400":"text-gray-700"},$e))}),s.jsxs("span",{className:"text-xs font-bold text-gray-400",children:["(",ue.rating,")"]})]})]}),s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"bg-zinc-900/50 p-4 rounded-xl rounded-tl-none border border-gray-800/50",children:[s.jsxs("p",{className:"text-gray-300 text-sm italic mb-3 leading-relaxed",children:['"',ue.content,'"']}),s.jsx("p",{className:"text-xs text-gray-500 font-medium text-right",children:ue.date})]})})]},ue.id))}):s.jsx("div",{className:"bg-zinc-900/30 border border-dashed border-gray-800 rounded-xl p-8 text-center",children:s.jsx("p",{className:"text-gray-500 text-sm",children:"No reviews yet. Be the first to own and review this treasure!"})})]}),ve.length>0&&s.jsxs("div",{className:"pt-12 border-t border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsxs("h2",{className:"font-cherry text-[22px] font-bold text-white flex items-center gap-2",children:[s.jsx(kr,{size:20,className:"text-pink-500"})," More from ",B.category]}),s.jsxs(Ie,{to:`/collections/${encodeURIComponent(B.category)}`,className:"text-cyan-400 font-medium text-sm hover:text-cyan-300 flex items-center gap-1 transition-colors",children:["View Collection ",s.jsx(At,{size:14})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:ve.map(ue=>s.jsx(dr,{product:ue},ue.id))})]})]})},Gu={IS_SANDBOX:!1,MERCHANT_ID:"113371222",MERCHANT_KEY:"cbhnt80ljkt7g",getProcessUrl:()=>"https://www.payfast.co.za/eng/process",getUrls:()=>{const n=window.location.origin;return{return_url:`${n}/#/profile`,cancel_url:`${n}/#/cart`,notify_url:`${n}/api/notify`}}},lg=D.forwardRef(({amount:n,itemName:e,email:t,returnUrl:r,cancelUrl:i,notifyUrl:l,customStr1:c,customStr2:d,customStr3:p,customInt1:f,isSubscription:y=!1,frequency:b=3,cycles:N=0},E)=>{const A=D.useRef(null);D.useImperativeHandle(E,()=>({submit:()=>{A.current&&A.current.submit()}}));const P=Gu.getUrls(),I=Gu.MERCHANT_ID,$=Gu.MERCHANT_KEY,W=new Date;W.setDate(W.getDate()+1);const K=W.toISOString().split("T")[0];return s.jsxs("form",{ref:A,action:Gu.getProcessUrl(),method:"POST",className:"hidden",children:[s.jsx("input",{type:"hidden",name:"merchant_id",value:I}),s.jsx("input",{type:"hidden",name:"merchant_key",value:$}),s.jsx("input",{type:"hidden",name:"return_url",value:r||P.return_url}),s.jsx("input",{type:"hidden",name:"cancel_url",value:i||P.cancel_url}),s.jsx("input",{type:"hidden",name:"notify_url",value:l||P.notify_url}),s.jsx("input",{type:"hidden",name:"amount",value:n.toFixed(2)}),s.jsx("input",{type:"hidden",name:"item_name",value:e}),s.jsx("input",{type:"hidden",name:"email_address",value:t||""}),c&&s.jsx("input",{type:"hidden",name:"custom_str1",value:c}),d&&s.jsx("input",{type:"hidden",name:"custom_str2",value:d}),p&&s.jsx("input",{type:"hidden",name:"custom_str3",value:p}),f&&s.jsx("input",{type:"hidden",name:"custom_int1",value:f}),y&&s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"hidden",name:"subscription_type",value:"1"}),s.jsx("input",{type:"hidden",name:"billing_date",value:K}),s.jsx("input",{type:"hidden",name:"recurring_amount",value:n.toFixed(2)}),s.jsx("input",{type:"hidden",name:"frequency",value:b}),s.jsx("input",{type:"hidden",name:"cycles",value:N})]})]})}),gv={"Eastern Cape":{"Gqeberha (Port Elizabeth)":["PEP Pier 14 (Ground Floor, 444 Govan Mbeki Ave)","PEP Home Walmer Park (Shop 87A, Walmer Park Shopping Centre)","PEP Greenacres","PEP Newton Park","PEP Summerstrand"],"East London":["PEP EL CBD (32 Oxford St)","PEP Hemingways Mall (Shop UG54, Hemingways Mall)","PEP Vincent Park","PEP Beacon Bay","PEP Gonubie"],Mthatha:["PEP Mthatha BT Ngebs City (Shop 89, BT Ngebs City)","PEP Mthatha Circus Triangle (Shop 7, Circus Triangle)","PEP Mthatha Plaza"],"Makhanda (Grahamstown)":["PEP Grahamstown High Street (48 High St)","PEP Market Square"],"Queenstown (Komani)":["PEP Queenstown Lukhanji Mall (Shop 45, Lukhanji Mall)"],Uitenhage:["PEP Uitenhage Mall","PEP Corkwood Square"],"Jeffreys Bay":["PEP Fountains Mall","PEP Jeffrey's Bay CBD"],"King William's Town":["PEP King William's Town CBD","PEP Metlife Mall"]},"Free State":{Bloemfontein:["PEP BFN St Andrew St (45 St Andrew St)","PEP Home Mimosa Mall (Mimosa Mall, 131 Kellner St)","PEP Loch Logan","PEP Fleurdal","PEP Northridge Mall"],Welkom:["PEP Welkom Bok Street (Shop 22A, Bok Street)","PEP Welkom Goldfields Mall (Shop U5, Goldfields Mall)","PEP Boitumelo Junction"],Bethlehem:["PEP Bethlehem Dihlabeng Mall (Shop 52, Dihlabeng Mall)","PEP Bethlehem CBD"],Sasolburg:["PEP Sasolburg (Shop 9 Sake Complex, Wandellaan Street)","PEP Sasolburg Mall"],Parys:["PEP Parys (Cnr Kort Street & Middle Street)"],Kroonstad:["PEP Kroonstad Reitz Street (21 Reitz St)","PEP Maokeng Mall"]},Gauteng:{Johannesburg:["PEP JHB Carlton Centre (C/O Commissioner St & Kruis Sts)","PEP Home Jabulani Mall (Shop 84, Jabulani Mall, Soweto)","PEP Sandton City (Shop U12, Sandton City, Rivonia Rd)","PEP Jozi CBD","PEP Braamfontein","PEP Rosebank Mall","PEP Mellville","PEP Cresta","PEP Clearwater Mall"],Pretoria:["PEP PTA Central (Cnr Paul Kruger & Pretorius St)","PEP Home Menlyn Park (Menlyn Park, Garsfontein Road)","PEP Centurion Mall (Shop 15, Centurion Mall, Heuwel Ave)","PEP Sunnyside","PEP Brooklyn","PEP Kolonnade","PEP Wonderpark"],Soweto:["PEP Maponya Mall","PEP Jabulani Mall","PEP Bara Mall","PEP Dobsonville"],Centurion:["PEP Centurion Mall","PEP Lyttelton","PEP Mall @ Reds","PEP Forest Hill"],Midrand:["PEP Mall of Africa","PEP Boulders","PEP Midrand CBD"],Benoni:["PEP Benoni Lakeside Mall (Shop L20, Lakeside Mall, Tom Jones St)","PEP Northmead Square"],Boksburg:["PEP East Rand Mall","PEP Sunward Park"],Krugersdorp:["PEP Krugersdorp Cnr Ockerse (Cnr Ockerse & Human Street)","PEP Krugersdorp Westgate (Shop 30, Westgate Shopping Centre)"],Alberton:["PEP Alberton City (SHOP L106, Alberton City, Voortrekker Street)"],Vereeniging:["PEP Vereeniging Arcon Park (Arcon Park Shopping Centre)","PEP Vereeniging CBD (12 Joubert Street)"]},"KwaZulu-Natal":{Durban:["PEP Durban Dr Pixley Kaseme St (442 Dr Pixley Kaseme Street)","PEP Bluff Towers (Shop 94 Bluff Twrs, 15 Tara Rd)","PEP Home Pavilion (Shop L94, The Pavilion Shopping Centre)","PEP Durban Workshop","PEP Musgrave","PEP Berea","PEP South Beach","PEP Ushaka"],Umhlanga:["PEP Gateway","PEP Crescent","PEP Cornubia"],Pietermaritzburg:["PEP PMB Liberty Mall (Shop 15, Liberty Midlands Mall)","PEP PMB CBD (335 Church Street)","PEP Greater Edendale"],"Richards Bay":["PEP Cell Richards Bay Boardwalk (Shop U004, Boardwalk Inkwazi)","PEP Richards Bay Checkers (Shop 17A, Checkers Centre)"],Ballito:["PEP Ballito Junction","PEP Lifestyle Centre"],Newcastle:["PEP Newcastle Mall","PEP Amajuba Mall"],"Port Shepstone":["PEP Port Shepstone (Cnr Escombe & Wooley St)","PEP South Coast Mall"],Ladysmith:["PEP Ladysmith Murchison Mall (Shop LG11, Murchison Mall)"],Kokstad:["PEP Kokstad Main Street (Shop 1 Spargs Building, 40 Main Street)"]},Limpopo:{Hoedspruit:["PEP Hoedspruit (Wildlife Shop 12)","PEP Hoedspruit Centre"],Ohrigstad:["PEP Ohrigstad (Potgieter St)"],Metz:["PEP Metz Mahlakung Shopping Centre (Shop 7)","PEP Cell Metz (Shop 11)"],Phalaborwa:["PEP Home Ba-phalaborwa Eden Square (Shop 13)","PEP Phalaborwa Shoprite Centre (Shop 8)","PEP Phalaborwa Mall (Shop 5)","PEP Cell Ba-phalaborwa (Shop 7C)","PEP Ba-phalaborwa Checkers (Shop 9)","PEP Phalaborwa Standard Bank Centre (Shop B1)","PEP Ba-phalaborwa Namakwale Crossing (Shop 7)","PEP Cell Phalaborwa Namakgale Crossing (Shop 26)","PEP Lulekani Spar Centre (Shop A3)"],Burgersfort:["PEP Home Burgersfort Tubatse (Shop L50)","PEP Cell Burgersfort Morone Centre (Shop 23A)","PEP Burgersfort Morone Shopping Centre (Shop 5 & 6)","PEP Burgersfort Twin City Mall (Shop 17)","PEP Cell Burgersfort Twin City (Shop 5)","PEP Cell Burgersfort Twin City Shop 41","PEP Burgersfort Platinum Place (Shop 1-3)","PEP Cell Burgersfort Castle Square (Shop 10)","PEP Burgersfort Castle Square (Shop 8)","PEP Burgersfort Burgersfort Mall (Shop 18)","PEP Cell Burgersfort Mall (Shop 28)","PEP Burgersfort Tubatse Mall (Shop L87)","PEP Cell Burgersfort Tubatse Crossing (Shop L57)"],Steelpoort:["PEP Home Steelpoort (Steelpoort Centre)","PEP Steelpoort (Shop 5)","PEP Cell Steelpoort Shopping Centre (Shop 19)"],Polokwane:["PEP Polokwane CBD (Cnr Grobler & Thabo Mbeki St)","PEP Mall of the North (Shop 10, Mall of the North)","PEP Savanna Mall","PEP Limpopo Mall"],Tzaneen:["PEP Tzaneen Tzaneng Mall (Shop B5, Tzaneng Mall, Danie Joubert St)","PEP Tzaneen CBD","PEP Tzaneen Crossing"],Thohoyandou:["PEP Thohoyandou Venda Plaza (Shop B1, Venda Plaza)","PEP Home Thohoyandou (Next to Shoprite, Thohoyandou)","PEP Thavhani Mall","PEP Mvyu"],Mokopane:["PEP Mokopane Mall","PEP Crossing"],"Makhado (Louis Trichardt)":["PEP Louis Trichardt Burger Str (Cnr Burger St & Songozwi Rd)"]},Mpumalanga:{Acornhoek:["PEP Home Acornhoek Mall (Shop 27)","PEP Acornhoek Plaza Extension (Shop 75)","PEP Cell Acornhoek Plaza (Shop 71)","PEP Cell Acornhoek Mall (Shop 3)","PEP Acornhoek Mall (Shop 10)","PEP Cell Acornhoek Mall (Shop 33B)","PEP Acornhoek Shopping Centre (Station Centre)","PEP Cell Acornhoek Shopping Centre"],Thulamahashe:["PEP Cell Thulamahashe (Thula Mall)","PEP Thulamahashe Thula Mall (Shop 17)","PEP Cell Thulamahashe Plaza (Shop 103)","PEP Thulamahashe (Plaza Shop 7)","PEP Cell Thulamahashe Plaza (Shop 14)"],Dwarsloop:["PEP Home Dwarsloop Mall (Shop 208)","PEP Dwarsloop Mall (Shop 66)","PEP Cell Dwarsloop Mall (Shop 48)"],Bushbuckridge:["PEP Bushbuckridge Twin City Mall (Shop 9)","PEP Cell Bushbuckridge Twin City Mall (Shop 2A)","PEP Cell Bushbuckridge Shopping Centre (Shop 1B)","PEP Bushbuckridge Shopping Centre (Shop 6)"],Graskop:["PEP Graskop (Spar Centre)"],Mkhuhlu:["PEP Cell Mkhuhlu (Plaza Shop 12)","PEP Mkhuhlu (Plaza Shop 7)"],Hazyview:["PEP Home Hazyview Junction (Shop 5A)","PEP Home Numbi Gate Dayizenza (Shop 7)","PEP Hazyview Junction (Shop 14B)","PEP Cell Lowveld Mall PNP (Shop 168)","PEP Cell Lowveld Mall Spar (Shop 12)","PEP Hazyview Blue Haze (Shop 304)","PEP Hazyview Lowveld Mall (Shop 232)","PEP Hazyview Lowveld Mall (Shop 155)","PEP Numbigate Dayizenza Plaza (Shop 38A)","PEP Cell Numbigate Dayizenza Plaza (Shop 12)"],Sabie:["PEP Sabie (Shopping Centre)"],"White River":["PEP Home White River Square (Shop 20)","PEP White River (Square Shop 17)","PEP Whiteriver Square 1 (Shop 17)","PEP White River Crossing (Shop 15)","PEP White River Kabokweni (Plaza Shop 10)","PEP Cell White River Kabokweni Plaza (Shop 205A)"],"Lydenburg (Mashishing)":["PEP Home Lydenburg Lt Centre (Shop 5)","PEP Lydenburg Highland Centre (Shop 6A)","PEP Lydenburg (Tamarisk Building)","PEP Cell Mashishing Shoprite Centre"],"Mbombela (Nelspruit)":["PEP Home Riverside Mall Nelspruit (Shop G241)","PEP Home Nelspruit Promenade (Shop 41 & 42)","PEP Home Nelspruit Ilanga Mall (Shop LG36)","PEP Home Nelspruit The Square (Shop 7)","PEP Nelspruit The Grove (Shop 18)","PEP Cell Nelspruit Plaza (Shop 28)","PEP Nelspruit Plaza (Shop 17-20)","PEP Cell Nelspruit Ekukhanyeni (Shop 5)","PEP Nelspruit Brown & Henshall Street","PEP Cell Nelspruit Promenade (Shop 49)","PEP Nelspruit Brown Street (Prorom Building)","PEP Nelspruit (Bester Brown Building)","PEP Nelspruit The Square (Shop 10)","PEP Nelspruit CBD","PEP Riverside Mall (Shop U40)"],Kanyamazane:["PEP Kanyamazane (Shopping Centre Shop 11)"],Emoyeni:["PEP Emoyeni Mall (Shop 22)","PEP Cell Emoyeni Mall (Shop 8)"],"eMalahleni (Witbank)":["PEP Witbank Taxi Rank (Shop 1, 3 Escombe St)","PEP Highveld Mall (Shop U03, Highveld Mall)","PEP Witbank CBD","PEP Saveways Crescent"],Middelburg:["PEP Home Middelburg Mall (Shop 97, Middelburg Mall)","PEP Middelburg CBD (28 Cowen Ntuli Street)","PEP Midwater"],Secunda:["PEP Secunda Mall (Shop 160, Secunda Mall)","PEP Secunda CBD"]},"North West":{Rustenburg:["PEP Rustenburg Mall (Shop 73 Rustenburg Mall)","PEP Waterfall Mall (Shop 12, Waterfall Mall)","PEP Rustenburg CBD","PEP Rustenburg Plaza","PEP Platinum Square"],Potchefstroom:["PEP Potch Walter Sisulu Lane (149 Walter Sisulu Lane)","PEP Home Mooirivier Mall (Shop 16, Mooirivier Mall)","PEP Potch CBD"],"Mahikeng (Mafikeng)":["PEP Mafikeng City Mall (Shop G10, Mafikeng City Mall)","PEP Mmabatho Crossing (Shop 25, Mmabatho Crossing)","PEP Mahikeng CBD","PEP Mega City"],Klerksdorp:["PEP Klerksdorp Terminus (Shop 19, The Terminus Centre)","PEP Klerksdorp CBD","PEP Matlosana Mall","PEP City Mall"],Brits:["PEP Brits Town Centre (Shop G2, Brits Town Centre)","PEP Brits Mall"]},"Northern Cape":{Kimberley:["PEP North Cape Mall (Shop 60, North Cape Mall)","PEP Home Diamond Pavilion Mall (Shop 93, Diamond Pavilion Mall)","PEP Kimberley CBD","PEP New Park"],Upington:["PEP Upington Mall (Shop 12, Upington Mall)","PEP Upington CBD (20 Schroder Street)","PEP Kalahari Mall"],Kuruman:["PEP Kuruman Beare Street (Shop 28B, Beare Street)","PEP Kuruman Mall","PEP The Eye"],"De Aar":["PEP De Aar Main Road (35 Main Road, De Aar)"],Springbok:["PEP Springbok (62 Main Street, Springbok)"]},"Western Cape":{"Cape Town":["PEP CPT Station (Cape Town Station Concourse)","PEP Golden Acre (Shop 10, Golden Acre Mall)","PEP Home Parow Centre (Shop G6, Parow Centre, Voortrekker Rd)","PEP Gardens","PEP V&A Waterfront","PEP Canal Walk","PEP Blue Route"],Stellenbosch:["PEP Eikestad Mall (Shop E4, Eikestad Mall, 43 Andringa Rd)","PEP Kayamandi (Shop 11, Kayamandi Shopping Centre)","PEP Stellenbosch Central"],George:["PEP George Garden Route Mall (Shop 2, Garden Route Mall)","PEP George CBD (82 Hibernia Street)","PEP York Street"],Paarl:["PEP Paarl Mall (Shop 12, Paarl Mall, Cnr Newvlei & Jones St)","PEP Lady Grey","PEP Rembrandt Mall"],Hermanus:["PEP Hermanus Whale Coast Mall (Shop 15, Whale Coast Mall)"],Knysna:["PEP Knysna Long Street (13 Long Street, Knysna)","PEP Knysna Mall","PEP Woodmill Lane"],"Somerset West":["PEP Somerset Mall","PEP Main Road","PEP Waterstone"],"Mossel Bay":["PEP Mossel Bay Mall","PEP Langeberg Mall"],Worcester:["PEP Mountain Mill","PEP Worcester CBD"]}},eR=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm  8cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],tR={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:0}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:0}]},nR=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],rR=({cartItemCount:n,onShippingChange:e,subtotal:t})=>{var Ve,Se,Pe,B,ve;const{user:r}=Rt(),[i,l]=D.useState("pudo"),[c,d]=D.useState(""),[p,f]=D.useState(""),[y,b]=D.useState(""),[N,E]=D.useState(""),[A,P]=D.useState(""),[I,$]=D.useState(""),[W,K]=D.useState(""),[Z,ce]=D.useState("economy"),[J,F]=D.useState({street:((Ve=r.shippingAddress)==null?void 0:Ve.street)||"",suburb:((Se=r.shippingAddress)==null?void 0:Se.suburb)||"",city:((Pe=r.shippingAddress)==null?void 0:Pe.city)||"",province:((B=r.shippingAddress)==null?void 0:B.province)||"",postalCode:((ve=r.shippingAddress)==null?void 0:ve.postalCode)||""}),[j,z]=D.useState(eR),[O,k]=D.useState(tR),[T,L]=D.useState(nR),me=t>=500;return D.useEffect(()=>{me&&i==="door"&&l("pudo")},[me,i]),D.useEffect(()=>{try{const G=localStorage.getItem("spv_pudo_costs");G&&z(JSON.parse(G));const q=localStorage.getItem("spv_paxi_costs");q&&k(JSON.parse(q));const M=localStorage.getItem("spv_door_to_door_costs");M&&L(JSON.parse(M))}catch(G){console.error("Failed to load shipping costs from storage",G)}},[]),D.useEffect(()=>{let G=0,q="";if(i==="pudo"){const M=n<=20?"Extra-Small (XS)":"Small (S)",se=j.find(ze=>ze.name===M);let he="locker";se?se.lockerToLockerCost!==null?G=se.boxCost+se.lockerToLockerCost+se.lockerHandleFee:se.doorToLockerCost!==null?(G=se.boxCost+se.doorToLockerCost+se.doorHandleFee,he="door"):G=se.boxCost:G=60,A&&I&&W&&(q=`${A} | ${I} | ${W} | ${he}`)}else if(i==="paxi"){let M="7-9 Days Service";t>1e3&&(M="3-5 Days Service");const se=O[M],he=n<=20?"Small":"Large",ze=se.find(et=>et.bag.includes(he));ze?G=(he==="Small"?6:15)+ze.serviceCost+ze.handleFee:G=60,c&&p&&y&&N&&(q=`${c} | ${p} | ${y} | ${N} | ${M}`)}else if(i==="door"){const M=Z==="overnight"?"Overnight":"Economy",se=T.find(he=>he.service.includes(M));se?G=se.boxFee+se.initialCharge+(se.ratePerKg!==null?se.ratePerKg:0)+se.handleFee:G=120,J.street&&J.city&&J.postalCode&&(q=JSON.stringify({...J,service:Z}))}e({method:i,cost:G,details:q})},[i,n,j,O,T,Z,A,I,W,c,p,y,N,J,e]),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[s.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(os,{size:18,className:"text-cyan-400"})," Shipping Method"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${i==="pudo"?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${i==="pudo"?"border-cyan-500 bg-cyan-500":"border-gray-500"}`,children:i==="pudo"&&s.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),s.jsx("span",{className:"text-sm text-gray-300",children:"PUDO Locker to Locker"})]}),s.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:i==="pudo",onChange:()=>l("pudo")})]}),s.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${i==="paxi"?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:border-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${i==="paxi"?"border-yellow-500 bg-yellow-500":"border-gray-500"}`,children:i==="paxi"&&s.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),s.jsx("span",{className:"text-sm text-gray-300",children:"PAXI (PEP Store - 7-9 Days)"})]}),s.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:i==="paxi",onChange:()=>l("paxi")})]}),s.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${i==="door"?"bg-purple-900/20 border-purple-500 cursor-pointer":me?"bg-zinc-900 border-gray-800 opacity-50 cursor-not-allowed":"bg-black border-gray-700 hover:border-gray-600 cursor-pointer"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${i==="door"?"border-purple-500 bg-purple-500":me?"border-gray-700":"border-gray-500"}`,children:i==="door"&&s.jsx("div",{className:"w-1.5 h-1.5 bg-black rounded-full"})}),s.jsxs("div",{children:[s.jsx("span",{className:`text-sm ${me?"text-gray-500":"text-gray-300"}`,children:"PUDO Door to Door"}),me&&s.jsx("span",{className:"text-xs text-gray-500 block",children:"Not available for free shipping"})]})]}),s.jsx("input",{type:"radio",className:"hidden",name:"shipping",checked:i==="door",onChange:()=>l("door"),disabled:me})]})]}),i==="pudo"&&s.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-cyan-500/20",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("label",{className:"text-[10px] text-cyan-400 uppercase font-bold",children:"Select PUDO Locker Location"}),s.jsxs("a",{href:"https://thecourierguy.co.za/locations/",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[s.jsx(rv,{size:10})," Find PUDO Locker Location Click Here"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none appearance-none",value:A,onChange:G=>P(G.target.value),children:[s.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(gv).sort().map(G=>s.jsx("option",{value:G,children:G},G))]}),s.jsx(tv,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),A&&s.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none",placeholder:"e.g. Sandton",value:I,onChange:G=>$(G.target.value)})]}),I&&s.jsx("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Locker Name / Address"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-cyan-500 outline-none",placeholder:"e.g. PUDO Locker @ Sandton City",value:W,onChange:G=>K(G.target.value)})]})})]}),i==="paxi"&&s.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 relative space-y-3 p-3 bg-zinc-800/30 rounded border border-yellow-500/20",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("label",{className:"text-[10px] text-yellow-400 uppercase font-bold",children:"Select PEP Store"}),s.jsxs("a",{href:"https://www.paxi.co.za/paxi-points",target:"_blank",rel:"noreferrer",className:"text-[10px] text-cyan-400 hover:underline flex items-center gap-1",children:[s.jsx(rv,{size:10})," Find PAXI Point"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 1: Province"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none appearance-none",value:c,onChange:G=>d(G.target.value),children:[s.jsx("option",{value:"",children:"-- Select Province --"}),Object.keys(gv).sort().map(G=>s.jsx("option",{value:G,children:G},G))]}),s.jsx(tv,{size:14,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none"})]})]}),c&&s.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1",children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 2: City / Town"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. Acornhoek",value:p,onChange:G=>f(G.target.value)})]}),p&&s.jsxs("div",{className:"animate-in fade-in slide-in-from-top-1 space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Step 3: Store Name (or P-Code)"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. PEP Home Acornhoek Mall",value:y,onChange:G=>b(G.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] text-gray-500 uppercase mb-1",children:"Store Street Address"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:border-yellow-500 outline-none",placeholder:"e.g. Shop 27, Acornhoek Mall, R40 Main Rd",value:N,onChange:G=>E(G.target.value)})]})]})]}),i==="door"&&s.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2 space-y-3 p-3 bg-zinc-800/30 rounded border border-purple-500/20",children:[s.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block",children:"Select Service"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${Z==="economy"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[s.jsx("input",{type:"radio",name:"doorService",value:"economy",checked:Z==="economy",onChange:()=>ce("economy"),className:"hidden"}),"Economy Road"]}),s.jsxs("label",{className:`flex-1 flex items-center gap-2 p-2 rounded border cursor-pointer text-xs ${Z==="overnight"?"bg-purple-900/30 border-purple-500 text-white":"bg-black border-gray-700 text-gray-400"}`,children:[s.jsx("input",{type:"radio",name:"doorService",value:"overnight",checked:Z==="overnight",onChange:()=>ce("overnight"),className:"hidden"}),"Overnight Courier"]})]}),s.jsx("label",{className:"text-[10px] text-purple-400 uppercase font-bold block pt-2 border-t border-gray-700/50",children:"Delivery Address"}),s.jsx("input",{type:"text",placeholder:"Street Address",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:J.street,onChange:G=>F({...J,street:G.target.value})}),s.jsx("input",{type:"text",placeholder:"Suburb",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:J.suburb,onChange:G=>F({...J,suburb:G.target.value})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"text",placeholder:"City",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:J.city,onChange:G=>F({...J,city:G.target.value})}),s.jsx("input",{type:"text",placeholder:"Postal Code",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:J.postalCode,onChange:G=>F({...J,postalCode:G.target.value})})]}),s.jsx("input",{type:"text",placeholder:"Province",className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs",value:J.province,onChange:G=>F({...J,province:G.target.value})})]})]})},sR=()=>{const{cart:n,removeFromCart:e,updateCartQuantity:t,getCartTotal:r,user:i,appliedVoucher:l,setAppliedVoucher:c,applyExternalVoucher:d,updateUserAddress:p,setIsStickyProgressBarVisible:f,checkout:y,clearCart:b,register:N,login:E}=Rt(),A=as(),[P,I]=D.useState({method:"pudo",cost:60,details:""}),[$,W]=D.useState(""),[K,Z]=D.useState(""),ce=D.useRef(null),[J,F]=D.useState(null),[j,z]=D.useState(!1),[O,k]=D.useState("register"),[T,L]=D.useState(!1),[me,Ve]=D.useState(!1),[Se,Pe]=D.useState(""),[B,ve]=D.useState(""),[G,q]=D.useState(""),[M,se]=D.useState(""),[he,ze]=D.useState(""),[We,et]=D.useState("");D.useEffect(()=>{f(!1)},[f]),D.useEffect(()=>{me&&i.email&&(qt(),Ve(!1))},[me,i.email]),D.useEffect(()=>{J&&ce.current&&(ce.current.submit(),b())},[J,b]);const Ke=()=>{f(!0),A("/")},Je=r(),He=n.reduce((_e,Ht)=>_e+Ht.quantity,0),_t=Je>=500&&(P.method==="pudo"||P.method==="paxi"),Ct=_t?0:P.cost;let at=0;l&&(l.minSpend&&Je<l.minSpend||(l.discountType==="percentage"?at=Je*l.value/100:at=l.value)),at>Je&&(at=Je);const Te=Je+Ct-at,lt=()=>{if(Z(""),!$.trim())return;d($.trim())?W(""):Z("Invalid or expired voucher code.")},Bt=async()=>{if(!P.details){alert("Please complete all shipping details.");return}if(!i.email){z(!0);return}await qt()},qt=async()=>{P.method==="door"&&await p(JSON.parse(P.details));try{const _e=await y({items:n,total:Te,shippingMethod:P.method,shippingDetails:P.details,shippingCost:Ct});F(_e)}catch(_e){console.error("Order creation failed",_e),alert("Could not create your order. Please try again.")}},dn=async _e=>{if(_e.preventDefault(),Pe(""),he!==We){Pe("Passwords do not match!");return}await N({name:B,email:G,birthday:M,password:he})?(z(!1),Ve(!0)):Pe("Registration failed. Please try again.")},$t=async _e=>{_e.preventDefault(),Pe(""),await E(G,he)?(z(!1),Ve(!0)):Pe("Invalid credentials.")};return n.length===0?s.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[s.jsx("div",{className:"w-20 h-20 bg-zinc-900 rounded-full flex items-center justify-center text-gray-600",children:s.jsx(oc,{size:40})}),s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Your Cart is Empty"}),s.jsx("p",{className:"text-gray-400",children:"Looks like you haven't added any treasures yet."}),s.jsx(Ie,{to:"/",className:"px-6 py-3 bg-pink-600 text-white font-bold rounded-full hover:bg-pink-500 transition-colors",children:"Start Shopping"})]}):s.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[s.jsx(vN,{subtotal:Je,onContinueShopping:Ke}),j&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>z(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-white",children:O==="register"?"Create an Account":"Sign In"}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"An account is required to track your order history and status."})]}),O==="register"?s.jsxs("form",{onSubmit:dn,className:"space-y-4",children:[s.jsx("input",{type:"text",required:!0,value:B,onChange:_e=>ve(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Full Name"}),s.jsx("input",{type:"email",required:!0,value:G,onChange:_e=>q(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),s.jsx("input",{type:"date",required:!0,value:M,onChange:_e=>se(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"}),s.jsx("input",{type:T?"text":"password",required:!0,value:he,onChange:_e=>ze(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Create Password"}),s.jsx("input",{type:T?"text":"password",required:!0,value:We,onChange:_e=>et(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Confirm Password"}),Se&&s.jsx("p",{className:"text-xs text-red-400 text-center",children:Se}),s.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500",children:"Create Account & Continue"}),s.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",s.jsx("button",{type:"button",onClick:()=>k("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):s.jsxs("form",{onSubmit:$t,className:"space-y-4",children:[s.jsx("input",{type:"email",required:!0,value:G,onChange:_e=>q(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Email Address"}),s.jsx("input",{type:T?"text":"password",required:!0,value:he,onChange:_e=>ze(_e.target.value),className:"w-full pl-4 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Password"}),Se&&s.jsx("p",{className:"text-xs text-red-400 text-center",children:Se}),s.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500",children:"Sign In & Continue"}),s.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",s.jsx("button",{type:"button",onClick:()=>k("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx(lg,{ref:ce,amount:(J==null?void 0:J.total)??Te,itemName:J?`Order ${J.orderNumber}`:"Spoil Me Vintage Order",email:i.email,customStr1:(J==null?void 0:J.id)??"",customStr2:P.method,customStr3:(l==null?void 0:l.code)||""}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("h1",{className:"text-2xl font-bold text-white mb-4",children:["Shopping Cart (",He,")"]}),s.jsx("div",{className:"space-y-4",children:n.map((_e,Ht)=>{let Dn=_e.stock;_e.type==="Ring"&&_e.selectedSize&&_e.ringStock&&(Dn=_e.ringStock[_e.selectedSize]||0);const Zn=_e.quantity>=Dn;return s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-4 rounded-xl flex gap-4 items-start",children:[s.jsx("div",{className:"w-20 h-20 bg-black rounded-lg overflow-hidden border border-gray-700 shrink-0",children:s.jsx("img",{src:_e.images[0],alt:_e.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h3",{className:"font-bold text-white text-sm line-clamp-2",children:_e.name}),s.jsx("button",{onClick:()=>e(_e.id,{selectedSize:_e.selectedSize,selectedMaterial:_e.selectedMaterial,selectedChainStyle:_e.selectedChainStyle,selectedChainLength:_e.selectedChainLength}),className:"text-gray-500 hover:text-red-400 p-1",children:s.jsx(Po,{size:16})})]}),s.jsxs("div",{className:"text-xs text-gray-400 mt-1 space-y-0.5",children:[_e.selectedSize&&s.jsxs("div",{children:["Size: ",s.jsx("span",{className:"text-gray-300",children:_e.selectedSize})]}),_e.selectedMaterial&&s.jsxs("div",{children:["Material: ",s.jsx("span",{className:"text-gray-300",children:_e.selectedMaterial})]}),_e.selectedChainStyle&&s.jsxs("div",{children:["Chain: ",s.jsxs("span",{className:"text-gray-300",children:[_e.selectedChainStyle," ",_e.selectedChainLength?`(${_e.selectedChainLength})`:""]})]})]}),s.jsxs("div",{className:"flex justify-between items-end mt-3",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-black rounded-lg border border-gray-700 px-2 py-1",children:[s.jsx("button",{onClick:()=>t(_e.id,_e.quantity-1,_e),className:"text-gray-400 hover:text-white",children:s.jsx(fA,{size:14})}),s.jsx("span",{className:"text-sm font-bold text-white w-4 text-center",children:_e.quantity}),s.jsx("button",{onClick:()=>t(_e.id,_e.quantity+1,_e),className:"text-gray-400 hover:text-white disabled:text-gray-700 disabled:cursor-not-allowed",disabled:Zn,children:s.jsx(Hs,{size:14})})]}),s.jsxs("div",{className:"font-bold text-white",children:["R",((_e.price+(_e.selectedMaterialModifier||0))*_e.quantity).toFixed(2)]})]})]})]},`${_e.id}_${Ht}`)})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(rR,{cartItemCount:He,onShippingChange:I,subtotal:Je}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[s.jsx("h3",{className:"font-bold text-white mb-4",children:"Summary"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-400 mb-4 pb-4 border-b border-gray-800",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{className:"text-white",children:["R",Je.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Shipping"}),s.jsx("span",{className:"text-white",children:_t?s.jsx("span",{className:"text-green-400",children:"FREE"}):`R${Ct.toFixed(2)}`})]}),at>0&&s.jsxs("div",{className:"flex justify-between text-green-400",children:[s.jsx("span",{children:"Discount"}),s.jsxs("span",{children:["-R",at.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex justify-between items-end mb-6",children:[s.jsx("span",{className:"text-gray-300 font-bold",children:"Total"}),s.jsxs("span",{className:"text-2xl font-bold text-white",children:["R",Te.toFixed(2)]})]}),l?s.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-3 rounded-lg mb-4 flex justify-between items-center text-xs",children:[s.jsxs("span",{className:"text-green-400 font-bold flex items-center gap-1",children:[s.jsx(ft,{size:12})," Code ",l.code," Applied"]}),s.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:"Remove"})]}):s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("input",{type:"text",placeholder:"Promo Code",className:"flex-1 bg-black border border-gray-700 rounded-lg px-3 py-2 text-white text-sm focus:border-pink-500 outline-none",value:$,onChange:_e=>W(_e.target.value)}),s.jsx("button",{onClick:lt,className:"bg-zinc-800 hover:bg-zinc-700 text-white px-3 py-2 rounded-lg text-sm border border-gray-600",children:"Apply"})]}),K&&s.jsx("p",{className:"text-xs text-red-400 mb-4",children:K}),s.jsxs("button",{onClick:Bt,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg transition-all flex items-center justify-center gap-2",children:["Pay Now ",s.jsx(At,{size:20})]}),s.jsxs("div",{className:"text-center mt-3 text-xs text-gray-500 flex justify-center gap-2",children:[s.jsx(Ia,{size:14})," Secure Payment via PayFast"]})]})]})]})]})},iR=()=>{const{user:n,products:e,logout:t,submitReview:r}=Rt(),i=as(),[l,c]=D.useState(null),[d,p]=D.useState(!1),[f,y]=D.useState(5),[b,N]=D.useState(""),E=e.filter(J=>n.wishlist.includes(J.id)),A=n.notifications.filter(J=>J.type==="review_request"&&!J.isRead),P=n.notifications.filter(J=>J.type==="gift_ready"),I=n.notifications.filter(J=>J.type==="gift_received"),$=n.notifications.filter(J=>(J.type==="system"||J.type==="affiliate_msg")&&!J.isRead),W=()=>{t(),i("/")},K=async()=>{!l||!l.productId||(await r(l.productId,f,b,l.id),N(""),y(5),c(null),alert("Review submitted! You earned 100 Loyalty Points."))},Z=J=>{if(!J.voucherData)return;const{code:F,amount:j,meta:z}=J.voucherData,O=`${window.location.origin}/#/?voucher=${F}`,k=`Hey ${z.recipientName}! 

${z.senderName} sent you a Spoil Me Vintage Gift Voucher worth R${j}!

"${z.message}"

Redeem it here:
${O}`,T=z.whatsappNumber?z.whatsappNumber.replace(/[^0-9]/g,""):"",L=T?`https://wa.me/${T}?text=${encodeURIComponent(k)}`:`https://wa.me/?text=${encodeURIComponent(k)}`;window.open(L,"_blank")},ce=J=>{window.location.href=`/#/?voucher=${J}`};return n.email?s.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[d&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>p(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[s.jsx("button",{onClick:()=>p(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:s.jsx(vn,{size:20})}),s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:s.jsx(Ur,{size:24})}),s.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),s.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"1 Point for every R10"})," spent on products."]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"100 Points"})," for every verified review."]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing products on social media."]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",s.jsx("span",{className:"text-white font-bold",children:"R1.00 Discount"}),"."]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum redemption is 1000 Points (R10)."})]})]}),s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[s.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[s.jsx(Ur,{size:14})," Membership Rule"]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",s.jsx("strong",{children:"R100 (10,000 pts)"})," per order. To redeem more than R100 at once, you must be a ",s.jsx(Ie,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),s.jsx("button",{onClick:()=>p(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),l&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>c(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsx("button",{onClick:()=>c(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:s.jsx(vn,{size:20})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Write a Review"}),s.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["For: ",s.jsx("span",{className:"text-cyan-400 font-semibold",children:l.productName})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rating"}),s.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(J=>s.jsx("button",{onClick:()=>y(J),className:"text-yellow-400 hover:scale-110 transition-transform",children:s.jsx(Zs,{size:28,fill:J<=f?"currentColor":"none"})},J))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Your Review"}),s.jsx("textarea",{rows:4,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:ring-1 focus:ring-pink-500 focus:border-pink-500",placeholder:"What did you think of the product?",value:b,onChange:J=>N(J.target.value)})]}),s.jsx("button",{onClick:K,disabled:!b.trim(),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:"Submit & Earn 100 Points"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-zinc-800 flex items-center justify-center text-[22px] font-bold text-cyan-400 border border-gray-700 shadow-[0_0_10px_rgba(34,211,238,0.3)]",children:n.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:n.name}),s.jsx("p",{className:"text-gray-400 text-sm",children:n.email}),n.isAdmin&&s.jsx("span",{className:"text-xs text-pink-500 font-bold bg-pink-900/20 px-2 py-1 rounded mt-1 inline-block",children:"ADMIN ACCESS"})]})]}),s.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-4 py-2 bg-zinc-900 hover:bg-zinc-800 text-gray-300 rounded-lg border border-gray-700 transition-colors text-sm",children:[s.jsx(uA,{size:16})," Sign Out"]})]}),$.length>0&&s.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-2xl p-6 animate-in slide-in-from-bottom-4 mb-8",children:[s.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(dN,{size:20,className:"text-yellow-400"})," Updates (",$.length,")"]}),s.jsx("div",{className:"space-y-4",children:$.map(J=>s.jsx("div",{className:"bg-black p-4 rounded-xl border border-gray-800 shadow-sm",children:s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-white font-bold text-sm",children:J.title}),s.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:J.message}),s.jsx("p",{className:"text-[10px] text-gray-600 mt-2",children:new Date(J.date).toLocaleDateString()})]}),J.type==="affiliate_msg"&&s.jsxs(Ie,{to:"/affiliate-program",className:"shrink-0 px-4 py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded-lg transition-colors whitespace-nowrap flex items-center gap-2",children:["Open Dashboard ",s.jsx(At,{size:12})]})]})},J.id))})]}),I.length>0&&s.jsxs("div",{className:"bg-gradient-to-r from-zinc-900 to-black border border-cyan-500/30 rounded-2xl p-6 animate-in slide-in-from-bottom-4 mb-8",children:[s.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(Yt,{size:20,className:"text-cyan-400"})," My Gift Collection (",I.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:I.map(J=>{var F,j,z,O;return s.jsxs("div",{className:"bg-zinc-900/80 p-4 rounded-xl border border-gray-800 space-y-4 shadow-lg",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-white font-bold",children:["Gift from ",(F=J.voucherData)==null?void 0:F.meta.senderName]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Received: ",new Date(J.date).toLocaleDateString()]})]}),s.jsx("div",{className:"px-2 py-1 bg-cyan-900/20 border border-cyan-500/30 text-cyan-400 text-[10px] font-bold rounded uppercase",children:"Ready to Use"})]}),s.jsxs("div",{className:"relative aspect-[1.586/1] rounded-lg overflow-hidden text-white border border-gray-700 bg-black",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-zinc-900 to-black"}),s.jsxs("div",{className:"relative h-full p-4 flex flex-col justify-between z-10",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:"font-cherry text-sm text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400",children:"SV"}),s.jsxs("span",{className:"text-lg font-bold text-white font-architects",children:["R",(j=J.voucherData)==null?void 0:j.amount]})]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"font-architects text-sm text-gray-200 italic line-clamp-2",children:['"',(z=J.voucherData)==null?void 0:z.meta.message,'"']})}),s.jsxs("div",{className:"flex justify-between text-[8px] text-gray-500 uppercase",children:[s.jsx("span",{children:"To You"}),s.jsx("span",{className:"font-mono text-cyan-400 text-[10px]",children:(O=J.voucherData)==null?void 0:O.code})]})]})]}),s.jsxs("button",{onClick:()=>J.voucherData&&ce(J.voucherData.code),className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center justify-center gap-2 shadow-lg group",children:[s.jsx(ic,{size:16})," Redeem Now ",s.jsx(At,{size:14,className:"group-hover:translate-x-1 transition-transform"})]})]},J.id)})})]}),P.length>0&&s.jsxs("div",{className:"bg-zinc-900/50 border border-pink-500/30 rounded-2xl p-6 animate-in slide-in-from-bottom-4 mb-8",children:[s.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(Pd,{size:20,className:"text-pink-500"})," Ready to Send (",P.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:P.map(J=>{var F,j,z,O,k;return s.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-white font-bold",children:["Gift Voucher for ",(F=J.voucherData)==null?void 0:F.meta.recipientName]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(J.date).toLocaleDateString()]})]}),s.jsx("div",{className:"px-2 py-1 bg-green-900/20 border border-green-500/30 text-green-400 text-[10px] font-bold rounded uppercase",children:"Paid & Active"})]}),s.jsxs("div",{className:"relative aspect-[1.586/1] rounded-lg overflow-hidden text-white border border-gray-700 bg-zinc-900",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),s.jsxs("div",{className:"relative h-full p-4 flex flex-col justify-between z-10",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:"font-cherry text-sm text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-cyan-400",children:"SV"}),s.jsxs("span",{className:"text-lg font-bold text-white font-architects",children:["R",(j=J.voucherData)==null?void 0:j.amount]})]}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"font-architects text-sm text-gray-200 italic line-clamp-2",children:['"',(z=J.voucherData)==null?void 0:z.meta.message,'"']})}),s.jsxs("div",{className:"flex justify-between text-[8px] text-gray-500 uppercase",children:[s.jsxs("span",{children:["For: ",(O=J.voucherData)==null?void 0:O.meta.recipientName]}),s.jsxs("span",{children:["By: ",(k=J.voucherData)==null?void 0:k.meta.senderName]})]})]})]}),s.jsx("div",{className:"flex items-center gap-2 pt-2",children:s.jsxs("button",{onClick:()=>Z(J),className:"flex-1 py-3 bg-green-600 hover:bg-green-500 text-white text-sm font-bold rounded-lg transition-colors flex items-center justify-center gap-2 shadow-lg",children:[s.jsx(Pd,{size:16})," Send on WhatsApp"]})}),s.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"Clicking will open WhatsApp with the voucher image/link pre-filled."})]},J.id)})})]}),A.length>0&&s.jsxs("div",{className:"bg-zinc-900/50 border border-gray-800 rounded-2xl p-6 animate-in slide-in-from-bottom-4",children:[s.jsxs("h2",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(hA,{size:20,className:"text-cyan-400"})," Pending Reviews (",A.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:A.map(J=>s.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 flex gap-4 items-center",children:[J.productImage&&s.jsx("img",{src:J.productImage,alt:"",className:"w-16 h-16 rounded-lg object-cover border border-gray-700",onError:F=>{console.warn("Image failed to load in Profile notification:",F.currentTarget.src),F.currentTarget.src="https://via.placeholder.com/64"}}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-white font-medium text-sm line-clamp-1",children:J.productName}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Share your thoughts honestly!"}),s.jsx("p",{className:"text-xs text-purple-400 font-bold mt-1",children:"+100 Points Reward"})]}),s.jsx("button",{onClick:()=>c(J),className:"px-4 py-2 bg-zinc-800 hover:bg-pink-600 text-white text-xs font-bold rounded-lg transition-colors whitespace-nowrap border border-gray-700 hover:border-pink-500",children:"Review Now"})]},J.id))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-900 to-pink-900 border border-purple-700 rounded-2xl p-6 text-white shadow-[0_0_20px_rgba(168,85,247,0.2)] relative overflow-hidden",children:[s.jsx("button",{onClick:()=>p(!0),className:"absolute top-4 right-4 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors text-white/80 hover:text-white z-10",children:s.jsx(ih,{size:18})}),s.jsxs("div",{className:"flex justify-between items-start mb-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold opacity-90 text-purple-200",children:"Loyalty Balance"}),s.jsxs("p",{className:"text-xs opacity-75 flex items-center gap-1 mt-1",children:[s.jsx(ig,{size:10})," 1 pt per R10 spent"]}),s.jsxs("p",{className:"text-xs opacity-75 flex items-center gap-1",children:[s.jsx(lc,{size:10})," 100 pts per review"]}),s.jsxs("p",{className:"text-xs opacity-75 flex items-center gap-1",children:[s.jsx(Oo,{size:10})," 50 pts per share"]})]}),s.jsx(Ur,{size:28,className:"text-pink-300 drop-shadow-[0_0_5px_rgba(236,72,153,0.8)] mr-8"})]}),s.jsxs("div",{className:"text-[22px] font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-white to-pink-200",children:[n.loyaltyPoints," ",s.jsx("span",{className:"text-lg font-normal opacity-80 text-white",children:"Points"})]}),s.jsx("div",{className:"mt-4 text-xs bg-black/30 p-3 rounded-lg border border-white/10",children:n.loyaltyPoints>=1e3?`You have R${(Math.floor(n.loyaltyPoints/1e3)*10).toFixed(2)} off available for your next order!`:`${1e3-n.loyaltyPoints} more points needed for a R10 voucher.`})]}),s.jsxs("div",{className:"bg-zinc-900 rounded-2xl p-6 border border-gray-800 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Partnership Program"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Earn 20% commission on referrals"})]}),s.jsx(Cs,{size:28,className:"text-green-400 drop-shadow-[0_0_5px_rgba(74,222,128,0.6)]"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-black p-3 rounded-lg flex justify-between items-center border border-gray-700",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-gray-500 block uppercase",children:"Your Referral Code"}),s.jsx("span",{className:"font-mono font-bold text-base text-cyan-400 tracking-wider",children:n.affiliateCode||"N/A"})]}),s.jsx("button",{className:"p-2 text-gray-500 hover:text-cyan-400 transition-colors",children:s.jsx(ng,{size:18})})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Total Earnings"}),s.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",n.affiliateEarnings.toFixed(2)]})]}),s.jsx(Ie,{to:"/affiliate-program",className:"block w-full py-2 border border-cyan-500/50 text-cyan-400 rounded-lg font-semibold hover:bg-cyan-900/30 transition-colors text-sm text-center",children:"View Dashboard"})]})]})]}),s.jsxs("div",{className:"pt-8 border-t border-gray-800",children:[s.jsxs("h2",{className:"text-[20px] font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(Ki,{size:20,className:"text-pink-500"})," Wishlist (",E.length,")"]}),E.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:E.map(J=>s.jsx(dr,{product:J},J.id))}):s.jsx("p",{className:"text-gray-500 text-sm",children:"Your wishlist is empty."})]})]}):(i("/login"),null)},oR=()=>{const[n,e]=D.useState(""),[t,r]=D.useState(""),[i,l]=D.useState(""),{login:c}=Rt(),d=as(),p=async f=>{f.preventDefault(),l(""),await c(n,t)?d("/admin"):l("Invalid credentials. Please check your email and password.")};return s.jsx("div",{className:"flex items-center justify-center min-h-[80vh]",children:s.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-zinc-900 rounded-2xl border border-gray-800 shadow-xl",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-3xl font-handwriting font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Welcome Back"}),s.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Sign in to access your account"})]}),s.jsxs("form",{className:"space-y-6",onSubmit:p,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(kd,{size:18,className:"text-gray-500"})}),s.jsx("input",{type:"email",name:"email",autoComplete:"email",required:!0,value:n,onChange:f=>e(f.target.value),className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:"name@example.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(ac,{size:18,className:"text-gray-500"})}),s.jsx("input",{type:"password",name:"password",autoComplete:"current-password",required:!0,value:t,onChange:f=>r(f.target.value),className:"w-full pl-10 pr-4 py-3 bg-black border border-gray-700 rounded-lg text-white focus:outline-none focus:border-pink-500 focus:ring-1 focus:ring-pink-500 transition-colors",placeholder:""})]})]})]}),i&&s.jsx("div",{className:"p-3 bg-red-900/20 border border-red-900/50 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-400 text-center",children:i})}),s.jsxs("button",{type:"submit",className:"w-full flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-pink-600 hover:bg-pink-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 transition-all hover:shadow-[0_0_15px_rgba(236,72,153,0.4)]",children:["Sign In ",s.jsx(At,{size:16})]})]}),s.jsx("div",{className:"text-center pt-4 border-t border-gray-800",children:s.jsxs("p",{className:"text-xs text-gray-500",children:["Don't have an account? ",s.jsx("span",{className:"text-gray-400",children:"Registration is currently invite only."})]})})]})})},aR=()=>{const{addSystemNotification:n,user:e,memberCount:t}=Rt(),r=as(),i=D.useRef(null),[l,c]=D.useState(null),d=(y,b)=>{if(!e.email){alert("Please create an account or log in to subscribe."),r("/login");return}c({name:y,amount:b}),setTimeout(()=>{i.current&&i.current.submit()},100)};D.useEffect(()=>{const y=new Date,b=y.getDate(),N=`${y.getFullYear()}-${y.getMonth()}`;if(b===15){const E=`notif_sent_${N}_15`;!localStorage.getItem(E)&&e.email&&(n("Only 2 Spots Left!","The Spoil Me Package has only two spots remaining. Claim yours via WhatsApp or Email delivery now!","system"),localStorage.setItem(E,"true"))}},[n,e.email]);const p=800-t,f=Math.min(100,t/800*100);return s.jsxs("div",{className:"py-8 space-y-12",children:[l&&s.jsx(lg,{ref:i,amount:l.amount,itemName:`${l.name} Membership`,email:e.email,isSubscription:!0,frequency:3,cycles:0,customStr1:e.id,customStr2:"MEMBERSHIP_SIGNUP"}),s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("h1",{className:"font-cherry text-5xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Membership Perks"}),s.jsx("p",{className:"font-architects text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto",children:"Join the Spoil Me Vintage family and unlock a world of exclusive benefits, discounts, and special gifts!"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-8",children:[s.jsxs(Ie,{to:"/weekly-winners",className:"block relative bg-zinc-900 border-4 border-cyan-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.4)"},children:[s.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-cyan-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Starter"}),s.jsx("h2",{className:"text-2xl font-bold text-cyan-400 text-center mt-4 mb-2",children:"Spoil Me Package"}),s.jsxs("div",{className:"text-center mb-2",children:[s.jsx("span",{className:"text-4xl font-bold text-white",children:"R19"}),s.jsx("span",{className:"text-gray-400",children:"/month"})]}),s.jsx("p",{className:"text-[10px] text-cyan-300 text-center mb-6 font-semibold uppercase tracking-wide border border-cyan-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-cyan-500/30 mb-6 relative overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between text-xs font-bold text-cyan-400 mb-1",children:[s.jsxs("span",{children:[t," / 800 members"]}),s.jsxs("span",{className:`${p<=5?"text-red-500 animate-pulse":"text-white"}`,children:[p," spot",p!==1?"s":""," left"]})]}),s.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:s.jsx("div",{className:`h-3 rounded-full shadow-[0_0_10px_rgba(34,211,238,0.8)] ${p<=5?"bg-red-500":"bg-cyan-500"}`,style:{width:`${f}%`,transition:"width 1s ease-in-out"}})}),s.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Progress updates daily"}),p<=5&&s.jsx("div",{className:"absolute top-0 right-0 bg-red-600 text-white text-[9px] font-bold px-2 py-0.5 rounded-bl-lg shadow-md animate-pulse",children:"HURRY!"})]}),s.jsx("ul",{className:"space-y-3 mb-8 flex-1",children:s.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[s.jsx(ns,{className:"text-cyan-400 shrink-0 mt-0.5",size:16}),s.jsxs("span",{children:[s.jsx("strong",{className:"text-white",children:"300 lucky winners"})," of this package get a gift each week between R50 - R500 voucher to spend in this store"]})]})}),s.jsxs("div",{className:"mt-auto",children:[s.jsx("button",{onClick:y=>{y.preventDefault(),y.stopPropagation(),d("Spoil Me",19)},className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[s.jsx(Ia,{size:12})," PayFast Secure Subscription"]})]})]}),s.jsxs("div",{className:"relative bg-zinc-900 border-4 border-purple-800 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(107, 33, 168, 0.4)"},children:[s.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-purple-800 text-white font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Popular"}),s.jsx("h2",{className:"text-2xl font-bold text-purple-500 text-center mt-4 mb-2",children:"Basic"}),s.jsxs("div",{className:"text-center mb-2",children:[s.jsx("span",{className:"text-4xl font-bold text-white",children:"R49"}),s.jsx("span",{className:"text-gray-400",children:"/month"})]}),s.jsx("p",{className:"text-[10px] text-purple-300 text-center mb-6 font-semibold uppercase tracking-wide border border-purple-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),s.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(Yt,{className:"text-purple-500 shrink-0",size:16}),s.jsxs("span",{children:["Receive a ",s.jsx("strong",{className:"text-white",children:"R50 Birthday Voucher"})]})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(ft,{className:"text-purple-500 shrink-0",size:16}),s.jsx("span",{children:"Get 20% discount on non-discount products"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(kr,{className:"text-purple-500 shrink-0",size:16}),s.jsx("span",{children:"Get a chance to win a giveaway"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(ft,{className:"text-purple-500 shrink-0",size:16}),s.jsx("span",{children:"Receive 25% Discount on Public Holidays"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(Yt,{className:"text-purple-500 shrink-0",size:16}),s.jsx("span",{children:"Receive a free gift every 6th month"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(ns,{className:"text-purple-500 shrink-0",size:16}),s.jsx("span",{children:"Receive R200 gift voucher each month to spend in store"})]})]}),s.jsxs("div",{className:"mt-auto",children:[s.jsx("button",{onClick:()=>d("Basic",49),className:"w-full py-3 bg-purple-900 hover:bg-purple-800 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[s.jsx(Ia,{size:12})," PayFast Secure Subscription"]})]})]}),s.jsxs("div",{className:"relative bg-zinc-900 border-4 border-pink-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(236, 72, 153, 0.4)"},children:[s.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-pink-500 text-white font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider",children:"Recommended"}),s.jsx("h2",{className:"text-2xl font-bold text-pink-500 text-center mt-4 mb-2",children:"Premium"}),s.jsxs("div",{className:"text-center mb-2",children:[s.jsx("span",{className:"text-4xl font-bold text-white",children:"R99"}),s.jsx("span",{className:"text-gray-400",children:"/month"})]}),s.jsx("p",{className:"text-[10px] text-pink-300 text-center mb-6 font-semibold uppercase tracking-wide border border-pink-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),s.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(Yt,{className:"text-pink-500 shrink-0",size:16}),s.jsxs("span",{children:["Receive ",s.jsx("strong",{className:"text-white",children:"R100 Birthday Voucher"})]})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(ft,{className:"text-pink-500 shrink-0",size:16}),s.jsx("span",{children:"Save 20% on all non-discount products"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(ns,{className:"text-pink-500 shrink-0",size:16}),s.jsx("span",{children:"Get a chance to win a giveaway each month"})]}),s.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[s.jsx(Yt,{className:"text-pink-500 shrink-0 mt-0.5",size:16}),s.jsx("span",{children:"Received a free gift on Valentine's, Mother's, Father's Day & Festive Season"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(ft,{className:"text-pink-500 shrink-0",size:16}),s.jsx("span",{children:"Received 25% discount on Public Holidays"})]}),s.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[s.jsx(Yt,{className:"text-pink-500 shrink-0 mt-0.5",size:16}),s.jsx("span",{children:"Received a free gift on your first month and then every 3rd month"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(ns,{className:"text-pink-500 shrink-0",size:16}),s.jsx("span",{children:"Receive R200 voucher to spend in store!"})]})]}),s.jsxs("div",{className:"mt-auto",children:[s.jsx("button",{onClick:()=>d("Premium",99),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all shadow-lg mb-2",children:"Subscribe Now"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[s.jsx(Ia,{size:12})," PayFast Secure Subscription"]})]})]}),s.jsxs("div",{className:"relative bg-zinc-900 border-4 border-lime-500 rounded-2xl p-6 flex flex-col transition-transform duration-300 hover:scale-[1.02]",style:{boxShadow:"0 0 25px 5px rgba(132, 204, 22, 0.4)"},children:[s.jsxs("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-lime-500 text-black font-bold px-4 py-1 rounded-full text-sm shadow-lg uppercase tracking-wider flex items-center gap-1",children:[s.jsx(Er,{size:14})," The Ultimate"]}),s.jsx("h2",{className:"text-2xl font-bold text-lime-400 text-center mt-4 mb-2",children:"Deluxe"}),s.jsxs("div",{className:"text-center mb-2",children:[s.jsx("span",{className:"text-4xl font-bold text-white",children:"R199"}),s.jsx("span",{className:"text-gray-400",children:"/month"})]}),s.jsx("p",{className:"text-[10px] text-lime-300 text-center mb-6 font-semibold uppercase tracking-wide border border-lime-500/30 rounded-full py-1 px-2 w-fit mx-auto",children:"Cancel at anytime"}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-lime-500/30 mb-6",children:[s.jsxs("div",{className:"flex justify-between text-xs font-bold text-lime-400 mb-1",children:[s.jsx("span",{children:"490 / 500 members"}),s.jsx("span",{className:"text-red-400 animate-pulse",children:"10 spots left"})]}),s.jsx("div",{className:"w-full bg-gray-800 rounded-full h-3 mb-2 overflow-hidden",children:s.jsx("div",{className:"bg-lime-500 h-3 rounded-full shadow-[0_0_10px_rgba(132,204,22,0.8)]",style:{width:"98%"}})}),s.jsx("p",{className:"text-[10px] text-center text-gray-400 uppercase tracking-widest",children:"Progress updates monthly"})]}),s.jsxs("ul",{className:"space-y-3 mb-8 flex-1",children:[s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(Yt,{className:"text-lime-400 shrink-0",size:16}),s.jsxs("span",{children:["Receive a ",s.jsx("strong",{className:"text-white",children:"R200 Birthday Voucher"})]})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(ft,{className:"text-lime-400 shrink-0",size:16}),s.jsx("span",{children:"Save 20% on all non-discount products"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(ns,{className:"text-lime-400 shrink-0",size:16}),s.jsx("span",{children:"Get a chance to win a giveaway each month"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(kr,{className:"text-lime-400 shrink-0",size:16}),s.jsx("span",{className:"text-white font-bold",children:"Receive 50% - 70% discount on the 16th of each month"})]}),s.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[s.jsx(Yt,{className:"text-lime-400 shrink-0 mt-0.5",size:16}),s.jsx("span",{children:"Received a free gift on Valentine's, Mother's, Father's Day & Festive Season"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(ft,{className:"text-lime-400 shrink-0",size:16}),s.jsx("span",{children:"Received 30% discount on Public Holidays"})]}),s.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[s.jsx(Yt,{className:"text-lime-400 shrink-0 mt-0.5",size:16}),s.jsx("span",{children:"Receive a free gift 1st month and then every 2nd month"})]}),s.jsxs("li",{className:"flex items-center gap-3 text-sm text-gray-300",children:[s.jsx(ns,{className:"text-lime-400 shrink-0",size:16}),s.jsx("span",{children:"A free gift voucher to spend in store!"})]}),s.jsxs("li",{className:"flex items-start gap-3 text-sm text-lime-200 bg-lime-900/20 p-2 rounded border border-lime-500/20",children:[s.jsx(Er,{className:"text-lime-400 shrink-0 mt-0.5",size:16}),s.jsxs("span",{children:["For loyal members, buy products at cheapest price, pay as little as ",s.jsx("strong",{className:"text-white text-lg underline",children:"R8 per item"})]})]})]}),s.jsxs("div",{className:"mt-auto",children:[s.jsx("button",{onClick:()=>d("Deluxe",199),className:"w-full py-3 bg-lime-600 hover:bg-lime-500 text-black font-bold rounded-xl transition-all shadow-lg mb-2 hover:shadow-[0_0_20px_rgba(132,204,22,0.4)]",children:"Subscribe Now"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[10px] text-gray-500",children:[s.jsx(Ia,{size:12})," PayFast Secure Subscription"]})]})]})]}),s.jsxs("div",{className:"mt-16 border-t border-gray-800 pt-12 text-center",children:[s.jsxs("h2",{className:"font-cherry text-3xl text-white flex items-center justify-center gap-3 mb-4",children:[s.jsx(Yt,{className:"text-yellow-400",size:32})," Want to Earn Rewards for Free?"]}),s.jsx("p",{className:"text-gray-400 max-w-lg mx-auto mb-8",children:"You don't have to be a member to start earning. Join our social channels, leave reviews, and shop to earn points."}),s.jsxs(Ie,{to:"/earn-rewards",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white font-bold rounded-full shadow-lg transition-all hover:scale-105",children:["Go to Rewards Hub ",s.jsx(At,{size:20})]})]})]})},lR=()=>{var y,b,N,E;const{user:n,claimSocialReward:e}=Rt(),[t,r]=D.useState(!1),[i,l]=D.useState(null),[c,d]=D.useState(""),p=(A,P)=>{l({platform:A,name:P}),d("")},f=()=>{if(i){if(i.platform!=="whatsapp"&&!c.trim()){alert(`Please enter your ${i.name} username to verify.`);return}e(i.platform,c),l(null)}};return s.jsxs("div",{className:"max-w-5xl mx-auto py-8 space-y-12 relative",children:[i&&s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>l(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 max-w-sm w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"One Last Step!"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"To prevent fraud and secure your points, please enter your username. This allows us to verify your follow."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:["Your ",i.name," Username"]}),s.jsxs("div",{className:"relative",children:[s.jsx(uc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:"text",value:c,onChange:A=>d(A.target.value),className:"w-full pl-10 p-3 bg-black border border-gray-700 rounded-xl text-white text-sm focus:border-pink-500 outline-none",placeholder:"@username"})]})]}),s.jsx("button",{onClick:f,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all",children:"Verify & Claim Points"})]}),s.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:s.jsx(vn,{size:20})})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-6 border-b border-gray-800 pb-8",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h1",{className:"font-cherry text-4xl text-white",children:"Loyalty Rewards"}),s.jsx("button",{onClick:()=>r(!0),className:"text-gray-500 hover:text-cyan-400 transition-colors",title:"How it works",children:s.jsx(ih,{size:24})})]}),s.jsx("p",{className:"text-gray-400 text-lg max-w-xl",children:"Complete simple tasks to earn points and unlock discounts on your next vintage treasure."})]}),s.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-purple-500/30 min-w-[250px] text-center shadow-[0_0_20px_rgba(168,85,247,0.15)] relative group",children:[s.jsx("div",{className:"absolute inset-0 bg-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"text-sm text-gray-400 uppercase tracking-wider mb-1 font-semibold",children:"Your Balance"}),s.jsx("div",{className:"text-5xl font-bold text-white mb-2 font-mono tracking-tight",children:n.loyaltyPoints}),s.jsx("div",{className:"text-xs text-purple-400 font-bold bg-purple-900/20 py-1 px-3 rounded-full w-fit mx-auto",children:"Points Available"})]})]})]}),t&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>r(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-purple-500 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-[0_0_50px_rgba(168,85,247,0.3)] animate-in zoom-in-95 duration-200",children:[s.jsx("button",{onClick:()=>r(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:s.jsx(vn,{size:20})}),s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-3 bg-purple-900/50 rounded-full border border-purple-500 text-purple-300",children:s.jsx(Ur,{size:24})}),s.jsx("h3",{className:"text-xl font-bold text-white",children:"How Rewards Work"})]}),s.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-green-400 font-bold",children:"1"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white",children:"Earn Points"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"1 Point for every R10"})," spent."]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"100 Points"})," for verified reviews."]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get ",s.jsx("span",{className:"text-green-400",children:"50 Points"})," for sharing."]})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"shrink-0 w-8 h-8 bg-zinc-800 rounded-full flex items-center justify-center text-pink-500 font-bold",children:"2"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white",children:"Redeem for Discounts"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["100 Points = ",s.jsx("span",{className:"text-white font-bold",children:"R1.00 Discount"}),"."]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum redemption is 1000 Points (R10)."})]})]}),s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-3 rounded-lg mt-2",children:[s.jsxs("h4",{className:"font-bold text-purple-300 flex items-center gap-2 text-xs uppercase tracking-wide",children:[s.jsx(Ur,{size:14})," Membership Rule"]}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1 leading-relaxed",children:["Non-members can redeem up to ",s.jsx("strong",{children:"R100 (10,000 pts)"})," per order. To redeem more, you must be a ",s.jsx(Ie,{to:"/membership",className:"text-purple-400 underline",children:"Basic Member"})," or higher."]})]})]}),s.jsx("button",{onClick:()=>r(!1),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-xl mt-6 transition-colors",children:"Got it!"})]})]}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(Yt,{className:"text-yellow-400"})," Quick Earn: Social Media"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-pink-500 transition-all",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-pink-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"w-16 h-16 bg-black border border-pink-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(236,72,153,0.4)] relative z-10",children:s.jsx(Xs,{size:32,className:"text-pink-500"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"TikTok"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Get exclusive clips & flash sales."}),(y=n.socialRewards)!=null&&y.tiktok?s.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[s.jsx(ft,{size:18})," 100 Pts Claimed"]}):s.jsxs("button",{onClick:()=>p("tiktok","TikTok"),className:"mt-auto w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[s.jsx(ko,{size:16})," Join & Earn 100"]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-blue-500 transition-all",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-600/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"w-16 h-16 bg-black border border-blue-500/50 rounded-full flex items-center justify-center mb-4 shadow-[0_0_15px_rgba(59,130,246,0.4)] relative z-10",children:s.jsx(Hl,{size:32,className:"text-blue-500"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Facebook"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Join our community group."}),(b=n.socialRewards)!=null&&b.facebook?s.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[s.jsx(ft,{size:18})," 100 Pts Claimed"]}):s.jsxs("button",{onClick:()=>p("facebook","Facebook"),className:"mt-auto w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(59,130,246,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[s.jsx(ko,{size:16})," Join & Earn 100"]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-white/20 transition-all",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-gray-800/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:s.jsx(ad,{size:32,className:"text-white"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"Twitter"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"News and polls."}),(N=n.socialRewards)!=null&&N.twitter?s.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[s.jsx(ft,{size:18})," 100 Pts Claimed"]}):s.jsxs("button",{onClick:()=>p("twitter","Twitter"),className:"mt-auto w-full py-3 bg-gray-700 hover:bg-gray-600 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(255,255,255,0.2)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[s.jsx(ko,{size:16})," Join & Earn 100"]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col items-center text-center relative group overflow-hidden hover:border-green-500/30 transition-all",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-green-900/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsx("div",{className:"w-16 h-16 bg-black border border-gray-700 rounded-full flex items-center justify-center mb-4 shadow-lg relative z-10",children:s.jsx(lc,{size:32,className:"text-green-500"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-1 relative z-10",children:"WhatsApp"}),s.jsx("p",{className:"text-sm text-gray-400 mb-4 relative z-10",children:"Instant drop notifications."}),(E=n.socialRewards)!=null&&E.whatsapp?s.jsxs("button",{disabled:!0,className:"mt-auto w-full py-3 bg-zinc-800 border border-zinc-700 text-gray-400 font-bold rounded-xl flex items-center justify-center gap-2 cursor-not-allowed",children:[s.jsx(ft,{size:18})," 100 Pts Claimed"]}):s.jsxs("button",{onClick:()=>e("whatsapp"),className:"mt-auto w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl shadow-lg hover:shadow-[0_0_15px_rgba(34,197,94,0.4)] transition-all flex items-center justify-center gap-2 relative z-10 text-sm",children:[s.jsx(ko,{size:16})," Join & Earn 100"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-8 border-t border-gray-800",children:[s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[s.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:s.jsx(ig,{className:"text-cyan-400",size:24})}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Shop & Earn"}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 1 point for every R10 you spend on any purchase automatically."}),s.jsx(Ie,{to:"/",className:"text-cyan-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Start Shopping"})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 hover:border-yellow-500/30 transition-colors",children:[s.jsx("div",{className:"w-12 h-12 bg-black rounded-full flex items-center justify-center mb-4 border border-gray-700",children:s.jsx(Zs,{className:"text-yellow-400",size:24})}),s.jsx("h3",{className:"text-lg font-bold text-white",children:"Review Products"}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Earn 100 points for every verified review you leave on items you've bought."}),s.jsx(Ie,{to:"/profile",className:"text-yellow-400 text-sm font-bold mt-4 inline-block hover:underline",children:"Check Pending Reviews"})]})]})]})},cR=()=>{const{user:n,affiliateLeaderboard:e,applyForAffiliate:t,buyAffiliateContent:r,joinAffiliateElite:i,register:l,login:c,getAllUsers:d}=Rt(),[p,f]=D.useState(!1),[y,b]=D.useState(1),[N,E]=D.useState(!1),[A,P]=D.useState(!1),[I,$]=D.useState({name:n.name!=="Guest"?n.name.split(" ")[0]:"",surname:n.name!=="Guest"?n.name.split(" ").slice(1).join(" "):"",email:n.email||"",dob:n.birthday||"",gender:"",reason:"",socials:"",password:""}),[W,K]=D.useState(!1),[Z,ce]=D.useState(!1),[J,F]=D.useState(!1),[j,z]=D.useState(!1),[O,k]=D.useState(""),[T,L]=D.useState(""),[me,Ve]=D.useState({}),[Se,Pe]=D.useState(!1),[B,ve]=D.useState([]);D.useEffect(()=>{var Te,lt;((Te=n.affiliateStats)==null?void 0:Te.status)==="pending"&&P(!0),((lt=n.affiliateStats)==null?void 0:lt.status)==="approved"&&d().then(Bt=>{const qt=Bt.filter(dn=>{var $t;return(($t=dn.affiliateStats)==null?void 0:$t.parentId)===n.id});ve(qt)})},[n.affiliateStats,n.id,d]);const G=D.useMemo(()=>[{title:"1. Introduction",content:'These Terms and Conditions ("Agreement") govern your participation in the Spoil Me Vintage Partnership Program ("Program"). By enrolling in the Program, you agree to be bound by these terms.'},{title:"2. Definitions",content:'"Partner", "You", and "Your" refer to the individual or entity applying for or participating in the Program. "We", "Us", and "Our" refer to Spoil Me Vintage. "Commission" refers to the amount paid for a successful referral.'},{title:"3. Enrollment",content:"To begin the enrollment process, you must submit a complete Partnership Application. We will evaluate your application and notify you of your acceptance or rejection."},{title:"4. Affiliate Links",content:"You will be issued a unique Affiliate URL or code. It is your responsibility to ensure that these links are correctly formatted and used on your site."},{title:"5. Commissions",content:"You will earn commissions based on the tiered structure defined in your dashboard. Standard commissions range from 10% to 20%. Additionally, you earn a 1% override commission on sales generated by partners you directly recruit."},{title:"6. Payment Terms",content:"Commissions are paid once a month. Payments are made via EFT to a South African bank account. Minimum payout balance is R200."}],[]),q=G.length>0&&G.every((Te,lt)=>me[lt]),M=async Te=>{var Bt;if(Te.preventDefault(),L(""),await c(I.email,O)){z(!1),b(2);const dn=(await d()).find($t=>$t.email.toLowerCase()===I.email.toLowerCase());((Bt=dn==null?void 0:dn.affiliateStats)==null?void 0:Bt.status)==="approved"&&(f(!1),setTimeout(()=>{var $t;return($t=document.getElementById("affiliate-dashboard"))==null?void 0:$t.scrollIntoView({behavior:"smooth"})},500))}else L("Invalid password. Please try again.")},se=async Te=>{if(Te.preventDefault(),!I.reason.trim()||!W)return;const lt={id:`aff_sub_${Date.now()}`,type:"system",title:"Partnership Application Received",message:"Your application to become a partner is pending review. Good luck!",date:new Date().toISOString(),isRead:!1},Bt={status:"pending",gender:I.gender,joinReason:`${I.reason} | Socials: ${I.socials}`,totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,recurringBalance:0,isElite:!1,hasContentAccess:!1};if(n.email)await t(I),F(!0);else{if(!I.email||!I.password){alert("Please provide email and password to create your account.");return}if((await d()).find(_e=>_e.email.toLowerCase()===I.email.toLowerCase())){z(!0),L("This email address is already associated with an account. Please Log In to continue your application.");return}if(!await l({name:`${I.name} ${I.surname}`,email:I.email,password:I.password,birthday:I.dob,notifications:[lt],affiliateStats:Bt})){alert("Failed to create account. Please try again.");return}F(!0)}},he=()=>{f(!1),F(!1),b(1),ce(!1),K(!1),Ve({}),z(!1),k(""),L("")},ze=async()=>{window.confirm("Purchase the Partner Content Pack for R250?")&&(await r(),alert("Content Unlocked!"))},We=async()=>{window.confirm("Upgrade to Elite Partner Status? A fee applies.")&&(await i(),alert("Welcome to the Elite Squad!"))},et=()=>{K(!0),E(!1)},Ke=Te=>{Ve(lt=>({...lt,[Te]:!lt[Te]}))},Je=()=>{const Te=`${window.location.origin}/#/?ref=${n.affiliateCode}`;navigator.clipboard.writeText(Te),Pe(!0),setTimeout(()=>Pe(!1),2e3)},He=n.affiliateStats||{status:"none",totalSalesCount:0,totalSalesValue:0,commissionRate:10,balance:0,isElite:!1},_t=He.status==="approved";let Ct=50,at=0;return He.totalSalesCount<50?(Ct=50,at=0):He.totalSalesCount<100?(Ct=100,at=50):(He.totalSalesCount<500,Ct=500,at=100),He.totalSalesCount>=500||(He.totalSalesCount-at)/(Ct-at)*100,s.jsxs("div",{className:"max-w-6xl mx-auto py-8 space-y-16",children:[s.jsxs("div",{className:"relative rounded-3xl overflow-hidden bg-zinc-900 border border-pink-500/30 min-h-[400px] flex items-center",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black via-zinc-900/90 to-transparent z-10"}),s.jsx("div",{className:"absolute right-0 top-0 h-full w-1/2 bg-[url('https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80')] bg-cover bg-center opacity-40 grayscale mix-blend-luminosity"}),s.jsxs("div",{className:"relative z-20 p-8 md:p-16 max-w-2xl space-y-6",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 bg-pink-900/30 border border-pink-500/50 text-pink-400 px-4 py-1.5 rounded-full text-sm font-bold uppercase tracking-wider",children:[s.jsx(SA,{size:16})," Join the Team"]}),s.jsxs("h1",{className:"font-cherry text-5xl md:text-7xl text-white leading-none drop-shadow-[0_0_15px_rgba(236,72,153,0.6)]",children:["Partner & ",s.jsx("br",{}),s.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Earn Cash"})]}),s.jsxs("p",{className:"text-gray-300 text-lg leading-relaxed",children:["Turn your passion for vintage into profit. Join our exclusive Partnership Program and earn up to ",s.jsx("strong",{children:"20% Lifetime Commission"})," on every sale you generate."]}),!_t&&He.status!=="pending"&&s.jsxs("button",{onClick:()=>f(!0),className:"px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.4)] flex items-center gap-2",children:["Join the Program ",s.jsx(At,{size:20})]}),He.status==="pending"&&s.jsxs("button",{onClick:()=>P(!0),className:"inline-flex items-center gap-2 bg-yellow-900/20 border border-yellow-500/30 text-yellow-400 px-6 py-3 rounded-lg font-bold hover:bg-yellow-900/40 transition-colors",children:[s.jsx(ii,{size:18})," Check Application Status"]}),_t&&s.jsxs("button",{onClick:()=>{var Te;return(Te=document.getElementById("affiliate-dashboard"))==null?void 0:Te.scrollIntoView({behavior:"smooth"})},className:"px-8 py-4 bg-green-600 text-white font-bold rounded-full hover:bg-green-500 transition-all shadow-[0_0_20px_rgba(34,197,94,0.4)] flex items-center gap-2",children:["Go to Dashboard ",s.jsx(At,{size:20})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[s.jsx("div",{className:"w-16 h-16 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto mb-4 text-green-500 font-bold text-xl shadow-[0_0_15px_rgba(34,197,94,0.3)]",children:"1"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sign Up & Share"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Apply to become a partner. Once approved, share your unique code to start earning."})]}),s.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[s.jsx("div",{className:"w-16 h-16 bg-black border-2 border-pink-500 rounded-full flex items-center justify-center mx-auto mb-4 text-pink-500 font-bold text-xl shadow-[0_0_15px_rgba(236,72,153,0.3)]",children:"2"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Recruit & Earn"}),s.jsxs("p",{className:"text-gray-400 text-sm",children:["Invite others to join your team. You earn a ",s.jsx("strong",{children:"1% commission"})," on their sales forever!"]})]}),s.jsxs("div",{className:"bg-zinc-900/50 p-6 rounded-2xl border border-gray-800 text-center relative group hover:bg-zinc-900 transition-colors",children:[s.jsx("div",{className:"w-16 h-16 bg-black border-2 border-purple-500 rounded-full flex items-center justify-center mx-auto mb-4 text-purple-500 font-bold text-xl shadow-[0_0_15px_rgba(168,85,247,0.3)]",children:"3"}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Get Paid"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"We payout commissions monthly via EFT to your South African bank account."})]})]}),_t&&s.jsxs("div",{id:"affiliate-dashboard",className:"space-y-8 animate-in slide-in-from-bottom-10 duration-700 pt-8 border-t border-gray-800",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Your Partnership Dashboard"}),s.jsxs("p",{className:"text-gray-400",children:["Welcome back, ",n.name.split(" ")[0],"! Manage your links and earnings."]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:ze,className:"px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-white rounded-lg text-sm border border-gray-700 flex items-center gap-2",children:[s.jsx(iA,{size:16})," Content Assets"]}),!He.isElite&&s.jsxs("button",{onClick:We,className:"px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:brightness-110",children:[s.jsx(Er,{size:16})," Go Elite"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"p-3 bg-green-900/20 rounded-lg text-green-400",children:s.jsx(Cs,{size:24})}),s.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Total Earnings"})]}),s.jsxs("div",{className:"text-3xl font-bold text-white",children:["R",He.balance.toFixed(2)]}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Next payout date: 1st of month"})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"p-3 bg-blue-900/20 rounded-lg text-blue-400",children:s.jsx(oi,{size:24})}),s.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Direct Sales"})]}),s.jsx("div",{className:"text-3xl font-bold text-white",children:He.totalSalesCount}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Value: R",He.totalSalesValue.toFixed(0)]})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"p-3 bg-purple-900/20 rounded-lg text-purple-400",children:s.jsx(Zs,{size:24})}),s.jsx("span",{className:"text-xs bg-zinc-800 px-2 py-1 rounded text-gray-400",children:"Current Rate"})]}),s.jsxs("div",{className:"text-3xl font-bold text-white",children:[He.commissionRate,"%"]}),s.jsxs("div",{className:"text-xs text-purple-400 mt-1",children:["Tier: ",He.commissionRate>=20?"Gold Elite":He.commissionRate>=15?"Silver":He.commissionRate>=11?"Bronze":"Starter"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-2xl border border-gray-800",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(Oo,{size:20,className:"text-pink-500"})," Your Referral Link"]}),s.jsx("div",{className:"bg-black p-4 rounded-xl border border-gray-700 flex flex-col gap-3",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("code",{className:"flex-1 text-cyan-400 text-sm break-all font-mono bg-zinc-900/50 p-3 rounded border border-gray-800 w-full",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),s.jsxs("button",{onClick:Je,className:"w-full md:w-auto px-6 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg transition-colors flex items-center justify-center gap-2 border border-gray-600",children:[Se?s.jsx(ft,{size:14}):s.jsx(ng,{size:14}),Se?"Copied!":"Copy Link"]})]})}),s.jsx("div",{className:"mt-4 bg-pink-900/20 p-3 rounded-lg border border-pink-500/20",children:s.jsxs("p",{className:"text-xs text-pink-300",children:[s.jsx("strong",{children:"Tip:"})," Customers get ",s.jsx("strong",{children:"5% OFF"})," when using your code ",s.jsx("code",{children:n.affiliateCode})," at checkout!"]})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black p-6 rounded-2xl border border-cyan-500/30 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:s.jsx(xN,{size:80,className:"text-cyan-500"})}),s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2 relative z-10",children:[s.jsx(oi,{size:20,className:"text-cyan-400"})," Recruitment Center"]}),s.jsx("div",{className:"bg-cyan-900/20 border border-cyan-500/30 p-4 rounded-xl mb-6 relative z-10",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-full text-cyan-400 shrink-0",children:s.jsx(Cs,{size:16})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-bold text-white",children:"Earn 1% Override Commission"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Recruit new affiliates and earn 1% of their sales volume forever. No impact on their earnings!"})]})]})}),s.jsxs("div",{className:"space-y-3 relative z-10",children:[s.jsxs("h4",{className:"text-xs text-gray-500 uppercase font-bold tracking-wider",children:["My Recruits (",B.length,")"]}),B.length>0?s.jsx("div",{className:"max-h-[150px] overflow-y-auto pr-2 space-y-2 custom-scrollbar",children:B.map(Te=>{var lt;return s.jsxs("div",{className:"flex justify-between items-center p-2 bg-black/40 rounded border border-gray-800",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded-full flex items-center justify-center text-[10px] text-gray-400 border border-gray-700",children:Te.name.charAt(0)}),s.jsx("span",{className:"text-xs text-gray-300",children:Te.name})]}),s.jsxs("span",{className:"text-xs text-green-400 font-mono",children:["Sales: R",(lt=Te.affiliateStats)==null?void 0:lt.totalSalesValue.toFixed(0)]})]},Te.id)})}):s.jsx("div",{className:"text-center py-4 border border-dashed border-gray-800 rounded-lg",children:s.jsx("p",{className:"text-xs text-gray-500",children:"No recruits yet. Start building your team!"})})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 relative z-10",children:[s.jsx("p",{className:"text-[10px] text-gray-500 mb-2",children:"Share your recruitment link:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("code",{className:"flex-1 bg-black p-2 rounded text-[10px] text-gray-400 truncate border border-gray-800",children:[window.location.origin,"/#/?ref=",n.affiliateCode]}),s.jsx("button",{onClick:Je,className:"text-xs text-cyan-400 hover:text-cyan-300 font-bold",children:"Copy"})]})]})]})]})]}),N&&s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-xl",onClick:()=>!q&&E(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-3xl w-full relative z-20 shadow-2xl h-[90vh] flex flex-col animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4 pb-4 border-b border-gray-800",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(Zy,{size:20,className:"text-pink-500"})," Terms & Conditions"]}),s.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-white",children:s.jsx(vn,{size:20})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-8 pr-4",children:[s.jsx("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-4 rounded-lg mb-6 text-yellow-200 text-sm",children:"Please read each section carefully. You must acknowledge each section to proceed."}),G.map((Te,lt)=>s.jsxs("div",{className:"bg-black/30 rounded-xl p-5 border border-gray-800 hover:border-gray-700 transition-colors",children:[s.jsx("h4",{className:"text-lg font-bold text-white mb-3",children:Te.title}),s.jsx("div",{className:"text-sm text-gray-400 leading-relaxed whitespace-pre-wrap font-sans mb-4 pl-2 border-l-2 border-gray-700",children:Te.content}),s.jsxs("label",{className:`flex items-center gap-3 cursor-pointer p-3 rounded-lg transition-all ${me[lt]?"bg-green-900/20 border border-green-500/30":"bg-zinc-800/50 border border-gray-700 hover:bg-zinc-800"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${me[lt]?"bg-green-500 border-green-500 text-black":"bg-black border-gray-600 text-transparent"}`,children:s.jsx(ft,{size:14,strokeWidth:4})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:!!me[lt],onChange:()=>Ke(lt)}),s.jsxs("span",{className:`text-sm font-bold ${me[lt]?"text-green-400":"text-gray-400"}`,children:["I have read and agree to the ",Te.title]})]})]},lt))]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-800 flex justify-between items-center",children:[s.jsxs("div",{className:"text-xs text-gray-500",children:[Object.values(me).filter(Boolean).length," of ",G.length," sections agreed"]}),s.jsxs("button",{onClick:et,disabled:!q,className:"px-8 py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg",children:[q?s.jsx(ft,{size:18}):s.jsx(ac,{size:18}),q?"Confirm Agreement":"Agree to All Sections to Continue"]})]})]})]}),A&&s.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>P(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-yellow-500/50 rounded-2xl p-8 max-w-md w-full relative z-20 shadow-[0_0_50px_rgba(234,179,8,0.2)] animate-in zoom-in-95 duration-200 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-yellow-900/20 border-2 border-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 animate-pulse",children:s.jsx(ii,{size:40,className:"text-yellow-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Under Review"}),s.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed mb-6",children:["Thank you for applying to the Spoil Me Vintage Partnership Program. ",s.jsx("br",{}),s.jsx("br",{}),"Our team is currently reviewing your application details. This process typically takes ",s.jsx("strong",{children:"24-48 hours"}),"."]}),s.jsx("button",{onClick:()=>P(!1),className:"w-full py-3 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded-xl transition-colors",children:"Understood"})]})]}),p&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:he}),s.jsx("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-xl w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200 max-h-[95vh] overflow-y-auto",children:J?s.jsx("div",{className:"text-center py-8 px-4",children:s.jsxs("div",{className:"bg-zinc-800 border border-green-500/30 rounded-2xl p-8 shadow-[0_0_40px_rgba(34,197,94,0.1)] relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-green-500 to-cyan-500"}),s.jsx("div",{className:"w-20 h-20 bg-black border-2 border-green-500 rounded-full flex items-center justify-center mx-auto shadow-[0_0_20px_rgba(34,197,94,0.4)] mb-6",children:s.jsx(ft,{size:40,className:"text-green-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Application Received!"}),s.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:["Thank you, ",s.jsx("strong",{children:I.name}),". Your application has been sent to our admin team for review."]}),s.jsx("button",{onClick:he,className:"mt-8 w-full py-3 bg-white text-black font-bold rounded-xl hover:bg-gray-200 transition-colors shadow-lg",children:"Done"})]})}):j?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center border-b border-gray-800 pb-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Welcome Back"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Please log in to continue your application."})]}),T&&s.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/50 rounded-lg flex gap-2 items-center text-red-400 text-sm",children:[s.jsx(tg,{size:16})," ",T]}),s.jsxs("form",{onSubmit:M,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Email Address"}),s.jsx("input",{type:"email",value:I.email,readOnly:!0,className:"w-full bg-zinc-800 border border-gray-700 rounded-lg p-3 text-gray-400 text-sm cursor-not-allowed"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Password"}),s.jsx("input",{type:"password",value:O,onChange:Te=>k(Te.target.value),required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:""})]}),s.jsxs("button",{type:"submit",className:"w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:[s.jsx(gN,{size:18})," Login & Continue Application"]})]}),s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:()=>z(!1),className:"text-xs text-gray-500 hover:text-white underline",children:"Go Back"})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Apply to Partner"}),s.jsx("button",{onClick:he,className:"text-gray-500 hover:text-white",children:s.jsx(vn,{size:24})})]}),y===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-purple-900/20 border border-purple-500/30 p-4 rounded-xl",children:[s.jsxs("h3",{className:"text-purple-400 font-bold mb-2 flex items-center gap-2",children:[s.jsx(ac,{size:18})," Reality Check"]}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"This is a business partnership. Inactive accounts (0 sales in 3 months) may be deactivated."})]}),s.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[s.jsx("div",{className:`mt-1 w-5 h-5 rounded border flex items-center justify-center ${Z?"bg-pink-500 border-pink-500":"border-gray-600"}`,children:Z&&s.jsx(ft,{size:14,className:"text-white"})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:Z,onChange:Te=>ce(Te.target.checked)}),s.jsx("span",{className:"text-sm text-gray-400 group-hover:text-white transition-colors",children:"I understand that this program requires active participation."})]}),s.jsx("button",{disabled:!Z,onClick:()=>b(2),className:"w-full py-3 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl transition-all",children:"Continue"})]}),y===2&&s.jsxs("form",{onSubmit:se,className:"space-y-4",children:[!n.email&&s.jsxs("div",{className:"p-3 bg-zinc-800 rounded-lg border border-gray-700 mb-4",children:[s.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Create your account to get started:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s.jsx("input",{type:"text",placeholder:"First Name",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:I.name,onChange:Te=>$({...I,name:Te.target.value})}),s.jsx("input",{type:"text",placeholder:"Surname",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:I.surname,onChange:Te=>$({...I,surname:Te.target.value})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"email",placeholder:"Email Address",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:I.email,onChange:Te=>$({...I,email:Te.target.value})}),s.jsx("input",{type:"password",placeholder:"Create Password",required:!0,className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm",value:I.password,onChange:Te=>$({...I,password:Te.target.value})}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("input",{type:"date",required:!0,className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",value:I.dob,onChange:Te=>$({...I,dob:Te.target.value})}),s.jsxs("select",{className:"bg-black border border-gray-700 rounded p-2 text-white text-sm",required:!0,value:I.gender,onChange:Te=>$({...I,gender:Te.target.value}),children:[s.jsx("option",{value:"",children:"Gender"}),s.jsx("option",{value:"Male",children:"Male"}),s.jsx("option",{value:"Female",children:"Female"}),s.jsx("option",{value:"Other",children:"Other"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Why do you want to join?"}),s.jsx("textarea",{required:!0,className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none h-24",placeholder:"Tell us about your audience or marketing plan...",value:I.reason,onChange:Te=>$({...I,reason:Te.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Social Media Links"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Instagram, TikTok, Blog URL...",value:I.socials,onChange:Te=>$({...I,socials:Te.target.value})})]}),s.jsxs("div",{className:"pt-2",children:[s.jsxs("button",{type:"button",onClick:()=>E(!0),className:`w-full flex items-center justify-between p-4 rounded-xl border transition-all ${W?"bg-green-900/20 border-green-500 text-green-400":"bg-zinc-800 border-gray-700 text-gray-300 hover:border-gray-500"}`,children:[s.jsxs("span",{className:"text-sm font-bold flex items-center gap-2",children:[s.jsx(Zy,{size:16})," ",W?"Terms Accepted":"Read Terms & Conditions"]}),W?s.jsx(ic,{size:18}):s.jsx(At,{size:16})]}),!W&&s.jsx("p",{className:"text-xs text-red-400 mt-1 text-center",children:"You must accept terms to proceed."})]}),s.jsx("button",{type:"submit",disabled:!W,className:"w-full py-4 bg-pink-600 hover:bg-pink-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all mt-4",children:"Submit Application"})]})]})})]})]})},uR=()=>{const{user:n,register:e,login:t,processGiftVoucherPurchase:r}=Rt();as();const[i,l]=D.useState(250),[c,d]=D.useState(""),[p,f]=D.useState(""),[y,b]=D.useState(""),[N,E]=D.useState(""),[A,P]=D.useState("self"),[I,$]=D.useState(0),[W,K]=D.useState(!1),[Z,ce]=D.useState("register"),[J,F]=D.useState(!1),[j,z]=D.useState(""),[O,k]=D.useState(""),[T,L]=D.useState(""),[me,Ve]=D.useState(""),[Se,Pe]=D.useState(""),B=D.useRef(null);D.useEffect(()=>{i>=250&&i<=500?$(100):$(0)},[i]);const ve=i+I,G=async()=>{await r(ve,{recipientName:c,senderName:p,message:y,whatsappNumber:N,deliveryMethod:A}),B.current&&B.current.submit()},q=()=>{if(!c||!p){alert("Please fill in the 'To' and 'From' fields.");return}n.email?G():K(!0)},M=async he=>{if(he.preventDefault(),me!==Se){alert("Passwords do not match!");return}await e({name:j,email:O,birthday:T})&&(K(!1),setTimeout(()=>{G()},500))},se=async he=>{he.preventDefault(),await t(O,me)?(K(!1),setTimeout(()=>{G()},500)):alert("Invalid Credentials")};return s.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4 space-y-12 relative",children:[s.jsx(lg,{ref:B,amount:i,itemName:`Gift Voucher for ${c}`,email:n.email||O,customStr1:c,customStr2:p,customStr3:y,returnUrl:`${window.location.origin}/#/profile`,cancelUrl:`${window.location.origin}/#/gift-cards`}),W&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>K(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-8 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-white",children:Z==="register"?"Create Account to Pay":"Sign In to Pay"}),s.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["To secure your voucher and ensure delivery, please ",Z==="register"?"create a profile":"sign in","."]})]}),Z==="register"?s.jsxs("form",{onSubmit:M,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(uc,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:"text",required:!0,value:j,onChange:he=>z(he.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"Jane Doe"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(kd,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:"email",required:!0,value:O,onChange:he=>k(he.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Birthday (For Birthday Vouchers)"}),s.jsxs("div",{className:"relative",children:[s.jsx(fN,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:"date",required:!0,value:T,onChange:he=>L(he.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ac,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:J?"text":"password",required:!0,value:me,onChange:he=>Ve(he.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Confirm"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:J?"text":"password",required:!0,value:Se,onChange:he=>Pe(he.target.value),className:"w-full p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),s.jsx("button",{type:"button",onClick:()=>F(!J),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:J?s.jsx(nv,{size:16}):s.jsx(Vp,{size:16})})]})]})]}),s.jsx("button",{type:"submit",className:"w-full py-3 bg-pink-600 text-white font-bold rounded-lg hover:bg-pink-500 transition-colors",children:"Create Account & Pay"}),s.jsxs("p",{className:"text-xs text-center text-gray-500",children:["Already have an account? ",s.jsx("button",{type:"button",onClick:()=>ce("login"),className:"text-cyan-400 underline",children:"Login"})]})]}):s.jsxs("form",{onSubmit:se,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx(kd,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:"email",required:!0,value:O,onChange:he=>k(he.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:"jane@example.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ac,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),s.jsx("input",{type:J?"text":"password",required:!0,value:me,onChange:he=>Ve(he.target.value),className:"w-full pl-10 p-2.5 bg-black border border-gray-700 rounded-lg text-white text-sm",placeholder:""}),s.jsx("button",{type:"button",onClick:()=>F(!J),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:J?s.jsx(nv,{size:16}):s.jsx(Vp,{size:16})})]})]}),s.jsx("button",{type:"submit",className:"w-full py-3 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-500 transition-colors",children:"Sign In & Pay"}),s.jsxs("p",{className:"text-xs text-center text-gray-500",children:["New here? ",s.jsx("button",{type:"button",onClick:()=>ce("register"),className:"text-pink-400 underline",children:"Create Account"})]})]})]})]}),s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("h1",{className:"font-cherry text-4xl md:text-5xl text-white drop-shadow-[0_0_10px_rgba(236,72,153,0.5)]",children:"Give the Gift of Vintage"}),s.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Create a personalized digital wish card."})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl shadow-xl space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-gray-800",children:[s.jsx("div",{className:"p-2 bg-pink-900/30 text-pink-500 rounded-lg",children:s.jsx(Yt,{size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Customize Voucher"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Enter details below"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Amount (R)"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"R"}),s.jsx("input",{type:"number",value:i,onChange:he=>l(parseFloat(he.target.value)),className:"w-full bg-black border border-gray-700 rounded-xl py-4 pl-10 pr-4 text-white text-xl font-bold focus:ring-2 focus:ring-pink-500 focus:border-transparent outline-none transition-all",placeholder:"250",min:"50"})]}),i>=250&&i<=500?s.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs font-bold bg-green-900/20 p-2 rounded border border-green-500/30 animate-in fade-in slide-in-from-top-2",children:[s.jsx(kr,{size:14}),"Bonus R100 added to voucher value automatically!"]}):s.jsxs("p",{className:"text-xs text-gray-500",children:["Tip: Spend between ",s.jsx("strong",{children:"R250 - R500"})," to get a ",s.jsx("span",{className:"text-pink-500 font-bold",children:"FREE R100"})," bonus!"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"To (Recipient Name)"}),s.jsx("input",{type:"text",value:c,onChange:he=>d(he.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. Sarah"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-300 flex items-center gap-2",children:[s.jsx(sv,{size:14})," From (Your Name)"]}),s.jsx("input",{type:"text",value:p,onChange:he=>f(he.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"e.g. John"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Personal Message"}),s.jsx("textarea",{rows:4,value:y,onChange:he=>b(he.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none resize-none",placeholder:"Write a sweet note...",maxLength:150}),s.jsxs("div",{className:"text-right text-[10px] text-gray-600",children:[y.length,"/150"]})]}),s.jsxs("div",{className:"space-y-4 pt-2 border-t border-gray-800",children:[s.jsx("label",{className:"block text-sm font-bold text-gray-300",children:"How should we deliver this?"}),s.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[s.jsxs("div",{onClick:()=>P("self"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${A==="self"?"bg-purple-900/20 border-purple-500 ring-1 ring-purple-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[s.jsx("div",{className:`mt-1 p-1 rounded-full ${A==="self"?"bg-purple-500 text-white":"bg-gray-800 text-gray-400"}`,children:s.jsx(uc,{size:16})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:`text-sm font-bold ${A==="self"?"text-purple-400":"text-gray-300"}`,children:"Send to Me (Higher Success Rate)"}),s.jsx("div",{className:"flex items-center gap-2 mt-1",children:s.jsxs("span",{className:"text-[10px] bg-green-900/40 text-green-400 border border-green-500/30 px-1.5 py-0.5 rounded font-bold flex items-center gap-1",children:[s.jsx(ft,{size:10})," Best Option"]})}),s.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We send the voucher code and link to YOU via notification. You can then forward it via WhatsApp personally."}),A==="self"&&s.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:he=>he.stopPropagation(),children:[s.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[s.jsx(Xs,{size:12})," Your WhatsApp Number"]}),s.jsx("input",{type:"text",value:N,onChange:he=>E(he.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]}),s.jsxs("div",{onClick:()=>P("recipient"),className:`cursor-pointer p-4 rounded-xl border flex items-start gap-3 transition-all ${A==="recipient"?"bg-pink-900/20 border-pink-500 ring-1 ring-pink-500":"bg-black border-gray-700 hover:border-gray-500"}`,children:[s.jsx("div",{className:`mt-1 p-1 rounded-full ${A==="recipient"?"bg-pink-500 text-white":"bg-gray-800 text-gray-400"}`,children:s.jsx(Pd,{size:16})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:`text-sm font-bold ${A==="recipient"?"text-pink-400":"text-gray-300"}`,children:"Send directly to Recipient"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1 leading-snug",children:"We will email or WhatsApp the recipient directly on your behalf."}),A==="recipient"&&s.jsxs("div",{className:"mt-3 animate-in slide-in-from-top-2",onClick:he=>he.stopPropagation(),children:[s.jsxs("label",{className:"text-xs text-green-500 block mb-1 font-bold flex items-center gap-1",children:[s.jsx(lc,{size:12})," Recipient WhatsApp (Optional)"]}),s.jsx("input",{type:"text",value:N,onChange:he=>E(he.target.value),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-xs focus:outline-none focus:border-green-500",placeholder:"+27 12 345 6789"})]})]})]})]})]}),s.jsxs("button",{onClick:q,className:"w-full py-4 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-[0_0_20px_rgba(236,72,153,0.4)] transition-all flex items-center justify-center gap-2 text-lg",children:[s.jsx(oc,{size:20})," Buy Now & Pay - R",i.toFixed(2)]}),s.jsxs("p",{className:"text-center text-xs text-gray-500 mt-2 flex items-center justify-center gap-1",children:[s.jsx(ft,{size:12,className:"text-green-500"})," Secure Payment via PayFast"]})]}),s.jsxs("div",{className:"sticky top-24",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[s.jsx(oc,{size:16})," Example"]}),s.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),s.jsx("div",{className:"absolute top-0 left-0 p-4 opacity-10 pointer-events-none",children:s.jsx("span",{className:"font-cherry text-8xl text-white leading-none",children:"SV"})}),s.jsxs("div",{className:"relative h-full p-6 md:p-8 flex flex-col justify-between z-20",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-cherry text-xl md:text-3xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400 drop-shadow-[0_0_10px_rgba(236,72,153,0.3)]",children:"Spoil Me Vintage"}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx(kr,{size:10,className:"text-cyan-400"}),s.jsx("p",{className:"text-[10px] text-gray-300 tracking-[0.2em] uppercase",children:"Exclusive Voucher"})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"text-2xl md:text-5xl font-bold text-white drop-shadow-[0_2px_10px_rgba(0,0,0,0.5)] font-architects",children:["R",ve]})})]}),s.jsxs("div",{className:"flex-1 flex flex-col justify-center py-2 md:py-4 relative",children:[s.jsxs("p",{className:"font-architects text-lg md:text-2xl text-gray-200 leading-relaxed text-center break-words relative drop-shadow-sm line-clamp-3",children:['"',y||"Treat yourself to something timeless...",'"']}),s.jsx("div",{className:"mx-auto mt-4 md:mt-6 cursor-pointer group w-full md:w-auto flex justify-center",children:s.jsxs("div",{className:"bg-black/40 backdrop-blur-sm border border-cyan-500/30 rounded-full px-6 py-3 md:px-6 md:py-2 flex items-center justify-center gap-2 shadow-[0_0_15px_rgba(34,211,238,0.2)] hover:bg-cyan-900/30 hover:border-cyan-400 transition-all w-full md:w-auto",children:[s.jsx("span",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs md:text-xs font-bold text-white uppercase tracking-widest group-hover:text-cyan-300 transition-colors",children:"Redeem Now"}),s.jsx(At,{size:12,className:"text-cyan-400 group-hover:translate-x-1 transition-transform"})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 border-t border-gray-800 pt-3 md:pt-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider",children:"To"}),s.jsx("p",{className:"text-sm font-bold text-white truncate",children:c||"Recipient Name"})]}),s.jsxs("div",{className:"space-y-1 text-right",children:[s.jsxs("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider flex items-center justify-end gap-1",children:["From ",s.jsx(sv,{size:10})]}),s.jsx("p",{className:"text-lg font-architects text-cyan-400 truncate",children:p||"Your Name"})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-zinc-900/50 border border-gray-800 rounded-xl p-5 shadow-lg",children:[s.jsxs("h4",{className:"font-bold text-white text-sm mb-3 flex items-center gap-2 border-b border-gray-800 pb-2",children:[s.jsx(ft,{size:14,className:"text-green-400"})," Verified Voucher Features"]}),s.jsxs("ul",{className:"text-xs text-gray-400 space-y-2.5",children:[s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(kr,{size:12,className:"text-purple-400 mt-0.5"})," Valid for 3 years from date of purchase."]}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(Xs,{size:12,className:"text-cyan-400 mt-0.5"})," ",s.jsx("span",{className:"text-white font-bold",children:"Smart Link:"}),' Recipient taps "Redeem Now" to auto-apply discount in App.']}),s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(lc,{size:12,className:"text-green-400 mt-0.5"})," ",s.jsx("span",{className:"text-white font-bold",children:"Instant Delivery"})," via Notification & WhatsApp."]})]})]})]})]})]})},dR=()=>{const{categoryName:n}=Xp(),{products:e,categories:t}=Rt(),r=decodeURIComponent(n||""),i=t.find(c=>c.name===r),l=e.filter(c=>c.category===r);return D.useEffect(()=>{window.scrollTo(0,0)},[n]),i?s.jsxs("div",{className:"space-y-8 pb-12",children:[s.jsxs("div",{className:"relative h-64 md:h-80 rounded-2xl overflow-hidden bg-zinc-900 border border-gray-800 shadow-2xl group",children:[s.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-700"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"}),s.jsxs("div",{className:"absolute bottom-0 left-0 p-8 w-full",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs(Ie,{to:"/",className:"text-xs text-gray-400 hover:text-white transition-colors flex items-center gap-1",children:[s.jsx(sc,{size:12})," Home"]}),s.jsx("span",{className:"text-gray-600",children:"/"}),s.jsx("span",{className:"text-xs text-pink-500 font-bold tracking-wider uppercase",children:"Collection"})]}),s.jsx("h1",{className:"font-cherry text-4xl md:text-6xl text-white drop-shadow-lg mb-2",children:i.name}),i.description&&s.jsx("p",{className:"text-gray-300 max-w-2xl text-sm md:text-base font-light border-l-4 border-pink-500 pl-4",children:i.description})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(kr,{size:20,className:"text-cyan-400"}),"Available Treasures (",l.length,")"]})}),l.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:l.map(c=>s.jsx(dr,{product:c},c.id))}):s.jsxs("div",{className:"py-20 text-center border border-dashed border-gray-800 rounded-2xl",children:[s.jsx("p",{className:"text-gray-500",children:"No products found in this collection yet."}),s.jsx(Ie,{to:"/",className:"text-pink-500 text-sm mt-4 inline-block hover:underline",children:"Browse other collections"})]})]})]}):s.jsxs("div",{className:"min-h-[60vh] flex flex-col items-center justify-center text-center space-y-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Collection Not Found"}),s.jsxs(Ie,{to:"/",className:"text-pink-500 hover:text-pink-400 flex items-center gap-2",children:[s.jsx(sc,{size:20})," Back to Home"]})]})},hR=()=>{const{type:n}=Xp(),{products:e,categories:t}=Rt(),[r,i]=D.useState("newest"),[l,c]=D.useState(!1),[d,p]=D.useState(""),[f,y]=D.useState(""),[b,N]=D.useState(!1);D.useEffect(()=>{window.scrollTo(0,0),c(!1),p(""),y(""),i("newest")},[n]);const{title:E,baseProducts:A}=D.useMemo(()=>{let $="",W=[];switch(n){case"stud":$="Stud Earrings",W=e.filter(K=>K.type==="Stud"||K.isFeaturedStud);break;case"dangle":$="Dangle Earrings",W=e.filter(K=>K.type==="Dangle"||K.isFeaturedDangle);break;case"ring":$="Rings",W=e.filter(K=>K.type==="Ring");break;case"unique":$="Unique Pendants",W=e.filter(K=>K.isUniquePendant);break;case"bracelet":$="Bracelets",W=e.filter(K=>K.type==="Bracelet"||K.isFeaturedBracelet);break;case"watch":$="Watches",W=e.filter(K=>K.isFeaturedWatch);break;case"best":$="Best Sellers",W=e.filter(K=>K.isBestSeller);break;case"sets":$="Jewelry Sets",W=e.filter(K=>K.isJewelrySet);break;default:$="Catalog",W=e}return{title:$,baseProducts:W}},[n,e]),P=D.useMemo(()=>{const $=new Set;return A.forEach(W=>{var K;(K=W.colors)==null||K.forEach(Z=>$.add(Z))}),Array.from($).sort()},[A]),I=D.useMemo(()=>{let $=[...A];if(l){const W=new Date;$=$.filter(K=>{const Z=K.promoStartsAt?new Date(K.promoStartsAt):null,ce=K.promoExpiresAt?new Date(K.promoExpiresAt):null;return(K.promoPrice||0)>0&&(!Z||Z<=W)&&(!ce||ce>W)})}return d&&($=$.filter(W=>{var K;return(K=W.colors)==null?void 0:K.includes(d)})),f&&($=$.filter(W=>W.category===f)),$.sort((W,K)=>r==="price_asc"?W.price-K.price:r==="price_desc"?K.price-W.price:new Date(K.createdAt).getTime()-new Date(W.createdAt).getTime()),$},[A,l,d,f,r]);return s.jsxs("div",{className:"space-y-8 pb-12 min-h-screen",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 pt-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 text-xs text-gray-500",children:[s.jsxs(Ie,{to:"/",className:"hover:text-white flex items-center gap-1",children:[s.jsx(sc,{size:12})," Home"]}),s.jsx("span",{children:"/"}),s.jsx("span",{className:"text-pink-500 font-bold",children:E})]}),s.jsx("h1",{className:"font-cherry text-3xl md:text-4xl text-white",children:E}),s.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[I.length," Items Found"]})]}),s.jsxs("button",{className:"md:hidden flex items-center gap-2 bg-zinc-800 px-4 py-2 rounded text-white text-sm w-fit",onClick:()=>N(!b),children:[s.jsx(wA,{size:16})," Filters & Sort"]}),s.jsxs("div",{className:`flex-col md:flex-row gap-4 items-start md:items-center bg-zinc-900/80 p-4 rounded-xl border border-gray-800 ${b?"flex":"hidden md:flex"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold",children:"Sort:"}),s.jsxs("select",{value:r,onChange:$=>i($.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none",children:[s.jsx("option",{value:"newest",children:"Newest"}),s.jsx("option",{value:"price_asc",children:"Price Low-High"}),s.jsx("option",{value:"price_desc",children:"Price High-Low"})]})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer select-none bg-black border border-gray-700 px-3 py-1 rounded hover:border-pink-500 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:l,onChange:$=>c($.target.checked),className:"hidden"}),s.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${l?"bg-pink-600 border-pink-600":"border-gray-500"}`,children:l&&s.jsx(ft,{size:10,className:"text-white"})}),s.jsx("span",{className:`text-sm ${l?"text-pink-400 font-bold":"text-gray-300"}`,children:"Promotions"})]}),s.jsxs("select",{value:f,onChange:$=>y($.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[s.jsx("option",{value:"",children:"All Collections"}),t.map($=>s.jsx("option",{value:$.name,children:$.name},$.id))]}),P.length>0&&s.jsxs("select",{value:d,onChange:$=>p($.target.value),className:"bg-black border border-gray-700 rounded px-2 py-1 text-sm text-white focus:border-pink-500 outline-none max-w-[150px]",children:[s.jsx("option",{value:"",children:"All Colors"}),P.map($=>s.jsx("option",{value:$,children:$},$))]}),(l||d||f)&&s.jsx("button",{onClick:()=>{c(!1),p(""),y("")},className:"text-xs text-red-400 hover:text-red-300 underline",children:"Clear"})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:I.map($=>s.jsx(dr,{product:$},$.id))}),I.length===0&&s.jsxs("div",{className:"py-20 text-center bg-zinc-900/30 rounded-xl border border-dashed border-gray-800",children:[s.jsx("p",{className:"text-gray-400",children:"No products found matching your filters."}),s.jsx("button",{onClick:()=>{c(!1),p(""),y("")},className:"mt-4 text-pink-500 font-bold hover:underline",children:"Clear Filters"})]})]})},fR=()=>{const{products:n,isDemoMode:e,resetStore:t,dbConnectionError:r,seedTestUsers:i,runDataDiagnostics:l,simulateAffiliateSale:c,getAllUsers:d,adminAdjustPoints:p}=Rt(),[f,y]=D.useState(null),[b,N]=D.useState(""),[E,A]=D.useState(100),[P,I]=D.useState(null),[$,W]=D.useState([]),[K,Z]=D.useState(""),[ce,J]=D.useState(null);D.useEffect(()=>{(async()=>{const L=await d();W(L),L.length>0&&Z(L[0].id)})()},[d]);const F=[{title:"Total Revenue",value:"R12,450",change:"+12%",icon:Cs,color:"bg-green-900/30 text-green-400 border-green-500/20"},{title:"Total Orders",value:"154",change:"+8%",icon:Ki,color:"bg-cyan-900/30 text-cyan-400 border-cyan-500/20"},{title:"Active Users",value:"1,203",change:"+24%",icon:oi,color:"bg-purple-900/30 text-purple-400 border-purple-500/20"},{title:"Products",value:n.length,change:"0%",icon:uN,color:"bg-pink-900/30 text-pink-400 border-pink-500/20"}],j=()=>{const T=l();y(T)},z=async()=>{if(!b)return;I("Processing...");const T=await c(b,E);I(T.message)},O=async()=>{K&&(await p(K,1e3),J(`Added 1000 Points to user ID: ${K}`),setTimeout(()=>J(null),3e3))},k=async()=>{if(!K){alert("Please select a user");return}await p(K,100),J(`Simulated Review: Awarded 100 Points to ${K}`),setTimeout(()=>J(null),3e3)};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Dashboard Overview"}),s.jsxs("div",{className:"flex gap-2",children:[!e&&s.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-xs bg-purple-900/30 text-purple-400 border border-purple-500/30 px-3 py-2 rounded hover:bg-purple-900/50 transition-colors",children:[s.jsx(TA,{size:14})," Seed Test Users to DB"]}),e&&s.jsxs("button",{onClick:t,className:"flex items-center gap-2 text-xs bg-red-900/30 text-red-400 border border-red-500/30 px-3 py-2 rounded hover:bg-red-900/50 transition-colors",children:[s.jsx(cc,{size:14})," Reset Demo Data"]})]})]}),s.jsxs("div",{className:"bg-zinc-900/50 border-2 border-amber-500/30 p-6 rounded-xl relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 bg-amber-500/20 text-amber-400 px-3 py-1 text-xs font-bold rounded-bl-lg border-l border-b border-amber-500/30",children:"TESTING LAB"}),s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 bg-amber-900/30 text-amber-400 rounded-lg border border-amber-500/30",children:s.jsx(CA,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:"Feature Verification Lab"}),s.jsx("p",{className:"text-gray-400 text-xs",children:"Manually trigger logic to verify Affiliate & Loyalty systems."})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[s.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2 text-sm",children:[s.jsx(Cs,{size:14,className:"text-green-400"})," Affiliate Sale Simulator"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Affiliate Code"}),s.jsx("input",{type:"text",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:b,onChange:T=>N(T.target.value),placeholder:"e.g. Spoilme-FAY003"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Sale Amount (R)"}),s.jsx("input",{type:"number",className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:E,onChange:T=>A(parseFloat(T.target.value))})]}),s.jsx("button",{onClick:z,className:"w-full py-2 bg-green-600 hover:bg-green-500 text-white text-xs font-bold rounded transition-colors",children:"Simulate Sale & Commission"}),P&&s.jsx("div",{className:"p-2 bg-zinc-800 rounded text-xs text-green-300 border border-green-500/30 mt-2",children:P})]})]}),s.jsxs("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-700",children:[s.jsxs("h4",{className:"font-bold text-white mb-3 flex items-center gap-2 text-sm",children:[s.jsx(Ur,{size:14,className:"text-purple-400"})," Loyalty System Tester"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Select User"}),s.jsxs("select",{className:"w-full bg-zinc-900 border border-gray-600 rounded p-2 text-white text-xs",value:K,onChange:T=>Z(T.target.value),children:[s.jsx("option",{value:"",children:"-- Select User --"}),$.map(T=>s.jsxs("option",{value:T.id,children:[T.name," (",T.email,")"]},T.id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{onClick:O,className:"py-2 bg-purple-600 hover:bg-purple-500 text-white text-xs font-bold rounded transition-colors",children:"+1000 Points"}),s.jsx("button",{onClick:k,className:"py-2 bg-zinc-700 hover:bg-zinc-600 text-white text-xs font-bold rounded transition-colors",children:"Simulate Review"})]}),ce&&s.jsx("div",{className:"p-2 bg-zinc-800 rounded text-xs text-purple-300 border border-purple-500/30 mt-2 animate-pulse",children:ce})]})]})]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[s.jsxs("h3",{className:"font-bold text-white text-lg mb-4 flex items-center gap-3",children:[s.jsx(os,{size:20,className:"text-cyan-400"}),"Shipping & Logistics"]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center bg-black/40 p-4 rounded-lg border border-gray-800",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-bold text-white",children:"PUDO Locker Management"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Access your PUDO dashboard to manage locker shipments, track parcels, and view your account details."})]}),s.jsxs("a",{href:"https://customer.pudo.co.za/dashboard",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Open PUDO Dashboard ",s.jsx(ko,{size:16})]})]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg relative overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-900/30 text-blue-400 rounded-lg border border-blue-500/30",children:s.jsx(_A,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-white text-lg",children:"System Doctor"}),s.jsx("p",{className:"text-gray-400 text-xs",children:"Verify database integrity and save functionality."})]})]}),s.jsxs("button",{onClick:j,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-xs font-bold rounded-lg flex items-center gap-2 transition-colors",children:[s.jsx(cN,{size:14})," Run Integrity Check"]})]}),f&&s.jsxs("div",{className:`p-4 rounded-lg border flex items-start gap-3 animate-in slide-in-from-top-2 ${f.status==="success"?"bg-green-900/20 border-green-500/30 text-green-300":"bg-red-900/20 border-red-500/30 text-red-300"}`,children:[f.status==="success"?s.jsx(ft,{size:18,className:"shrink-0 mt-0.5"}):s.jsx(vn,{size:18,className:"shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-sm",children:f.status==="success"?"System Healthy":"Issue Detected"}),s.jsx("p",{className:"text-xs opacity-80",children:f.details})]})]})]}),r&&s.jsxs("div",{className:"bg-red-900/20 border border-red-600/30 p-4 rounded-xl flex items-start gap-4",children:[s.jsx("div",{className:"p-2 bg-red-900/50 text-red-500 rounded-lg",children:s.jsx(yN,{size:20})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-red-500",children:"Firestore Connection Failed"}),s.jsxs("p",{className:"text-xs text-red-200/70 mt-1",children:["Error: ",r,".",s.jsx("br",{}),"Please ensure you have created the ",s.jsx("strong",{children:"Firestore Database"})," in your Firebase Console. Until then, the app is running in ",s.jsx("strong",{children:"Demo Mode"}),"."]})]})]}),e&&!r&&s.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-600/30 p-4 rounded-xl flex items-start gap-4",children:[s.jsx("div",{className:"p-2 bg-yellow-900/50 text-yellow-500 rounded-lg",children:s.jsx(rA,{size:20})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-yellow-500",children:"Running in Demo Mode"}),s.jsx("p",{className:"text-xs text-yellow-200/70 mt-1",children:"Firebase is not configured or unavailable. All changes (Products, Categories) are saved to your browser's Local Storage. Uploading large images might fill your storage limit."})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:F.map((T,L)=>s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:`p-3 rounded-lg border ${T.color}`,children:s.jsx(T.icon,{size:20})}),s.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${T.change.startsWith("+")?"bg-green-900/30 text-green-400":"bg-gray-800 text-gray-400"}`,children:T.change})]}),s.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:T.title}),s.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:T.value})]},L))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[s.jsx("h3",{className:"font-bold text-white mb-4 text-lg",children:"Recent Activity"}),s.jsx("div",{className:"space-y-4",children:[1,2,3].map((T,L)=>s.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b border-gray-800 last:border-0",children:[s.jsx("div",{className:"w-10 h-10 bg-black border border-gray-800 rounded-full flex items-center justify-center text-xs font-bold text-gray-500",children:"OR"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-200",children:["Order #492",L," placed"]}),s.jsx("p",{className:"text-xs text-gray-500",children:"2 minutes ago"})]}),s.jsx("div",{className:"ml-auto font-bold text-green-400 text-sm",children:"R129.00"})]},L))})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl shadow-sm border border-gray-800",children:[s.jsx("h3",{className:"font-bold text-white mb-4 text-lg",children:"Inventory Status"}),s.jsx("div",{className:"space-y-4",children:n.slice(0,4).map(T=>s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:T.images[0],className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:""}),s.jsx("span",{className:"text-sm text-gray-300 truncate w-40",children:T.name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-24 h-2 bg-gray-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-pink-500",style:{width:`${Math.min(T.stock,100)}%`}})}),s.jsxs("span",{className:"text-xs font-mono text-gray-500",children:[T.stock," left"]})]})]},T.id))})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pR,mR;function gR(){return{geminiUrl:pR,vertexUrl:mR}}function xR(n,e,t){var r,i,l;if(!(!((r=n.httpOptions)===null||r===void 0)&&r.baseUrl)){const c=gR();return n.vertexai?(i=c.vertexUrl)!==null&&i!==void 0?i:e:(l=c.geminiUrl)!==null&&l!==void 0?l:t}return n.httpOptions.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nc{}function st(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const l=e[i];return l!=null?String(l):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function x(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const p=n[d];if(Array.isArray(t))for(let f=0;f<p.length;f++){const y=p[f];x(y,e.slice(l+1),t[f])}else for(const f of p)x(f,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const p=n[d];x(p[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else n[r]=t}function g(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const r=e[t];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in n){const l=n[i];return Array.isArray(l)?l.map(c=>g(c,e.slice(t+1))):void 0}else return}else n=n[r]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function _N(n,e){const t=Xt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function NN(n,e){return Array.isArray(e)?e.map(t=>Id(n,t)):[Id(n,e)]}function Id(n,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function yR(n,e){const t=Id(n,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function vR(n,e){const t=Id(n,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function xv(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function SN(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>xv(n,t)):[xv(n,e)]}function Fp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function yv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function vv(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function fr(n,e){if(e==null)throw new Error("ContentUnion is required");return Fp(e)?e:{role:"user",parts:SN(n,e)}}function EN(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=fr(n,t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=fr(n,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>fr(n,t)):[fr(n,e)]}function Zi(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(yv(e)||vv(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[fr(n,e)]}const t=[],r=[],i=Fp(e[0]);for(const l of e){const c=Fp(l);if(c!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(c)t.push(l);else{if(yv(l)||vv(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(l)}}return i||t.push({role:"user",parts:SN(n,r)}),t}function CN(n,e){return e}function kN(n,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function ah(n,e){return e}function lh(n,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function bR(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function eo(n,e){if(typeof e!="string")throw new Error("name must be a string");return bR(n,e,"cachedContents")}function TN(n,e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function to(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function PN(n,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wR(n,e){const t={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(t,["codeExecutionResult"],i);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const p=g(e,["functionResponse"]);p!=null&&x(t,["functionResponse"],p);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const y=g(e,["text"]);return y!=null&&x(t,["text"],y),t}function bv(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>wR(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function _R(){return{}}function NR(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function SR(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],NR(n,r)),t}function ER(n,e){const t={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(t,["googleSearch"],_R());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(t,["googleSearchRetrieval"],SR(n,i));const l=g(e,["codeExecution"]);l!=null&&x(t,["codeExecution"],l);const c=g(e,["functionDeclarations"]);return c!=null&&x(t,["functionDeclarations"],c),t}function CR(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(t,["allowedFunctionNames"],i),t}function kR(n,e){const t={},r=g(e,["functionCallingConfig"]);return r!=null&&x(t,["functionCallingConfig"],CR(n,r)),t}function TR(n,e,t){const r={},i=g(e,["ttl"]);t!==void 0&&i!=null&&x(t,["ttl"],i);const l=g(e,["expireTime"]);t!==void 0&&l!=null&&x(t,["expireTime"],l);const c=g(e,["displayName"]);t!==void 0&&c!=null&&x(t,["displayName"],c);const d=g(e,["contents"]);if(t!==void 0&&d!=null){let b=Zi(n,d);Array.isArray(b)&&(b=b.map(N=>bv(n,N))),x(t,["contents"],b)}const p=g(e,["systemInstruction"]);t!==void 0&&p!=null&&x(t,["systemInstruction"],bv(n,fr(n,p)));const f=g(e,["tools"]);if(t!==void 0&&f!=null){let b=f;Array.isArray(b)&&(b=b.map(N=>ER(n,N))),x(t,["tools"],b)}const y=g(e,["toolConfig"]);return t!==void 0&&y!=null&&x(t,["toolConfig"],kR(n,y)),r}function PR(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["model"],_N(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],TR(n,i,t)),t}function jR(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],eo(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function IR(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],eo(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function AR(n,e,t){const r={},i=g(e,["ttl"]);t!==void 0&&i!=null&&x(t,["ttl"],i);const l=g(e,["expireTime"]);return t!==void 0&&l!=null&&x(t,["expireTime"],l),r}function RR(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],eo(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],AR(n,i,t)),t}function MR(n,e,t){const r={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const l=g(e,["pageToken"]);return t!==void 0&&l!=null&&x(t,["_query","pageToken"],l),r}function DR(n,e){const t={},r=g(e,["config"]);return r!=null&&x(t,["config"],MR(n,r,t)),t}function LR(n,e){const t={},r=g(e,["videoMetadata"]);r!=null&&x(t,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(t,["thought"],i);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const p=g(e,["functionCall"]);p!=null&&x(t,["functionCall"],p);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const y=g(e,["inlineData"]);y!=null&&x(t,["inlineData"],y);const b=g(e,["text"]);return b!=null&&x(t,["text"],b),t}function wv(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>LR(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function VR(){return{}}function zR(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function OR(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],zR(n,r)),t}function FR(n,e){const t={},r=g(e,["retrieval"]);r!=null&&x(t,["retrieval"],r),g(e,["googleSearch"])!=null&&x(t,["googleSearch"],VR());const l=g(e,["googleSearchRetrieval"]);l!=null&&x(t,["googleSearchRetrieval"],OR(n,l));const c=g(e,["codeExecution"]);c!=null&&x(t,["codeExecution"],c);const d=g(e,["functionDeclarations"]);return d!=null&&x(t,["functionDeclarations"],d),t}function UR(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(t,["allowedFunctionNames"],i),t}function BR(n,e){const t={},r=g(e,["functionCallingConfig"]);return r!=null&&x(t,["functionCallingConfig"],UR(n,r)),t}function qR(n,e,t){const r={},i=g(e,["ttl"]);t!==void 0&&i!=null&&x(t,["ttl"],i);const l=g(e,["expireTime"]);t!==void 0&&l!=null&&x(t,["expireTime"],l);const c=g(e,["displayName"]);t!==void 0&&c!=null&&x(t,["displayName"],c);const d=g(e,["contents"]);if(t!==void 0&&d!=null){let b=Zi(n,d);Array.isArray(b)&&(b=b.map(N=>wv(n,N))),x(t,["contents"],b)}const p=g(e,["systemInstruction"]);t!==void 0&&p!=null&&x(t,["systemInstruction"],wv(n,fr(n,p)));const f=g(e,["tools"]);if(t!==void 0&&f!=null){let b=f;Array.isArray(b)&&(b=b.map(N=>FR(n,N))),x(t,["tools"],b)}const y=g(e,["toolConfig"]);return t!==void 0&&y!=null&&x(t,["toolConfig"],BR(n,y)),r}function $R(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["model"],_N(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],qR(n,i,t)),t}function HR(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],eo(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function GR(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],eo(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function WR(n,e,t){const r={},i=g(e,["ttl"]);t!==void 0&&i!=null&&x(t,["ttl"],i);const l=g(e,["expireTime"]);return t!==void 0&&l!=null&&x(t,["expireTime"],l),r}function KR(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],eo(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],WR(n,i,t)),t}function JR(n,e,t){const r={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const l=g(e,["pageToken"]);return t!==void 0&&l!=null&&x(t,["_query","pageToken"],l),r}function YR(n,e){const t={},r=g(e,["config"]);return r!=null&&x(t,["config"],JR(n,r,t)),t}function ld(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["model"]);l!=null&&x(t,["model"],l);const c=g(e,["createTime"]);c!=null&&x(t,["createTime"],c);const d=g(e,["updateTime"]);d!=null&&x(t,["updateTime"],d);const p=g(e,["expireTime"]);p!=null&&x(t,["expireTime"],p);const f=g(e,["usageMetadata"]);return f!=null&&x(t,["usageMetadata"],f),t}function QR(){return{}}function XR(n,e){const t={},r=g(e,["nextPageToken"]);r!=null&&x(t,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>ld(n,c))),x(t,["cachedContents"],l)}return t}function cd(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["model"]);l!=null&&x(t,["model"],l);const c=g(e,["createTime"]);c!=null&&x(t,["createTime"],c);const d=g(e,["updateTime"]);d!=null&&x(t,["updateTime"],d);const p=g(e,["expireTime"]);p!=null&&x(t,["expireTime"],p);const f=g(e,["usageMetadata"]);return f!=null&&x(t,["usageMetadata"],f),t}function ZR(){return{}}function e4(n,e){const t={},r=g(e,["nextPageToken"]);r!=null&&x(t,["nextPageToken"],r);const i=g(e,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>cd(n,c))),x(t,["cachedContents"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dc;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(dc||(dc={}));class cg{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let c={config:{}};r?typeof r=="object"?c=Object.assign({},r):c=r:c={config:{}},c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(i=c.config)===null||i===void 0?void 0:i.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _v;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(_v||(_v={}));var Nv;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Nv||(Nv={}));var Sv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Sv||(Sv={}));var Ev;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Ev||(Ev={}));var Cv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Cv||(Cv={}));var kv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(kv||(kv={}));var Tv;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(Tv||(Tv={}));var Pv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Pv||(Pv={}));var jv;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(jv||(jv={}));var Iv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Iv||(Iv={}));var Av;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(Av||(Av={}));var Rv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Rv||(Rv={}));var Ad;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ad||(Ad={}));var Mv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mv||(Mv={}));var Up;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Up||(Up={}));var Dv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Dv||(Dv={}));var Lv;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Lv||(Lv={}));var Vv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Vv||(Vv={}));var zv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(zv||(zv={}));var Ov;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Ov||(Ov={}));var Fv;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Fv||(Fv={}));var Uv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(Uv||(Uv={}));var Bv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Bv||(Bv={}));var qv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(qv||(qv={}));var $v;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})($v||($v={}));var Hv;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Hv||(Hv={}));var Gv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Gv||(Gv={}));var Wv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Wv||(Wv={}));var Kv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Kv||(Kv={}));var Jv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Jv||(Jv={}));var Yv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Yv||(Yv={}));var Qv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Qv||(Qv={}));class Wu{get text(){var e,t,r,i,l,c,d,p;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",y=!1;const b=[];for(const N of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[E,A]of Object.entries(N))E!=="text"&&E!=="thought"&&(A!==null||A!==void 0)&&b.push(E);if(typeof N.text=="string"){if(typeof N.thought=="boolean"&&N.thought)continue;y=!0,f+=N.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?f:void 0}get data(){var e,t,r,i,l,c,d,p;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const y=[];for(const b of(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&p!==void 0?p:[]){for(const[N,E]of Object.entries(b))N!=="inlineData"&&(E!==null||E!==void 0)&&y.push(N);b.inlineData&&typeof b.inlineData.data=="string"&&(f+=atob(b.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,r,i,l,c,d,p;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,r,i,l,c,d,p,f;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,r,i,l,c,d,p,f;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(p=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||p===void 0?void 0:p.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((y==null?void 0:y.length)!==0)return(f=y==null?void 0:y[0])===null||f===void 0?void 0:f.output}}class Xv{}class Zv{}class eb{}class tb{}class t4{}class nb{}class rb{}class sb{}class n4{}class Bp{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class r4{}class s4{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i4 extends Nc{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new cg(dc.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=$R(this.apiClient,e);return d=st("cachedContents",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>cd(this.apiClient,y))}else{const f=PR(this.apiClient,e);return d=st("cachedContents",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>ld(this.apiClient,y))}}async get(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=HR(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>cd(this.apiClient,y))}else{const f=jR(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>ld(this.apiClient,y))}}async delete(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=GR(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(()=>{const y=ZR(),b=new rb;return Object.assign(b,y),b})}else{const f=IR(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(()=>{const y=QR(),b=new rb;return Object.assign(b,y),b})}}async update(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=KR(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>cd(this.apiClient,y))}else{const f=RR(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>ld(this.apiClient,y))}}async listInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=YR(this.apiClient,e);return d=st("cachedContents",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=e4(this.apiClient,y),N=new sb;return Object.assign(N,b),N})}else{const f=DR(this.apiClient,e);return d=st("cachedContents",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=XR(this.apiClient,y),N=new sb;return Object.assign(N,b),N})}}}function ib(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $n(n){return this instanceof $n?(this.v=n,this):new $n(n)}function Rd(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,l=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(E){return function(A){return Promise.resolve(A).then(E,b)}}function d(E,A){r[E]&&(i[E]=function(P){return new Promise(function(I,$){l.push([E,P,I,$])>1||p(E,P)})},A&&(i[E]=A(i[E])))}function p(E,A){try{f(r[E](A))}catch(P){N(l[0][3],P)}}function f(E){E.value instanceof $n?Promise.resolve(E.value.v).then(y,b):N(l[0][2],E)}function y(E){p("next",E)}function b(E){p("throw",E)}function N(E,A){E(A),l.shift(),l.length&&p(l[0][0],l[0][1])}}function qp(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ib=="function"?ib(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=n[l]&&function(c){return new Promise(function(d,p){c=n[l](c),i(d,p,c.done,c.value)})}}function i(l,c,d,p){Promise.resolve(p).then(function(f){l({value:f,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o4(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:jN(t)}function jN(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function a4(n){if(n.length!==0){if(n[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function l4(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0,i=n[0];for(;r<t;)if(n[r].role==="user")i=n[r],r++;else{const l=[];let c=!0;for(;r<t&&n[r].role==="model";)l.push(n[r]),c&&!jN(n[r])&&(c=!1),r++;c&&(e.push(i),e.push(...l))}return e}class c4{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new u4(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class u4{constructor(e,t,r,i={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=l,this.sendPromise=Promise.resolve(),a4(l)}async sendMessage(e){var t;await this.sendPromise;const r=fr(this.apiClient,e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c;const p=(c=(l=(await i).candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,f=p?[p]:[];this.recordHistory(r,f)})(),await this.sendPromise,i}async sendMessageStream(e){var t;await this.sendPromise;const r=fr(this.apiClient,e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const l=await i;return this.processStreamResponse(l,r)}getHistory(e=!1){return e?l4(this.history):this.history}processStreamResponse(e,t){var r,i;return Rd(this,arguments,function*(){var c,d,p,f;const y=[];try{for(var b=!0,N=qp(e),E;E=yield $n(N.next()),c=E.done,!c;b=!0){f=E.value,b=!1;const A=f;if(o4(A)){const P=(i=(r=A.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;P!==void 0&&y.push(P)}yield yield $n(A)}}catch(A){d={error:A}}finally{try{!b&&!c&&(p=N.return)&&(yield $n(p.call(N)))}finally{if(d)throw d.error}}this.recordHistory(t,y)})}recordHistory(e,t){let r=[];t.length>0&&t.every(i=>i.role==="model")?r=t:r.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d4(n,e,t){const r={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const l=g(e,["pageToken"]);return t!==void 0&&l!=null&&x(t,["_query","pageToken"],l),r}function h4(n,e){const t={},r=g(e,["config"]);return r!=null&&x(t,["config"],d4(n,r,t)),t}function f4(n,e){const t={},r=g(e,["details"]);r!=null&&x(t,["details"],r);const i=g(e,["message"]);i!=null&&x(t,["message"],i);const l=g(e,["code"]);return l!=null&&x(t,["code"],l),t}function p4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["mimeType"]);l!=null&&x(t,["mimeType"],l);const c=g(e,["sizeBytes"]);c!=null&&x(t,["sizeBytes"],c);const d=g(e,["createTime"]);d!=null&&x(t,["createTime"],d);const p=g(e,["expirationTime"]);p!=null&&x(t,["expirationTime"],p);const f=g(e,["updateTime"]);f!=null&&x(t,["updateTime"],f);const y=g(e,["sha256Hash"]);y!=null&&x(t,["sha256Hash"],y);const b=g(e,["uri"]);b!=null&&x(t,["uri"],b);const N=g(e,["downloadUri"]);N!=null&&x(t,["downloadUri"],N);const E=g(e,["state"]);E!=null&&x(t,["state"],E);const A=g(e,["source"]);A!=null&&x(t,["source"],A);const P=g(e,["videoMetadata"]);P!=null&&x(t,["videoMetadata"],P);const I=g(e,["error"]);return I!=null&&x(t,["error"],f4(n,I)),t}function m4(n,e){const t={},r=g(e,["file"]);r!=null&&x(t,["file"],p4(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function g4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","file"],PN(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function x4(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","file"],PN(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function y4(n,e){const t={},r=g(e,["details"]);r!=null&&x(t,["details"],r);const i=g(e,["message"]);i!=null&&x(t,["message"],i);const l=g(e,["code"]);return l!=null&&x(t,["code"],l),t}function $p(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["mimeType"]);l!=null&&x(t,["mimeType"],l);const c=g(e,["sizeBytes"]);c!=null&&x(t,["sizeBytes"],c);const d=g(e,["createTime"]);d!=null&&x(t,["createTime"],d);const p=g(e,["expirationTime"]);p!=null&&x(t,["expirationTime"],p);const f=g(e,["updateTime"]);f!=null&&x(t,["updateTime"],f);const y=g(e,["sha256Hash"]);y!=null&&x(t,["sha256Hash"],y);const b=g(e,["uri"]);b!=null&&x(t,["uri"],b);const N=g(e,["downloadUri"]);N!=null&&x(t,["downloadUri"],N);const E=g(e,["state"]);E!=null&&x(t,["state"],E);const A=g(e,["source"]);A!=null&&x(t,["source"],A);const P=g(e,["videoMetadata"]);P!=null&&x(t,["videoMetadata"],P);const I=g(e,["error"]);return I!=null&&x(t,["error"],y4(n,I)),t}function v4(n,e){const t={},r=g(e,["nextPageToken"]);r!=null&&x(t,["nextPageToken"],r);const i=g(e,["files"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>$p(n,c))),x(t,["files"],l)}return t}function b4(){return{}}function w4(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _4 extends Nc{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new cg(dc.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>$p(this.apiClient,t))}async listInternal(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=h4(this.apiClient,e);return l=st("files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const f=v4(this.apiClient,p),y=new n4;return Object.assign(y,f),y})}}async createInternal(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=m4(this.apiClient,e);return l=st("upload/v1beta/files",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(()=>{const p=b4(),f=new r4;return Object.assign(f,p),f})}}async get(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=g4(this.apiClient,e);return l=st("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>$p(this.apiClient,p))}}async delete(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=x4(this.apiClient,e);return l=st("files/{file}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(()=>{const p=w4(),f=new s4;return Object.assign(f,p),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N4(n,e){const t={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(t,["codeExecutionResult"],i);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const p=g(e,["functionResponse"]);p!=null&&x(t,["functionResponse"],p);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const y=g(e,["text"]);return y!=null&&x(t,["text"],y),t}function S4(n,e){const t={},r=g(e,["videoMetadata"]);r!=null&&x(t,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(t,["thought"],i);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const p=g(e,["functionCall"]);p!=null&&x(t,["functionCall"],p);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const y=g(e,["inlineData"]);y!=null&&x(t,["inlineData"],y);const b=g(e,["text"]);return b!=null&&x(t,["text"],b),t}function E4(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>N4(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function C4(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>S4(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function k4(){return{}}function T4(){return{}}function P4(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function j4(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function I4(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],P4(n,r)),t}function A4(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],j4(n,r)),t}function R4(n,e){const t={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(t,["googleSearch"],k4());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(t,["googleSearchRetrieval"],I4(n,i));const l=g(e,["codeExecution"]);l!=null&&x(t,["codeExecution"],l);const c=g(e,["functionDeclarations"]);return c!=null&&x(t,["functionDeclarations"],c),t}function M4(n,e){const t={},r=g(e,["retrieval"]);r!=null&&x(t,["retrieval"],r),g(e,["googleSearch"])!=null&&x(t,["googleSearch"],T4());const l=g(e,["googleSearchRetrieval"]);l!=null&&x(t,["googleSearchRetrieval"],A4(n,l));const c=g(e,["codeExecution"]);c!=null&&x(t,["codeExecution"],c);const d=g(e,["functionDeclarations"]);return d!=null&&x(t,["functionDeclarations"],d),t}function D4(n,e){const t={},r=g(e,["handle"]);if(r!=null&&x(t,["handle"],r),g(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function L4(n,e){const t={},r=g(e,["handle"]);r!=null&&x(t,["handle"],r);const i=g(e,["transparent"]);return i!=null&&x(t,["transparent"],i),t}function V4(){return{}}function ob(){return{}}function z4(n,e){const t={},r=g(e,["disabled"]);r!=null&&x(t,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&x(t,["startOfSpeechSensitivity"],i);const l=g(e,["endOfSpeechSensitivity"]);l!=null&&x(t,["endOfSpeechSensitivity"],l);const c=g(e,["prefixPaddingMs"]);c!=null&&x(t,["prefixPaddingMs"],c);const d=g(e,["silenceDurationMs"]);return d!=null&&x(t,["silenceDurationMs"],d),t}function O4(n,e){const t={},r=g(e,["disabled"]);r!=null&&x(t,["disabled"],r);const i=g(e,["startOfSpeechSensitivity"]);i!=null&&x(t,["startOfSpeechSensitivity"],i);const l=g(e,["endOfSpeechSensitivity"]);l!=null&&x(t,["endOfSpeechSensitivity"],l);const c=g(e,["prefixPaddingMs"]);c!=null&&x(t,["prefixPaddingMs"],c);const d=g(e,["silenceDurationMs"]);return d!=null&&x(t,["silenceDurationMs"],d),t}function F4(n,e){const t={},r=g(e,["automaticActivityDetection"]);r!=null&&x(t,["automaticActivityDetection"],z4(n,r));const i=g(e,["activityHandling"]);i!=null&&x(t,["activityHandling"],i);const l=g(e,["turnCoverage"]);return l!=null&&x(t,["turnCoverage"],l),t}function U4(n,e){const t={},r=g(e,["automaticActivityDetection"]);r!=null&&x(t,["automaticActivityDetection"],O4(n,r));const i=g(e,["activityHandling"]);i!=null&&x(t,["activityHandling"],i);const l=g(e,["turnCoverage"]);return l!=null&&x(t,["turnCoverage"],l),t}function B4(n,e){const t={},r=g(e,["targetTokens"]);return r!=null&&x(t,["targetTokens"],r),t}function q4(n,e){const t={},r=g(e,["targetTokens"]);return r!=null&&x(t,["targetTokens"],r),t}function $4(n,e){const t={},r=g(e,["triggerTokens"]);r!=null&&x(t,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&x(t,["slidingWindow"],B4(n,i)),t}function H4(n,e){const t={},r=g(e,["triggerTokens"]);r!=null&&x(t,["triggerTokens"],r);const i=g(e,["slidingWindow"]);return i!=null&&x(t,["slidingWindow"],q4(n,i)),t}function G4(n,e,t){const r={},i=g(e,["generationConfig"]);t!==void 0&&i!=null&&x(t,["setup","generationConfig"],i);const l=g(e,["responseModalities"]);t!==void 0&&l!=null&&x(t,["setup","generationConfig","responseModalities"],l);const c=g(e,["temperature"]);t!==void 0&&c!=null&&x(t,["setup","generationConfig","temperature"],c);const d=g(e,["topP"]);t!==void 0&&d!=null&&x(t,["setup","generationConfig","topP"],d);const p=g(e,["topK"]);t!==void 0&&p!=null&&x(t,["setup","generationConfig","topK"],p);const f=g(e,["maxOutputTokens"]);t!==void 0&&f!=null&&x(t,["setup","generationConfig","maxOutputTokens"],f);const y=g(e,["mediaResolution"]);t!==void 0&&y!=null&&x(t,["setup","generationConfig","mediaResolution"],y);const b=g(e,["seed"]);t!==void 0&&b!=null&&x(t,["setup","generationConfig","seed"],b);const N=g(e,["speechConfig"]);t!==void 0&&N!=null&&x(t,["setup","generationConfig","speechConfig"],N);const E=g(e,["systemInstruction"]);t!==void 0&&E!=null&&x(t,["setup","systemInstruction"],E4(n,fr(n,E)));const A=g(e,["tools"]);if(t!==void 0&&A!=null){let K=lh(n,A);Array.isArray(K)&&(K=K.map(Z=>R4(n,ah(n,Z)))),x(t,["setup","tools"],K)}const P=g(e,["sessionResumption"]);if(t!==void 0&&P!=null&&x(t,["setup","sessionResumption"],D4(n,P)),g(e,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const I=g(e,["outputAudioTranscription"]);t!==void 0&&I!=null&&x(t,["setup","outputAudioTranscription"],V4());const $=g(e,["realtimeInputConfig"]);t!==void 0&&$!=null&&x(t,["setup","realtimeInputConfig"],F4(n,$));const W=g(e,["contextWindowCompression"]);return t!==void 0&&W!=null&&x(t,["setup","contextWindowCompression"],$4(n,W)),r}function W4(n,e,t){const r={},i=g(e,["generationConfig"]);t!==void 0&&i!=null&&x(t,["setup","generationConfig"],i);const l=g(e,["responseModalities"]);t!==void 0&&l!=null&&x(t,["setup","generationConfig","responseModalities"],l);const c=g(e,["temperature"]);t!==void 0&&c!=null&&x(t,["setup","generationConfig","temperature"],c);const d=g(e,["topP"]);t!==void 0&&d!=null&&x(t,["setup","generationConfig","topP"],d);const p=g(e,["topK"]);t!==void 0&&p!=null&&x(t,["setup","generationConfig","topK"],p);const f=g(e,["maxOutputTokens"]);t!==void 0&&f!=null&&x(t,["setup","generationConfig","maxOutputTokens"],f);const y=g(e,["mediaResolution"]);t!==void 0&&y!=null&&x(t,["setup","generationConfig","mediaResolution"],y);const b=g(e,["seed"]);t!==void 0&&b!=null&&x(t,["setup","generationConfig","seed"],b);const N=g(e,["speechConfig"]);t!==void 0&&N!=null&&x(t,["setup","generationConfig","speechConfig"],N);const E=g(e,["systemInstruction"]);t!==void 0&&E!=null&&x(t,["setup","systemInstruction"],C4(n,fr(n,E)));const A=g(e,["tools"]);if(t!==void 0&&A!=null){let Z=lh(n,A);Array.isArray(Z)&&(Z=Z.map(ce=>M4(n,ah(n,ce)))),x(t,["setup","tools"],Z)}const P=g(e,["sessionResumption"]);t!==void 0&&P!=null&&x(t,["setup","sessionResumption"],L4(n,P));const I=g(e,["inputAudioTranscription"]);t!==void 0&&I!=null&&x(t,["setup","inputAudioTranscription"],ob());const $=g(e,["outputAudioTranscription"]);t!==void 0&&$!=null&&x(t,["setup","outputAudioTranscription"],ob());const W=g(e,["realtimeInputConfig"]);t!==void 0&&W!=null&&x(t,["setup","realtimeInputConfig"],U4(n,W));const K=g(e,["contextWindowCompression"]);return t!==void 0&&K!=null&&x(t,["setup","contextWindowCompression"],H4(n,K)),r}function K4(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["setup","model"],Xt(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],G4(n,i,t)),t}function J4(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["setup","model"],Xt(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],W4(n,i,t)),t}function Y4(){return{}}function Q4(){return{}}function X4(){return{}}function Z4(){return{}}function eM(n,e){const t={},r=g(e,["media"]);r!=null&&x(t,["mediaChunks"],NN(n,r));const i=g(e,["audio"]);i!=null&&x(t,["audio"],vR(n,i));const l=g(e,["audioStreamEnd"]);l!=null&&x(t,["audioStreamEnd"],l);const c=g(e,["video"]);c!=null&&x(t,["video"],yR(n,c));const d=g(e,["text"]);return d!=null&&x(t,["text"],d),g(e,["activityStart"])!=null&&x(t,["activityStart"],Y4()),g(e,["activityEnd"])!=null&&x(t,["activityEnd"],X4()),t}function tM(n,e){const t={},r=g(e,["media"]);if(r!=null&&x(t,["mediaChunks"],NN(n,r)),g(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");const i=g(e,["audioStreamEnd"]);if(i!=null&&x(t,["audioStreamEnd"],i),g(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(g(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return g(e,["activityStart"])!=null&&x(t,["activityStart"],Q4()),g(e,["activityEnd"])!=null&&x(t,["activityEnd"],Z4()),t}function nM(){return{}}function rM(){return{}}function sM(n,e){const t={},r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(t,["codeExecutionResult"],i);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const p=g(e,["functionResponse"]);p!=null&&x(t,["functionResponse"],p);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const y=g(e,["text"]);return y!=null&&x(t,["text"],y),t}function iM(n,e){const t={},r=g(e,["videoMetadata"]);r!=null&&x(t,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(t,["thought"],i);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const p=g(e,["functionCall"]);p!=null&&x(t,["functionCall"],p);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const y=g(e,["inlineData"]);y!=null&&x(t,["inlineData"],y);const b=g(e,["text"]);return b!=null&&x(t,["text"],b),t}function oM(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>sM(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function aM(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>iM(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function ab(n,e){const t={},r=g(e,["text"]);r!=null&&x(t,["text"],r);const i=g(e,["finished"]);return i!=null&&x(t,["finished"],i),t}function lb(n,e){const t={},r=g(e,["text"]);r!=null&&x(t,["text"],r);const i=g(e,["finished"]);return i!=null&&x(t,["finished"],i),t}function lM(n,e){const t={},r=g(e,["modelTurn"]);r!=null&&x(t,["modelTurn"],oM(n,r));const i=g(e,["turnComplete"]);i!=null&&x(t,["turnComplete"],i);const l=g(e,["interrupted"]);l!=null&&x(t,["interrupted"],l);const c=g(e,["groundingMetadata"]);c!=null&&x(t,["groundingMetadata"],c);const d=g(e,["generationComplete"]);d!=null&&x(t,["generationComplete"],d);const p=g(e,["inputTranscription"]);p!=null&&x(t,["inputTranscription"],ab(n,p));const f=g(e,["outputTranscription"]);return f!=null&&x(t,["outputTranscription"],ab(n,f)),t}function cM(n,e){const t={},r=g(e,["modelTurn"]);r!=null&&x(t,["modelTurn"],aM(n,r));const i=g(e,["turnComplete"]);i!=null&&x(t,["turnComplete"],i);const l=g(e,["interrupted"]);l!=null&&x(t,["interrupted"],l);const c=g(e,["groundingMetadata"]);c!=null&&x(t,["groundingMetadata"],c);const d=g(e,["generationComplete"]);d!=null&&x(t,["generationComplete"],d);const p=g(e,["inputTranscription"]);p!=null&&x(t,["inputTranscription"],lb(n,p));const f=g(e,["outputTranscription"]);return f!=null&&x(t,["outputTranscription"],lb(n,f)),t}function uM(n,e){const t={},r=g(e,["id"]);r!=null&&x(t,["id"],r);const i=g(e,["args"]);i!=null&&x(t,["args"],i);const l=g(e,["name"]);return l!=null&&x(t,["name"],l),t}function dM(n,e){const t={},r=g(e,["args"]);r!=null&&x(t,["args"],r);const i=g(e,["name"]);return i!=null&&x(t,["name"],i),t}function hM(n,e){const t={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>uM(n,l))),x(t,["functionCalls"],i)}return t}function fM(n,e){const t={},r=g(e,["functionCalls"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>dM(n,l))),x(t,["functionCalls"],i)}return t}function pM(n,e){const t={},r=g(e,["ids"]);return r!=null&&x(t,["ids"],r),t}function mM(n,e){const t={},r=g(e,["ids"]);return r!=null&&x(t,["ids"],r),t}function Ku(n,e){const t={},r=g(e,["modality"]);r!=null&&x(t,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&x(t,["tokenCount"],i),t}function Ju(n,e){const t={},r=g(e,["modality"]);r!=null&&x(t,["modality"],r);const i=g(e,["tokenCount"]);return i!=null&&x(t,["tokenCount"],i),t}function gM(n,e){const t={},r=g(e,["promptTokenCount"]);r!=null&&x(t,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&x(t,["cachedContentTokenCount"],i);const l=g(e,["responseTokenCount"]);l!=null&&x(t,["responseTokenCount"],l);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(t,["toolUsePromptTokenCount"],c);const d=g(e,["thoughtsTokenCount"]);d!=null&&x(t,["thoughtsTokenCount"],d);const p=g(e,["totalTokenCount"]);p!=null&&x(t,["totalTokenCount"],p);const f=g(e,["promptTokensDetails"]);if(f!=null){let E=f;Array.isArray(E)&&(E=E.map(A=>Ku(n,A))),x(t,["promptTokensDetails"],E)}const y=g(e,["cacheTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(A=>Ku(n,A))),x(t,["cacheTokensDetails"],E)}const b=g(e,["responseTokensDetails"]);if(b!=null){let E=b;Array.isArray(E)&&(E=E.map(A=>Ku(n,A))),x(t,["responseTokensDetails"],E)}const N=g(e,["toolUsePromptTokensDetails"]);if(N!=null){let E=N;Array.isArray(E)&&(E=E.map(A=>Ku(n,A))),x(t,["toolUsePromptTokensDetails"],E)}return t}function xM(n,e){const t={},r=g(e,["promptTokenCount"]);r!=null&&x(t,["promptTokenCount"],r);const i=g(e,["cachedContentTokenCount"]);i!=null&&x(t,["cachedContentTokenCount"],i);const l=g(e,["candidatesTokenCount"]);l!=null&&x(t,["responseTokenCount"],l);const c=g(e,["toolUsePromptTokenCount"]);c!=null&&x(t,["toolUsePromptTokenCount"],c);const d=g(e,["thoughtsTokenCount"]);d!=null&&x(t,["thoughtsTokenCount"],d);const p=g(e,["totalTokenCount"]);p!=null&&x(t,["totalTokenCount"],p);const f=g(e,["promptTokensDetails"]);if(f!=null){let A=f;Array.isArray(A)&&(A=A.map(P=>Ju(n,P))),x(t,["promptTokensDetails"],A)}const y=g(e,["cacheTokensDetails"]);if(y!=null){let A=y;Array.isArray(A)&&(A=A.map(P=>Ju(n,P))),x(t,["cacheTokensDetails"],A)}const b=g(e,["candidatesTokensDetails"]);if(b!=null){let A=b;Array.isArray(A)&&(A=A.map(P=>Ju(n,P))),x(t,["responseTokensDetails"],A)}const N=g(e,["toolUsePromptTokensDetails"]);if(N!=null){let A=N;Array.isArray(A)&&(A=A.map(P=>Ju(n,P))),x(t,["toolUsePromptTokensDetails"],A)}const E=g(e,["trafficType"]);return E!=null&&x(t,["trafficType"],E),t}function yM(n,e){const t={},r=g(e,["timeLeft"]);return r!=null&&x(t,["timeLeft"],r),t}function vM(n,e){const t={},r=g(e,["timeLeft"]);return r!=null&&x(t,["timeLeft"],r),t}function bM(n,e){const t={},r=g(e,["newHandle"]);r!=null&&x(t,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&x(t,["resumable"],i);const l=g(e,["lastConsumedClientMessageIndex"]);return l!=null&&x(t,["lastConsumedClientMessageIndex"],l),t}function wM(n,e){const t={},r=g(e,["newHandle"]);r!=null&&x(t,["newHandle"],r);const i=g(e,["resumable"]);i!=null&&x(t,["resumable"],i);const l=g(e,["lastConsumedClientMessageIndex"]);return l!=null&&x(t,["lastConsumedClientMessageIndex"],l),t}function _M(n,e){const t={};g(e,["setupComplete"])!=null&&x(t,["setupComplete"],nM());const i=g(e,["serverContent"]);i!=null&&x(t,["serverContent"],lM(n,i));const l=g(e,["toolCall"]);l!=null&&x(t,["toolCall"],hM(n,l));const c=g(e,["toolCallCancellation"]);c!=null&&x(t,["toolCallCancellation"],pM(n,c));const d=g(e,["usageMetadata"]);d!=null&&x(t,["usageMetadata"],gM(n,d));const p=g(e,["goAway"]);p!=null&&x(t,["goAway"],yM(n,p));const f=g(e,["sessionResumptionUpdate"]);return f!=null&&x(t,["sessionResumptionUpdate"],bM(n,f)),t}function NM(n,e){const t={};g(e,["setupComplete"])!=null&&x(t,["setupComplete"],rM());const i=g(e,["serverContent"]);i!=null&&x(t,["serverContent"],cM(n,i));const l=g(e,["toolCall"]);l!=null&&x(t,["toolCall"],fM(n,l));const c=g(e,["toolCallCancellation"]);c!=null&&x(t,["toolCallCancellation"],mM(n,c));const d=g(e,["usageMetadata"]);d!=null&&x(t,["usageMetadata"],xM(n,d));const p=g(e,["goAway"]);p!=null&&x(t,["goAway"],vM(n,p));const f=g(e,["sessionResumptionUpdate"]);return f!=null&&x(t,["sessionResumptionUpdate"],wM(n,f)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SM(n,e){const t={};if(g(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(t,["codeExecutionResult"],i);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const p=g(e,["functionResponse"]);p!=null&&x(t,["functionResponse"],p);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const y=g(e,["text"]);return y!=null&&x(t,["text"],y),t}function ch(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>SM(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function EM(n,e){const t={};if(g(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=g(e,["category"]);r!=null&&x(t,["category"],r);const i=g(e,["threshold"]);return i!=null&&x(t,["threshold"],i),t}function CM(){return{}}function kM(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function TM(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],kM(n,r)),t}function PM(n,e){const t={};if(g(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");g(e,["googleSearch"])!=null&&x(t,["googleSearch"],CM());const i=g(e,["googleSearchRetrieval"]);i!=null&&x(t,["googleSearchRetrieval"],TM(n,i));const l=g(e,["codeExecution"]);l!=null&&x(t,["codeExecution"],l);const c=g(e,["functionDeclarations"]);return c!=null&&x(t,["functionDeclarations"],c),t}function jM(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(t,["allowedFunctionNames"],i),t}function IM(n,e){const t={},r=g(e,["functionCallingConfig"]);return r!=null&&x(t,["functionCallingConfig"],jM(n,r)),t}function AM(n,e){const t={},r=g(e,["voiceName"]);return r!=null&&x(t,["voiceName"],r),t}function RM(n,e){const t={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&x(t,["prebuiltVoiceConfig"],AM(n,r)),t}function MM(n,e){const t={},r=g(e,["voiceConfig"]);r!=null&&x(t,["voiceConfig"],RM(n,r));const i=g(e,["languageCode"]);return i!=null&&x(t,["languageCode"],i),t}function DM(n,e){const t={},r=g(e,["includeThoughts"]);r!=null&&x(t,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&x(t,["thinkingBudget"],i),t}function LM(n,e,t){const r={},i=g(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],ch(n,fr(n,i)));const l=g(e,["temperature"]);l!=null&&x(r,["temperature"],l);const c=g(e,["topP"]);c!=null&&x(r,["topP"],c);const d=g(e,["topK"]);d!=null&&x(r,["topK"],d);const p=g(e,["candidateCount"]);p!=null&&x(r,["candidateCount"],p);const f=g(e,["maxOutputTokens"]);f!=null&&x(r,["maxOutputTokens"],f);const y=g(e,["stopSequences"]);y!=null&&x(r,["stopSequences"],y);const b=g(e,["responseLogprobs"]);b!=null&&x(r,["responseLogprobs"],b);const N=g(e,["logprobs"]);N!=null&&x(r,["logprobs"],N);const E=g(e,["presencePenalty"]);E!=null&&x(r,["presencePenalty"],E);const A=g(e,["frequencyPenalty"]);A!=null&&x(r,["frequencyPenalty"],A);const P=g(e,["seed"]);P!=null&&x(r,["seed"],P);const I=g(e,["responseMimeType"]);I!=null&&x(r,["responseMimeType"],I);const $=g(e,["responseSchema"]);if($!=null&&x(r,["responseSchema"],CN(n,$)),g(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(g(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=g(e,["safetySettings"]);if(t!==void 0&&W!=null){let O=W;Array.isArray(O)&&(O=O.map(k=>EM(n,k))),x(t,["safetySettings"],O)}const K=g(e,["tools"]);if(t!==void 0&&K!=null){let O=lh(n,K);Array.isArray(O)&&(O=O.map(k=>PM(n,ah(n,k)))),x(t,["tools"],O)}const Z=g(e,["toolConfig"]);if(t!==void 0&&Z!=null&&x(t,["toolConfig"],IM(n,Z)),g(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=g(e,["cachedContent"]);t!==void 0&&ce!=null&&x(t,["cachedContent"],eo(n,ce));const J=g(e,["responseModalities"]);J!=null&&x(r,["responseModalities"],J);const F=g(e,["mediaResolution"]);F!=null&&x(r,["mediaResolution"],F);const j=g(e,["speechConfig"]);if(j!=null&&x(r,["speechConfig"],MM(n,kN(n,j))),g(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const z=g(e,["thinkingConfig"]);return z!=null&&x(r,["thinkingConfig"],DM(n,z)),r}function cb(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["contents"]);if(i!=null){let c=Zi(n,i);Array.isArray(c)&&(c=c.map(d=>ch(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["generationConfig"],LM(n,l,t)),t}function VM(n,e,t){const r={},i=g(e,["taskType"]);t!==void 0&&i!=null&&x(t,["requests[]","taskType"],i);const l=g(e,["title"]);t!==void 0&&l!=null&&x(t,["requests[]","title"],l);const c=g(e,["outputDimensionality"]);if(t!==void 0&&c!=null&&x(t,["requests[]","outputDimensionality"],c),g(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(g(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function zM(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["contents"]);i!=null&&x(t,["requests[]","content"],EN(n,i));const l=g(e,["config"]);l!=null&&x(t,["config"],VM(n,l,t));const c=g(e,["model"]);return c!==void 0&&x(t,["requests[]","model"],Xt(n,c)),t}function OM(n,e,t){const r={};if(g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=g(e,["numberOfImages"]);t!==void 0&&i!=null&&x(t,["parameters","sampleCount"],i);const l=g(e,["aspectRatio"]);t!==void 0&&l!=null&&x(t,["parameters","aspectRatio"],l);const c=g(e,["guidanceScale"]);if(t!==void 0&&c!=null&&x(t,["parameters","guidanceScale"],c),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=g(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&x(t,["parameters","safetySetting"],d);const p=g(e,["personGeneration"]);t!==void 0&&p!=null&&x(t,["parameters","personGeneration"],p);const f=g(e,["includeSafetyAttributes"]);t!==void 0&&f!=null&&x(t,["parameters","includeSafetyAttributes"],f);const y=g(e,["includeRaiReason"]);t!==void 0&&y!=null&&x(t,["parameters","includeRaiReason"],y);const b=g(e,["language"]);t!==void 0&&b!=null&&x(t,["parameters","language"],b);const N=g(e,["outputMimeType"]);t!==void 0&&N!=null&&x(t,["parameters","outputOptions","mimeType"],N);const E=g(e,["outputCompressionQuality"]);if(t!==void 0&&E!=null&&x(t,["parameters","outputOptions","compressionQuality"],E),g(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function FM(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const l=g(e,["config"]);return l!=null&&x(t,["config"],OM(n,l,t)),t}function UM(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","name"],Xt(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function BM(n,e,t){const r={},i=g(e,["displayName"]);t!==void 0&&i!=null&&x(t,["displayName"],i);const l=g(e,["description"]);return t!==void 0&&l!=null&&x(t,["description"],l),r}function qM(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","name"],Xt(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],BM(n,i,t)),t}function $M(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","name"],Xt(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function HM(n,e){const t={};if(g(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(g(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(g(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function GM(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["contents"]);if(i!=null){let c=Zi(n,i);Array.isArray(c)&&(c=c.map(d=>ch(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["config"],HM(n,l)),t}function WM(n,e){const t={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["imageBytes"]);r!=null&&x(t,["bytesBase64Encoded"],to(n,r));const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function KM(n,e,t){const r={},i=g(e,["numberOfVideos"]);if(t!==void 0&&i!=null&&x(t,["parameters","sampleCount"],i),g(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(g(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=g(e,["durationSeconds"]);if(t!==void 0&&l!=null&&x(t,["parameters","durationSeconds"],l),g(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=g(e,["aspectRatio"]);if(t!==void 0&&c!=null&&x(t,["parameters","aspectRatio"],c),g(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const d=g(e,["personGeneration"]);if(t!==void 0&&d!=null&&x(t,["parameters","personGeneration"],d),g(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=g(e,["negativePrompt"]);if(t!==void 0&&p!=null&&x(t,["parameters","negativePrompt"],p),g(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function JM(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const l=g(e,["image"]);l!=null&&x(t,["instances[0]","image"],WM(n,l));const c=g(e,["config"]);return c!=null&&x(t,["config"],KM(n,c,t)),t}function YM(n,e){const t={},r=g(e,["videoMetadata"]);r!=null&&x(t,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(t,["thought"],i);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const p=g(e,["functionCall"]);p!=null&&x(t,["functionCall"],p);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const y=g(e,["inlineData"]);y!=null&&x(t,["inlineData"],y);const b=g(e,["text"]);return b!=null&&x(t,["text"],b),t}function Za(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>YM(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function QM(n,e){const t={},r=g(e,["featureSelectionPreference"]);return r!=null&&x(t,["featureSelectionPreference"],r),t}function XM(n,e){const t={},r=g(e,["method"]);r!=null&&x(t,["method"],r);const i=g(e,["category"]);i!=null&&x(t,["category"],i);const l=g(e,["threshold"]);return l!=null&&x(t,["threshold"],l),t}function ZM(){return{}}function eD(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["dynamicThreshold"]);return i!=null&&x(t,["dynamicThreshold"],i),t}function tD(n,e){const t={},r=g(e,["dynamicRetrievalConfig"]);return r!=null&&x(t,["dynamicRetrievalConfig"],eD(n,r)),t}function IN(n,e){const t={},r=g(e,["retrieval"]);r!=null&&x(t,["retrieval"],r),g(e,["googleSearch"])!=null&&x(t,["googleSearch"],ZM());const l=g(e,["googleSearchRetrieval"]);l!=null&&x(t,["googleSearchRetrieval"],tD(n,l));const c=g(e,["codeExecution"]);c!=null&&x(t,["codeExecution"],c);const d=g(e,["functionDeclarations"]);return d!=null&&x(t,["functionDeclarations"],d),t}function nD(n,e){const t={},r=g(e,["mode"]);r!=null&&x(t,["mode"],r);const i=g(e,["allowedFunctionNames"]);return i!=null&&x(t,["allowedFunctionNames"],i),t}function rD(n,e){const t={},r=g(e,["functionCallingConfig"]);return r!=null&&x(t,["functionCallingConfig"],nD(n,r)),t}function sD(n,e){const t={},r=g(e,["voiceName"]);return r!=null&&x(t,["voiceName"],r),t}function iD(n,e){const t={},r=g(e,["prebuiltVoiceConfig"]);return r!=null&&x(t,["prebuiltVoiceConfig"],sD(n,r)),t}function oD(n,e){const t={},r=g(e,["voiceConfig"]);r!=null&&x(t,["voiceConfig"],iD(n,r));const i=g(e,["languageCode"]);return i!=null&&x(t,["languageCode"],i),t}function aD(n,e){const t={},r=g(e,["includeThoughts"]);r!=null&&x(t,["includeThoughts"],r);const i=g(e,["thinkingBudget"]);return i!=null&&x(t,["thinkingBudget"],i),t}function lD(n,e,t){const r={},i=g(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],Za(n,fr(n,i)));const l=g(e,["temperature"]);l!=null&&x(r,["temperature"],l);const c=g(e,["topP"]);c!=null&&x(r,["topP"],c);const d=g(e,["topK"]);d!=null&&x(r,["topK"],d);const p=g(e,["candidateCount"]);p!=null&&x(r,["candidateCount"],p);const f=g(e,["maxOutputTokens"]);f!=null&&x(r,["maxOutputTokens"],f);const y=g(e,["stopSequences"]);y!=null&&x(r,["stopSequences"],y);const b=g(e,["responseLogprobs"]);b!=null&&x(r,["responseLogprobs"],b);const N=g(e,["logprobs"]);N!=null&&x(r,["logprobs"],N);const E=g(e,["presencePenalty"]);E!=null&&x(r,["presencePenalty"],E);const A=g(e,["frequencyPenalty"]);A!=null&&x(r,["frequencyPenalty"],A);const P=g(e,["seed"]);P!=null&&x(r,["seed"],P);const I=g(e,["responseMimeType"]);I!=null&&x(r,["responseMimeType"],I);const $=g(e,["responseSchema"]);$!=null&&x(r,["responseSchema"],CN(n,$));const W=g(e,["routingConfig"]);W!=null&&x(r,["routingConfig"],W);const K=g(e,["modelSelectionConfig"]);K!=null&&x(r,["modelConfig"],QM(n,K));const Z=g(e,["safetySettings"]);if(t!==void 0&&Z!=null){let me=Z;Array.isArray(me)&&(me=me.map(Ve=>XM(n,Ve))),x(t,["safetySettings"],me)}const ce=g(e,["tools"]);if(t!==void 0&&ce!=null){let me=lh(n,ce);Array.isArray(me)&&(me=me.map(Ve=>IN(n,ah(n,Ve)))),x(t,["tools"],me)}const J=g(e,["toolConfig"]);t!==void 0&&J!=null&&x(t,["toolConfig"],rD(n,J));const F=g(e,["labels"]);t!==void 0&&F!=null&&x(t,["labels"],F);const j=g(e,["cachedContent"]);t!==void 0&&j!=null&&x(t,["cachedContent"],eo(n,j));const z=g(e,["responseModalities"]);z!=null&&x(r,["responseModalities"],z);const O=g(e,["mediaResolution"]);O!=null&&x(r,["mediaResolution"],O);const k=g(e,["speechConfig"]);k!=null&&x(r,["speechConfig"],oD(n,kN(n,k)));const T=g(e,["audioTimestamp"]);T!=null&&x(r,["audioTimestamp"],T);const L=g(e,["thinkingConfig"]);return L!=null&&x(r,["thinkingConfig"],aD(n,L)),r}function ub(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["contents"]);if(i!=null){let c=Zi(n,i);Array.isArray(c)&&(c=c.map(d=>Za(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["generationConfig"],lD(n,l,t)),t}function cD(n,e,t){const r={},i=g(e,["taskType"]);t!==void 0&&i!=null&&x(t,["instances[]","task_type"],i);const l=g(e,["title"]);t!==void 0&&l!=null&&x(t,["instances[]","title"],l);const c=g(e,["outputDimensionality"]);t!==void 0&&c!=null&&x(t,["parameters","outputDimensionality"],c);const d=g(e,["mimeType"]);t!==void 0&&d!=null&&x(t,["instances[]","mimeType"],d);const p=g(e,["autoTruncate"]);return t!==void 0&&p!=null&&x(t,["parameters","autoTruncate"],p),r}function uD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["contents"]);i!=null&&x(t,["instances[]","content"],EN(n,i));const l=g(e,["config"]);return l!=null&&x(t,["config"],cD(n,l,t)),t}function dD(n,e,t){const r={},i=g(e,["outputGcsUri"]);t!==void 0&&i!=null&&x(t,["parameters","storageUri"],i);const l=g(e,["negativePrompt"]);t!==void 0&&l!=null&&x(t,["parameters","negativePrompt"],l);const c=g(e,["numberOfImages"]);t!==void 0&&c!=null&&x(t,["parameters","sampleCount"],c);const d=g(e,["aspectRatio"]);t!==void 0&&d!=null&&x(t,["parameters","aspectRatio"],d);const p=g(e,["guidanceScale"]);t!==void 0&&p!=null&&x(t,["parameters","guidanceScale"],p);const f=g(e,["seed"]);t!==void 0&&f!=null&&x(t,["parameters","seed"],f);const y=g(e,["safetyFilterLevel"]);t!==void 0&&y!=null&&x(t,["parameters","safetySetting"],y);const b=g(e,["personGeneration"]);t!==void 0&&b!=null&&x(t,["parameters","personGeneration"],b);const N=g(e,["includeSafetyAttributes"]);t!==void 0&&N!=null&&x(t,["parameters","includeSafetyAttributes"],N);const E=g(e,["includeRaiReason"]);t!==void 0&&E!=null&&x(t,["parameters","includeRaiReason"],E);const A=g(e,["language"]);t!==void 0&&A!=null&&x(t,["parameters","language"],A);const P=g(e,["outputMimeType"]);t!==void 0&&P!=null&&x(t,["parameters","outputOptions","mimeType"],P);const I=g(e,["outputCompressionQuality"]);t!==void 0&&I!=null&&x(t,["parameters","outputOptions","compressionQuality"],I);const $=g(e,["addWatermark"]);t!==void 0&&$!=null&&x(t,["parameters","addWatermark"],$);const W=g(e,["enhancePrompt"]);return t!==void 0&&W!=null&&x(t,["parameters","enhancePrompt"],W),r}function hD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const l=g(e,["config"]);return l!=null&&x(t,["config"],dD(n,l,t)),t}function fD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","name"],Xt(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function pD(n,e,t){const r={},i=g(e,["displayName"]);t!==void 0&&i!=null&&x(t,["displayName"],i);const l=g(e,["description"]);return t!==void 0&&l!=null&&x(t,["description"],l),r}function mD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],pD(n,i,t)),t}function gD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","name"],Xt(n,r));const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function xD(n,e,t){const r={},i=g(e,["systemInstruction"]);t!==void 0&&i!=null&&x(t,["systemInstruction"],Za(n,fr(n,i)));const l=g(e,["tools"]);if(t!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>IN(n,p))),x(t,["tools"],d)}const c=g(e,["generationConfig"]);return t!==void 0&&c!=null&&x(t,["generationConfig"],c),r}function yD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["contents"]);if(i!=null){let c=Zi(n,i);Array.isArray(c)&&(c=c.map(d=>Za(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["config"],xD(n,l,t)),t}function vD(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["contents"]);if(i!=null){let c=Zi(n,i);Array.isArray(c)&&(c=c.map(d=>Za(n,d))),x(t,["contents"],c)}const l=g(e,["config"]);return l!=null&&x(t,["config"],l),t}function bD(n,e){const t={},r=g(e,["gcsUri"]);r!=null&&x(t,["gcsUri"],r);const i=g(e,["imageBytes"]);i!=null&&x(t,["bytesBase64Encoded"],to(n,i));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function wD(n,e,t){const r={},i=g(e,["numberOfVideos"]);t!==void 0&&i!=null&&x(t,["parameters","sampleCount"],i);const l=g(e,["outputGcsUri"]);t!==void 0&&l!=null&&x(t,["parameters","storageUri"],l);const c=g(e,["fps"]);t!==void 0&&c!=null&&x(t,["parameters","fps"],c);const d=g(e,["durationSeconds"]);t!==void 0&&d!=null&&x(t,["parameters","durationSeconds"],d);const p=g(e,["seed"]);t!==void 0&&p!=null&&x(t,["parameters","seed"],p);const f=g(e,["aspectRatio"]);t!==void 0&&f!=null&&x(t,["parameters","aspectRatio"],f);const y=g(e,["resolution"]);t!==void 0&&y!=null&&x(t,["parameters","resolution"],y);const b=g(e,["personGeneration"]);t!==void 0&&b!=null&&x(t,["parameters","personGeneration"],b);const N=g(e,["pubsubTopic"]);t!==void 0&&N!=null&&x(t,["parameters","pubsubTopic"],N);const E=g(e,["negativePrompt"]);t!==void 0&&E!=null&&x(t,["parameters","negativePrompt"],E);const A=g(e,["enhancePrompt"]);return t!==void 0&&A!=null&&x(t,["parameters","enhancePrompt"],A),r}function _D(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["_url","model"],Xt(n,r));const i=g(e,["prompt"]);i!=null&&x(t,["instances[0]","prompt"],i);const l=g(e,["image"]);l!=null&&x(t,["instances[0]","image"],bD(n,l));const c=g(e,["config"]);return c!=null&&x(t,["config"],wD(n,c,t)),t}function ND(n,e){const t={},r=g(e,["thought"]);r!=null&&x(t,["thought"],r);const i=g(e,["codeExecutionResult"]);i!=null&&x(t,["codeExecutionResult"],i);const l=g(e,["executableCode"]);l!=null&&x(t,["executableCode"],l);const c=g(e,["fileData"]);c!=null&&x(t,["fileData"],c);const d=g(e,["functionCall"]);d!=null&&x(t,["functionCall"],d);const p=g(e,["functionResponse"]);p!=null&&x(t,["functionResponse"],p);const f=g(e,["inlineData"]);f!=null&&x(t,["inlineData"],f);const y=g(e,["text"]);return y!=null&&x(t,["text"],y),t}function SD(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>ND(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function ED(n,e){const t={},r=g(e,["citationSources"]);return r!=null&&x(t,["citations"],r),t}function CD(n,e){const t={},r=g(e,["content"]);r!=null&&x(t,["content"],SD(n,r));const i=g(e,["citationMetadata"]);i!=null&&x(t,["citationMetadata"],ED(n,i));const l=g(e,["tokenCount"]);l!=null&&x(t,["tokenCount"],l);const c=g(e,["finishReason"]);c!=null&&x(t,["finishReason"],c);const d=g(e,["avgLogprobs"]);d!=null&&x(t,["avgLogprobs"],d);const p=g(e,["groundingMetadata"]);p!=null&&x(t,["groundingMetadata"],p);const f=g(e,["index"]);f!=null&&x(t,["index"],f);const y=g(e,["logprobsResult"]);y!=null&&x(t,["logprobsResult"],y);const b=g(e,["safetyRatings"]);return b!=null&&x(t,["safetyRatings"],b),t}function db(n,e){const t={},r=g(e,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(p=>CD(n,p))),x(t,["candidates"],d)}const i=g(e,["modelVersion"]);i!=null&&x(t,["modelVersion"],i);const l=g(e,["promptFeedback"]);l!=null&&x(t,["promptFeedback"],l);const c=g(e,["usageMetadata"]);return c!=null&&x(t,["usageMetadata"],c),t}function kD(n,e){const t={},r=g(e,["values"]);return r!=null&&x(t,["values"],r),t}function TD(){return{}}function PD(n,e){const t={},r=g(e,["embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>kD(n,c))),x(t,["embeddings"],l)}return g(e,["metadata"])!=null&&x(t,["metadata"],TD()),t}function jD(n,e){const t={},r=g(e,["bytesBase64Encoded"]);r!=null&&x(t,["imageBytes"],to(n,r));const i=g(e,["mimeType"]);return i!=null&&x(t,["mimeType"],i),t}function AN(n,e){const t={},r=g(e,["safetyAttributes","categories"]);r!=null&&x(t,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&x(t,["scores"],i);const l=g(e,["contentType"]);return l!=null&&x(t,["contentType"],l),t}function ID(n,e){const t={},r=g(e,["_self"]);r!=null&&x(t,["image"],jD(n,r));const i=g(e,["raiFilteredReason"]);i!=null&&x(t,["raiFilteredReason"],i);const l=g(e,["_self"]);return l!=null&&x(t,["safetyAttributes"],AN(n,l)),t}function AD(n,e){const t={},r=g(e,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>ID(n,c))),x(t,["generatedImages"],l)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&x(t,["positivePromptSafetyAttributes"],AN(n,i)),t}function RD(n,e){const t={},r=g(e,["baseModel"]);r!=null&&x(t,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&x(t,["createTime"],i);const l=g(e,["updateTime"]);return l!=null&&x(t,["updateTime"],l),t}function hb(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["description"]);l!=null&&x(t,["description"],l);const c=g(e,["version"]);c!=null&&x(t,["version"],c);const d=g(e,["_self"]);d!=null&&x(t,["tunedModelInfo"],RD(n,d));const p=g(e,["inputTokenLimit"]);p!=null&&x(t,["inputTokenLimit"],p);const f=g(e,["outputTokenLimit"]);f!=null&&x(t,["outputTokenLimit"],f);const y=g(e,["supportedGenerationMethods"]);return y!=null&&x(t,["supportedActions"],y),t}function MD(){return{}}function DD(n,e){const t={},r=g(e,["totalTokens"]);r!=null&&x(t,["totalTokens"],r);const i=g(e,["cachedContentTokenCount"]);return i!=null&&x(t,["cachedContentTokenCount"],i),t}function LD(n,e){const t={},r=g(e,["video","uri"]);r!=null&&x(t,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&x(t,["videoBytes"],to(n,i));const l=g(e,["encoding"]);return l!=null&&x(t,["mimeType"],l),t}function VD(n,e){const t={},r=g(e,["_self"]);return r!=null&&x(t,["video"],LD(n,r)),t}function zD(n,e){const t={},r=g(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>VD(n,d))),x(t,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(t,["raiMediaFilteredCount"],i);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function OD(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["metadata"]);i!=null&&x(t,["metadata"],i);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response","generateVideoResponse"]);return d!=null&&x(t,["response"],zD(n,d)),t}function FD(n,e){const t={},r=g(e,["videoMetadata"]);r!=null&&x(t,["videoMetadata"],r);const i=g(e,["thought"]);i!=null&&x(t,["thought"],i);const l=g(e,["codeExecutionResult"]);l!=null&&x(t,["codeExecutionResult"],l);const c=g(e,["executableCode"]);c!=null&&x(t,["executableCode"],c);const d=g(e,["fileData"]);d!=null&&x(t,["fileData"],d);const p=g(e,["functionCall"]);p!=null&&x(t,["functionCall"],p);const f=g(e,["functionResponse"]);f!=null&&x(t,["functionResponse"],f);const y=g(e,["inlineData"]);y!=null&&x(t,["inlineData"],y);const b=g(e,["text"]);return b!=null&&x(t,["text"],b),t}function UD(n,e){const t={},r=g(e,["parts"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>FD(n,c))),x(t,["parts"],l)}const i=g(e,["role"]);return i!=null&&x(t,["role"],i),t}function BD(n,e){const t={},r=g(e,["citations"]);return r!=null&&x(t,["citations"],r),t}function qD(n,e){const t={},r=g(e,["content"]);r!=null&&x(t,["content"],UD(n,r));const i=g(e,["citationMetadata"]);i!=null&&x(t,["citationMetadata"],BD(n,i));const l=g(e,["finishMessage"]);l!=null&&x(t,["finishMessage"],l);const c=g(e,["finishReason"]);c!=null&&x(t,["finishReason"],c);const d=g(e,["avgLogprobs"]);d!=null&&x(t,["avgLogprobs"],d);const p=g(e,["groundingMetadata"]);p!=null&&x(t,["groundingMetadata"],p);const f=g(e,["index"]);f!=null&&x(t,["index"],f);const y=g(e,["logprobsResult"]);y!=null&&x(t,["logprobsResult"],y);const b=g(e,["safetyRatings"]);return b!=null&&x(t,["safetyRatings"],b),t}function fb(n,e){const t={},r=g(e,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(y=>qD(n,y))),x(t,["candidates"],f)}const i=g(e,["createTime"]);i!=null&&x(t,["createTime"],i);const l=g(e,["responseId"]);l!=null&&x(t,["responseId"],l);const c=g(e,["modelVersion"]);c!=null&&x(t,["modelVersion"],c);const d=g(e,["promptFeedback"]);d!=null&&x(t,["promptFeedback"],d);const p=g(e,["usageMetadata"]);return p!=null&&x(t,["usageMetadata"],p),t}function $D(n,e){const t={},r=g(e,["truncated"]);r!=null&&x(t,["truncated"],r);const i=g(e,["token_count"]);return i!=null&&x(t,["tokenCount"],i),t}function HD(n,e){const t={},r=g(e,["values"]);r!=null&&x(t,["values"],r);const i=g(e,["statistics"]);return i!=null&&x(t,["statistics"],$D(n,i)),t}function GD(n,e){const t={},r=g(e,["billableCharacterCount"]);return r!=null&&x(t,["billableCharacterCount"],r),t}function WD(n,e){const t={},r=g(e,["predictions[]","embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>HD(n,c))),x(t,["embeddings"],l)}const i=g(e,["metadata"]);return i!=null&&x(t,["metadata"],GD(n,i)),t}function KD(n,e){const t={},r=g(e,["gcsUri"]);r!=null&&x(t,["gcsUri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(t,["imageBytes"],to(n,i));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function RN(n,e){const t={},r=g(e,["safetyAttributes","categories"]);r!=null&&x(t,["categories"],r);const i=g(e,["safetyAttributes","scores"]);i!=null&&x(t,["scores"],i);const l=g(e,["contentType"]);return l!=null&&x(t,["contentType"],l),t}function JD(n,e){const t={},r=g(e,["_self"]);r!=null&&x(t,["image"],KD(n,r));const i=g(e,["raiFilteredReason"]);i!=null&&x(t,["raiFilteredReason"],i);const l=g(e,["_self"]);l!=null&&x(t,["safetyAttributes"],RN(n,l));const c=g(e,["prompt"]);return c!=null&&x(t,["enhancedPrompt"],c),t}function YD(n,e){const t={},r=g(e,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>JD(n,c))),x(t,["generatedImages"],l)}const i=g(e,["positivePromptSafetyAttributes"]);return i!=null&&x(t,["positivePromptSafetyAttributes"],RN(n,i)),t}function QD(n,e){const t={},r=g(e,["endpoint"]);r!=null&&x(t,["name"],r);const i=g(e,["deployedModelId"]);return i!=null&&x(t,["deployedModelId"],i),t}function XD(n,e){const t={},r=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&x(t,["baseModel"],r);const i=g(e,["createTime"]);i!=null&&x(t,["createTime"],i);const l=g(e,["updateTime"]);return l!=null&&x(t,["updateTime"],l),t}function pb(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["displayName"]);i!=null&&x(t,["displayName"],i);const l=g(e,["description"]);l!=null&&x(t,["description"],l);const c=g(e,["versionId"]);c!=null&&x(t,["version"],c);const d=g(e,["deployedModels"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(b=>QD(n,b))),x(t,["endpoints"],y)}const p=g(e,["labels"]);p!=null&&x(t,["labels"],p);const f=g(e,["_self"]);return f!=null&&x(t,["tunedModelInfo"],XD(n,f)),t}function ZD(){return{}}function e5(n,e){const t={},r=g(e,["totalTokens"]);return r!=null&&x(t,["totalTokens"],r),t}function t5(n,e){const t={},r=g(e,["tokensInfo"]);return r!=null&&x(t,["tokensInfo"],r),t}function n5(n,e){const t={},r=g(e,["gcsUri"]);r!=null&&x(t,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(t,["videoBytes"],to(n,i));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function r5(n,e){const t={},r=g(e,["_self"]);return r!=null&&x(t,["video"],n5(n,r)),t}function s5(n,e){const t={},r=g(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>r5(n,d))),x(t,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(t,["raiMediaFilteredCount"],i);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function i5(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["metadata"]);i!=null&&x(t,["metadata"],i);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],s5(n,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function a5(n,e,t){let r,i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),n.isVertexAI()?r=NM(n,i):r=_M(n,i),e(r)}class l5{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r,i,l;const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const f=h5(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())p=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(f);else{const Z=this.apiClient.getApiKey();p=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateContent?key=${Z}`}let y=()=>{};const b=new Promise(Z=>{y=Z}),N=e.callbacks,E=function(){var Z;(Z=N==null?void 0:N.onopen)===null||Z===void 0||Z.call(N),y({})},A=this.apiClient,P={onopen:E,onmessage:Z=>{a5(A,N.onmessage,Z)},onerror:(t=N==null?void 0:N.onerror)!==null&&t!==void 0?t:function(Z){},onclose:(r=N==null?void 0:N.onclose)!==null&&r!==void 0?r:function(Z){}},I=this.webSocketFactory.create(p,d5(f),P);I.connect(),await b;let $=Xt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&$.startsWith("publishers/")){const Z=this.apiClient.getProject(),ce=this.apiClient.getLocation();$=`projects/${Z}/locations/${ce}/`+$}let W={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ad.AUDIO]}:e.config.responseModalities=[Ad.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const K={model:$,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?W=J4(this.apiClient,K):W=K4(this.apiClient,K),delete W.config,I.send(JSON.stringify(W)),new u5(I,this.apiClient)}}const c5={turnComplete:!0};class u5{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=Zi(e,t.turns),e.isVertexAI()?r=r.map(i=>Za(e,i)):r=r.map(i=>ch(e,i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const l of r){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(o5)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},c5),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:tM(this.apiClient,e)}:t={realtimeInput:eM(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function d5(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function h5(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class f5 extends Nc{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>await this.generateContentInternal(t),this.generateContentStream=async t=>await this.generateContentStreamInternal(t),this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let l;const c=[];if(r!=null&&r.generatedImages)for(const p of r.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((i=p==null?void 0:p.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?l=p==null?void 0:p.safetyAttributes:c.push(p);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l}:d={generatedImages:c},d})}async generateContentInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=ub(this.apiClient,e);return d=st("{model}:generateContent",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=fb(this.apiClient,y),N=new Wu;return Object.assign(N,b),N})}else{const f=cb(this.apiClient,e);return d=st("{model}:generateContent",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=db(this.apiClient,y),N=new Wu;return Object.assign(N,b),N})}}async generateContentStreamInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=ub(this.apiClient,e);d=st("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f.config,delete f._url,delete f._query;const y=this.apiClient;return c=y.requestStream({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),c.then(function(b){return Rd(this,arguments,function*(){var N,E,A,P;try{for(var I=!0,$=qp(b),W;W=yield $n($.next()),N=W.done,!N;I=!0){P=W.value,I=!1;const Z=fb(y,yield $n(P.json())),ce=new Wu;Object.assign(ce,Z),yield yield $n(ce)}}catch(K){E={error:K}}finally{try{!I&&!N&&(A=$.return)&&(yield $n(A.call($)))}finally{if(E)throw E.error}}})})}else{const f=cb(this.apiClient,e);d=st("{model}:streamGenerateContent?alt=sse",f._url),p=f._query,delete f.config,delete f._url,delete f._query;const y=this.apiClient;return c=y.requestStream({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(b){return Rd(this,arguments,function*(){var N,E,A,P;try{for(var I=!0,$=qp(b),W;W=yield $n($.next()),N=W.done,!N;I=!0){P=W.value,I=!1;const Z=db(y,yield $n(P.json())),ce=new Wu;Object.assign(ce,Z),yield yield $n(ce)}}catch(K){E={error:K}}finally{try{!I&&!N&&(A=$.return)&&(yield $n(A.call($)))}finally{if(E)throw E.error}}})})}}async embedContent(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=uD(this.apiClient,e);return d=st("{model}:predict",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=WD(this.apiClient,y),N=new Xv;return Object.assign(N,b),N})}else{const f=zM(this.apiClient,e);return d=st("{model}:batchEmbedContents",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=PD(this.apiClient,y),N=new Xv;return Object.assign(N,b),N})}}async generateImagesInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=hD(this.apiClient,e);return d=st("{model}:predict",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=YD(this.apiClient,y),N=new Zv;return Object.assign(N,b),N})}else{const f=FM(this.apiClient,e);return d=st("{model}:predict",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=AD(this.apiClient,y),N=new Zv;return Object.assign(N,b),N})}}async get(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=fD(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>pb(this.apiClient,y))}else{const f=UM(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>hb(this.apiClient,y))}}async update(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=mD(this.apiClient,e);return d=st("{model}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>pb(this.apiClient,y))}else{const f=qM(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>hb(this.apiClient,y))}}async delete(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=gD(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(()=>{const y=ZD(),b=new eb;return Object.assign(b,y),b})}else{const f=$M(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(()=>{const y=MD(),b=new eb;return Object.assign(b,y),b})}}async countTokens(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=yD(this.apiClient,e);return d=st("{model}:countTokens",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=e5(this.apiClient,y),N=new tb;return Object.assign(N,b),N})}else{const f=GM(this.apiClient,e);return d=st("{model}:countTokens",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=DD(this.apiClient,y),N=new tb;return Object.assign(N,b),N})}}async computeTokens(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI()){const d=vD(this.apiClient,e);return l=st("{model}:computeTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>{const f=t5(this.apiClient,p),y=new t4;return Object.assign(y,f),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=_D(this.apiClient,e);return d=st("{model}:predictLongRunning",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>i5(this.apiClient,y))}else{const f=JM(this.apiClient,e);return d=st("{model}:predictLongRunning",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>OD(this.apiClient,y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p5(n,e){const t={},r=g(e,["operationName"]);r!=null&&x(t,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function m5(n,e){const t={},r=g(e,["operationName"]);r!=null&&x(t,["_url","operationName"],r);const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function g5(n,e){const t={},r=g(e,["operationName"]);r!=null&&x(t,["operationName"],r);const i=g(e,["resourceName"]);i!=null&&x(t,["_url","resourceName"],i);const l=g(e,["config"]);return l!=null&&x(t,["config"],l),t}function x5(n,e){const t={},r=g(e,["video","uri"]);r!=null&&x(t,["uri"],r);const i=g(e,["video","encodedVideo"]);i!=null&&x(t,["videoBytes"],to(n,i));const l=g(e,["encoding"]);return l!=null&&x(t,["mimeType"],l),t}function y5(n,e){const t={},r=g(e,["_self"]);return r!=null&&x(t,["video"],x5(n,r)),t}function v5(n,e){const t={},r=g(e,["generatedSamples"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>y5(n,d))),x(t,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(t,["raiMediaFilteredCount"],i);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function b5(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["metadata"]);i!=null&&x(t,["metadata"],i);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response","generateVideoResponse"]);return d!=null&&x(t,["response"],v5(n,d)),t}function w5(n,e){const t={},r=g(e,["gcsUri"]);r!=null&&x(t,["uri"],r);const i=g(e,["bytesBase64Encoded"]);i!=null&&x(t,["videoBytes"],to(n,i));const l=g(e,["mimeType"]);return l!=null&&x(t,["mimeType"],l),t}function _5(n,e){const t={},r=g(e,["_self"]);return r!=null&&x(t,["video"],w5(n,r)),t}function N5(n,e){const t={},r=g(e,["videos"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>_5(n,d))),x(t,["generatedVideos"],c)}const i=g(e,["raiMediaFilteredCount"]);i!=null&&x(t,["raiMediaFilteredCount"],i);const l=g(e,["raiMediaFilteredReasons"]);return l!=null&&x(t,["raiMediaFilteredReasons"],l),t}function mb(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["metadata"]);i!=null&&x(t,["metadata"],i);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);c!=null&&x(t,["error"],c);const d=g(e,["response"]);return d!=null&&x(t,["response"],N5(n,d)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S5 extends Nc{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let l;return r&&"httpOptions"in r&&(l=r.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:l}})}else return this.getVideosOperationInternal({operationName:t.name,config:r})}async getVideosOperationInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=m5(this.apiClient,e);return d=st("{operationName}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>mb(this.apiClient,y))}else{const f=p5(this.apiClient,e);return d=st("{operationName}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>b5(this.apiClient,y))}}async fetchPredictVideosOperationInternal(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI()){const d=g5(this.apiClient,e);return l=st("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>mb(this.apiClient,p))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const E5="Content-Type",C5="X-Server-Timeout",k5="User-Agent",T5="x-goog-api-client",P5="0.12.0",j5=`google-genai-sdk/${P5}`,I5="v1beta1",A5="v1beta",gb=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class MN extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Hp extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class R5{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:I5,this.getProject()||this.getLocation()?(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(i.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:A5,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[c,d]of Object.entries(e.queryParams))i.searchParams.append(c,String(d));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(i,l,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,l]of Object.entries(t))typeof l=="object"?r[i]=Object.assign(Object.assign({},r[i]),l):l!==void 0&&(r[i]=l);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(i,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r){if(t&&t.timeout||r){const i=new AbortController,l=i.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>i.abort(),t.timeout),r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=l}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await xb(i),new Bp(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await xb(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var t;return Rd(this,arguments,function*(){const i=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let c="";for(;;){const{done:d,value:p}=yield $n(i.read());if(d){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=l.decode(p);try{const b=JSON.parse(f);if("error"in b){const N=JSON.parse(JSON.stringify(b.error)),E=N.status,A=N.code,P=`got status: ${E}. ${JSON.stringify(b)}`;if(A>=400&&A<500)throw new MN(P);if(A>=500&&A<600)throw new Hp(P)}}catch(b){const N=b;if(N.name==="ClientError"||N.name==="ServerError")throw b}c+=f;let y=c.match(gb);for(;y;){const b=y[1];try{const N=new Response(b,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield $n(new Bp(N)),c=c.slice(y[0].length),y=c.match(gb)}catch(N){throw new Error(`exception parsing stream chunk ${b}. ${N}`)}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=j5+" "+this.clientOptions.userAgentExtra;return e[k5]=t,e[T5]=t,e[E5]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))t.append(r,i);e.timeout&&e.timeout>0&&t.append(C5,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);i.sizeBytes=String(c.size);const d=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=d;const p=await this.fetchUploadUrl(i,t);return l.upload(e,p,this)}async fetchUploadUrl(e,t){var r;let i={};t!=null&&t.httpOptions?i=t.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},c=await this.request({path:st("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:i});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const d=(r=c==null?void 0:c.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(d===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return d}}async function xb(n){var e;if(n===void 0)throw new Hp("response is undefined");if(!n.ok){const t=n.status,r=n.statusText;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const l=`got status: ${t} ${r}. ${JSON.stringify(i)}`;throw t>=400&&t<500?new MN(l):t>=500&&t<600?new Hp(l):new Error(l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M5(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],r);const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function D5(n,e,t){const r={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const l=g(e,["pageToken"]);t!==void 0&&l!=null&&x(t,["_query","pageToken"],l);const c=g(e,["filter"]);return t!==void 0&&c!=null&&x(t,["_query","filter"],c),r}function L5(n,e){const t={},r=g(e,["config"]);return r!=null&&x(t,["config"],D5(n,r,t)),t}function V5(n,e){const t={},r=g(e,["textInput"]);r!=null&&x(t,["textInput"],r);const i=g(e,["output"]);return i!=null&&x(t,["output"],i),t}function z5(n,e){const t={};if(g(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=g(e,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(l=>V5(n,l))),x(t,["examples","examples"],i)}return t}function O5(n,e,t){const r={};if(g(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=g(e,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&x(t,["displayName"],i),g(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=g(e,["epochCount"]);t!==void 0&&l!=null&&x(t,["tuningTask","hyperparameters","epochCount"],l);const c=g(e,["learningRateMultiplier"]);if(c!=null&&x(r,["tuningTask","hyperparameters","learningRateMultiplier"],c),g(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=g(e,["batchSize"]);t!==void 0&&d!=null&&x(t,["tuningTask","hyperparameters","batchSize"],d);const p=g(e,["learningRate"]);return t!==void 0&&p!=null&&x(t,["tuningTask","hyperparameters","learningRate"],p),r}function F5(n,e){const t={},r=g(e,["baseModel"]);r!=null&&x(t,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&x(t,["tuningTask","trainingData"],z5(n,i));const l=g(e,["config"]);return l!=null&&x(t,["config"],O5(n,l,t)),t}function U5(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["_url","name"],r);const i=g(e,["config"]);return i!=null&&x(t,["config"],i),t}function B5(n,e,t){const r={},i=g(e,["pageSize"]);t!==void 0&&i!=null&&x(t,["_query","pageSize"],i);const l=g(e,["pageToken"]);t!==void 0&&l!=null&&x(t,["_query","pageToken"],l);const c=g(e,["filter"]);return t!==void 0&&c!=null&&x(t,["_query","filter"],c),r}function q5(n,e){const t={},r=g(e,["config"]);return r!=null&&x(t,["config"],B5(n,r,t)),t}function $5(n,e,t){const r={},i=g(e,["gcsUri"]);if(t!==void 0&&i!=null&&x(t,["supervisedTuningSpec","trainingDatasetUri"],i),g(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function H5(n,e){const t={},r=g(e,["gcsUri"]);return r!=null&&x(t,["validationDatasetUri"],r),t}function G5(n,e,t){const r={},i=g(e,["validationDataset"]);t!==void 0&&i!=null&&x(t,["supervisedTuningSpec"],H5(n,i));const l=g(e,["tunedModelDisplayName"]);t!==void 0&&l!=null&&x(t,["tunedModelDisplayName"],l);const c=g(e,["description"]);t!==void 0&&c!=null&&x(t,["description"],c);const d=g(e,["epochCount"]);t!==void 0&&d!=null&&x(t,["supervisedTuningSpec","hyperParameters","epochCount"],d);const p=g(e,["learningRateMultiplier"]);t!==void 0&&p!=null&&x(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],p);const f=g(e,["adapterSize"]);if(t!==void 0&&f!=null&&x(t,["supervisedTuningSpec","hyperParameters","adapterSize"],f),g(e,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(g(e,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function W5(n,e){const t={},r=g(e,["baseModel"]);r!=null&&x(t,["baseModel"],r);const i=g(e,["trainingDataset"]);i!=null&&x(t,["supervisedTuningSpec","trainingDatasetUri"],$5(n,i,t));const l=g(e,["config"]);return l!=null&&x(t,["config"],G5(n,l,t)),t}function K5(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["model"],r);const i=g(e,["name"]);return i!=null&&x(t,["endpoint"],i),t}function DN(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["state"]);i!=null&&x(t,["state"],TN(n,i));const l=g(e,["createTime"]);l!=null&&x(t,["createTime"],l);const c=g(e,["tuningTask","startTime"]);c!=null&&x(t,["startTime"],c);const d=g(e,["tuningTask","completeTime"]);d!=null&&x(t,["endTime"],d);const p=g(e,["updateTime"]);p!=null&&x(t,["updateTime"],p);const f=g(e,["description"]);f!=null&&x(t,["description"],f);const y=g(e,["baseModel"]);y!=null&&x(t,["baseModel"],y);const b=g(e,["_self"]);b!=null&&x(t,["tunedModel"],K5(n,b));const N=g(e,["distillationSpec"]);N!=null&&x(t,["distillationSpec"],N);const E=g(e,["experiment"]);E!=null&&x(t,["experiment"],E);const A=g(e,["labels"]);A!=null&&x(t,["labels"],A);const P=g(e,["pipelineJob"]);P!=null&&x(t,["pipelineJob"],P);const I=g(e,["tunedModelDisplayName"]);return I!=null&&x(t,["tunedModelDisplayName"],I),t}function J5(n,e){const t={},r=g(e,["nextPageToken"]);r!=null&&x(t,["nextPageToken"],r);const i=g(e,["tunedModels"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>DN(n,c))),x(t,["tuningJobs"],l)}return t}function Y5(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["metadata"]);i!=null&&x(t,["metadata"],i);const l=g(e,["done"]);l!=null&&x(t,["done"],l);const c=g(e,["error"]);return c!=null&&x(t,["error"],c),t}function Q5(n,e){const t={},r=g(e,["model"]);r!=null&&x(t,["model"],r);const i=g(e,["endpoint"]);return i!=null&&x(t,["endpoint"],i),t}function Gp(n,e){const t={},r=g(e,["name"]);r!=null&&x(t,["name"],r);const i=g(e,["state"]);i!=null&&x(t,["state"],TN(n,i));const l=g(e,["createTime"]);l!=null&&x(t,["createTime"],l);const c=g(e,["startTime"]);c!=null&&x(t,["startTime"],c);const d=g(e,["endTime"]);d!=null&&x(t,["endTime"],d);const p=g(e,["updateTime"]);p!=null&&x(t,["updateTime"],p);const f=g(e,["error"]);f!=null&&x(t,["error"],f);const y=g(e,["description"]);y!=null&&x(t,["description"],y);const b=g(e,["baseModel"]);b!=null&&x(t,["baseModel"],b);const N=g(e,["tunedModel"]);N!=null&&x(t,["tunedModel"],Q5(n,N));const E=g(e,["supervisedTuningSpec"]);E!=null&&x(t,["supervisedTuningSpec"],E);const A=g(e,["tuningDataStats"]);A!=null&&x(t,["tuningDataStats"],A);const P=g(e,["encryptionSpec"]);P!=null&&x(t,["encryptionSpec"],P);const I=g(e,["partnerModelTuningSpec"]);I!=null&&x(t,["partnerModelTuningSpec"],I);const $=g(e,["distillationSpec"]);$!=null&&x(t,["distillationSpec"],$);const W=g(e,["experiment"]);W!=null&&x(t,["experiment"],W);const K=g(e,["labels"]);K!=null&&x(t,["labels"],K);const Z=g(e,["pipelineJob"]);Z!=null&&x(t,["pipelineJob"],Z);const ce=g(e,["tunedModelDisplayName"]);return ce!=null&&x(t,["tunedModelDisplayName"],ce),t}function X5(n,e){const t={},r=g(e,["nextPageToken"]);r!=null&&x(t,["nextPageToken"],r);const i=g(e,["tuningJobs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Gp(n,c))),x(t,["tuningJobs"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z5 extends Nc{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new cg(dc.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const r=await this.tuneMldevInternal(t);let i="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?i=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(i=r.name.split("/operations/")[0]),{name:i,state:Up.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=U5(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>Gp(this.apiClient,y))}else{const f=M5(this.apiClient,e);return d=st("{name}",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>DN(this.apiClient,y))}}async listInternal(e){var t,r,i,l;let c,d="",p={};if(this.apiClient.isVertexAI()){const f=q5(this.apiClient,e);return d=st("tuningJobs",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(y=>y.json()),c.then(y=>{const b=X5(this.apiClient,y),N=new nb;return Object.assign(N,b),N})}else{const f=L5(this.apiClient,e);return d=st("tunedModels",f._url),p=f._query,delete f.config,delete f._url,delete f._query,c=this.apiClient.request({path:d,queryParams:p,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const b=J5(this.apiClient,y),N=new nb;return Object.assign(N,b),N})}}async tuneInternal(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI()){const d=W5(this.apiClient,e);return l=st("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Gp(this.apiClient,p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=F5(this.apiClient,e);return l=st("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,i=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),i.then(p=>Y5(this.apiClient,p))}}}const e3=1024*1024*8;async function t3(n,e,t){var r,i;let l=0,c=0,d=new Bp(new Response),p="upload";for(l=n.size;c<l;){const y=Math.min(e3,l-c),b=n.slice(c,c+y);if(c+y>=l&&(p+=", finalize"),d=await t.request({path:"",body:b,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(c),"Content-Length":String(y)}}}),c+=y,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(d==null?void 0:d.json());if(((i=d==null?void 0:d.headers)===null||i===void 0?void 0:i["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function n3(n){return{size:n.size,type:n.type}}class r3{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await t3(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await n3(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s3{create(e,t,r){return new i3(e,t,r)}}class i3{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yb="x-goog-api-key";class o3{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(yb)===null&&e.append(yb,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a3="gl-node/";class l3{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=xR(e,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new o3(this.apiKey);this.apiClient=new R5({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:a3+"web",uploader:new r3}),this.models=new f5(this.apiClient),this.live=new l5(this.apiClient,i,new s3),this.chats=new c4(this.models,this.apiClient),this.caches=new i4(this.apiClient),this.files=new _4(this.apiClient),this.operations=new S5(this.apiClient),this.tunings=new Z5(this.apiClient)}}const c3="PLACEHOLDER_API_KEY",Sc=()=>new l3({apiKey:c3}),u3=async(n,e,t)=>{const r=Sc();if(!r)return"AI Generation unavailable (Missing API Key).";try{return(await r.models.generateContent({model:"gemini-2.5-flash",contents:`Write a compelling, SEO-friendly product description for an e-commerce product.
      
      Product Name: ${n}
      Category: ${e}
      Keywords/Features: ${t}
      
      Tone: Professional, persuasive, and enthusiastic. 
      Keep it under 150 words.`})).text||"Could not generate description."}catch(i){return console.error("Gemini API Error:",i),"Error generating description. Please try again."}},d3=async(n,e)=>{const t=Sc();if(!t)return null;const r=n.replace(/^data:image\/\w+;base64,/,"");try{const l=(await t.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:r}},{text:`You are a fashion merchandising expert for a specialized jewelry store. Analyze this image of a ${e||"jewelry product"}.
            
            Generate the following JSON object:
            {
              "name": "A short, catchy, premium product name",
              "description": "A short, powerful, attractive description (max 3 sentences) that sells the product emotionally.",
              "whenAndHowToWear": "Short, powerful advice on when and how to wear this item (max 2 sentences).",
              "tags": ["Array", "of", "5", "jewelry-specific", "tags"],
              "seoKeywords": ["Array", "of", "5", "strong", "SEO", "keywords"],
              "colors": ["List", "of", "dominant", "product", "colors"]
            }
            
            CRITICAL INSTRUCTIONS:
            1. **Tags**: STRICTLY JEWELRY ONLY. Allowed: Materials (Gold, Resin, Silver, Gemstone), Types (Ring, Stud, Choker, Pendant), Styles (Art Deco, Vintage, Boho, Minimalist), Techniques (Filigree, Wire Wrap). 
               FORBIDDEN: "Fashion", "Style", "Woman", "Girl", "Cute", "Gift", "Love", "Trend", "Beautiful", "Accessory".
            2. **Colors**: STRICTLY PRODUCT ONLY. Ignore background, skin, or prop colors. If the ring is silver and the stone is red, output ["Silver", "Red"]. Do not output "White" if the background is white.
            
            Return ONLY raw JSON.`}]},config:{responseMimeType:"application/json"}})).text;return l?JSON.parse(l):null}catch(i){return console.error("Gemini Image Analysis Error:",i),null}},h3=async(n,e)=>{const t=Sc();if(!t)return[];try{const i=(await t.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${e} unique South African product reviews for a jewelry item named "${n}".
      
      CRITICAL INSTRUCTIONS:
      1. **Persona**: Use ONLY Female names.
      2. **Diversity**: Mix names from Zulu, Xhosa, Afrikaans, English, and Coloured backgrounds.
      3. **Locations**: Use specific South African towns (e.g., Paarl, Benoni, Mthatha, Umlazi, George, Soweto, Ballito, Bloemfontein), NOT just "Cape Town" or "JHB".
      4. **Language Mixing**: 
         - Some reviews must mix English with Afrikaans (e.g., "Baie nice", "Lekker", "Te oulik").
         - Some reviews must mix English with Xhosa/Zulu slang (e.g., "Yho", "Shame", "Stunning shem", "Haikona").
         - Keep it natural.
      5. **Realism**: Include occasional spelling mistakes (e.g., "realy", "awsome") and casual grammar.
      6. **Rating**: Randomly between 3.5 and 5.0 stars.
      7. **Content**: Short, punchy comments about quality, delivery, or how it looks.
      8. **Dates**: Random dates strictly between January 1st, 2025 and today (Format: YYYY-MM-DD). Do NOT generate 2024 dates.

      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return i?JSON.parse(i).map(c=>({...c,id:`rev_ai_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(r){return console.error("Gemini Review Generation Error:",r),[]}},f3=async n=>{const e=Sc();if(!e)return[];try{const r=(await e.models.generateContent({model:"gemini-2.5-flash",contents:`Generate ${n} unique South African reviews specifically for "One of a Kind" handmade wire-wrapped pendants.
      
      CRITICAL INSTRUCTIONS:
      1. **Context**: These are unique, single items. The reviews should NOT mention specific colors or stones (like "love the blue stone") because every piece is different.
      2. **Focus**: Focus on the "surprise" element, the uniqueness, the wire-wrapping craftsmanship, the packaging, and the fact that nobody else has this exact piece.
      3. **Persona**: Female names, South African diversity (Zulu, Xhosa, Afrikaans, English).
      4. **Locations**: Specific SA towns.
      5. **Language**: Mix in SA slang (Lekker, Mooi, Pragtig, Yho, Stunning).
      6. **Rating**: 4.0 to 5.0 stars.
      7. **Dates**: Random dates between Jan 2025 and now.
      
      Output strictly as a JSON Array of objects with keys: userName, location, content, rating, date.`,config:{responseMimeType:"application/json"}})).text;return r?JSON.parse(r).map(l=>({...l,id:`rev_unique_${Date.now()}_${Math.random().toString(36).substr(2,9)}`})):[]}catch(t){return console.error("Gemini Unique Review Generation Error:",t),[]}},p3=async(n,e,t)=>{const r=Sc();if(!r)return"Check out this amazing product at Spoil Me Vintage! #vintage #jewelry";try{let i=`Write a single social media post for a jewelry product named "${n}". Price: R${t}.`;return e==="Instagram"||e==="TikTok"?i+=' Style: High energy, visually descriptive, lots of emojis, include 10 relevant hashtags. Focus on "Unique", "Handmade", "South Africa". Keep it under 200 characters + hashtags.':e==="Facebook"?i+=' Style: Friendly, community-focused, engaging question at the end. Mention "Spoil Me Vintage". Include link placeholder [Link].':e==="Twitter"||e==="X"?i+=" Style: Short, punchy, urgent. Max 280 characters. Include 3 hashtags.":i+=" Style: Professional yet inviting.",(await r.models.generateContent({model:"gemini-2.5-flash",contents:i})).text||""}catch(i){return console.error("Gemini Social Post Error:",i),`New arrival: ${n} for only R${t}! Get it before it's gone. #SpoilMeVintage`}},m3={"Choker  35 cm":"Fits snugly around the base of the neck, sitting just above the collarbone.","Collar  40 cm":"Lies on the collarbone for a clean line that complements almost any neckline.","Princess  45 cm":"Falls just below the collarbone, perfectly framing a pendant.","Matinee  50 cm":"Drops a few centimetres beneath the collarbone for a subtle, elongating effect.","Matinee Long  60 cm":"Reaches the upper bust, offering a graceful drape over sweaters or dresses."},g3=[{name:"Sterling Silver",modifier:30,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Black",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Stainless Steel Silver",modifier:0,description:"Durable, premium metal suitable for long-term wear."},{name:"Hypo-Allergic Plastic",modifier:0,description:"Plastic state bends easily"}],x3=()=>{var fe,Ne,qe,Ze,ct,Re,Ye,vt,Pt;const{products:n,addProduct:e,updateProduct:t,deleteProduct:r,categories:i,packagingPresets:l,materialPresets:c,savePackagingPreset:d,saveMaterialPreset:p,deleteMaterialPreset:f}=Rt(),[y,b]=D.useState(!1),[N,E]=D.useState(!1),[A,P]=D.useState(!1),[I,$]=D.useState(!1),[W,K]=D.useState(!1),[Z,ce]=D.useState("general"),[J,F]=D.useState(null),[j,z]=D.useState(null),[O,k]=D.useState(""),[T,L]=D.useState(""),[me,Ve]=D.useState(""),[Se,Pe]=D.useState(!1),B=D.useRef(null),ve=D.useRef(null),G=D.useRef(null),q={id:"",code:"",name:"",slug:"",description:"",whenAndHowToWear:"",price:0,compareAtPrice:0,memberPrice:0,costPrice:0,shippingCost:0,packaging:[],backOfficeLink:"",madeBy:"Spoil Me Vintage",category:((fe=i[0])==null?void 0:fe.name)||"",type:"Stud",status:"draft",images:[""],stock:0,soldCount:0,tags:[],seoKeywords:[],colors:[],isNewArrival:!1,isBestSeller:!1,isFeaturedRing:!1,isFeaturedBracelet:!1,isFeaturedWatch:!1,isUniquePendant:!1,isFeaturedStud:!1,isFeaturedDangle:!1,isFeaturedJewelryBox:!1,isFeaturedPerfumeHolder:!1,isJewelrySet:!1,createdAt:new Date().toISOString(),ringStock:{5:0,6:0,7:0,8:0,9:0,10:0,11:0},earringMaterials:[],showEarringOptions:!1,pendantChainLengths:{},pendantWireWrapped:!1,chainStyles:[],material:"",reviews:[],giftProductId:"",giftValue:0,promoPrice:0,promoStartsAt:"",promoExpiresAt:"",promoBasicMemberPrice:0,promoPremiumMemberPrice:0,promoDeluxeMemberPrice:0},[M,se]=D.useState(q),[he,ze]=D.useState(""),[We,et]=D.useState(""),[Ke,Je]=D.useState(""),[He,_t]=D.useState(0),[Ct,at]=D.useState(""),[Te,lt]=D.useState(""),[Bt,qt]=D.useState(5),dn=[...g3,...c],$t=()=>{var V;se({...q,id:`SPV-${Date.now()}`,createdAt:new Date().toISOString(),category:((V=i[0])==null?void 0:V.name)||""}),b(!0),ce("general"),lt("")},_e=V=>{se({...q,...V,compareAtPrice:V.compareAtPrice||0,memberPrice:V.memberPrice||0,costPrice:V.costPrice||0,shippingCost:V.shippingCost||0,soldCount:V.soldCount||0,packaging:V.packaging||[],ringStock:V.ringStock||q.ringStock,pendantChainLengths:V.pendantChainLengths||{},showEarringOptions:V.showEarringOptions??!1,chainStyles:V.chainStyles||[],reviews:V.reviews||[],giftProductId:V.giftProductId||"",giftValue:V.giftValue||0,promoPrice:V.promoPrice||0,promoStartsAt:V.promoStartsAt||"",promoExpiresAt:V.promoExpiresAt||"",promoBasicMemberPrice:V.promoBasicMemberPrice||0,promoPremiumMemberPrice:V.promoPremiumMemberPrice||0,promoDeluxeMemberPrice:V.promoDeluxeMemberPrice||0,tags:V.tags||[],seoKeywords:V.seoKeywords||[],colors:V.colors||[],isFeaturedJewelryBox:V.isFeaturedJewelryBox||!1,isFeaturedPerfumeHolder:V.isFeaturedPerfumeHolder||!1}),b(!0),ce("general"),lt("")},Ht=async()=>{if(!M.name||!M.price){alert("Name and Price are required");return}E(!0);try{let V=[];if(xn){const Le=M.images.map(async(it,sn)=>{if(it.startsWith("data:"))try{const Nt=Date.now(),bn=Ws(xn,`products/${M.id}/img_${Nt}_${sn}`);return await $P(bn,it,"data_url"),await Gs(bn)}catch(Nt){return console.error("Failed to upload image:",Nt),""}return it}),tt=await Promise.all(Le);console.log("AdminProducts: upload raw results:",tt),V=tt.filter(it=>it&&it.trim()!==""),console.log("AdminProducts: processedImages:",V)}else V=M.images.filter(Le=>Le.trim()!=="");const oe={...M,images:V,price:Number(M.price),stock:Number(M.stock),soldCount:Number(M.soldCount),compareAtPrice:Number(M.compareAtPrice||0),memberPrice:Number(M.memberPrice||0),costPrice:Number(M.costPrice||0),shippingCost:Number(M.shippingCost||0),giftValue:Number(M.giftValue||0),promoPrice:Number(M.promoPrice||0),promoBasicMemberPrice:Number(M.promoBasicMemberPrice||0),promoPremiumMemberPrice:Number(M.promoPremiumMemberPrice||0),promoDeluxeMemberPrice:Number(M.promoDeluxeMemberPrice||0)};oe.type==="Ring"&&oe.ringStock&&(oe.stock=Object.values(oe.ringStock).reduce((Le,tt)=>Le+tt,0)),n.some(Le=>Le.id===oe.id)?await t(oe):await e(oe),b(!1)}catch(V){console.error("Failed to save product:",V),alert("Failed to save product. Please check console.")}finally{E(!1)}},Dn=async V=>{if(window.confirm("Are you sure?"))try{await r(V)}catch{alert("Failed to delete product.")}},Zn=async()=>{if(!M.name||!M.category){alert("Please enter a name and category first.");return}P(!0);const V=await u3(M.name,M.category,"Handmade, Unique, Vintage");se(oe=>({...oe,description:V})),P(!1)},pr=async V=>{var tt;const oe=(tt=V.target.files)==null?void 0:tt[0];if(!oe)return;$(!0);const Le=new FileReader;Le.onloadend=async()=>{const it=Le.result,sn=[it,...M.images.filter(bn=>bn!=="")];se(bn=>({...bn,images:sn})),console.log("AdminProducts: Added base64 image for analysis (preview length):",it.slice(0,80));const Nt=await d3(it,M.category);Nt&&se(bn=>({...bn,name:Nt.name,description:Nt.description,whenAndHowToWear:Nt.whenAndHowToWear,tags:[...new Set([...bn.tags,...Nt.tags])],seoKeywords:[...new Set([...bn.seoKeywords||[],...Nt.seoKeywords])],colors:[...new Set([...bn.colors||[],...Nt.colors])],slug:Nt.name.toLowerCase().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-")})),$(!1)},Le.readAsDataURL(oe)},Cn=async V=>{const oe=V.target.files;if(!oe||oe.length===0)return;const Le=Array.from(oe).map(it=>new Promise(sn=>{const Nt=new FileReader;Nt.onloadend=()=>sn(Nt.result),Nt.readAsDataURL(it)})),tt=await Promise.all(Le);se(it=>({...it,images:[...it.images.filter(sn=>sn.trim()!==""),...tt]})),V.target.value=""},kt=async()=>{if(!M.name){alert("Please enter a product name first.");return}K(!0);const V=await h3(M.name,Bt);V.length>0&&se(oe=>({...oe,reviews:[...oe.reviews||[],...V]})),K(!1)},Mt=async()=>{K(!0);const V=await f3(25);V.length>0&&se(oe=>({...oe,reviews:[...oe.reviews||[],...V]})),K(!1)},hn=()=>{const V=Math.floor(1e5+Math.random()*9e5);se(oe=>({...oe,code:`SPV-${V}`}))},mr=()=>{if(!M.name)return;const V=M.name.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"");se(oe=>({...oe,slug:V}))},er=V=>{se(oe=>{var Le;return{...oe,reviews:(Le=oe.reviews)==null?void 0:Le.filter(tt=>tt.id!==V)}})},ue=(V,oe,Le)=>{if(!oe.trim())return;const tt=oe.split(",").map(it=>it.trim()).filter(it=>it.length>0);se(it=>({...it,[V]:Array.from(new Set([...it[V]||[],...tt]))})),Le("")},$e=(V,oe)=>{se(Le=>{var tt;return{...Le,[V]:(tt=Le[V])==null?void 0:tt.filter((it,sn)=>sn!==oe)}})},Tt=V=>{const oe=M.images.filter((Le,tt)=>tt!==V);oe.length===0&&oe.push(""),se({...M,images:oe})},fn=V=>{F(V.id),z({userName:V.userName,location:V.location,content:V.content,rating:V.rating,date:V.date||new Date().toLocaleDateString()})},Ln=()=>{!J||!j||(se(V=>{var oe;return{...V,reviews:(oe=V.reviews)==null?void 0:oe.map(Le=>Le.id===J?{...Le,...j}:Le)}}),F(null),z(null))},Br=(V,oe,Le)=>{var tt;(tt=M.earringMaterials)!=null&&tt.some(it=>it.name===V)||se(it=>({...it,earringMaterials:[...it.earringMaterials||[],{name:V,modifier:oe,description:Le}]}))},Ps=V=>{const oe=[...M.earringMaterials||[]];oe.splice(V,1),se({...M,earringMaterials:oe})},Tr=V=>{Ke&&(Br(Ke,He,Ct),V&&(p({name:Ke,modifier:He,description:Ct}),alert("Material saved to presets!")),Je(""),_t(0),at(""))},ls=(V,oe)=>{V.stopPropagation(),window.confirm(`Remove "${oe}" from presets?`)&&f(oe)},cs=()=>{(M.packaging||[]).length>=3||se({...M,packaging:[...M.packaging||[],{id:`pack_${Date.now()}`,name:"",bulkCost:0,bulkQuantity:1,unitCost:0}]})},Vn=V=>{if(!V)return;const oe=l.find(Le=>Le.name===V);oe&&(M.packaging||[]).length<3&&se({...M,packaging:[...M.packaging||[],{...oe,id:`pack_${Date.now()}`}]})},tr=V=>{var Le;const oe=(Le=M.packaging)==null?void 0:Le[V];oe&&oe.name&&(d(oe),alert(`Saved "${oe.name}" to packaging presets!`))},Pr=(V,oe,Le)=>{const tt=[...M.packaging||[]],it={...tt[V],[oe]:Le};if(oe==="bulkCost"||oe==="bulkQuantity"){const sn=oe==="bulkCost"?parseFloat(Le):it.bulkCost,Nt=oe==="bulkQuantity"?parseFloat(Le):it.bulkQuantity;it.unitCost=Nt>0?sn/Nt:0}tt[V]=it,se({...M,packaging:tt})},nr=V=>{const oe=[...M.packaging||[]];oe.splice(V,1),se({...M,packaging:oe})},js=V=>{se(oe=>({...oe,price:V,memberPrice:parseFloat((V*.8).toFixed(2))}))},jr=((Ne=M.packaging)==null?void 0:Ne.reduce((V,oe)=>V+oe.unitCost,0))||0,qr=(M.costPrice||0)+(M.shippingCost||0)+jr,te=M.price-qr,Q=(M.memberPrice||0)-qr,ne=n.filter(V=>{const oe=O.toLowerCase();return(V.name.toLowerCase().includes(oe)||V.code.toLowerCase().includes(oe))&&(T?V.type===T:!0)&&(me?V.category===me:!0)&&(Se?V.promoPrice&&V.promoPrice>0:!0)});return s.jsxs("div",{className:"space-y-6 text-[22px]",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Product Management"}),!y&&s.jsxs("button",{onClick:$t,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 shadow-lg transition-colors text-sm",children:[s.jsx(Hs,{size:18})," Add Product"]})]}),!y&&s.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[s.jsx(oh,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),s.jsx("input",{type:"text",placeholder:"Search by Name or SKU...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:O,onChange:V=>k(V.target.value)})]}),s.jsxs("div",{className:"relative",children:[s.jsx(mN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),s.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:T,onChange:V=>L(V.target.value),children:[s.jsx("option",{value:"",children:"All Types"}),s.jsx("option",{value:"Stud",children:"Stud Earrings"}),s.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),s.jsx("option",{value:"Ring",children:"Rings"}),s.jsx("option",{value:"Pendant",children:"Pendants"}),s.jsx("option",{value:"Bracelet",children:"Bracelets"}),s.jsx("option",{value:"Watch",children:"Watches"}),s.jsx("option",{value:"Jewelry Box",children:"Jewelry Boxes"}),s.jsx("option",{value:"Perfume Holder",children:"Perfume Holders"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(cA,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),s.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none",value:me,onChange:V=>Ve(V.target.value),children:[s.jsx("option",{value:"",children:"All Collections"}),i.map(V=>s.jsx("option",{value:V.name,children:V.name},V.id))]})]}),s.jsxs("button",{onClick:()=>Pe(!Se),className:`px-4 py-2 rounded-lg text-sm font-medium border transition-all flex items-center gap-2 ${Se?"bg-green-900/30 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-400 hover:bg-zinc-800"}`,children:[s.jsx(Gl,{size:16})," ",Se?"Promotions Active":"Show Promotions"]}),(O||T||me||Se)&&s.jsx("button",{onClick:()=>{k(""),L(""),Ve(""),Pe(!1)},className:"px-3 py-2 text-xs text-gray-500 hover:text-white underline decoration-dotted",children:"Reset Filters"})]}),y?s.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:[s.jsx("div",{className:"flex border-b border-gray-800 bg-zinc-950/50 overflow-x-auto no-scrollbar",children:["general","pricing","media","inventory","marketing","reviews","promotions","gifts"].map(V=>s.jsx("button",{onClick:()=>ce(V),className:`px-6 py-4 text-sm font-medium capitalize whitespace-nowrap transition-colors ${Z===V?"text-pink-500 border-b-2 border-pink-500 bg-pink-500/5":"text-gray-400 hover:text-white"}`,children:V},V))}),s.jsxs("div",{className:"p-6",children:[Z==="general"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Name *"}),s.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm focus:border-pink-500",value:M.name,onChange:V=>se({...M,name:V.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"URL Slug"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.slug,onChange:V=>se({...M,slug:V.target.value}),placeholder:"product-name-url"}),s.jsx("button",{onClick:mr,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:s.jsx(cc,{size:16})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"SKU / Code"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.code,onChange:V=>se({...M,code:V.target.value}),placeholder:"SPV-001"}),s.jsx("button",{onClick:hn,className:"px-3 bg-zinc-800 border border-gray-700 rounded-md text-gray-400 hover:text-white hover:bg-zinc-700 transition-colors",children:s.jsx(cc,{size:16})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Status"}),s.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.status,onChange:V=>se({...M,status:V.target.value}),children:[s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"published",children:"Published"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),s.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.category,onChange:V=>se({...M,category:V.target.value}),children:[s.jsx("option",{value:"",children:"Select Category"}),i.map(V=>s.jsx("option",{value:V.name,children:V.name},V.id))]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Product Type"}),s.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.type,onChange:V=>se({...M,type:V.target.value}),children:[s.jsx("option",{value:"Stud",children:"Stud Earrings"}),s.jsx("option",{value:"Dangle",children:"Dangle Earrings"}),s.jsx("option",{value:"Ring",children:"Ring"}),s.jsx("option",{value:"Pendant",children:"Pendant / Necklace"}),s.jsx("option",{value:"Bracelet",children:"Bracelet"}),s.jsx("option",{value:"Watch",children:"Watch"}),s.jsx("option",{value:"Jewelry Box",children:"Jewelry Box"}),s.jsx("option",{value:"Perfume Holder",children:"Perfume Holder"}),s.jsx("option",{value:"Other",children:"Other"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Made By"}),s.jsxs("select",{className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.madeBy,onChange:V=>se({...M,madeBy:V.target.value}),children:[s.jsx("option",{value:"Spoil Me Vintage",children:"Spoil Me Vintage (Handmade)"}),s.jsx("option",{value:"Outsourced",children:"Outsourced"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Base Material"}),s.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.material,onChange:V=>se({...M,material:V.target.value}),placeholder:"e.g. Epoxy Resin, Copper"})]})]})]}),Z==="pricing"&&s.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[s.jsx(Cs,{size:18,className:"text-green-400"})," Sales Prices"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Retail Price (R) *"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm font-bold text-green-400",value:M.price,onChange:V=>js(parseFloat(V.target.value)||0)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"RRP (Comparison)"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.compareAtPrice||"",onChange:V=>se({...M,compareAtPrice:parseFloat(V.target.value)||0})})]})]}),s.jsxs("div",{className:"p-4 bg-purple-900/10 border border-purple-500/30 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("label",{className:"block text-sm font-bold text-purple-400 flex items-center gap-2",children:[s.jsx(Er,{size:16})," Member Price"]}),s.jsx("span",{className:"text-[10px] bg-purple-600/20 text-purple-300 border border-purple-500/50 px-2 py-1 rounded font-bold",children:"20% OFF"})]}),s.jsx("input",{type:"number",className:"w-full p-2 bg-zinc-900/50 border border-purple-500/30 rounded-md text-gray-400 text-sm font-bold cursor-not-allowed",value:M.memberPrice||"",readOnly:!0,disabled:!0})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 border-b border-gray-800 pb-2",children:[s.jsx(os,{size:18,className:"text-red-400"})," Cost & Shipping"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-red-400/80 mb-1",children:"Product Cost (R)"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-red-900/30 rounded-md text-white text-sm",value:M.costPrice||0,onChange:V=>se({...M,costPrice:parseFloat(V.target.value)||0})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-red-400/80 mb-1",children:"Shipping In (R)"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-red-900/30 rounded-md text-white text-sm",value:M.shippingCost||0,onChange:V=>se({...M,shippingCost:parseFloat(V.target.value)||0})})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-400 mb-1 flex items-center gap-2",children:[s.jsx(sg,{size:14})," Back Office / Supplier Link"]}),s.jsx("input",{type:"text",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.backOfficeLink,onChange:V=>se({...M,backOfficeLink:V.target.value})})]})]})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800 shadow-lg",children:[s.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 mb-4",children:[s.jsx(tA,{size:18,className:"text-cyan-400"})," Profit & Margins"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[s.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-red-900/30",children:[s.jsx("span",{className:"text-gray-400 block mb-1",children:"Total Unit Cost"}),s.jsxs("div",{className:"text-2xl font-bold text-red-400",children:["R",qr.toFixed(2)]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-2 space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Product:"})," ",s.jsxs("span",{children:["R",(M.costPrice||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Shipping:"})," ",s.jsxs("span",{children:["R",(M.shippingCost||0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Packaging:"})," ",s.jsxs("span",{children:["R",jr.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-green-900/30",children:[s.jsx("span",{className:"text-gray-400 block mb-1",children:"Retail Profit"}),s.jsxs("div",{className:`text-2xl font-bold ${te>0?"text-green-400":"text-red-500"}`,children:["R",te.toFixed(2)]})]}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-lg border border-purple-900/30",children:[s.jsx("span",{className:"text-gray-400 block mb-1",children:"Member Profit"}),s.jsxs("div",{className:`text-2xl font-bold ${Q>0?"text-purple-400":"text-red-500"}`,children:["R",Q.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"border-t border-gray-800 pt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h3",{className:"text-sm font-bold text-white flex items-center gap-2",children:[s.jsx(Td,{size:16,className:"text-pink-500"})," Packaging Breakdown"]}),s.jsxs("select",{className:"bg-zinc-800 text-xs text-gray-300 border border-gray-700 rounded px-2 py-1",onChange:V=>Vn(V.target.value),value:"",children:[s.jsx("option",{value:"",children:"Load Preset..."}),l.map((V,oe)=>s.jsxs("option",{value:V.name,children:[V.name," (R",V.unitCost.toFixed(2),")"]},oe))]})]}),(((qe=M.packaging)==null?void 0:qe.length)||0)<3&&s.jsxs("button",{onClick:cs,className:"text-xs flex items-center gap-1 text-cyan-400 hover:text-cyan-300",children:[s.jsx(Hs,{size:12})," Add Item"]})]}),s.jsx("div",{className:"space-y-3",children:(Ze=M.packaging)==null?void 0:Ze.map((V,oe)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end bg-zinc-900 p-3 rounded border border-gray-800",children:[s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Item Name"}),s.jsx("input",{type:"text",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:V.name,onChange:Le=>Pr(oe,"name",Le.target.value)})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Cost (R)"}),s.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:V.bulkCost,onChange:Le=>Pr(oe,"bulkCost",parseFloat(Le.target.value)||0)})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Bulk Qty"}),s.jsx("input",{type:"number",className:"w-full p-1.5 bg-black border border-gray-700 rounded text-xs text-white",value:V.bulkQuantity,onChange:Le=>Pr(oe,"bulkQuantity",parseFloat(Le.target.value)||0)})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-[10px] text-gray-500 uppercase mb-1",children:"Unit Cost"}),s.jsxs("div",{className:"w-full p-1.5 bg-zinc-800 border border-gray-700 rounded text-xs text-red-300 font-mono",children:["R",V.unitCost.toFixed(2)]})]}),s.jsxs("div",{className:"md:col-span-3 flex justify-end pb-1 gap-2",children:[s.jsx("button",{onClick:()=>tr(oe),className:"text-blue-400 hover:text-blue-300 bg-blue-900/20 p-1 rounded hover:bg-blue-900/40 transition-colors",title:"Save as Preset",children:s.jsx(od,{size:16})}),s.jsx("button",{onClick:()=>nr(oe),className:"text-gray-600 hover:text-red-400 p-1",children:s.jsx(Po,{size:16})})]})]},oe))})]})]}),Z==="inventory"&&s.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Current Stock"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.stock,onChange:V=>se({...M,stock:parseInt(V.target.value)||0})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Sold Count"}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:M.soldCount,onChange:V=>se({...M,soldCount:parseInt(V.target.value)||0})})]})]}),M.type==="Ring"&&s.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[s.jsx("h3",{className:"text-sm font-bold text-white mb-3",children:"Ring Sizes"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.keys(q.ringStock||{}).map(V=>{var oe;return s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:["Size ",V]}),s.jsx("input",{type:"number",className:"w-full p-2 bg-black border border-gray-700 rounded text-white text-sm",value:((oe=M.ringStock)==null?void 0:oe[V])||0,onChange:Le=>se({...M,ringStock:{...M.ringStock,[V]:parseInt(Le.target.value)||0}})})]},V)})})]}),(M.type==="Stud"||M.type==="Dangle")&&s.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("input",{type:"checkbox",id:"showEarringOptions",checked:M.showEarringOptions,onChange:V=>se({...M,showEarringOptions:V.target.checked}),className:"rounded bg-black border-gray-600 text-pink-600 focus:ring-pink-500"}),s.jsx("label",{htmlFor:"showEarringOptions",className:"text-sm font-bold text-white",children:"Enable Material Customization"})]}),M.showEarringOptions&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:dn.map(V=>s.jsxs("div",{className:"group relative inline-flex",children:[s.jsxs("button",{onClick:()=>Br(V.name,V.modifier,V.description),className:"text-xs bg-gray-800 hover:bg-gray-700 text-gray-300 px-2 py-1 rounded border border-gray-600",children:["+ ",V.name]}),c.some(oe=>oe.name===V.name)&&s.jsx("button",{onClick:oe=>ls(oe,V.name),className:"absolute -top-1.5 -right-1.5 bg-red-600 text-white rounded-full p-0.5 w-3 h-3 flex items-center justify-center text-[8px] opacity-0 group-hover:opacity-100 transition-opacity",children:"X"})]},V.name))}),s.jsx("div",{className:"space-y-2",children:(ct=M.earringMaterials)==null?void 0:ct.map((V,oe)=>s.jsxs("div",{className:"flex items-center gap-2 bg-black p-2 rounded border border-gray-800",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-white",children:V.name}),s.jsxs("span",{className:"text-xs text-pink-400",children:["+R",V.modifier]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:V.description})]}),s.jsx("button",{onClick:()=>Ps(oe),className:"text-gray-600 hover:text-red-400",children:s.jsx(Po,{size:14})})]},oe))}),s.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end pt-2 border-t border-gray-700",children:[s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"text",placeholder:"Custom Material",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Ke,onChange:V=>Je(V.target.value)})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"number",placeholder:"Price Mod",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:He,onChange:V=>_t(parseFloat(V.target.value)||0)})}),s.jsx("div",{className:"col-span-4",children:s.jsx("input",{type:"text",placeholder:"Description",className:"w-full p-1.5 bg-black border border-gray-600 rounded text-xs text-white",value:Ct,onChange:V=>at(V.target.value)})}),s.jsxs("div",{className:"col-span-3 flex gap-1",children:[s.jsx("button",{onClick:()=>Tr(!1),className:"flex-1 p-1.5 bg-pink-600 text-white rounded text-xs flex items-center justify-center",title:"Add to Product",children:s.jsx(Hs,{size:14})}),s.jsx("button",{onClick:()=>Tr(!0),className:"flex-1 p-1.5 bg-cyan-600 text-white rounded text-xs flex items-center justify-center",title:"Add & Save Preset",children:s.jsx(od,{size:14})})]})]})]})]}),M.type==="Pendant"&&s.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Chain Styles"}),s.jsx("div",{className:"flex gap-2",children:["Metal Chain","Leather Cord","Ribbon"].map(V=>{var oe;return s.jsx("button",{onClick:()=>{var it,sn;const tt=((it=M.chainStyles)==null?void 0:it.includes(V))?(sn=M.chainStyles)==null?void 0:sn.filter(Nt=>Nt!==V):[...M.chainStyles||[],V];se({...M,chainStyles:tt})},className:`px-3 py-1 rounded text-xs border ${(oe=M.chainStyles)!=null&&oe.includes(V)?"bg-cyan-900/50 border-cyan-500 text-cyan-400":"bg-black border-gray-700 text-gray-400"}`,children:V},V)})})]}),((Re=M.chainStyles)==null?void 0:Re.includes("Metal Chain"))&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-white mb-2",children:"Available Lengths"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(m3).map(V=>{var oe,Le;return s.jsxs("div",{onClick:()=>{const tt=M.pendantChainLengths||{};se({...M,pendantChainLengths:{...tt,[V]:!tt[V]}})},className:`p-2 rounded border cursor-pointer text-xs flex items-center justify-between ${(oe=M.pendantChainLengths)!=null&&oe[V]?"bg-green-900/20 border-green-500 text-green-400":"bg-black border-gray-700 text-gray-500"}`,children:[s.jsx("span",{children:V}),((Le=M.pendantChainLengths)==null?void 0:Le[V])&&s.jsx(ft,{size:12})]},V)})})]})]})]}),Z==="marketing"&&s.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[s.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[s.jsx(Gl,{size:18,className:"text-cyan-400"})," Product Visibility & Features"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${M.isNewArrival?"bg-cyan-900/20 border-cyan-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${M.isNewArrival?"bg-cyan-500 border-cyan-500":"border-gray-600"}`,children:M.isNewArrival&&s.jsx(ft,{size:14,className:"text-black"})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:M.isNewArrival,onChange:V=>se({...M,isNewArrival:V.target.checked})}),s.jsx("span",{className:"text-sm font-bold text-white",children:"New Arrival"})]}),s.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${M.isBestSeller?"bg-yellow-900/20 border-yellow-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${M.isBestSeller?"bg-yellow-500 border-yellow-500":"border-gray-600"}`,children:M.isBestSeller&&s.jsx(ft,{size:14,className:"text-black"})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:M.isBestSeller,onChange:V=>se({...M,isBestSeller:V.target.checked})}),s.jsx("span",{className:"text-sm font-bold text-white",children:"Best Seller"})]}),s.jsxs("label",{className:`flex items-center gap-3 p-4 border rounded-lg cursor-pointer transition-all ${M.isJewelrySet?"bg-purple-900/20 border-purple-500":"bg-black border-gray-700 hover:bg-zinc-800"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border ${M.isJewelrySet?"bg-purple-500 border-purple-500":"border-gray-600"}`,children:M.isJewelrySet&&s.jsx(ft,{size:14,className:"text-white"})}),s.jsx("input",{type:"checkbox",className:"hidden",checked:M.isJewelrySet,onChange:V=>se({...M,isJewelrySet:V.target.checked})}),s.jsx("span",{className:"text-sm font-bold text-white",children:"Jewelry Set"})]})]}),s.jsx("h4",{className:"text-sm text-gray-400 font-bold mt-6 mb-3 uppercase tracking-wider",children:"Category Features"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.isFeaturedRing,onChange:V=>se({...M,isFeaturedRing:V.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Ring"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.isFeaturedBracelet,onChange:V=>se({...M,isFeaturedBracelet:V.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Bracelet"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.isUniquePendant,onChange:V=>se({...M,isUniquePendant:V.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Unique Pendant"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.isFeaturedStud,onChange:V=>se({...M,isFeaturedStud:V.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Studs"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.isFeaturedDangle,onChange:V=>se({...M,isFeaturedDangle:V.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Dangles"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.isFeaturedWatch,onChange:V=>se({...M,isFeaturedWatch:V.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Watch"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.isFeaturedJewelryBox,onChange:V=>se({...M,isFeaturedJewelryBox:V.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Jewelry Box"})]}),s.jsxs("label",{className:"flex items-center gap-2 p-3 border border-gray-700 rounded bg-black hover:bg-zinc-800 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:M.isFeaturedPerfumeHolder,onChange:V=>se({...M,isFeaturedPerfumeHolder:V.target.checked})}),s.jsx("span",{className:"text-xs text-white",children:"Featured Perfume Holder"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Tags & SEO"}),s.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:M.tags.map((V,oe)=>s.jsxs("span",{className:"bg-gray-800 text-gray-300 text-xs px-2 py-1 rounded flex items-center gap-1",children:[V,s.jsx(vn,{size:12,className:"cursor-pointer",onClick:()=>$e("tags",oe)})]},oe))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"flex-1 p-2 bg-black border border-gray-700 rounded-md text-white text-sm",value:he,onChange:V=>ze(V.target.value),onKeyDown:V=>V.key==="Enter"&&ue("tags",he,ze),placeholder:"Add tag..."}),s.jsx("button",{onClick:()=>ue("tags",he,ze),className:"bg-gray-800 p-2 rounded text-white",children:s.jsx(Hs,{size:18})})]})]})]}),Z==="reviews"&&s.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[s.jsxs("div",{className:"flex gap-4 flex-wrap",children:[s.jsxs("div",{className:"flex-1 bg-gradient-to-r from-cyan-900/30 to-purple-900/30 border border-cyan-500/30 p-5 rounded-xl shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-cyan-400 font-bold text-lg",children:[s.jsx(ev,{size:24}),s.jsx("h3",{children:"AI South African Reviewer"})]}),s.jsxs("button",{onClick:kt,disabled:W,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[W?s.jsx(To,{className:"animate-spin",size:18}):s.jsx(kr,{size:18})," Generate Standard Reviews"]})]}),(M.isUniquePendant||M.type==="Pendant")&&s.jsxs("div",{className:"flex-1 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border border-purple-500/30 p-5 rounded-xl shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-400 font-bold text-lg",children:[s.jsx(oA,{size:24}),s.jsx("h3",{children:"Unique Piece Reviewer"})]}),s.jsxs("button",{onClick:Mt,disabled:W,className:"w-full py-2 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg shadow flex items-center justify-center gap-2",children:[W?s.jsx(To,{className:"animate-spin",size:18}):s.jsx(kr,{size:18})," Generate Unique Reviews"]})]})]}),s.jsx("div",{className:"space-y-3",children:(Ye=M.reviews)==null?void 0:Ye.map(V=>s.jsx("div",{className:"bg-black p-3 rounded border border-gray-800",children:J===V.id&&j?s.jsxs("div",{className:"space-y-3 animate-in fade-in",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:j.userName,onChange:oe=>z({...j,userName:oe.target.value}),placeholder:"Name"}),s.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",value:j.location,onChange:oe=>z({...j,location:oe.target.value}),placeholder:"Location"}),s.jsx("input",{type:"text",className:"bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white col-span-2",value:j.date,onChange:oe=>z({...j,date:oe.target.value}),placeholder:"Date (YYYY-MM-DD or Text)"})]}),s.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(oe=>s.jsx(Zs,{size:16,className:"cursor-pointer",fill:oe<=j.rating?"orange":"none",stroke:oe<=j.rating?"orange":"gray",onClick:()=>z({...j,rating:oe})},oe))}),s.jsx("textarea",{className:"w-full bg-zinc-900 border border-gray-700 rounded p-2 text-xs text-white",rows:3,value:j.content,onChange:oe=>z({...j,content:oe.target.value})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>F(null),className:"px-3 py-1 bg-zinc-800 text-white text-xs rounded hover:bg-zinc-700",children:"Cancel"}),s.jsx("button",{onClick:Ln,className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-500",children:"Save"})]})]}):s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-300",children:[V.userName," ",s.jsxs("span",{className:"text-gray-600 font-normal",children:["from ",V.location]}),s.jsx("span",{className:"text-gray-500 font-normal ml-2",children:V.date})]}),s.jsx("div",{className:"flex text-yellow-400 gap-0.5 my-1",children:[1,2,3,4,5].map(oe=>s.jsx(Zs,{size:10,fill:oe<=V.rating?"currentColor":"none"},oe))}),s.jsxs("p",{className:"text-xs text-gray-400 italic",children:['"',V.content,'"']})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>fn(V),className:"text-gray-500 hover:text-cyan-400",children:s.jsx(iv,{size:14})}),s.jsx("button",{onClick:()=>er(V.id),className:"text-gray-600 hover:text-red-400",children:s.jsx(Po,{size:14})})]})]})},V.id))})]}),Z==="promotions"&&s.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[s.jsxs("div",{className:"bg-zinc-800/50 p-4 rounded-xl border border-gray-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(os,{className:"text-green-400"}),s.jsx("div",{children:s.jsx("h3",{className:"text-lg font-bold text-white",children:"Retail Base Price"})})]}),s.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["R",M.price.toFixed(2)]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:s.jsx("div",{className:"space-y-8",children:s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[s.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-4",children:[s.jsx(Gl,{size:18,className:"text-cyan-400"})," Non-Member Promo"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Promotional Price (R)"}),s.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white font-bold",value:M.promoPrice||"",onChange:V=>se({...M,promoPrice:parseFloat(V.target.value)||0})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Discount (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white",value:((M.price-(M.promoPrice||0))/M.price*100).toFixed(0),readOnly:!0}),s.jsx(mA,{size:14,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[s.jsx(ii,{size:12})," Start"]}),s.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((vt=M.promoStartsAt)==null?void 0:vt.slice(0,16))||"",onChange:V=>se({...M,promoStartsAt:V.target.value})})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:[s.jsx(ii,{size:12})," End"]}),s.jsx("input",{type:"datetime-local",className:"w-full p-2 bg-zinc-800 border border-gray-700 rounded text-white text-sm",value:((Pt=M.promoExpiresAt)==null?void 0:Pt.slice(0,16))||"",onChange:V=>se({...M,promoExpiresAt:V.target.value})})]})]})]})})})]}),Z==="gifts"&&s.jsx("div",{className:"space-y-6 animate-in fade-in",children:s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[s.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(Yt,{size:18,className:"text-pink-500"})," Promotional Gift"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Select Gift Product"}),s.jsxs("select",{className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm",value:M.giftProductId||"",onChange:V=>se({...M,giftProductId:V.target.value}),children:[s.jsx("option",{value:"",children:"-- No Gift --"}),n.filter(V=>V.id!==M.id).map(V=>s.jsx("option",{value:V.id,children:V.name},V.id))]})]}),M.giftProductId&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Gift Value (R)"}),s.jsx("input",{type:"number",className:"w-full p-3 bg-black border border-gray-700 rounded-lg text-white text-sm font-bold",value:M.giftValue||"",onChange:V=>se({...M,giftValue:parseFloat(V.target.value)||0})})]})]})]})}),Z==="media"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 border border-pink-500/30 p-5 rounded-xl shadow-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 text-pink-400 font-bold text-lg",children:[s.jsx(kr,{size:20}),s.jsx("h3",{children:"AI Product Analyst"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("input",{type:"file",accept:"image/*",ref:B,className:"hidden",onChange:pr}),s.jsxs("button",{onClick:()=>{var V;return(V=B.current)==null?void 0:V.click()},disabled:I,className:"flex-1 py-3 bg-zinc-800 hover:bg-pink-600 text-white rounded-lg border border-gray-600 hover:border-pink-400 transition-all flex items-center justify-center gap-2 text-sm font-semibold disabled:opacity-50 shadow-lg",children:[I?s.jsx(To,{className:"animate-spin",size:18}):s.jsx(nA,{size:18}),I?"Analyzing Image...":"Upload & Analyze with AI"]})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Description"}),s.jsxs("button",{onClick:Zn,disabled:A,className:"text-xs text-cyan-400 flex items-center gap-1 hover:text-cyan-300",children:[s.jsx(ev,{size:12})," ",A?"Writing...":"Generate from Text"]})]}),s.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-32 text-white text-sm",value:M.description,onChange:V=>se({...M,description:V.target.value})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"When & How to Wear"}),s.jsx("textarea",{className:"w-full p-2 bg-black border border-gray-700 rounded-md h-24 text-white text-sm",value:M.whenAndHowToWear,onChange:V=>se({...M,whenAndHowToWear:V.target.value}),placeholder:"Styling advice..."})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Images"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 mb-2",children:[M.images.filter(V=>V!=="").map((V,oe)=>s.jsxs("div",{className:"relative group aspect-square rounded-lg overflow-hidden border border-gray-800 bg-black",children:[s.jsx("img",{src:V,alt:"",className:"w-full h-full object-cover",onError:Le=>{console.warn("Image failed to load in AdminProducts gallery:",Le.currentTarget.src)}}),s.jsx("button",{onClick:()=>Tt(oe),className:"absolute top-1 right-1 bg-black/60 hover:bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-all",children:s.jsx(vn,{size:12})})]},oe)),s.jsxs("div",{onClick:()=>{var V;return(V=ve.current)==null?void 0:V.click()},className:"aspect-square rounded-lg border border-dashed border-gray-700 bg-zinc-900/30 flex flex-col items-center justify-center text-gray-500 cursor-pointer hover:bg-zinc-800 hover:border-gray-500 transition-all",children:[s.jsx(Hs,{size:24}),s.jsx("span",{className:"text-[10px] mt-1",children:"Add Image"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"file",accept:"image/*",multiple:!0,ref:ve,className:"hidden",onChange:Cn}),s.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:G,className:"hidden",onChange:Cn}),s.jsxs("button",{onClick:()=>{var V;return(V=ve.current)==null?void 0:V.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[s.jsx(aA,{size:16,className:"text-cyan-400"})," Upload"]}),s.jsxs("button",{onClick:()=>{var V;return(V=G.current)==null?void 0:V.click()},className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-white text-xs font-bold rounded-lg border border-gray-700 flex items-center justify-center gap-2",children:[s.jsx(Xs,{size:16,className:"text-pink-500"})," Camera"]})]})]})]})]}),s.jsxs("div",{className:"p-4 border-t border-gray-800 bg-zinc-950 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-gray-400 hover:bg-gray-800 rounded-lg transition-colors text-sm",children:"Cancel"}),s.jsxs("button",{onClick:Ht,disabled:N,className:"px-6 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-500 flex items-center gap-2 shadow transition-colors text-sm font-semibold disabled:opacity-50",children:[N?s.jsx(To,{className:"animate-spin",size:18}):s.jsx(od,{size:18})," ",N?"Saving...":"Save Product"]})]})]}):s.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Product"}),s.jsx("th",{className:"p-4",children:"Type"}),s.jsx("th",{className:"p-4",children:"SKU"}),s.jsx("th",{className:"p-4",children:"Price"}),s.jsx("th",{className:"p-4",children:"Stock"}),s.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800",children:ne.map(V=>s.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[s.jsxs("td",{className:"p-4 flex items-center gap-3",children:[s.jsx("img",{src:V.images[0]||"https://via.placeholder.com/40",className:"w-10 h-10 rounded bg-black object-cover border border-gray-800",alt:"",onError:oe=>{console.warn("Image failed to load in AdminProducts list:",oe.currentTarget.src)}}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-200 block",children:V.name}),s.jsx("span",{className:"text-xs text-gray-500",children:V.category})]})]}),s.jsx("td",{className:"p-4 text-gray-400",children:V.type}),s.jsx("td",{className:"p-4 text-gray-500 font-mono text-xs",children:V.code}),s.jsxs("td",{className:"p-4 font-medium text-green-400",children:["R",V.price.toFixed(2)]}),s.jsx("td",{className:"p-4 text-gray-300",children:V.stock}),s.jsx("td",{className:"p-4 text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>_e(V),className:"p-2 text-gray-400 hover:text-cyan-400",children:s.jsx(iv,{size:16})}),s.jsx("button",{onClick:()=>Dn(V.id),className:"p-2 text-gray-400 hover:text-red-400",children:s.jsx(Po,{size:16})})]})})]},V.id))})]})})]})},y3=()=>{const{categories:n,addCategory:e,updateCategory:t,deleteCategory:r,replaceCategories:i}=Rt(),l=D.useRef({}),[c,d]=D.useState(null),p=(b,N)=>{const E=[...n],A=N==="up"?b-1:b+1;A>=0&&A<E.length&&([E[b],E[A]]=[E[A],E[b]],i(E))},f=async(b,N)=>{if(!N)return;if(xn)try{d(b);const A=Date.now(),P=Ws(xn,`categories/${b}/${A}_${N.name}`),I=await qP(P,N),$=await Gs(I.ref),W=n.find(K=>K.id===b);W&&t({...W,image:$}),d(null);return}catch(A){console.error("Firebase Storage Upload failed:",A)}const E=new FileReader;E.onloadend=()=>{const A=n.find(P=>P.id===b);A&&typeof E.result=="string"&&t({...A,image:E.result}),d(null)},E.readAsDataURL(N)},y=()=>{e({id:`cat_${Date.now()}`,name:"New Collection",image:"https://picsum.photos/400/400?grayscale",description:""})};return s.jsxs("div",{className:"space-y-6 max-w-4xl",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Category Management"}),s.jsxs("button",{onClick:y,className:"bg-pink-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-pink-500 transition-colors text-sm",children:[s.jsx(Hs,{size:18})," Add Category"]})]}),s.jsxs("div",{className:"space-y-4",children:[n.map((b,N)=>s.jsxs("div",{className:"flex items-center gap-4 bg-zinc-900 p-4 rounded-xl border border-gray-800 shadow-sm animate-in fade-in",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("button",{onClick:()=>p(N,"up"),disabled:N===0,className:`p-1 rounded hover:bg-gray-800 ${N===0?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:s.jsx(eA,{size:18})}),s.jsx("button",{onClick:()=>p(N,"down"),disabled:N===n.length-1,className:`p-1 rounded hover:bg-gray-800 ${N===n.length-1?"text-gray-700 cursor-not-allowed":"text-gray-400 hover:text-white"}`,children:s.jsx(ZI,{size:18})})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Collection Name"}),s.jsx("input",{type:"text",value:b.name,onChange:E=>t({...b,name:E.target.value}),className:"w-full bg-black border border-gray-700 rounded p-2 text-white text-sm focus:border-cyan-400 focus:outline-none"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative w-12 h-12",children:[s.jsx("img",{src:b.image,alt:b.name,className:`w-12 h-12 rounded object-cover bg-zinc-800 border border-gray-700 ${c===b.id?"opacity-50":""}`}),c===b.id&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx(To,{size:16,className:"animate-spin text-pink-500"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1 uppercase tracking-wider",children:"Cover Image"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{var E;return(E=l.current[b.id])==null?void 0:E.click()},disabled:c===b.id,className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-gray-200 text-xs rounded border border-gray-600 transition-colors whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:c===b.id?"Uploading...":"Change Image"}),s.jsx("input",{type:"file",ref:E=>{l.current[b.id]=E},className:"hidden",accept:"image/*",onChange:E=>E.target.files&&f(b.id,E.target.files[0])})]})]})]})]}),s.jsx("div",{className:"ml-2",children:s.jsx("button",{onClick:()=>{window.confirm("Delete this category?")&&r(b.id)},className:"p-2 text-gray-500 hover:text-red-400 hover:bg-red-900/20 rounded-full transition-all",children:s.jsx(vn,{size:20})})})]},b.id)),n.length===0&&s.jsx("div",{className:"text-center py-12 text-gray-500",children:'No categories found. Click "Add Category" to start.'})]})]})},v3=()=>{const{vouchers:n,addVoucher:e,deleteVoucher:t,cart:r}=Rt(),[i,l]=D.useState(250),[c,d]=D.useState(""),[p,f]=D.useState(""),[y,b]=D.useState(""),[N,E]=D.useState(""),[A,P]=D.useState(null),[I,$]=D.useState(!1),W=r.filter(J=>J.code==="GV-DIGITAL"),K=()=>{const J="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let F="";for(let j=0;j<12;j++)j>0&&j%4===0&&(F+="-"),F+=J.charAt(Math.floor(Math.random()*J.length));E(F)},Z=async()=>{if(!i||!N)return;$(!0);const J={code:N,discountType:"fixed",value:i,minSpend:i,expiresAt:new Date(Date.now()+1e3*60*60*24*365*3).toISOString()};if(e(J),p&&Ee)try{const F=vs(Ee,"users"),j=$s(F,Ta("email","==",p)),z=await Pa(j);if(z.empty)alert(`Voucher created, but user with email ${p} was not found. Please send the code manually.`);else{const O=z.docs[0],k={id:`gift_recv_${Date.now()}`,type:"gift_received",title:"You received a Gift Voucher!",message:`Spoil Me Vintage sent you a voucher worth R${i}.`,date:new Date().toISOString(),isRead:!1,voucherData:{code:N,amount:i,meta:{recipientName:c||O.data().name||"Valued Customer",senderName:"Spoil Me Vintage Team",message:y||"Enjoy a little something special from us!",deliveryMethod:"recipient"}}};await ln(O.ref,{notifications:Ap(k)}),alert(`Voucher created AND sent to ${p}!`)}}catch(F){console.error("Error sending voucher:",F),alert("Voucher created, but failed to send to user due to an error.")}else p&&!Ee&&alert("Voucher created, but cannot send to user (Database not connected / Demo Mode).");E(""),d(""),f(""),b(""),$(!1)},ce=J=>{navigator.clipboard.writeText(J),P(J),setTimeout(()=>P(null),2e3)};return s.jsxs("div",{className:"space-y-8 max-w-6xl mx-auto",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Gift Card Management"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Generate valid codes and manage active vouchers."})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[W.length>0&&s.jsxs("div",{className:"bg-pink-900/10 border border-pink-500/30 p-4 rounded-xl mb-6",children:[s.jsxs("h3",{className:"text-pink-400 font-bold flex items-center gap-2 mb-3",children:[s.jsx(Ki,{size:18})," Pending Requests (",W.length,")"]}),s.jsx("div",{className:"space-y-2",children:W.map((J,F)=>s.jsxs("div",{className:"bg-zinc-900 p-3 rounded-lg border border-pink-500/20 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white text-sm font-medium",children:J.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Value: R",J.price]})]}),s.jsx("button",{onClick:()=>{l(J.price),d("Customer"),K()},className:"px-3 py-1.5 bg-pink-600 text-white text-xs rounded hover:bg-pink-500",children:"Process"})]},F))})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl shadow-sm",children:[s.jsxs("h2",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[s.jsx(Hs,{size:20,className:"text-cyan-400"})," Issue New Voucher"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Voucher Value (R)"}),s.jsx("input",{type:"number",value:i,onChange:J=>l(parseFloat(J.target.value)),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white font-bold focus:border-cyan-400 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Recipient Name"}),s.jsx("input",{type:"text",value:c,onChange:J=>d(J.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white focus:border-cyan-400 outline-none",placeholder:"e.g. Sarah"})]})]}),s.jsxs("div",{className:"bg-black/30 border border-gray-700 rounded-xl p-4 mb-6",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-300 mb-3 flex items-center gap-2",children:[s.jsx(Pd,{size:14})," Send Directly to User (Optional)"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"User Email Address"}),s.jsx("input",{type:"email",value:p,onChange:J=>f(J.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"user@example.com (Must be registered)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Custom Message"}),s.jsx("textarea",{rows:2,value:y,onChange:J=>b(J.target.value),className:"w-full bg-black border border-gray-700 rounded-lg p-3 text-white text-sm focus:border-pink-500 outline-none",placeholder:"Enjoy your gift!"})]})]})]}),s.jsxs("div",{className:"bg-black p-4 rounded-xl border border-gray-800 mb-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 w-full",children:[s.jsx("label",{className:"block text-xs text-gray-500 uppercase mb-1",children:"Unique Voucher Code"}),s.jsx("div",{className:"font-mono text-2xl text-cyan-400 tracking-widest break-all",children:N||"XXXX-XXXX-XXXX"})]}),s.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg transition-colors whitespace-nowrap",children:[s.jsx(cc,{size:16})," Generate Number"]})]}),s.jsx("button",{onClick:Z,disabled:!N||I,className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2",children:I?"Processing...":p?"Create & Send to User":"Activate Voucher Only"})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-xl",children:[s.jsx("h2",{className:"font-bold text-white mb-4",children:"Active Vouchers"}),n.length===0?s.jsx("p",{className:"text-gray-500 text-sm",children:"No active vouchers."}):s.jsx("div",{className:"space-y-3",children:n.map((J,F)=>s.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-gray-600 transition-colors",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-mono text-cyan-400 font-bold",children:J.code}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Value: R",J.value,"  Expires: ",new Date(J.expiresAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>ce(J.code),className:"p-2 text-gray-500 hover:text-white",children:A===J.code?s.jsx(ft,{size:16,className:"text-green-400"}):s.jsx(ng,{size:16})}),s.jsx("button",{onClick:()=>t(J.code),className:"p-2 text-gray-500 hover:text-red-400",children:s.jsx(Po,{size:16})})]})]},F))})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"sticky top-6",children:[s.jsxs("h3",{className:"text-sm font-bold text-gray-400 mb-4 uppercase tracking-wider flex items-center gap-2",children:[s.jsx(oc,{size:16})," Card Preview"]}),s.jsxs("div",{className:"relative aspect-[1.586/1] rounded-2xl overflow-hidden text-white border-4 border-black transition-transform hover:scale-[1.02] duration-500 bg-zinc-900",style:{boxShadow:"0 0 25px 5px rgba(34, 211, 238, 0.5)"},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-900 via-black to-zinc-900"}),s.jsxs("div",{className:"relative h-full p-6 flex flex-col justify-between z-10",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("div",{className:"font-cherry text-xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-400 to-cyan-400",children:"Spoil Me Vintage"}),s.jsxs("div",{className:"text-3xl font-bold text-white font-architects",children:["R",i]})]}),s.jsxs("div",{className:"text-center my-auto",children:[s.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-[0.3em] mb-2",children:"VOUCHER CODE"}),s.jsx("div",{className:"bg-white/5 border border-white/10 rounded px-4 py-2 inline-block backdrop-blur-sm",children:s.jsx("span",{className:"font-mono text-xl md:text-2xl font-bold text-cyan-400 tracking-wider",children:N||"--"})})]}),s.jsxs("div",{className:"flex justify-between items-end text-[10px] text-gray-500 uppercase tracking-wider",children:[s.jsxs("div",{children:["To: ",c||"Valued Customer",s.jsx("div",{className:"font-handwriting text-lg text-gray-300 normal-case mt-1",children:"Admin Team"})]}),s.jsxs("div",{className:"text-right",children:["Valid for 3 Years",s.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date().toLocaleDateString()})]})]})]})]}),s.jsxs("div",{className:"mt-6 bg-zinc-900/50 p-4 rounded-xl border border-gray-800 text-sm text-gray-400",children:[s.jsx("p",{className:"mb-2 font-bold text-white",children:"Sending Instructions:"}),s.jsxs("ul",{className:"list-disc pl-4 space-y-2 text-xs",children:[s.jsx("li",{children:"Set the Value and generate a unique code."}),s.jsxs("li",{children:[s.jsx("strong",{children:"Option A (Manual):"}),' Click "Activate Voucher Only", then send the code via WhatsApp/Email manually.']}),s.jsxs("li",{children:[s.jsx("strong",{children:"Option B (Direct):"}),` Enter the user's Registered Email. The voucher will appear in their App Profile under "My Gifts".`]})]})]})]})})]})]})},b3=[{id:"fb",name:"Facebook",icon:"facebook",isConnected:!1,accountName:"",urlTemplate:"https://www.facebook.com/sharer/sharer.php?u={url}&quote={text}"},{id:"ig",name:"Instagram",icon:"instagram",isConnected:!1,accountName:"",urlTemplate:""},{id:"tk",name:"TikTok",icon:"video",isConnected:!1,accountName:"",urlTemplate:""},{id:"x",name:"X (Twitter)",icon:"twitter",isConnected:!1,accountName:"",urlTemplate:"https://twitter.com/intent/tweet?text={text}&url={url}"}],w3={fb:["Log in to your Facebook Brand Page in your browser or app.","Enter your Page Name below for the AI context.","When you click 'Post Now', we will open the Facebook Sharer tool.","Paste the caption we generate for you."],ig:["Ensure the Instagram App is installed on this device.","Enter your Instagram Handle (@name) below.","When you click 'Post Now', we will copy the caption to your clipboard.","We will then open Instagram. Create a new post and select the downloaded photo.","Long press in the caption box and select 'Paste'."],tk:["Ensure the TikTok App is installed.","Enter your Handle below.","We will copy the text and hashtags to your clipboard.","When TikTok opens, upload the video/photo and paste the caption."],x:["Log in to X (Twitter).","Enter your handle below.","We will automatically open a 'Compose Tweet' window with your text and link pre-filled."]},_3=()=>{var O;const{products:n}=Rt(),[e,t]=D.useState(b3),[r,i]=D.useState(!1),[l,c]=D.useState(null),[d,p]=D.useState(""),[f,y]=D.useState(null),[b,N]=D.useState({}),[E,A]=D.useState(null),[P,I]=D.useState(!1),[$,W]=D.useState([]),[K,Z]=D.useState({posts:0,errors:0});D.useEffect(()=>{const k=localStorage.getItem("spv_social_config");k&&t(JSON.parse(k))},[]),D.useEffect(()=>{let k;return P&&(k=setInterval(()=>{if(n.length===0)return;const T=n[Math.floor(Math.random()*n.length)],L=e.filter(Se=>Se.isConnected),me=L.length>0?L[Math.floor(Math.random()*L.length)]:e[Math.floor(Math.random()*e.length)],Ve=new Date().toLocaleTimeString();W(Se=>[{time:Ve,msg:`AI Worker: Analyzing "${T.name}" trends & hashtags...`,type:"process"},...Se].slice(0,6)),setTimeout(()=>{const Se=new Date().toLocaleTimeString();W(Pe=>[{time:Se,msg:`Server: Successfully scheduled post to ${me.name} (Simulated)`,type:"success"},...Pe].slice(0,6)),Z(Pe=>({...Pe,posts:Pe.posts+1}))},2e3)},5e3)),()=>clearInterval(k)},[P,n,e]);const ce=k=>{c(k),p(k.accountName||"")},J=()=>{if(!l)return;const k=e.map(T=>T.id===l.id?{...T,isConnected:!0,accountName:d}:T);t(k),localStorage.setItem("spv_social_config",JSON.stringify(k)),c(null)},F=k=>{const T=e.map(L=>L.id===k?{...L,isConnected:!1,accountName:""}:L);t(T),localStorage.setItem("spv_social_config",JSON.stringify(T))},j=async()=>{if(n.length===0)return;i(!0);const k=n[Math.floor(Math.random()*n.length)];y(k);const T={},L=e.filter(me=>me.isConnected);if(L.length===0){alert("Please connect at least one platform first."),i(!1);return}for(const me of L){const Ve=me.accountName?`(Account: @${me.accountName})`:"";T[me.id]=await p3(k.name,`${me.name} ${Ve}`,k.price)}N(T),i(!1)},z=k=>{const T=b[k.id];if(!T||!f)return;const L=`${window.location.origin}/#/product/${f.id}`;if(navigator.clipboard.writeText(`${T} ${L}`).then(()=>{A(k.id),setTimeout(()=>A(null),2e3)}),k.id==="fb"||k.id==="x"){const me=k.urlTemplate.replace("{url}",encodeURIComponent(L)).replace("{text}",encodeURIComponent(T));window.open(me,"_blank","width=600,height=400")}else alert("Caption copied! Opening platform..."),k.id==="ig"&&window.open("https://instagram.com","_blank"),k.id==="tk"&&window.open("https://tiktok.com","_blank")};return s.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 relative",children:[l&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm",onClick:()=>c(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-2xl p-6 max-w-md w-full relative z-10 shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-800 pb-4",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.id==="fb"&&s.jsx(Hl,{size:24,className:"text-blue-500"}),l.id==="ig"&&s.jsx(ip,{size:24,className:"text-pink-500"}),l.id==="x"&&s.jsx(ad,{size:24,className:"text-white"}),l.id==="tk"&&s.jsx(Xs,{size:24,className:"text-cyan-400"}),"Connect ",l.name]}),s.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-white",children:s.jsx(vn,{size:20})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 uppercase mb-1",children:"Account Handle / Name"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-bold",children:"@"}),s.jsx("input",{type:"text",className:"w-full bg-black border border-gray-700 rounded-lg p-3 pl-8 text-white focus:border-pink-500 outline-none",value:d,onChange:k=>p(k.target.value),placeholder:"spoilmevintage"})]})]}),s.jsxs("div",{className:"bg-black/30 p-4 rounded-lg border border-gray-800",children:[s.jsxs("h4",{className:"text-sm font-bold text-gray-300 mb-2 flex items-center gap-2",children:[s.jsx(sg,{size:14})," How to connect:"]}),s.jsx("ul",{className:"space-y-2",children:(O=w3[l.id])==null?void 0:O.map((k,T)=>s.jsxs("li",{className:"text-xs text-gray-400 flex gap-2",children:[s.jsx("span",{className:"bg-gray-800 w-4 h-4 rounded-full flex items-center justify-center text-[10px] shrink-0 mt-0.5",children:T+1}),k]},T))})]}),s.jsxs("button",{onClick:J,className:"w-full py-3 bg-pink-600 hover:bg-pink-500 text-white font-bold rounded-xl flex items-center justify-center gap-2 transition-colors",children:[s.jsx(od,{size:18})," Save & Connect"]})]})]})]}),s.jsx("div",{className:"flex justify-between items-start",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Social Media Studio"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Manage accounts and automate daily content sharing."})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:e.map(k=>s.jsxs("div",{className:`p-4 rounded-xl border transition-all relative group ${k.isConnected?"bg-zinc-900 border-green-500/50 shadow-[0_0_10px_rgba(34,197,94,0.1)]":"bg-black border-gray-800 opacity-75"}`,children:[s.jsx("button",{onClick:()=>ce(k),className:"absolute top-2 right-2 p-2 text-gray-500 hover:text-white hover:bg-gray-800 rounded-full transition-colors",children:s.jsx(yA,{size:16})}),s.jsxs("div",{className:"flex flex-col items-center text-center pt-4 pb-2 cursor-pointer",onClick:()=>ce(k),children:[s.jsxs("div",{className:`p-3 rounded-full mb-3 transition-colors ${k.isConnected?"bg-white text-black":"bg-gray-800 text-gray-500"}`,children:[k.id==="fb"&&s.jsx(Hl,{size:24}),k.id==="ig"&&s.jsx(ip,{size:24}),k.id==="x"&&s.jsx(ad,{size:24}),k.id==="tk"&&s.jsx(Xs,{size:24})]}),s.jsx("h3",{className:"font-bold text-white text-sm",children:k.name}),k.isConnected?s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsxs("p",{className:"text-xs text-green-400 font-medium",children:["@",k.accountName]})]}):s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Not Connected"})]}),k.isConnected&&s.jsx("button",{onClick:T=>{T.stopPropagation(),F(k.id)},className:"w-full mt-3 py-1 text-[10px] text-red-400 hover:text-red-300 border border-red-900/30 hover:bg-red-900/20 rounded",children:"Disconnect"}),!k.isConnected&&s.jsx("button",{onClick:()=>ce(k),className:"w-full mt-3 py-1 text-[10px] text-cyan-400 hover:text-cyan-300 border border-cyan-900/30 hover:bg-cyan-900/20 rounded",children:"Configure"})]},k.id))}),s.jsxs("div",{className:"bg-gradient-to-br from-zinc-900 to-black border border-purple-500/30 rounded-2xl p-6 md:p-8 shadow-xl relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5 pointer-events-none",children:s.jsx(PA,{size:120,className:"text-purple-500"})}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-6 relative z-10",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:`p-2 rounded-lg ${P?"bg-green-500/20 text-green-400":"bg-gray-800 text-gray-500"}`,children:s.jsx(xA,{size:24})}),s.jsx("h2",{className:"text-xl font-bold text-white",children:"Background Auto-Pilot (Demo)"})]}),s.jsx("p",{className:"text-sm text-gray-400 max-w-lg",children:"Enable this to simulate the server-side process that automatically picks products, writes captions, and schedules them to your connected accounts while you sleep."}),P&&s.jsxs("div",{className:"flex items-center gap-2 mt-4 text-xs text-green-400 font-mono bg-green-900/20 border border-green-500/30 px-3 py-1.5 rounded-lg w-fit animate-pulse",children:[s.jsx(cN,{size:14})," Service Running..."]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-right hidden md:block",children:[s.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:K.posts}),s.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Posts Queued"})]}),s.jsxs("button",{onClick:()=>I(!P),className:`px-6 py-4 rounded-xl font-bold flex items-center gap-2 transition-all shadow-lg ${P?"bg-red-600 hover:bg-red-500 text-white shadow-red-900/20":"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/20"}`,children:[P?s.jsx(pA,{size:20,fill:"currentColor"}):s.jsx(gA,{size:20,fill:"currentColor"}),P?"Stop Simulation":"Start Auto-Pilot"]})]})]}),s.jsxs("div",{className:"mt-8 bg-black rounded-xl border border-gray-800 font-mono text-xs p-4 h-48 overflow-y-auto shadow-inner relative",children:[s.jsxs("div",{className:"absolute top-2 right-2 text-gray-700 flex items-center gap-1 pointer-events-none",children:[s.jsx(EA,{size:14})," Console"]}),$.length===0?s.jsx("div",{className:"h-full flex items-center justify-center text-gray-600 italic",children:"System Idle. Press Start to begin simulation."}):s.jsx("div",{className:"space-y-2",children:$.map((k,T)=>s.jsxs("div",{className:"flex gap-3 animate-in slide-in-from-left-2 fade-in duration-300",children:[s.jsxs("span",{className:"text-gray-600 shrink-0",children:["[",k.time,"]"]}),s.jsxs("span",{className:`break-all ${k.type==="success"?"text-green-400":k.type==="process"?"text-yellow-400":"text-gray-300"}`,children:[k.type==="success"&&s.jsx(ft,{size:12,className:"inline mr-1"}),k.type==="process"&&s.jsx(To,{size:12,className:"inline mr-1 animate-spin"}),k.msg]})]},T))})]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl p-6 md:p-8 shadow-xl",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-8",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(kr,{className:"text-pink-500"})," Manual Content Generator"]}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"One click to pick a product and write tailored captions for all your active platforms."})]}),s.jsxs("button",{onClick:j,disabled:r,className:"px-6 py-3 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl shadow-lg flex items-center gap-2 disabled:opacity-50 transition-all",children:[r?s.jsx(To,{className:"animate-spin"}):s.jsx(cc,{}),r?"Creating Strategy...":"Generate Today's Posts"]})]}),f&&s.jsxs("div",{className:"animate-in slide-in-from-bottom-4 fade-in",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6 bg-black p-4 rounded-xl border border-gray-800",children:[s.jsx("img",{src:f.images[0],alt:"",className:"w-16 h-16 rounded-lg object-cover border border-gray-700"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-pink-500 uppercase font-bold",children:"Today's Pick"}),s.jsx("h3",{className:"text-white font-bold",children:f.name}),s.jsxs("p",{className:"text-gray-400 text-xs",children:["R",f.price]})]}),s.jsx("div",{className:"ml-auto hidden md:block",children:s.jsxs("a",{href:f.images[0],download:!0,target:"_blank",rel:"noreferrer",className:"text-xs text-cyan-400 flex items-center gap-1 hover:underline",children:[s.jsx(lA,{size:14})," Download High-Res"]})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.filter(k=>k.isConnected).map(k=>s.jsxs("div",{className:"bg-black border border-gray-800 p-4 rounded-xl space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center border-b border-gray-800 pb-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-gray-300",children:[k.id==="fb"&&s.jsx(Hl,{size:16,className:"text-blue-500"}),k.id==="ig"&&s.jsx(ip,{size:16,className:"text-pink-500"}),k.id==="x"&&s.jsx(ad,{size:16,className:"text-white"}),k.id==="tk"&&s.jsx(Xs,{size:16,className:"text-cyan-400"}),k.name," Draft"]}),s.jsxs("button",{onClick:()=>z(k),className:"text-xs bg-zinc-800 hover:bg-pink-600 text-white px-3 py-1.5 rounded-full transition-colors flex items-center gap-1",children:[E===k.id?s.jsx(ft,{size:12}):s.jsx(Oo,{size:12}),E===k.id?"Copied!":"Post Now"]})]}),s.jsx("textarea",{className:"w-full h-32 bg-transparent text-sm text-gray-300 resize-none focus:outline-none",value:b[k.id]||"Generating...",readOnly:!0})]},k.id))})]}),!f&&!r&&s.jsx("div",{className:"text-center py-12 border border-dashed border-gray-800 rounded-xl",children:s.jsx("p",{className:"text-gray-500",children:'Click "Generate" to start your daily social media workflow.'})})]}),s.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-xl p-6",children:[s.jsxs("h3",{className:"text-blue-400 font-bold flex items-center gap-2 mb-3",children:[s.jsx(tg,{size:20})," System Capabilities Explained"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-gray-300",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white mb-2",children:"What this system CAN do:"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[s.jsx("li",{children:"Use AI to generate unique, platform-specific captions for your products instantly."}),s.jsx("li",{children:"Organize your daily posting workflow into a single dashboard."}),s.jsx("li",{children:'Use "Web Intents" to open your social apps with text pre-filled (semi-automated).'}),s.jsxs("li",{children:[s.jsx("strong",{children:"Demo Simulation:"})," As seen above, we can simulate how a server-side bot would process your queue."]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-white mb-2",children:"What requires Server Upgrades:"}),s.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-gray-400",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Fully Automated Background Posting:"}),' To enable the "Auto-Pilot" feature for real (posting while you sleep), a dedicated backend server (e.g., Firebase Cloud Functions) is required to run timers (Cron jobs).']}),s.jsxs("li",{children:[s.jsx("strong",{children:"Direct API Integration:"})," Posting directly without opening the app requires expensive API approvals and secure server-side token storage which cannot run safely in a browser-only admin panel."]})]})]})]})]})]})},N3=()=>{var Pe,B,ve;const{getAllUsers:n,approveAffiliate:e,rejectAffiliate:t,updateAffiliateTier:r,assignAffiliateParent:i}=Rt(),[l,c]=D.useState([]),[d,p]=D.useState(!0),[f,y]=D.useState("applicants"),[b,N]=D.useState(null),[E,A]=D.useState(10),[P,I]=D.useState(""),[$,W]=D.useState(null),[K,Z]=D.useState("");D.useEffect(()=>{ce()},[]);const ce=async()=>{p(!0);const G=await n();c(G),p(!1)},J=l.filter(G=>{var q;return((q=G.affiliateStats)==null?void 0:q.status)==="pending"}),F=l.filter(G=>{var q;return((q=G.affiliateStats)==null?void 0:q.status)==="approved"}),j=(G,q)=>{W({userId:G.id,name:G.name,action:q}),Z("")},z=async()=>{$&&($.action==="approve"?await e($.userId,K):await t($.userId,K),W(null),Z(""),ce())},O=G=>{var q;N(G),A(((q=G.affiliateStats)==null?void 0:q.commissionRate)||10),I("")},k=async()=>{if(!b)return;await r(b.id,E);const G={...b,affiliateStats:{...b.affiliateStats,commissionRate:E}};N(G),c(q=>q.map(M=>M.id===b.id?G:M)),alert("Commission Tier Updated!")},T=async()=>{if(!b||!P)return;await i(P,b.id),alert("Recruit Added! This affiliate will now earn 1% commission from their sales.");const G=await n();c(G);const q=G.find(M=>M.id===b.id);q&&N(q),I("")},L=b?l.filter(G=>{var q;return((q=G.affiliateStats)==null?void 0:q.parentId)===b.id}):[],me=(Pe=b==null?void 0:b.affiliateStats)!=null&&Pe.parentId?l.find(G=>{var q;return G.id===((q=b.affiliateStats)==null?void 0:q.parentId)}):null,Se=L.reduce((G,q)=>{var M;return G+(((M=q.affiliateStats)==null?void 0:M.totalSalesValue)||0)},0)*.01;return s.jsxs("div",{className:"space-y-8 relative",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Affiliate Management"}),s.jsxs("button",{onClick:ce,className:"text-xs text-gray-400 hover:text-white flex items-center gap-1",children:[s.jsx(oh,{size:14})," Refresh Data"]})]}),s.jsxs("div",{className:"flex gap-4 border-b border-gray-800 pb-1",children:[s.jsxs("button",{onClick:()=>y("applicants"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors ${f==="applicants"?"border-pink-500 text-pink-500":"border-transparent text-gray-400 hover:text-white"}`,children:["Applicants (",J.length,")"]}),s.jsxs("button",{onClick:()=>y("active"),className:`px-4 py-2 text-sm font-bold border-b-2 transition-colors ${f==="active"?"border-cyan-500 text-cyan-500":"border-transparent text-gray-400 hover:text-white"}`,children:["Active Partners (",F.length,")"]})]}),d?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading data..."}):s.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden min-h-[400px]",children:[f==="applicants"&&s.jsx("div",{className:"divide-y divide-gray-800",children:J.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No pending applications."}):J.map(G=>{var q,M;return s.jsxs("div",{className:"p-6 flex flex-col md:flex-row md:items-center justify-between hover:bg-black/20 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold",children:G.name}),s.jsx("p",{className:"text-sm text-gray-400",children:G.email}),s.jsxs("div",{className:"mt-3 p-3 bg-black/50 border border-gray-700 rounded-lg max-w-xl",children:[s.jsxs("p",{className:"text-xs text-gray-300 italic",children:['"',(q=G.affiliateStats)==null?void 0:q.joinReason,'"']}),((M=G.affiliateStats)==null?void 0:M.gender)&&s.jsxs("span",{className:"text-[10px] text-gray-500 mt-1 block",children:["Gender: ",G.affiliateStats.gender]})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsxs("button",{onClick:()=>j(G,"approve"),className:"px-4 py-2 bg-green-900/30 text-green-400 rounded hover:bg-green-900/50 border border-green-500/30 flex items-center gap-2 text-sm font-bold",children:[s.jsx(ft,{size:16})," Approve"]}),s.jsxs("button",{onClick:()=>j(G,"reject"),className:"px-4 py-2 bg-red-900/30 text-red-400 rounded hover:bg-red-900/50 border border-red-500/30 flex items-center gap-2 text-sm font-bold",children:[s.jsx(vn,{size:16})," Reject"]})]})]},G.id)})}),f==="active"&&s.jsx("div",{className:"divide-y divide-gray-800",children:F.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No active affiliates yet."}):F.map(G=>{var q,M;return s.jsxs("div",{onClick:()=>O(G),className:"p-6 flex items-center justify-between hover:bg-zinc-800 cursor-pointer transition-colors group",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-800 flex items-center justify-center text-cyan-400 font-bold border border-gray-700",children:G.name.charAt(0)}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-white font-bold flex items-center gap-2 group-hover:text-cyan-400 transition-colors",children:[G.name," ",s.jsx(Fr,{size:16,className:"opacity-0 group-hover:opacity-100 transition-opacity"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:G.affiliateCode})]})]}),s.jsxs("div",{className:"text-right flex items-center gap-8",children:[s.jsxs("div",{className:"hidden sm:block",children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Recruits"}),s.jsx("p",{className:"text-white font-bold text-center",children:l.filter(se=>{var he;return((he=se.affiliateStats)==null?void 0:he.parentId)===G.id}).length})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Sales"}),s.jsxs("p",{className:"text-white font-bold",children:["R",(q=G.affiliateStats)==null?void 0:q.totalSalesValue.toFixed(0)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Rate"}),s.jsxs("p",{className:"text-pink-400 font-bold",children:[(M=G.affiliateStats)==null?void 0:M.commissionRate,"%"]})]})]})]},G.id)})})]}),$&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>W(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 rounded-xl p-6 max-w-sm w-full relative z-10 shadow-2xl",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-2 capitalize",children:[$.action," Application"]}),s.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["For ",$.name]}),s.jsx("textarea",{className:"w-full bg-black border border-gray-700 rounded p-3 text-white text-sm mb-4",placeholder:"Add a note (optional)...",rows:3,value:K,onChange:G=>Z(G.target.value)}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>W(null),className:"flex-1 py-2 bg-zinc-800 text-gray-300 rounded hover:bg-zinc-700",children:"Cancel"}),s.jsx("button",{onClick:z,className:`flex-1 py-2 text-white font-bold rounded ${$.action==="approve"?"bg-green-600 hover:bg-green-500":"bg-red-600 hover:bg-red-500"}`,children:"Confirm"})]})]})]}),b&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:()=>N(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-4xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-pink-600 to-purple-600 flex items-center justify-center text-2xl font-bold text-white shadow-lg border-2 border-white/10",children:b.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:b.name}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-gray-400",children:b.email}),s.jsx("span",{className:"text-gray-600",children:""}),s.jsx("span",{className:"font-mono text-cyan-400 bg-cyan-900/20 px-2 py-0.5 rounded text-xs border border-cyan-500/30",children:b.affiliateCode})]})]})]}),s.jsx("button",{onClick:()=>N(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white transition-colors",children:s.jsx(vn,{size:20})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[s.jsx(Cs,{size:16,className:"text-green-500"}),s.jsx("span",{className:"text-xs uppercase",children:"Direct Sales"})]}),s.jsxs("p",{className:"text-2xl font-bold text-white",children:["R",(B=b.affiliateStats)==null?void 0:B.totalSalesValue.toFixed(2)]})]}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[s.jsx(og,{size:16,className:"text-purple-500"}),s.jsx("span",{className:"text-xs uppercase",children:"Total Earned"})]}),s.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["R",(ve=b.affiliateStats)==null?void 0:ve.balance.toFixed(2)]})]}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-800 flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-500 mb-1",children:[s.jsx(oi,{size:16,className:"text-cyan-500"}),s.jsx("span",{className:"text-xs uppercase",children:"Network"})]}),s.jsxs("p",{className:"text-2xl font-bold text-white",children:[L.length," ",s.jsx("span",{className:"text-sm font-normal text-gray-500",children:"Recruits"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(bA,{size:18,className:"text-yellow-400"})," Commission Settings"]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Direct Commission Tier (%)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("input",{type:"number",value:E,onChange:G=>A(parseFloat(G.target.value)),className:"w-full bg-black border border-gray-600 rounded-lg p-3 text-white text-sm font-bold focus:border-pink-500 outline-none"}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"%"})]}),s.jsx("button",{onClick:k,className:"bg-pink-600 text-white px-6 py-2 rounded-lg text-sm font-bold hover:bg-pink-500 shadow-lg",children:"Update"})]}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:["Standard Tiers: ",s.jsx("span",{className:"text-gray-300",children:"10%, 11%, 15%, 20%"}),". This setting overrides automatic tier progression."]})]})})]}),me&&s.jsxs("div",{className:"bg-blue-900/10 p-4 rounded-xl border border-blue-500/30 flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-500/20 rounded-full text-blue-400",children:s.jsx(sg,{size:20})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-blue-300 uppercase font-bold mb-1",children:"Recruited By (Upline)"}),s.jsx("p",{className:"text-white font-bold text-sm",children:me.name}),s.jsx("p",{className:"text-[10px] text-gray-400",children:me.affiliateCode})]})]})]}),s.jsxs("div",{className:"bg-zinc-800/30 p-5 rounded-xl border border-gray-700 h-full flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[s.jsx(xN,{size:18,className:"text-cyan-400"})," Network & Downline"]}),s.jsxs("div",{className:"mb-4 p-4 bg-black/40 rounded-xl border border-gray-700",children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2 uppercase tracking-wider",children:"Add Recruit to Downline"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{className:"flex-1 bg-zinc-900 border border-gray-600 rounded-lg p-2 text-xs text-white focus:border-cyan-500 outline-none",value:P,onChange:G=>I(G.target.value),children:[s.jsx("option",{value:"",children:"Select User to Link..."}),l.filter(G=>{var q,M;return G.id!==b.id&&((q=G.affiliateStats)==null?void 0:q.parentId)!==b.id&&((M=G.affiliateStats)==null?void 0:M.status)==="approved"}).sort((G,q)=>G.name.localeCompare(q.name)).map(G=>s.jsxs("option",{value:G.id,children:[G.name," (",G.affiliateCode,")"]},G.id))]}),s.jsxs("button",{onClick:T,disabled:!P,className:"bg-cyan-600 text-white px-4 py-2 rounded-lg text-xs font-bold hover:bg-cyan-500 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center gap-1",children:[s.jsx(Hs,{size:14})," Add"]})]}),s.jsxs("p",{className:"text-[10px] text-gray-500 mt-2",children:[b.name," will earn ",s.jsx("strong",{children:"1%"})," from sales made by users added here."]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 max-h-[300px] custom-scrollbar",children:L.length===0?s.jsx("div",{className:"text-center py-8 border border-dashed border-gray-800 rounded-xl",children:s.jsx("p",{className:"text-gray-500 text-xs",children:"No recruits in downline yet."})}):L.map(G=>{var q,M;return s.jsxs("div",{className:"flex items-center justify-between bg-black p-3 rounded-lg border border-gray-800 hover:border-cyan-500/30 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-zinc-900 rounded-full flex items-center justify-center text-xs font-bold text-gray-400 border border-gray-700",children:G.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-white font-bold",children:G.name}),s.jsx("p",{className:"text-[10px] text-gray-500",children:G.affiliateCode})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-[10px] text-gray-500",children:["Sales: R",(q=G.affiliateStats)==null?void 0:q.totalSalesValue.toFixed(0)]}),s.jsxs("p",{className:"text-xs text-green-400 font-bold",children:["+R",(((M=G.affiliateStats)==null?void 0:M.totalSalesValue)||0*.01).toFixed(2)]})]})]},G.id)})}),L.length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700 flex justify-between items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 uppercase font-bold",children:"Passive Income Generated"}),s.jsxs("span",{className:"text-lg font-bold text-green-400",children:["R",Se.toFixed(2)]})]})]})]})]})]})]})]})},S3=()=>{const[n,e]=D.useState(null),[t,r]=D.useState(!1),[i,l]=D.useState(!1);D.useEffect(()=>{const d=window.navigator.userAgent.toLowerCase(),p=/iphone|ipad|ipod/.test(d);if(l(p),window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone)return;const y=N=>{N.preventDefault(),e(N),setTimeout(()=>r(!0),3e3)},b=()=>{r(!0)};return window.addEventListener("beforeinstallprompt",y),window.addEventListener("open-install-prompt",b),p&&setTimeout(()=>r(!0),5e3),()=>{window.removeEventListener("beforeinstallprompt",y),window.removeEventListener("open-install-prompt",b)}},[]);const c=async()=>{if(!n)return;n.prompt();const{outcome:d}=await n.userChoice;d==="accepted"&&(e(null),r(!1))};return t?s.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>r(!1)}),s.jsxs("div",{className:"bg-zinc-900 border border-pink-500 rounded-2xl p-6 shadow-[0_0_50px_rgba(236,72,153,0.4)] relative max-w-sm w-full animate-in zoom-in-95 duration-300 text-center",children:[s.jsx("button",{onClick:()=>r(!1),className:"absolute top-3 right-3 p-2 text-gray-400 hover:text-white rounded-full hover:bg-white/10 transition-colors",children:s.jsx(vn,{size:20})}),s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-pink-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-xl mx-auto mb-6 rotate-3 border-2 border-white/10",children:s.jsx("span",{className:"font-cherry text-white text-3xl drop-shadow-md",children:"SV"})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Install App"}),s.jsx("p",{className:"text-sm text-gray-300 leading-relaxed mb-6",children:"Get the best experience! Install Spoil Me Vintage for faster access, exclusive notifications, and offline browsing."}),i?s.jsxs("div",{className:"text-xs text-left text-gray-400 bg-black/40 p-4 rounded-xl border border-gray-700",children:[s.jsxs("p",{className:"mb-3 font-bold text-white flex items-center gap-2",children:[s.jsx(Xs,{size:14})," iOS Installation:"]}),s.jsxs("ol",{className:"list-decimal pl-4 space-y-2",children:[s.jsxs("li",{children:["Tap the ",s.jsx("strong",{className:"text-cyan-400",children:"Share"})," button ",s.jsx(vA,{size:12,className:"inline align-middle"})," in your browser bar."]}),s.jsxs("li",{children:["Scroll down and select ",s.jsx("strong",{className:"text-white",children:"Add to Home Screen"}),"."]})]})]}):s.jsxs("button",{onClick:c,className:"w-full py-3.5 bg-gradient-to-r from-pink-600 to-purple-600 hover:from-pink-500 hover:to-purple-500 text-white font-bold rounded-xl transition-all flex items-center justify-center gap-2 text-sm shadow-lg hover:shadow-pink-500/25 hover:scale-[1.02]",children:[s.jsx(pN,{size:18})," Install Now"]})]})]}):null},E3=()=>{const{weeklyWinners:n}=Rt(),[e,t]=D.useState(new Date),[r,i]=D.useState("");return D.useEffect(()=>{const l=()=>{const d=new Date,p=new Date(d);p.setUTCDate(d.getUTCDate()+(7-d.getUTCDay())),p.setUTCHours(8,0,0,0),p<d&&p.setUTCDate(p.getUTCDate()+7),t(p)};l();const c=setInterval(l,6e4);return()=>clearInterval(c)},[]),D.useEffect(()=>{const l=setInterval(()=>{const c=new Date,d=e.getTime()-c.getTime();if(d>0){const p=Math.floor(d/864e5),f=Math.floor(d/(1e3*60*60)%24),y=Math.floor(d/1e3/60%60);i(`${p}d ${f}h ${y}m`)}else i("Drawing new winners...")},1e3);return()=>clearInterval(l)},[e]),s.jsxs("div",{className:"max-w-4xl mx-auto py-8 space-y-12",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"inline-block bg-gradient-to-br from-yellow-500 to-orange-500 p-5 rounded-full shadow-[0_0_30px_rgba(250,204,21,0.5)]",children:s.jsx(ns,{size:48,className:"text-white"})}),s.jsx("h1",{className:"font-cherry text-5xl text-white",children:"This Week's Winners!"}),s.jsx("p",{className:"text-gray-300 text-lg",children:"Congratulations to the lucky members of our R19 Spoil Me Package!"})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 p-6 rounded-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{className:"text-center md:text-left",children:[s.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:[s.jsx(ii,{size:20,className:"text-cyan-400"}),"Next Draw"]}),s.jsx("p",{className:"text-gray-400 text-sm",children:"A new set of winners is drawn every Sunday at 08:00 AM."})]}),s.jsxs("div",{className:"bg-black/50 p-4 rounded-xl border border-gray-700 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-white font-mono",children:r}),s.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Time Remaining"})]})]}),s.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/20 p-5 rounded-xl flex items-start gap-4",children:[s.jsx(Yt,{size:24,className:"text-purple-400 shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-purple-300",children:"How to Claim Your Prize"}),s.jsx("p",{className:"text-sm text-gray-300/80 mt-1",children:"If you're a winner, a notification has been sent to your profile's inbox containing your unique voucher code. Simply apply it at checkout to claim your winnings!"})]})]}),s.jsx("div",{className:"bg-zinc-900 rounded-2xl border border-gray-800 overflow-hidden",children:s.jsx("div",{className:"divide-y divide-gray-800",children:n.map(l=>s.jsxs("div",{className:`p-4 flex items-center justify-between gap-4 transition-colors ${l.rank<=3?"bg-yellow-900/10":""}`,children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm border-2 ${l.rank===1?"bg-yellow-500 border-yellow-300 text-black shadow-[0_0_10px_rgba(250,204,21,0.5)]":l.rank===2?"bg-gray-400 border-gray-200 text-black":l.rank===3?"bg-orange-600 border-orange-400 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:["#",l.rank]}),s.jsx("span",{className:"font-medium text-white",children:l.name})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"font-bold text-lg text-green-400",children:["R",l.prize.toFixed(2)]}),s.jsx("span",{className:"text-xs text-gray-500 block",children:"Voucher"})]})]},l.rank))})}),s.jsxs("div",{className:"mt-12 bg-gradient-to-r from-pink-600 to-purple-600 p-8 rounded-2xl text-center shadow-2xl",children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Want to be on this list?"}),s.jsx("p",{className:"text-pink-100 mb-6 max-w-lg mx-auto",children:"Join the Spoil Me Package for just R19/month for your chance to win weekly vouchers and get exclusive member perks!"}),s.jsxs(Ie,{to:"/membership",className:"inline-flex items-center gap-2 px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-gray-200 transition-all shadow-lg text-lg",children:["Join Now ",s.jsx(At,{size:20})]})]})]})},C3=()=>{const{weeklyWinners:n}=Rt();return s.jsxs("div",{className:"space-y-8",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[s.jsx(ns,{size:24,className:"text-yellow-400"}),' Weekly "Spoil Me" Winners']}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Review and manage the simulated weekly prize draw."})]})}),s.jsxs("div",{className:"bg-yellow-900/10 border border-yellow-500/20 p-5 rounded-xl flex items-start gap-4",children:[s.jsx(yN,{size:24,className:"text-yellow-500 shrink-0 mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-yellow-400",children:"Simulation Mode Active"}),s.jsxs("p",{className:"text-sm text-yellow-200/80 mt-1",children:["This panel displays a ",s.jsx("strong",{className:"text-white",children:"simulated list of winners"})," for demonstration. In a live production environment, this page would be connected to your database to:"]}),s.jsxs("ul",{className:"list-disc pl-5 mt-3 text-xs text-yellow-200/70 space-y-1",children:[s.jsx("li",{children:'Show a list of all users subscribed to the "Spoil Me Package".'}),s.jsxs("li",{children:["Allow you to run the draw, which would randomly select ",s.jsx("strong",{children:"real users"})," from that list."]}),s.jsx("li",{children:"Automatically generate unique voucher codes and assign them to the winning user accounts."}),s.jsx("li",{children:"Send a notification to the winners' in-app inbox."})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsx("div",{className:"p-3 rounded-lg bg-cyan-900/30 text-cyan-400 border border-cyan-500/20",children:s.jsx(oi,{size:20})})}),s.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Winners This Week"}),s.jsx("p",{className:"text-[22px] font-bold text-white mt-1",children:n.length})]}),s.jsxs("div",{className:"bg-zinc-900 p-6 rounded-xl border border-gray-800",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsx("div",{className:"p-3 rounded-lg bg-green-900/30 text-green-400 border border-green-500/20",children:s.jsx(uN,{size:20})})}),s.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:"Total Prize Value"}),s.jsxs("p",{className:"text-[22px] font-bold text-white mt-1",children:["R",n.reduce((e,t)=>e+t.prize,0).toFixed(2)]})]})]}),s.jsx("div",{className:"bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 w-20",children:"Rank"}),s.jsx("th",{className:"p-4",children:"Winner Name"}),s.jsx("th",{className:"p-4 text-right",children:"Prize Value"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800",children:n.map(e=>s.jsxs("tr",{className:`group transition-colors ${e.rank<=3?"bg-yellow-900/10":"hover:bg-zinc-800/50"}`,children:[s.jsx("td",{className:"p-4",children:s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold border ${e.rank===1?"bg-yellow-500 border-yellow-400 text-black":e.rank===2?"bg-gray-400 border-gray-300 text-black":e.rank===3?"bg-orange-600 border-orange-500 text-white":"bg-zinc-800 border-gray-700 text-gray-400"}`,children:e.rank})}),s.jsx("td",{className:"p-4 font-medium text-gray-200",children:e.name}),s.jsxs("td",{className:"p-4 text-right font-bold text-lg text-green-400",children:["R",e.prize.toFixed(2)]})]},e.rank))})]})})]})},k3=[{name:"Extra-Small (XS)",dimensions:"60cm  17cm  8cm",maxWeight:"2kg",boxCost:6,lockerToLockerCost:49,doorToLockerCost:69,lockerHandleFee:0,doorHandleFee:0},{name:"Small (S)",dimensions:"60cm  41cm  8cm",maxWeight:"5kg",boxCost:15,lockerToLockerCost:59,doorToLockerCost:79,lockerHandleFee:0,doorHandleFee:0},{name:"Medium (M)",dimensions:"60cm  41cm  19cm",maxWeight:"10kg",boxCost:18,lockerToLockerCost:null,doorToLockerCost:null,lockerHandleFee:0,doorHandleFee:0}],T3={"7-9 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:59.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:89.95,handleFee:0}],"3-5 Days Service":[{bag:"Single Small Paxi Bags",serviceCost:109.95,handleFee:0},{bag:"Single Large Paxi Bags",serviceCost:139.95,handleFee:0}]},P3=[{service:"Overnight Courier (OVN)",initialWeight:"Up to 2kg",boxFee:6,initialCharge:130,ratePerKg:45,handleFee:0},{service:"Economy Road (ECO)",initialWeight:"0 to 5kg",boxFee:15,initialCharge:90,ratePerKg:null,handleFee:0}],j3=()=>{const[n,e]=D.useState(()=>{const N=localStorage.getItem("spv_pudo_costs");return N?JSON.parse(N):k3}),[t,r]=D.useState(()=>{const N=localStorage.getItem("spv_paxi_costs");return N?JSON.parse(N):T3}),[i,l]=D.useState(()=>{const N=localStorage.getItem("spv_door_to_door_costs");return N?JSON.parse(N):P3}),[c,d]=D.useState({}),p=N=>{d(E=>({...E,[N]:"Saved!"})),setTimeout(()=>{d(E=>({...E,[N]:""}))},2e3)};D.useEffect(()=>{},[]),D.useEffect(()=>{try{localStorage.setItem("spv_paxi_costs",JSON.stringify(t))}catch(N){console.error("Failed to save PAXI costs to storage",N)}},[t]),D.useEffect(()=>{},[]),D.useEffect(()=>{try{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(i))}catch(N){console.error("Failed to save Door to Door costs to storage",N)}},[i]);const f=(N,E,A)=>{const P=[...n],I=parseFloat(A)||0;P[N][E]=I,e(P)},y=(N,E,A,P)=>{const I={...t},$=parseFloat(P)||0;I[N][E][A]=$,r(I)},b=(N,E,A)=>{l(P=>P.map(($,W)=>{if(W!==N)return $;let K={...$};if(E==="initialCharge"||E==="ratePerKg"||E==="handleFee"||E==="boxFee"){const Z=parseFloat(A);E==="ratePerKg"&&(isNaN(Z)||A==="")?K[E]=null:K[E]=isNaN(Z)?0:Z}else K[E]=A;return K}))};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-[22px] font-bold text-white flex items-center gap-2",children:[s.jsx(Cs,{size:24,className:"text-green-400"})," Shipping Expenses & Supplies"]}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Reference for PUDO & PAXI costs and supplies."})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[s.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[s.jsx(hN,{size:20,className:"text-cyan-400"})," PUDO Box & Service Pricing"]}),s.jsxs("a",{href:"https://stationery.thecourierguy.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["Order Stationery ",s.jsx(ko,{size:16})]})]}),s.jsx("div",{className:"space-y-4 md:hidden",children:n.map((N,E)=>(N.boxCost+(N.lockerToLockerCost||0)+N.lockerHandleFee,N.boxCost+(N.doorToLockerCost||0)+N.doorHandleFee,s.jsx("div",{className:"bg-black/40 p-4 rounded-lg border border-gray-800"},E)))}),s.jsxs("div",{className:"hidden md:block mt-8",children:[s.jsx("h4",{className:"font-bold text-cyan-400 mb-2 mt-6",children:"Locker to Locker"}),s.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[s.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Box"}),s.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),s.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),s.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),s.jsx("th",{className:"px-4 py-2",children:"Locker to Locker"}),s.jsx("th",{className:"px-4 py-2",children:"Locker Handle Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Total"}),s.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),s.jsx("tbody",{children:n.map((N,E)=>{if(N.lockerToLockerCost===null)return null;const A=N.boxCost+(N.lockerToLockerCost||0)+N.lockerHandleFee;return s.jsxs("tr",{className:"border-b border-gray-700",children:[s.jsx("td",{className:"px-4 py-2 font-bold text-white",children:N.name}),s.jsx("td",{className:"px-4 py-2",children:N.dimensions}),s.jsx("td",{className:"px-4 py-2",children:N.maxWeight}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.boxCost,onChange:P=>f(E,"boxCost",P.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.lockerToLockerCost||0,onChange:P=>f(E,"lockerToLockerCost",P.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.lockerHandleFee,onChange:P=>f(E,"lockerHandleFee",P.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsxs("td",{className:"px-4 py-2 font-bold text-cyan-400",children:["R",A.toFixed(2)]}),s.jsxs("td",{className:"px-4 py-2",children:[s.jsx("button",{className:"px-2 py-1 bg-cyan-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(n)),p(`pudo-lockerToLockerCost-${E}`)},children:""}),s.jsx("span",{className:"text-green-400 text-xs",children:c[`pudo-lockerToLockerCost-${E}`]})]})]},E)})})]}),s.jsx("h4",{className:"font-bold text-purple-400 mb-2 mt-6",children:"Door to Locker"}),s.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400",children:[s.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Box"}),s.jsx("th",{className:"px-4 py-2",children:"Dimensions"}),s.jsx("th",{className:"px-4 py-2",children:"Max Weight"}),s.jsx("th",{className:"px-4 py-2",children:"Box Cost"}),s.jsx("th",{className:"px-4 py-2",children:"Door to Locker"}),s.jsx("th",{className:"px-4 py-2",children:"Door Handle Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Total"}),s.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),s.jsx("tbody",{children:n.map((N,E)=>{if(N.doorToLockerCost===null)return null;const A=N.boxCost+(N.doorToLockerCost||0)+N.doorHandleFee;return s.jsxs("tr",{className:"border-b border-gray-700",children:[s.jsx("td",{className:"px-4 py-2 font-bold text-white",children:N.name}),s.jsx("td",{className:"px-4 py-2",children:N.dimensions}),s.jsx("td",{className:"px-4 py-2",children:N.maxWeight}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.boxCost,onChange:P=>f(E,"boxCost",P.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.doorToLockerCost||0,onChange:P=>f(E,"doorToLockerCost",P.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.doorHandleFee,onChange:P=>f(E,"doorHandleFee",P.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsxs("td",{className:"px-4 py-2 font-bold text-purple-400",children:["R",A.toFixed(2)]}),s.jsxs("td",{className:"px-4 py-2",children:[s.jsx("button",{className:"px-2 py-1 bg-purple-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_pudo_costs",JSON.stringify(n)),p(`pudo-doorToLockerCost-${E}`)},children:""}),s.jsx("span",{className:"text-green-400 text-xs",children:c[`pudo-doorToLockerCost-${E}`]})]})]},E)})})]})]})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[s.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[s.jsx(Td,{size:20,className:"text-pink-400"})," PAXI Bag & Service Pricing"]}),s.jsxs("a",{href:"https://www.paxi.co.za/",target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-pink-600 hover:bg-pink-500 text-white text-sm font-bold rounded-lg flex items-center gap-2 transition-colors whitespace-nowrap",children:["PAXI Website ",s.jsx(ko,{size:16})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:Object.entries(t).map(([N,E])=>s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-pink-400 mb-2",children:N}),s.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[s.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Bag"}),s.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Service Cost"}),s.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Total"}),s.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),s.jsx("tbody",{children:E.map((A,P)=>{let I=A.bag.includes("Small")?6:15;const $=I+A.serviceCost+A.handleFee;return s.jsxs("tr",{className:"border-b border-gray-700",children:[s.jsx("td",{className:"px-4 py-2 font-bold text-white",children:A.bag}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:I,onChange:W=>{},className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right",disabled:!0})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:A.serviceCost,onChange:W=>y(N,P,"serviceCost",W.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:A.handleFee,onChange:W=>y(N,P,"handleFee",W.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsxs("td",{className:"px-4 py-2 font-bold text-pink-400",children:["R",$.toFixed(2)]}),s.jsxs("td",{className:"px-4 py-2",children:[s.jsx("button",{className:"px-2 py-1 bg-pink-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_paxi_costs",JSON.stringify(t)),p(`paxi-${N}-${P}`)},children:""}),s.jsx("span",{className:"text-green-400 text-xs",children:c[`paxi-${N}-${P}`]})]})]},P)})})]})]},N))})]}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-700 p-6 rounded-xl shadow-lg",children:[s.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:s.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-3",children:[s.jsx(os,{size:20,className:"text-yellow-400"})," Door-to-Door Courier Pricing"]})}),s.jsxs("table",{className:"min-w-full text-sm text-left text-gray-400 mb-8",children:[s.jsx("thead",{className:"bg-zinc-800 text-gray-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Service"}),s.jsx("th",{className:"px-4 py-2",children:"Initial Weight"}),s.jsx("th",{className:"px-4 py-2",children:"Box Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Initial Charge"}),s.jsx("th",{className:"px-4 py-2",children:"Rate per Kg"}),s.jsx("th",{className:"px-4 py-2",children:"Handle Fee"}),s.jsx("th",{className:"px-4 py-2",children:"Total"}),s.jsx("th",{className:"px-4 py-2",children:"Save"})]})}),s.jsx("tbody",{children:i.map((N,E)=>{const A=N.boxFee+N.initialCharge+(N.ratePerKg!==null?N.ratePerKg:0)+N.handleFee;return s.jsxs("tr",{className:"border-b border-gray-700",children:[s.jsx("td",{className:"px-4 py-2 font-bold text-white",children:N.service}),s.jsx("td",{className:"px-4 py-2",children:N.initialWeight}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.boxFee,onChange:P=>b(E,"boxFee",P.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.initialCharge,onChange:P=>b(E,"initialCharge",P.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsx("td",{className:"px-4 py-2",children:N.ratePerKg!==null?s.jsx("input",{type:"number",value:N.ratePerKg,onChange:P=>b(E,"ratePerKg",P.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"}):"-"}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:N.handleFee,onChange:P=>b(E,"handleFee",P.target.value),className:"w-20 bg-zinc-800 border border-gray-600 rounded p-1 text-white text-right"})}),s.jsxs("td",{className:"px-4 py-2 font-bold text-yellow-400",children:["R",A.toFixed(2)]}),s.jsxs("td",{className:"px-4 py-2",children:[s.jsx("button",{className:"px-2 py-1 bg-yellow-700 text-white rounded text-xs",onClick:()=>{localStorage.setItem("spv_door_to_door_costs",JSON.stringify(i)),p(`doorToDoor-${E}`)},children:""}),s.jsx("span",{className:"text-green-400 text-xs",children:c[`doorToDoor-${E}`]})]})]},E)})})]})]})]})},vb=n=>{switch(n){case"Pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-500/30";case"Processing":return"bg-blue-900/30 text-blue-400 border-blue-500/30";case"Shipped":return"bg-cyan-900/30 text-cyan-400 border-cyan-500/30";case"Delivered":return"bg-green-900/30 text-green-400 border-green-500/30";case"Cancelled":return"bg-red-900/30 text-red-400 border-red-500/30";default:return"bg-gray-800 text-gray-400"}},I3=()=>{const{orders:n,updateOrder:e,deleteOrder:t}=Rt(),[r,i]=D.useState(""),[l,c]=D.useState(""),[d,p]=D.useState(null),[f,y]=D.useState(""),b=D.useMemo(()=>n.filter(P=>{const I=r.toLowerCase();return P.orderNumber.toLowerCase().includes(I)||P.customerName.toLowerCase().includes(I)||P.customerEmail.toLowerCase().includes(I)}).filter(P=>l?P.status===l:!0),[n,r,l]),N=P=>{p(P),y(P.status)},E=async()=>{d&&f&&(await e({...d,status:f}),p(null),y(""))},A=async P=>{window.confirm("Are you sure you want to delete this order? This action cannot be undone.")&&(await t(P),p(null))};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-[22px] font-bold text-white",children:"Order Management"}),s.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 flex flex-wrap gap-4 items-center",children:[s.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[s.jsx(oh,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),s.jsx("input",{type:"text",placeholder:"Search by Order #, Name, or Email...",className:"w-full pl-10 pr-4 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm focus:border-pink-500 outline-none",value:r,onChange:P=>i(P.target.value)})]}),s.jsxs("div",{className:"relative",children:[s.jsx(mN,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),s.jsxs("select",{className:"pl-10 pr-8 py-2 bg-black border border-gray-700 rounded-lg text-white text-sm outline-none appearance-none",value:l,onChange:P=>c(P.target.value),children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"Pending",children:"Pending"}),s.jsx("option",{value:"Processing",children:"Processing"}),s.jsx("option",{value:"Shipped",children:"Shipped"}),s.jsx("option",{value:"Delivered",children:"Delivered"}),s.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]})]}),s.jsxs("div",{className:"hidden md:block bg-zinc-900 rounded-xl border border-gray-800 overflow-hidden",children:[s.jsxs("table",{className:"w-full text-left text-sm",children:[s.jsx("thead",{className:"bg-zinc-950 border-b border-gray-800 text-gray-400 font-medium",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:"Order #"}),s.jsx("th",{className:"p-4",children:"Date"}),s.jsx("th",{className:"p-4",children:"Customer"}),s.jsx("th",{className:"p-4 text-right",children:"Total"}),s.jsx("th",{className:"p-4",children:"Status"}),s.jsx("th",{className:"p-4"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-800",children:b.map(P=>s.jsxs("tr",{className:"hover:bg-zinc-800/50 group transition-colors",children:[s.jsx("td",{className:"p-4 font-mono text-cyan-400",children:P.orderNumber}),s.jsx("td",{className:"p-4 text-gray-400",children:new Date(P.date).toLocaleDateString()}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-medium text-gray-200",children:P.customerName}),s.jsx("div",{className:"text-xs text-gray-500",children:P.customerEmail})]}),s.jsxs("td",{className:"p-4 text-right font-bold text-green-400",children:["R",P.total.toFixed(2)]}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${vb(P.status)}`,children:P.status})}),s.jsx("td",{className:"p-4 text-right",children:s.jsx("button",{onClick:()=>N(P),className:"text-xs text-gray-400 hover:text-white underline opacity-0 group-hover:opacity-100 transition-opacity",children:"View Details"})})]},P.id))})]}),b.length===0&&s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),s.jsxs("div",{className:"md:hidden space-y-4",children:[b.map(P=>s.jsxs("div",{className:"bg-zinc-900 p-4 rounded-xl border border-gray-800 space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-mono text-cyan-400 text-sm",children:P.orderNumber}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(P.date).toLocaleString()})]}),s.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full border ${vb(P.status)}`,children:P.status})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-200 text-sm",children:P.customerName}),s.jsx("div",{className:"text-xs text-gray-500",children:P.customerEmail})]}),s.jsxs("div",{className:"flex justify-between items-end pt-2 border-t border-gray-800",children:[s.jsx("button",{onClick:()=>N(P),className:"text-xs text-gray-400 hover:text-white underline",children:"View Details"}),s.jsxs("div",{className:"font-bold text-green-400 text-lg",children:["R",P.total.toFixed(2)]})]})]},P.id)),b.length===0&&s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No orders found."})]}),d&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>p(null)}),s.jsxs("div",{className:"bg-zinc-900 border border-gray-800 rounded-2xl w-full max-w-2xl relative z-10 shadow-2xl flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-800",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Order Details"}),s.jsx("p",{className:"font-mono text-cyan-400",children:d.orderNumber})]}),s.jsx("button",{onClick:()=>p(null),className:"p-2 bg-zinc-800 rounded-full text-gray-400 hover:text-white",children:s.jsx(vn,{size:20})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[s.jsx(uc,{size:16,className:"text-gray-500"}),s.jsx("span",{className:"text-gray-300",children:d.customerName})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[s.jsx(kd,{size:16,className:"text-gray-500"}),s.jsx("span",{className:"text-gray-300",children:d.customerEmail})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-black/40 p-3 rounded-lg border border-gray-800",children:[s.jsx(fN,{size:16,className:"text-gray-500"}),s.jsx("span",{className:"text-gray-300",children:new Date(d.date).toLocaleString()})]})]}),s.jsxs("div",{className:"bg-black/40 p-4 rounded-xl border border-gray-800",children:[s.jsxs("h3",{className:"font-bold text-white mb-3 flex items-center gap-2",children:[s.jsx(os,{size:18,className:"text-cyan-400"}),"Shipping Information"]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-gray-400",children:"Method:"})," ",s.jsx("span",{className:"text-gray-200",children:d.shippingMethod})]}),s.jsxs("p",{children:[s.jsx("strong",{className:"text-gray-400",children:"Details:"})," ",s.jsx("span",{className:"text-gray-200",children:d.shippingDetails})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[s.jsx(Ki,{size:18,className:"text-pink-400"}),"Items (",d.items.reduce((P,I)=>P+I.quantity,0),")"]}),d.items.map((P,I)=>s.jsxs("div",{className:"flex items-center gap-4 bg-black/40 p-3 rounded-lg border border-gray-800",children:[s.jsx("img",{src:P.images[0],alt:P.name,className:"w-12 h-12 rounded object-cover border border-gray-700"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-bold text-white",children:P.name}),s.jsxs("p",{className:"text-xs text-gray-400",children:[P.selectedSize&&`Size: ${P.selectedSize}`,P.selectedMaterial&&`Material: ${P.selectedMaterial}`]})]}),s.jsxs("div",{className:"text-sm text-gray-400",children:["x",P.quantity]}),s.jsxs("div",{className:"text-sm font-bold text-white",children:["R",(P.price*P.quantity).toFixed(2)]})]},I))]}),s.jsxs("div",{className:"pt-4 border-t border-gray-800 text-sm text-right space-y-2",children:[s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("span",{className:"text-gray-400",children:"Subtotal:"})," ",s.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",(d.total-d.shippingCost).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("span",{className:"text-gray-400",children:"Shipping:"})," ",s.jsxs("span",{className:"text-gray-200 w-24 text-left",children:["R",d.shippingCost.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-end gap-4 font-bold text-lg",children:[s.jsx("span",{className:"text-white",children:"Total:"})," ",s.jsxs("span",{className:"text-green-400 w-24 text-left",children:["R",d.total.toFixed(2)]})]})]})]}),s.jsxs("div",{className:"p-6 border-t border-gray-800 bg-zinc-950/50 flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[s.jsx("label",{className:"text-sm font-bold text-white",children:"Status:"}),s.jsxs("select",{value:f,onChange:P=>y(P.target.value),className:"flex-1 bg-black border border-gray-700 rounded-lg p-2 text-white text-sm focus:border-pink-500 outline-none",children:[s.jsx("option",{value:"Pending",children:"Pending"}),s.jsx("option",{value:"Processing",children:"Processing"}),s.jsx("option",{value:"Shipped",children:"Shipped"}),s.jsx("option",{value:"Delivered",children:"Delivered"}),s.jsx("option",{value:"Cancelled",children:"Cancelled"})]}),s.jsx("button",{onClick:E,className:"px-4 py-2 bg-pink-600 text-white font-bold rounded-lg text-sm hover:bg-pink-500",children:"Save"})]}),s.jsxs("button",{onClick:()=>A(d.id),className:"w-full md:w-auto flex items-center justify-center gap-2 px-4 py-2 text-red-400 text-sm font-bold hover:bg-red-900/20 rounded-lg border border-red-900/0 hover:border-red-900/30 transition-colors",children:[s.jsx(Po,{size:16})," Delete Order"]})]})]})]})]})},A3=({onClose:n})=>s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center px-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:n}),s.jsxs("div",{className:"relative bg-zinc-900 border-2 border-pink-500 rounded-2xl p-8 max-w-sm w-full shadow-[0_0_50px_rgba(236,72,153,0.4)] animate-in zoom-in-95 duration-300 text-center",children:[s.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:s.jsx(vn,{size:20})}),s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-pink-600 to-purple-600 rounded-2xl mx-auto mb-6 flex items-center justify-center shadow-lg transform rotate-3",children:s.jsx(kA,{size:32,className:"text-white"})}),s.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Voucher Redeemed!"}),s.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"To ensure your discount applies correctly and for the best shopping experience, please use our App."}),s.jsxs("button",{className:"w-full py-3 bg-white text-black font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors mb-3 shadow-lg",onClick:()=>alert("Please use the Install button at the bottom of the screen."),children:[s.jsx(pN,{size:20})," Install App"]}),s.jsx("button",{onClick:n,className:"text-xs text-gray-500 hover:text-gray-300 underline",children:"Continue in Browser"})]})]}),R3=()=>{const n=Yi(),e=as(),{applyExternalVoucher:t}=Rt(),[r,i]=D.useState(!1);return D.useEffect(()=>{const c=new URLSearchParams(n.search).get("voucher");c&&t(c)&&(i(!0),e("/cart",{replace:!0}))},[n,t,e]),r?s.jsx(A3,{onClose:()=>i(!1)}):null},M3=()=>s.jsx(YI,{children:s.jsxs(XS,{children:[s.jsx(R3,{}),s.jsx(S3,{}),s.jsxs(HS,{children:[s.jsxs(Vt,{path:"/",element:s.jsx($A,{}),children:[s.jsx(Vt,{index:!0,element:s.jsx(QA,{})}),s.jsx(Vt,{path:"collections/:categoryName",element:s.jsx(dR,{})}),s.jsx(Vt,{path:"catalog/:type",element:s.jsx(hR,{})}),s.jsx(Vt,{path:"product/:id",element:s.jsx(ZA,{})}),s.jsx(Vt,{path:"cart",element:s.jsx(sR,{})}),s.jsx(Vt,{path:"profile",element:s.jsx(iR,{})}),s.jsx(Vt,{path:"membership",element:s.jsx(aR,{})}),s.jsx(Vt,{path:"earn-rewards",element:s.jsx(lR,{})}),s.jsx(Vt,{path:"affiliate-program",element:s.jsx(cR,{})}),s.jsx(Vt,{path:"gift-cards",element:s.jsx(uR,{})}),s.jsx(Vt,{path:"weekly-winners",element:s.jsx(E3,{})})," ",s.jsx(Vt,{path:"login",element:s.jsx(oR,{})})]}),s.jsxs(Vt,{path:"/admin",element:s.jsx(HA,{}),children:[s.jsx(Vt,{index:!0,element:s.jsx(fR,{})}),s.jsx(Vt,{path:"products",element:s.jsx(x3,{})}),s.jsx(Vt,{path:"orders",element:s.jsx(I3,{})}),s.jsx(Vt,{path:"categories",element:s.jsx(y3,{})}),s.jsx(Vt,{path:"gift-cards",element:s.jsx(v3,{})}),s.jsx(Vt,{path:"social",element:s.jsx(_3,{})}),s.jsx(Vt,{path:"affiliates",element:s.jsx(N3,{})}),s.jsx(Vt,{path:"winners",element:s.jsx(C3,{})}),s.jsx(Vt,{path:"expenses",element:s.jsx(j3,{})})," "]}),s.jsx(Vt,{path:"*",element:s.jsx(qS,{to:"/"})})]})]})}),LN=document.getElementById("root");if(!LN)throw new Error("Could not find root element to mount to");const D3=Y1.createRoot(LN);D3.render(s.jsx(wb.StrictMode,{children:s.jsx(M3,{})}));
